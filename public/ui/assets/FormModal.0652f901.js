var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__async=(e,t,n)=>new Promise(((r,o)=>{var i=e=>{try{u(n.next(e))}catch(t){o(t)}},a=e=>{try{u(n.throw(e))}catch(t){o(t)}},u=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);u((n=n.apply(e,t)).next())}));import{B as BasicModal,b as useModalInner,u as useModal}from"./index.6f230b74.js";import{j as buildShortUUID,g as _sfc_main$a,h as useForm}from"./useForm.9f758c80.js";import{c as useDesign,e as useI18n,j as isFunction$1,_ as _sfc_main$8,h as useMessage,w as withInstall,u as useGlobSetting,U as useAppStore,ai as isNumber$1,W as useLocale,ah as isArray$1,r as useTimeoutFn,f as useUserStore,D as isObject$1,i as isString,ae as api}from"./index.886fff71.js";import{D as defineComponent,r as ref$1,j as computed,_ as onMounted,u as unref,V as useDebounceFn,H as openBlock,J as createBlock,K as withDirectives,L as vShow,z as createVNode,bR as Space,bs as Upload,bS as Avatar,a7 as Tooltip,a0 as resolveComponent,a4 as withCtx,aa as createCommentVNode,a3 as mergeProps,ak as watchEffect,T as watch,ab as createTextVNode,N as toDisplayString,O as withScopeId,bl as commonjsGlobal,ag as onUnmounted,bT as onDeactivated,$ as nextTick,A as CloseCircleFilled,bJ as PlusOutlined,a9 as Fragment,aq as renderList,a$ as withKeys,a as useRouter}from"./vendor.2a694682.js";/* empty css              */import{_ as _sfc_main$9}from"./TableImg.e17cc06a.js";import{o as onMountedOrActivated}from"./onMountedOrActivated.1cc20755.js";import{u as useTable}from"./useTable.a77db7eb.js";function dataURLtoBlob(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let o=r.length;const i=new Uint8Array(o);for(;o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:n})}
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var IS_BROWSER="undefined"!=typeof window&&void 0!==window.document,WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=!(!IS_BROWSER||!WINDOW.document.documentElement)&&"ontouchstart"in WINDOW.document.documentElement,HAS_POINTER_EVENT=!!IS_BROWSER&&"PointerEvent"in WINDOW,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(e){return"number"==typeof e&&!isNaN$1(e)}var isPositiveNumber=function(e){return e>0&&e<Infinity};function isUndefined(e){return void 0===e}function isObject(e){return"object"===_typeof(e)&&null!==e}var hasOwnProperty$1=Object.prototype.hasOwnProperty;function isPlainObject(e){if(!isObject(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&hasOwnProperty$1.call(n,"isPrototypeOf")}catch(r){return!1}}function isFunction(e){return"function"==typeof e}var slice=Array.prototype.slice;function toArray(e){return Array.from?Array.from(e):slice.call(e)}function forEach(e,t){return e&&isFunction(t)&&(Array.isArray(e)||isNumber(e.length)?toArray(e).forEach((function(n,r){t.call(e,n,r,e)})):isObject(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var assign=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return isObject(e)&&n.length>0&&n.forEach((function(t){isObject(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return REGEXP_DECIMALS.test(e)?Math.round(e*t)/t:e}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(e,t){var n=e.style;forEach(t,(function(e,t){REGEXP_SUFFIX.test(t)&&isNumber(e)&&(e="".concat(e,"px")),n[t]=e}))}function hasClass(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function addClass(e,t){if(t)if(isNumber(e.length))forEach(e,(function(e){addClass(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function removeClass(e,t){t&&(isNumber(e.length)?forEach(e,(function(e){removeClass(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function toggleClass(e,t,n){t&&(isNumber(e.length)?forEach(e,(function(e){toggleClass(e,t,n)})):n?addClass(e,t):removeClass(e,t))}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(e){return e.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(e,t){return isObject(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(toParamCase(t)))}function setData(e,t,n){isObject(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(toParamCase(t)),n)}function removeData(e,t){if(isObject(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(toParamCase(t)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var e=!1;if(IS_BROWSER){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});WINDOW.addEventListener("test",n,r),WINDOW.removeEventListener("test",n,r)}return e}();function removeListener(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(REGEXP_SPACES).forEach((function(t){if(!onceSupported){var i=e.listeners;i&&i[t]&&i[t][n]&&(o=i[t][n],delete i[t][n],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length&&delete e.listeners)}e.removeEventListener(t,o,r)}))}function addListener(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(REGEXP_SPACES).forEach((function(t){if(r.once&&!onceSupported){var i=e.listeners,a=void 0===i?{}:i;o=function(){delete a[t][n],e.removeEventListener(t,o,r);for(var i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];n.apply(e,u)},a[t]||(a[t]={}),a[t][n]&&e.removeEventListener(t,a[t][n],r),a[t][n]=o,e.listeners=a}e.addEventListener(t,o,r)}))}function dispatchEvent(e,t,n){var r;return isFunction(Event)&&isFunction(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(e){var t=e.match(REGEXP_ORIGINS);return null!==t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function addTimestamp(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function getTransforms(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,o=e.translateX,i=e.translateY,a=[];isNumber(o)&&0!==o&&a.push("translateX(".concat(o,"px)")),isNumber(i)&&0!==i&&a.push("translateY(".concat(i,"px)")),isNumber(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),isNumber(n)&&1!==n&&a.push("scaleX(".concat(n,")")),isNumber(r)&&1!==r&&a.push("scaleY(".concat(r,")"));var u=a.length?a.join(" "):"none";return{WebkitTransform:u,msTransform:u,transform:u}}function getMaxZoomRatio(e){var t=_objectSpread2({},e),n=0;return forEach(e,(function(e,r){delete t[r],forEach(t,(function(t){var r=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),u=Math.sqrt(r*r+o*o),s=(Math.sqrt(i*i+a*a)-u)/u;Math.abs(s)>Math.abs(n)&&(n=s)}))})),n}function getPointer(e,t){var n=e.pageX,r=e.pageY,o={endX:n,endY:r};return t?o:_objectSpread2({startX:n,startY:r},o)}function getPointersCenter(e){var t=0,n=0,r=0;return forEach(e,(function(e){var o=e.startX,i=e.startY;t+=o,n+=i,r+=1})),{pageX:t/=r,pageY:n/=r}}function getAdjustedSizes(e){var t=e.aspectRatio,n=e.height,r=e.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",i=isPositiveNumber(r),a=isPositiveNumber(n);if(i&&a){var u=n*t;"contain"===o&&u>r||"cover"===o&&u<r?n=r/t:r=n*t}else i?n=r/t:a&&(r=n*t);return{width:r,height:n}}function getRotatedSizes(e){var t=e.width,n=e.height,r=e.degree;if(90===(r=Math.abs(r)%180))return{width:n,height:t};var o=r%90*Math.PI/180,i=Math.sin(o),a=Math.cos(o),u=t*a+n*i,s=t*i+n*a;return r>90?{width:s,height:u}:{width:u,height:s}}function getSourceCanvas(e,t,n,r){var o=t.aspectRatio,i=t.naturalWidth,a=t.naturalHeight,u=t.rotate,s=void 0===u?0:u,c=t.scaleX,l=void 0===c?1:c,f=t.scaleY,d=void 0===f?1:f,p=n.aspectRatio,h=n.naturalWidth,m=n.naturalHeight,g=r.fillColor,v=void 0===g?"transparent":g,y=r.imageSmoothingEnabled,b=void 0===y||y,C=r.imageSmoothingQuality,x=void 0===C?"low":C,w=r.maxWidth,_=void 0===w?Infinity:w,S=r.maxHeight,E=void 0===S?Infinity:S,A=r.minWidth,D=void 0===A?0:A,k=r.minHeight,T=void 0===k?0:k,O=document.createElement("canvas"),B=O.getContext("2d"),N=getAdjustedSizes({aspectRatio:p,width:_,height:E}),F=getAdjustedSizes({aspectRatio:p,width:D,height:T},"cover"),M=Math.min(N.width,Math.max(F.width,h)),P=Math.min(N.height,Math.max(F.height,m)),I=getAdjustedSizes({aspectRatio:o,width:_,height:E}),R=getAdjustedSizes({aspectRatio:o,width:D,height:T},"cover"),L=Math.min(I.width,Math.max(R.width,i)),z=Math.min(I.height,Math.max(R.height,a)),V=[-L/2,-z/2,L,z];return O.width=normalizeDecimalNumber(M),O.height=normalizeDecimalNumber(P),B.fillStyle=v,B.fillRect(0,0,M,P),B.save(),B.translate(M/2,P/2),B.rotate(s*Math.PI/180),B.scale(l,d),B.imageSmoothingEnabled=b,B.imageSmoothingQuality=x,B.drawImage.apply(B,[e].concat(_toConsumableArray(V.map((function(e){return Math.floor(normalizeDecimalNumber(e))}))))),B.restore(),O}var fromCharCode=String.fromCharCode;function getStringFromCharCode(e,t,n){var r="";n+=t;for(var o=t;o<n;o+=1)r+=fromCharCode(e.getUint8(o));return r}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(e){var t=e.replace(REGEXP_DATA_URL_HEAD,""),n=atob(t),r=new ArrayBuffer(n.length),o=new Uint8Array(r);return forEach(o,(function(e,t){o[t]=n.charCodeAt(t)})),r}function arrayBufferToDataURL(e,t){for(var n=[],r=new Uint8Array(e);r.length>0;)n.push(fromCharCode.apply(null,toArray(r.subarray(0,8192)))),r=r.subarray(8192);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function resetAndGetOrientation(e){var t,n=new DataView(e);try{var r,o,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,u=2;u+1<a;){if(255===n.getUint8(u)&&225===n.getUint8(u+1)){o=u;break}u+=1}if(o){var s=o+10;if("Exif"===getStringFromCharCode(n,o+4,4)){var c=n.getUint16(s);if(((r=18761===c)||19789===c)&&42===n.getUint16(s+2,r)){var l=n.getUint32(s+4,r);l>=8&&(i=s+l)}}}if(i){var f,d,p=n.getUint16(i,r);for(d=0;d<p;d+=1)if(f=i+12*d+2,274===n.getUint16(f,r)){f+=8,t=n.getUint16(f,r),n.setUint16(f,1,r);break}}}catch(h){t=1}return t}function parseOrientation(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}var render={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,o=Number(t.minContainerWidth),i=Number(t.minContainerHeight);addClass(r,CLASS_HIDDEN),removeClass(e,CLASS_HIDDEN);var a={width:Math.max(n.offsetWidth,o>=0?o:MIN_CONTAINER_WIDTH),height:Math.max(n.offsetHeight,i>=0?i:MIN_CONTAINER_HEIGHT)};this.containerData=a,setStyle(r,{width:a.width,height:a.height}),addClass(e,CLASS_HIDDEN),removeClass(r,CLASS_HIDDEN)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180==90,o=r?t.naturalHeight:t.naturalWidth,i=r?t.naturalWidth:t.naturalHeight,a=o/i,u=e.width,s=e.height;e.height*a>e.width?3===n?u=e.height*a:s=e.width/a:3===n?s=e.width/a:u=e.height*a;var c={aspectRatio:a,naturalWidth:o,naturalHeight:i,width:u,height:s};this.canvasData=c,this.limited=1===n||2===n,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(e.width-c.width)/2,c.top=(e.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=assign({},c)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,i=this.cropBoxData,a=n.viewMode,u=o.aspectRatio,s=this.cropped&&i;if(e){var c=Number(n.minCanvasWidth)||0,l=Number(n.minCanvasHeight)||0;a>1?(c=Math.max(c,r.width),l=Math.max(l,r.height),3===a&&(l*u>c?c=l*u:l=c/u)):a>0&&(c?c=Math.max(c,s?i.width:0):l?l=Math.max(l,s?i.height:0):s&&(c=i.width,(l=i.height)*u>c?c=l*u:l=c/u));var f=getAdjustedSizes({aspectRatio:u,width:c,height:l});c=f.width,l=f.height,o.minWidth=c,o.minHeight=l,o.maxWidth=Infinity,o.maxHeight=Infinity}if(t)if(a>(s?0:1)){var d=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),s&&this.limited&&(o.minLeft=Math.min(i.left,i.left+(i.width-o.width)),o.minTop=Math.min(i.top,i.top+(i.height-o.height)),o.maxLeft=i.left,o.maxTop=i.top,2===a&&(o.width>=r.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var o=getRotatedSizes({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),i=o.width,a=o.height,u=n.width*(i/n.naturalWidth),s=n.height*(a/n.naturalHeight);n.left-=(u-n.width)/2,n.top-=(s-n.height)/2,n.width=u,n.height=s,n.aspectRatio=i/a,n.naturalWidth=i,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,setStyle(this.canvas,assign({width:n.width,height:n.height},getTransforms({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),o=n.naturalHeight*(t.height/t.naturalHeight);assign(n,{width:r,height:o,left:(t.width-r)/2,top:(t.height-o)/2}),setStyle(this.image,assign({width:n.width,height:n.height},getTransforms(assign({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};n&&(t.height*n>t.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=assign({},o)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,i=this.cropBoxData,a=this.limited,u=n.aspectRatio;if(e){var s=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,l=a?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,f=a?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;s=Math.min(s,r.width),c=Math.min(c,r.height),u&&(s&&c?c*u>s?c=s/u:s=c*u:s?c=s/u:c&&(s=c*u),f*u>l?f=l/u:l=f*u),i.minWidth=Math.min(s,l),i.minHeight=Math.min(c,f),i.maxWidth=l,i.maxHeight=f}t&&(a?(i.minLeft=Math.max(0,o.left),i.minTop=Math.max(0,o.top),i.maxLeft=Math.min(r.width,o.left+o.width)-i.width,i.maxTop=Math.min(r.height,o.top+o.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=r.width-i.width,i.maxTop=r.height-i.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&setData(this.face,DATA_ACTION,n.width>=t.width&&n.height>=t.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:n.width,height:n.height},getTransforms({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",i=document.createElement("img");if(t&&(i.crossOrigin=t),i.src=r,i.alt=o,this.viewBox.appendChild(i),this.viewBoxImage=i,n){var a=n;"string"==typeof n?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,forEach(a,(function(e){var n=document.createElement("img");setData(e,DATA_PREVIEW,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){forEach(this.previews,(function(e){var t=getData(e,DATA_PREVIEW);setStyle(e,{width:t.width,height:t.height}),e.innerHTML=t.html,removeData(e,DATA_PREVIEW)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,o=n.height,i=e.width,a=e.height,u=n.left-t.left-e.left,s=n.top-t.top-e.top;this.cropped&&!this.disabled&&(setStyle(this.viewBoxImage,assign({width:i,height:a},getTransforms(assign({translateX:-u,translateY:-s},e)))),forEach(this.previews,(function(t){var n=getData(t,DATA_PREVIEW),c=n.width,l=n.height,f=c,d=l,p=1;r&&(d=o*(p=c/r)),o&&d>l&&(f=r*(p=l/o),d=l),setStyle(t,{width:f,height:d}),setStyle(t.getElementsByTagName("img")[0],assign({width:i*p,height:a*p},getTransforms(assign({translateX:-u*p,translateY:-s*p},e))))})))}},events={bind:function(){var e=this.element,t=this.options,n=this.cropper;isFunction(t.cropstart)&&addListener(e,EVENT_CROP_START,t.cropstart),isFunction(t.cropmove)&&addListener(e,EVENT_CROP_MOVE,t.cropmove),isFunction(t.cropend)&&addListener(e,EVENT_CROP_END,t.cropend),isFunction(t.crop)&&addListener(e,EVENT_CROP,t.crop),isFunction(t.zoom)&&addListener(e,EVENT_ZOOM,t.zoom),addListener(n,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&addListener(n,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&addListener(n,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(e.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(e.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;isFunction(t.cropstart)&&removeListener(e,EVENT_CROP_START,t.cropstart),isFunction(t.cropmove)&&removeListener(e,EVENT_CROP_MOVE,t.cropmove),isFunction(t.cropend)&&removeListener(e,EVENT_CROP_END,t.cropend),isFunction(t.crop)&&removeListener(e,EVENT_CROP,t.crop),isFunction(t.zoom)&&removeListener(e,EVENT_ZOOM,t.zoom),removeListener(n,EVENT_POINTER_DOWN,this.onCropStart),t.zoomable&&t.zoomOnWheel&&removeListener(n,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&removeListener(n,EVENT_DBLCLICK,this.onDblclick),removeListener(e.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(e.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),t.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,o=this.containerData,i=r.offsetWidth/o.width,a=r.offsetHeight/o.height,u=Math.abs(i-1)>Math.abs(a-1)?i:a;if(1!==u)n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(forEach(e,(function(t,n){e[n]=t*u}))),this.setCropBoxData(forEach(t,(function(e,n){t[n]=e*u}))))}},dblclick:function(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(isNumber(t)&&1!==t||isNumber(n)&&0!==n||e.ctrlKey))){var r,o=this.options,i=this.pointers;e.changedTouches?forEach(e.changedTouches,(function(e){i[e.identifier]=getPointer(e)})):i[e.pointerId||0]=getPointer(e),r=Object.keys(i).length>1&&o.zoomable&&o.zoomOnTouch?ACTION_ZOOM:getData(e.target,DATA_ACTION),REGEXP_ACTIONS.test(r)&&!1!==dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:e,action:t})&&(e.changedTouches?forEach(e.changedTouches,(function(e){assign(n[e.identifier]||{},getPointer(e,!0))})):assign(n[e.pointerId||0]||{},getPointer(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?forEach(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:e,action:t}))}}},change={change:function(e){var t,n=this.options,r=this.canvasData,o=this.containerData,i=this.cropBoxData,a=this.pointers,u=this.action,s=n.aspectRatio,c=i.left,l=i.top,f=i.width,d=i.height,p=c+f,h=l+d,m=0,g=0,v=o.width,y=o.height,b=!0;!s&&e.shiftKey&&(s=f&&d?f/d:1),this.limited&&(m=i.minLeft,g=i.minTop,v=m+Math.min(o.width,r.width,r.left+r.width),y=g+Math.min(o.height,r.height,r.top+r.height));var C=a[Object.keys(a)[0]],x={x:C.endX-C.startX,y:C.endY-C.startY},w=function(e){switch(e){case ACTION_EAST:p+x.x>v&&(x.x=v-p);break;case ACTION_WEST:c+x.x<m&&(x.x=m-c);break;case ACTION_NORTH:l+x.y<g&&(x.y=g-l);break;case ACTION_SOUTH:h+x.y>y&&(x.y=y-h)}};switch(u){case ACTION_ALL:c+=x.x,l+=x.y;break;case ACTION_EAST:if(x.x>=0&&(p>=v||s&&(l<=g||h>=y))){b=!1;break}w(ACTION_EAST),(f+=x.x)<0&&(u=ACTION_WEST,c-=f=-f),s&&(d=f/s,l+=(i.height-d)/2);break;case ACTION_NORTH:if(x.y<=0&&(l<=g||s&&(c<=m||p>=v))){b=!1;break}w(ACTION_NORTH),d-=x.y,l+=x.y,d<0&&(u=ACTION_SOUTH,l-=d=-d),s&&(f=d*s,c+=(i.width-f)/2);break;case ACTION_WEST:if(x.x<=0&&(c<=m||s&&(l<=g||h>=y))){b=!1;break}w(ACTION_WEST),f-=x.x,c+=x.x,f<0&&(u=ACTION_EAST,c-=f=-f),s&&(d=f/s,l+=(i.height-d)/2);break;case ACTION_SOUTH:if(x.y>=0&&(h>=y||s&&(c<=m||p>=v))){b=!1;break}w(ACTION_SOUTH),(d+=x.y)<0&&(u=ACTION_NORTH,l-=d=-d),s&&(f=d*s,c+=(i.width-f)/2);break;case ACTION_NORTH_EAST:if(s){if(x.y<=0&&(l<=g||p>=v)){b=!1;break}w(ACTION_NORTH),d-=x.y,l+=x.y,f=d*s}else w(ACTION_NORTH),w(ACTION_EAST),x.x>=0?p<v?f+=x.x:x.y<=0&&l<=g&&(b=!1):f+=x.x,x.y<=0?l>g&&(d-=x.y,l+=x.y):(d-=x.y,l+=x.y);f<0&&d<0?(u=ACTION_SOUTH_WEST,l-=d=-d,c-=f=-f):f<0?(u=ACTION_NORTH_WEST,c-=f=-f):d<0&&(u=ACTION_SOUTH_EAST,l-=d=-d);break;case ACTION_NORTH_WEST:if(s){if(x.y<=0&&(l<=g||c<=m)){b=!1;break}w(ACTION_NORTH),d-=x.y,l+=x.y,f=d*s,c+=i.width-f}else w(ACTION_NORTH),w(ACTION_WEST),x.x<=0?c>m?(f-=x.x,c+=x.x):x.y<=0&&l<=g&&(b=!1):(f-=x.x,c+=x.x),x.y<=0?l>g&&(d-=x.y,l+=x.y):(d-=x.y,l+=x.y);f<0&&d<0?(u=ACTION_SOUTH_EAST,l-=d=-d,c-=f=-f):f<0?(u=ACTION_NORTH_EAST,c-=f=-f):d<0&&(u=ACTION_SOUTH_WEST,l-=d=-d);break;case ACTION_SOUTH_WEST:if(s){if(x.x<=0&&(c<=m||h>=y)){b=!1;break}w(ACTION_WEST),f-=x.x,c+=x.x,d=f/s}else w(ACTION_SOUTH),w(ACTION_WEST),x.x<=0?c>m?(f-=x.x,c+=x.x):x.y>=0&&h>=y&&(b=!1):(f-=x.x,c+=x.x),x.y>=0?h<y&&(d+=x.y):d+=x.y;f<0&&d<0?(u=ACTION_NORTH_EAST,l-=d=-d,c-=f=-f):f<0?(u=ACTION_SOUTH_EAST,c-=f=-f):d<0&&(u=ACTION_NORTH_WEST,l-=d=-d);break;case ACTION_SOUTH_EAST:if(s){if(x.x>=0&&(p>=v||h>=y)){b=!1;break}w(ACTION_EAST),d=(f+=x.x)/s}else w(ACTION_SOUTH),w(ACTION_EAST),x.x>=0?p<v?f+=x.x:x.y>=0&&h>=y&&(b=!1):f+=x.x,x.y>=0?h<y&&(d+=x.y):d+=x.y;f<0&&d<0?(u=ACTION_NORTH_WEST,l-=d=-d,c-=f=-f):f<0?(u=ACTION_SOUTH_WEST,c-=f=-f):d<0&&(u=ACTION_NORTH_EAST,l-=d=-d);break;case ACTION_MOVE:this.move(x.x,x.y),b=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(a),e),b=!1;break;case ACTION_CROP:if(!x.x||!x.y){b=!1;break}t=getOffset(this.cropper),c=C.startX-t.left,l=C.startY-t.top,f=i.minWidth,d=i.minHeight,x.x>0?u=x.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:x.x<0&&(c-=f,u=x.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),x.y<0&&(l-=d),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(i.width=f,i.height=d,i.left=c,i.top=l,this.action=u,this.renderCropBox()),forEach(a,(function(e){e.startX=e.endX,e.startY=e.endY}))}},methods={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,forEach(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function(){var e=this.element;return e[NAMESPACE]?(e[NAMESPACE]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,o=n.top;return this.moveTo(isUndefined(e)?e:r+Number(e),isUndefined(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(isNumber(e)&&(n.left=e,r=!0),isNumber(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,o=this.canvasData,i=o.width,a=o.height,u=o.naturalWidth,s=o.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var c=u*e,l=s*e;if(!1===dispatchEvent(this.element,EVENT_ZOOM,{ratio:e,oldRatio:i/u,originalEvent:n}))return this;if(n){var f=this.pointers,d=getOffset(this.cropper),p=f&&Object.keys(f).length?getPointersCenter(f):{pageX:n.pageX,pageY:n.pageY};o.left-=(c-i)*((p.pageX-d.left-o.left)/i),o.top-=(l-a)*((p.pageY-d.top-o.top)/a)}else isPlainObject(t)&&isNumber(t.x)&&isNumber(t.y)?(o.left-=(c-i)*((t.x-o.left)/i),o.top-=(l-a)*((t.y-o.top)/a)):(o.left-=(c-i)/2,o.top-=(l-a)/2);o.width=c,o.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return isNumber(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,isNumber(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(isNumber(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(e)&&(n.scaleX=e,r=!0),isNumber(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,o=this.canvasData,i=this.cropBoxData;if(this.ready&&this.cropped){e={x:i.left-o.left,y:i.top-o.top,width:i.width,height:i.height};var a=r.width/r.naturalWidth;if(forEach(e,(function(t,n){e[n]=t/a})),t){var u=Math.round(e.y+e.height),s=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=s-e.x,e.height=u-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&isPlainObject(e)){var i=!1;t.rotatable&&isNumber(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,i=!0),t.scalable&&(isNumber(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,i=!0),isNumber(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;isNumber(e.x)&&(o.left=e.x*a+r.left),isNumber(e.y)&&(o.top=e.y*a+r.top),isNumber(e.width)&&(o.width=e.width*a),isNumber(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?assign({},this.containerData):{}},getImageData:function(){return this.sized?assign({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(e)&&(isNumber(e.left)&&(t.left=e.left),isNumber(e.top)&&(t.top=e.top),isNumber(e.width)?(t.width=e.width,t.height=e.width/n):isNumber(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(e)&&(isNumber(e.left)&&(r.left=e.left),isNumber(e.top)&&(r.top=e.top),isNumber(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),isNumber(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),o&&(t?r.height=r.width/o:n&&(r.width=r.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=getSourceCanvas(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(),o=r.x,i=r.y,a=r.width,u=r.height,s=n.width/Math.floor(t.naturalWidth);1!==s&&(o*=s,i*=s,a*=s,u*=s);var c=a/u,l=getAdjustedSizes({aspectRatio:c,width:e.maxWidth||Infinity,height:e.maxHeight||Infinity}),f=getAdjustedSizes({aspectRatio:c,width:e.minWidth||0,height:e.minHeight||0},"cover"),d=getAdjustedSizes({aspectRatio:c,width:e.width||(1!==s?n.width:a),height:e.height||(1!==s?n.height:u)}),p=d.width,h=d.height;p=Math.min(l.width,Math.max(f.width,p)),h=Math.min(l.height,Math.max(f.height,h));var m=document.createElement("canvas"),g=m.getContext("2d");m.width=normalizeDecimalNumber(p),m.height=normalizeDecimalNumber(h),g.fillStyle=e.fillColor||"transparent",g.fillRect(0,0,p,h);var v=e.imageSmoothingEnabled,y=void 0===v||v,b=e.imageSmoothingQuality;g.imageSmoothingEnabled=y,b&&(g.imageSmoothingQuality=b);var C,x,w,_,S,E,A=n.width,D=n.height,k=o,T=i;k<=-a||k>A?(k=0,C=0,w=0,S=0):k<=0?(w=-k,k=0,S=C=Math.min(A,a+k)):k<=A&&(w=0,S=C=Math.min(a,A-k)),C<=0||T<=-u||T>D?(T=0,x=0,_=0,E=0):T<=0?(_=-T,T=0,E=x=Math.min(D,u+T)):T<=D&&(_=0,E=x=Math.min(u,D-T));var O=[k,T,C,x];if(S>0&&E>0){var B=p/a;O.push(w*B,_*B,S*B,E*B)}return g.drawImage.apply(g,[n].concat(_toConsumableArray(O.map((function(e){return Math.floor(normalizeDecimalNumber(e))}))))),m},setAspectRatio:function(e){var t=this.options;return this.disabled||isUndefined(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===DRAG_MODE_CROP,i=t.movable&&e===DRAG_MODE_MOVE;e=o||i?e:DRAG_MODE_NONE,t.dragMode=e,setData(n,DATA_ACTION,e),toggleClass(n,CLASS_CROP,o),toggleClass(n,CLASS_MOVE,i),t.cropBoxMovable||(setData(r,DATA_ACTION,e),toggleClass(r,CLASS_CROP,o),toggleClass(r,CLASS_MOVE,i))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,e),!t||!REGEXP_TAG_NAME.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=assign({},DEFAULTS,isPlainObject(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[NAMESPACE]){if(t[NAMESPACE]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(REGEXP_DATA_URL.test(e))REGEXP_DATA_URL_JPEG.test(e)?this.read(dataURLToArrayBuffer(e)):this.clone();else{var o=new XMLHttpRequest,i=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=i,o.onerror=i,o.ontimeout=i,o.onprogress=function(){o.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&o.abort()},o.onload=function(){t.read(o.response)},o.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&isCrossOriginURL(e)&&n.crossOrigin&&(e=addTimestamp(e)),o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===n.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=resetAndGetOrientation(e),o=0,i=1,a=1;if(r>1){this.url=arrayBufferToDataURL(e,MIME_TYPE_JPEG);var u=parseOrientation(r);o=u.rotate,i=u.scaleX,a=u.scaleY}t.rotatable&&(n.rotate=o),t.scalable&&(n.scaleX=i,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&isCrossOriginURL(t)&&(n||(n="anonymous"),r=addTimestamp(t)),this.crossOrigin=n,this.crossOriginUrl=r;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=r||t,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),addClass(o,CLASS_HIDE),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),r=function(t,n){assign(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=assign({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var o=document.createElement("img"),i=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),n||i.removeChild(o)},o.src=t.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(o))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,o=document.createElement("div");o.innerHTML=TEMPLATE;var i=o.querySelector(".".concat(NAMESPACE,"-container")),a=i.querySelector(".".concat(NAMESPACE,"-canvas")),u=i.querySelector(".".concat(NAMESPACE,"-drag-box")),s=i.querySelector(".".concat(NAMESPACE,"-crop-box")),c=s.querySelector(".".concat(NAMESPACE,"-face"));this.container=r,this.cropper=i,this.canvas=a,this.dragBox=u,this.cropBox=s,this.viewBox=i.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=c,a.appendChild(n),addClass(e,CLASS_HIDDEN),r.insertBefore(i,e.nextSibling),this.isImg||removeClass(n,CLASS_HIDE),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,addClass(s,CLASS_HIDDEN),t.guides||addClass(s.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),t.center||addClass(s.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),t.background&&addClass(i,"".concat(NAMESPACE,"-bg")),t.highlight||addClass(c,CLASS_INVISIBLE),t.cropBoxMovable&&(addClass(c,CLASS_MOVE),setData(c,DATA_ACTION,ACTION_ALL)),t.cropBoxResizable||(addClass(s.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(s.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),isFunction(t.ready)&&addListener(e,EVENT_READY,t.ready,{once:!0}),dispatchEvent(e,EVENT_READY)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,e}},{key:"setDefaults",value:function(e){assign(DEFAULTS,isPlainObject(e)&&e)}}]),e}();assign(Cropper.prototype,render,preview,events,handlers,change,methods);var cropper="/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:11.623Z\n */\n\n.cropper-container {\n  direction: ltr;\n  font-size: 0;\n  line-height: 0;\n  position: relative;\n  -ms-touch-action: none;\n  touch-action: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.cropper-container img {\n  display: block;\n  height: 100%;\n  image-orientation: 0deg;\n  max-height: none !important;\n  max-width: none !important;\n  min-height: 0 !important;\n  min-width: 0 !important;\n  width: 100%;\n}\n\n.cropper-wrap-box,\n.cropper-canvas,\n.cropper-drag-box,\n.cropper-crop-box,\n.cropper-modal {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.cropper-wrap-box,\n.cropper-canvas {\n  overflow: hidden;\n}\n\n.cropper-drag-box {\n  background-color: #fff;\n  opacity: 0;\n}\n\n.cropper-modal {\n  background-color: #000;\n  opacity: 0.5;\n}\n\n.cropper-view-box {\n  display: block;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  overflow: hidden;\n  width: 100%;\n}\n\n.cropper-dashed {\n  border: 0 dashed #eee;\n  display: block;\n  opacity: 0.5;\n  position: absolute;\n}\n\n.cropper-dashed.dashed-h {\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  height: calc(100% / 3);\n  left: 0;\n  top: calc(100% / 3);\n  width: 100%;\n}\n\n.cropper-dashed.dashed-v {\n  border-left-width: 1px;\n  border-right-width: 1px;\n  height: 100%;\n  left: calc(100% / 3);\n  top: 0;\n  width: calc(100% / 3);\n}\n\n.cropper-center {\n  display: block;\n  height: 0;\n  left: 50%;\n  opacity: 0.75;\n  position: absolute;\n  top: 50%;\n  width: 0;\n}\n\n.cropper-center::before,\n.cropper-center::after {\n  background-color: #eee;\n  content: ' ';\n  display: block;\n  position: absolute;\n}\n\n.cropper-center::before {\n  height: 1px;\n  left: -3px;\n  top: 0;\n  width: 7px;\n}\n\n.cropper-center::after {\n  height: 7px;\n  left: 0;\n  top: -3px;\n  width: 1px;\n}\n\n.cropper-face,\n.cropper-line,\n.cropper-point {\n  display: block;\n  height: 100%;\n  opacity: 0.1;\n  position: absolute;\n  width: 100%;\n}\n\n.cropper-face {\n  background-color: #fff;\n  left: 0;\n  top: 0;\n}\n\n.cropper-line {\n  background-color: #39f;\n}\n\n.cropper-line.line-e {\n  cursor: ew-resize;\n  right: -3px;\n  top: 0;\n  width: 5px;\n}\n\n.cropper-line.line-n {\n  cursor: ns-resize;\n  height: 5px;\n  left: 0;\n  top: -3px;\n}\n\n.cropper-line.line-w {\n  cursor: ew-resize;\n  left: -3px;\n  top: 0;\n  width: 5px;\n}\n\n.cropper-line.line-s {\n  bottom: -3px;\n  cursor: ns-resize;\n  height: 5px;\n  left: 0;\n}\n\n.cropper-point {\n  background-color: #39f;\n  height: 5px;\n  opacity: 0.75;\n  width: 5px;\n}\n\n.cropper-point.point-e {\n  cursor: ew-resize;\n  margin-top: -3px;\n  right: -3px;\n  top: 50%;\n}\n\n.cropper-point.point-n {\n  cursor: ns-resize;\n  left: 50%;\n  margin-left: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-w {\n  cursor: ew-resize;\n  left: -3px;\n  margin-top: -3px;\n  top: 50%;\n}\n\n.cropper-point.point-s {\n  bottom: -3px;\n  cursor: s-resize;\n  left: 50%;\n  margin-left: -3px;\n}\n\n.cropper-point.point-ne {\n  cursor: nesw-resize;\n  right: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-nw {\n  cursor: nwse-resize;\n  left: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-sw {\n  bottom: -3px;\n  cursor: nesw-resize;\n  left: -3px;\n}\n\n.cropper-point.point-se {\n  bottom: -3px;\n  cursor: nwse-resize;\n  height: 20px;\n  opacity: 1;\n  right: -3px;\n  width: 20px;\n}\n\n@media (min-width: 768px) {\n  .cropper-point.point-se {\n    height: 15px;\n    width: 15px;\n  }\n}\n\n@media (min-width: 992px) {\n  .cropper-point.point-se {\n    height: 10px;\n    width: 10px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .cropper-point.point-se {\n    height: 5px;\n    opacity: 0.75;\n    width: 5px;\n  }\n}\n\n.cropper-point.point-se::before {\n  background-color: #39f;\n  bottom: -50%;\n  content: ' ';\n  display: block;\n  height: 200%;\n  opacity: 0;\n  position: absolute;\n  right: -50%;\n  width: 200%;\n}\n\n.cropper-invisible {\n  opacity: 0;\n}\n\n.cropper-bg {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\n}\n\n.cropper-hide {\n  display: block;\n  height: 0;\n  position: absolute;\n  width: 0;\n}\n\n.cropper-hidden {\n  display: none !important;\n}\n\n.cropper-move {\n  cursor: move;\n}\n\n.cropper-crop {\n  cursor: crosshair;\n}\n\n.cropper-disabled .cropper-drag-box,\n.cropper-disabled .cropper-face,\n.cropper-disabled .cropper-line,\n.cropper-disabled .cropper-point {\n  cursor: not-allowed;\n}\n";const defaultOptions$1={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},props$2={src:{type:String,required:!0},alt:{type:String},circled:{type:Boolean,default:!1},realTimePreview:{type:Boolean,default:!0},height:{type:[String,Number],default:"360px"},crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}};var _sfc_main$7=defineComponent({name:"CropperImage",props:props$2,emits:["cropend","ready","cropendError"],setup(e,{attrs:t,emit:n}){const r=ref$1(),o=ref$1(),i=ref$1(!1),{prefixCls:a}=useDesign("cropper-image"),u=useDebounceFn(f,80),s=computed((()=>__spreadValues({height:e.height,maxWidth:"100%"},e.imageStyle))),c=computed((()=>[a,t.class,{[`${a}--circled`]:e.circled}])),l=computed((()=>({height:`${e.height}`.replace(/px/,"")+"px"})));function f(){e.realTimePreview&&d()}function d(){if(!o.value)return;let t=o.value.getData();(e.circled?function(){const e=o.value.getCroppedCanvas(),t=document.createElement("canvas"),n=t.getContext("2d"),r=e.width,i=e.height;return t.width=r,t.height=i,n.imageSmoothingEnabled=!0,n.drawImage(e,0,0,r,i),n.globalCompositeOperation="destination-in",n.beginPath(),n.arc(r/2,i/2,Math.min(r,i)/2,0,2*Math.PI,!0),n.fill(),t}():o.value.getCroppedCanvas()).toBlob((e=>{if(!e)return;let r=new FileReader;r.readAsDataURL(e),r.onloadend=e=>{var r,o;n("cropend",{imgBase64:null!=(o=null==(r=e.target)?void 0:r.result)?o:"",imgInfo:t})},r.onerror=()=>{n("cropendError")}}),"image/png")}return onMounted((function(){return __async(this,null,(function*(){const t=unref(r);t&&(o.value=new Cropper(t,__spreadValues(__spreadProps(__spreadValues({},defaultOptions$1),{ready:()=>{i.value=!0,f(),n("ready",o.value)},crop(){u()},zoom(){u()},cropmove(){u()}}),e.options)))}))})),{getClass:c,imgElRef:r,getWrapperStyle:l,getImageStyle:s,isReady:i,croppered:d}}}),Cropper_vue_vue_type_style_index_0_lang=".lz-cropper-image--circled .cropper-view-box,\n.lz-cropper-image--circled .cropper-face {\n  border-radius: 50%;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n";function _sfc_render$7(e,t,n,r,o,i){return openBlock(),createBlock("div",{class:e.getClass,style:e.getWrapperStyle},[withDirectives(createVNode("img",{ref:"imgElRef",src:e.src,alt:e.alt,crossorigin:e.crossorigin,style:e.getImageStyle},null,12,["src","alt","crossorigin"]),[[vShow,e.isReady]])],6)}_sfc_main$7.render=_sfc_render$7;var index="/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n.ant-space {\n  display: inline-flex;\n}\n.ant-space-vertical {\n  flex-direction: column;\n}\n.ant-space-align-center {\n  align-items: center;\n}\n.ant-space-align-start {\n  align-items: flex-start;\n}\n.ant-space-align-end {\n  align-items: flex-end;\n}\n.ant-space-align-baseline {\n  align-items: baseline;\n}\n.ant-space-item:empty {\n  display: none;\n}\n.ant-space-rtl {\n  direction: rtl;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n";const props$1={circled:{type:Boolean,default:!0},uploadApi:{type:Function}};var _sfc_main$6=defineComponent({name:"CropperAvatar",components:{BasicModal:BasicModal,Space:Space,CropperImage:_sfc_main$7,Upload:Upload,Avatar:Avatar,Tooltip:Tooltip},props:props$1,emits:["uploadSuccess","register"],setup(e,{emit:t}){let n="";const r=ref$1(""),o=ref$1(""),i=ref$1();let a=1,u=1;const{prefixCls:s}=useDesign("cropper-am"),[c,{closeModal:l,setModalProps:f}]=useModalInner(),{t:d}=useI18n();return{t:d,prefixCls:s,src:r,register:c,previewSource:o,handleBeforeUpload:function(e){const t=new FileReader;return t.readAsDataURL(e),r.value="",o.value="",t.onload=function(t){var o,i;r.value=null!=(i=null==(o=t.target)?void 0:o.result)?i:"",n=e.name},!1},handleCropend:function({imgBase64:e}){o.value=e},handleReady:function(e){i.value=e},handlerToolbar:function(e,t){var n,r;"scaleX"===e&&(a=t=-1===a?1:-1),"scaleY"===e&&(u=t=-1===u?1:-1),null==(r=null==(n=null==i?void 0:i.value)?void 0:n[e])||r.call(n,t)},handleOk:function(){return __async(this,null,(function*(){const r=e.uploadApi;if(r&&isFunction$1(r)){const e=dataURLtoBlob(o.value);try{f({confirmLoading:!0});const i=yield r({name:"file",file:e,filename:n});t("uploadSuccess",{source:o.value,data:i.data}),l()}finally{f({confirmLoading:!1})}}}))}}}}),CopperModal_vue_vue_type_style_index_0_lang=".lz-cropper-am {\n  display: flex;\n}\n.lz-cropper-am-left,\n.lz-cropper-am-right {\n  height: 340px;\n}\n.lz-cropper-am-left {\n  width: 55%;\n}\n.lz-cropper-am-right {\n  width: 45%;\n}\n.lz-cropper-am-cropper {\n  height: 300px;\n  background: #eee;\n  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.25) 25%, transparent 0, transparent 75%, rgba(0, 0, 0, 0.25) 0), linear-gradient(45deg, rgba(0, 0, 0, 0.25) 25%, transparent 0, transparent 75%, rgba(0, 0, 0, 0.25) 0);\n  background-position: 0 0, 12px 12px;\n  background-size: 24px 24px;\n}\n.lz-cropper-am-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 10px;\n}\n.lz-cropper-am-preview {\n  width: 220px;\n  height: 220px;\n  margin: 0 auto;\n  overflow: hidden;\n  border: 1px solid #EEEEEE;\n  border-radius: 50%;\n}\n.lz-cropper-am-preview img {\n  width: 100%;\n  height: 100%;\n}\n.lz-cropper-am-group {\n  display: flex;\n  padding-top: 8px;\n  margin-top: 8px;\n  border-top: 1px solid #EEEEEE;\n  justify-content: space-around;\n  align-items: center;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n";function _sfc_render$6(e,t,n,r,o,i){const a=resolveComponent("CropperImage"),u=resolveComponent("a-button"),s=resolveComponent("Tooltip"),c=resolveComponent("Upload"),l=resolveComponent("Space"),f=resolveComponent("Avatar"),d=resolveComponent("BasicModal");return openBlock(),createBlock(d,mergeProps(e.$attrs,{onRegister:e.register,title:e.t("component.cropper.modalTitle"),width:"800px",canFullscreen:!1,onOk:e.handleOk,okText:e.t("component.cropper.okText")}),{default:withCtx((()=>[createVNode("div",{class:e.prefixCls},[createVNode("div",{class:`${e.prefixCls}-left`},[createVNode("div",{class:`${e.prefixCls}-cropper`},[e.src?(openBlock(),createBlock(a,{key:0,src:e.src,height:"300px",circled:e.circled,onCropend:e.handleCropend,onReady:e.handleReady},null,8,["src","circled","onCropend","onReady"])):createCommentVNode("",!0)],2),createVNode("div",{class:`${e.prefixCls}-toolbar`},[createVNode(c,{fileList:[],accept:"image/*",beforeUpload:e.handleBeforeUpload},{default:withCtx((()=>[createVNode(s,{title:e.t("component.cropper.selectImage"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{size:"small",preIcon:"ant-design:upload-outlined",type:"primary"})])),_:1},8,["title"])])),_:1},8,["beforeUpload"]),createVNode(l,null,{default:withCtx((()=>[createVNode(s,{title:e.t("component.cropper.btn_reset"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"ant-design:reload-outlined",size:"small",disabled:!e.src,onClick:t[1]||(t[1]=t=>e.handlerToolbar("reset"))},null,8,["disabled"])])),_:1},8,["title"]),createVNode(s,{title:e.t("component.cropper.btn_rotate_left"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"ant-design:rotate-left-outlined",size:"small",disabled:!e.src,onClick:t[2]||(t[2]=t=>e.handlerToolbar("rotate",-45))},null,8,["disabled"])])),_:1},8,["title"]),createVNode(s,{title:e.t("component.cropper.btn_rotate_right"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"ant-design:rotate-right-outlined",size:"small",disabled:!e.src,onClick:t[3]||(t[3]=t=>e.handlerToolbar("rotate",45))},null,8,["disabled"])])),_:1},8,["title"]),createVNode(s,{title:e.t("component.cropper.btn_scale_x"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"vaadin:arrows-long-h",size:"small",disabled:!e.src,onClick:t[4]||(t[4]=t=>e.handlerToolbar("scaleX"))},null,8,["disabled"])])),_:1},8,["title"]),createVNode(s,{title:e.t("component.cropper.btn_scale_y"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"vaadin:arrows-long-v",size:"small",disabled:!e.src,onClick:t[5]||(t[5]=t=>e.handlerToolbar("scaleY"))},null,8,["disabled"])])),_:1},8,["title"]),createVNode(s,{title:e.t("component.cropper.btn_zoom_in"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"ant-design:zoom-in-outlined",size:"small",disabled:!e.src,onClick:t[6]||(t[6]=t=>e.handlerToolbar("zoom",.1))},null,8,["disabled"])])),_:1},8,["title"]),createVNode(s,{title:e.t("component.cropper.btn_zoom_out"),placement:"bottom"},{default:withCtx((()=>[createVNode(u,{type:"primary",preIcon:"ant-design:zoom-out-outlined",size:"small",disabled:!e.src,onClick:t[7]||(t[7]=t=>e.handlerToolbar("zoom",-.1))},null,8,["disabled"])])),_:1},8,["title"])])),_:1})],2)],2),createVNode("div",{class:`${e.prefixCls}-right`},[createVNode("div",{class:`${e.prefixCls}-preview`},[e.previewSource?(openBlock(),createBlock("img",{key:0,src:e.previewSource,alt:e.t("component.cropper.preview")},null,8,["src","alt"])):createCommentVNode("",!0)],2),e.previewSource?(openBlock(),createBlock("div",{key:0,class:`${e.prefixCls}-group`},[createVNode(f,{src:e.previewSource,size:"large"},null,8,["src"]),createVNode(f,{src:e.previewSource,size:48},null,8,["src"]),createVNode(f,{src:e.previewSource,size:64},null,8,["src"]),createVNode(f,{src:e.previewSource,size:80},null,8,["src"])],2)):createCommentVNode("",!0)],2)],2)])),_:1},16,["onRegister","title","onOk","okText"])}_sfc_main$6.render=_sfc_render$6;const props={width:{type:[String,Number],default:"200px"},value:{type:String},showBtn:{type:Boolean,default:!0},btnProps:{type:Object},btnText:{type:String,default:""},uploadApi:{type:Function}};var _sfc_main$5=defineComponent({name:"CropperAvatar",components:{CopperModal:_sfc_main$6,Icon:_sfc_main$8},props:props,emits:["update:value","change"],setup(e,{emit:t,expose:n}){const r=ref$1(e.value||""),{prefixCls:o}=useDesign("cropper-avatar"),[i,{openModal:a,closeModal:u}]=useModal(),{createMessage:s}=useMessage(),{t:c}=useI18n(),l=computed((()=>[o])),f=computed((()=>`${e.width}`.replace(/px/,"")+"px")),d=computed((()=>parseInt(`${e.width}`.replace(/px/,""))/2+"px")),p=computed((()=>({width:unref(f)}))),h=computed((()=>({width:unref(f),height:unref(f)})));return watchEffect((()=>{r.value=e.value||""})),watch((()=>r.value),(e=>{t("update:value",e)})),n({openModal:a.bind(null,!0),closeModal:u}),{t:c,prefixCls:o,register:i,openModal:a,getIconWidth:d,sourceValue:r,getClass:l,getImageWrapperStyle:h,getStyle:p,handleUploadSuccess:function({source:e,data:n}){r.value=e,t("change",n.result),s.success(c("component.cropper.uploadSuccess"))}}}}),CropperAvatar_vue_vue_type_style_index_0_scoped_true_lang=".lz-cropper-avatar[data-v-11899759] {\n  display: inline-block;\n  text-align: center;\n}\n.lz-cropper-avatar-image-wrapper[data-v-11899759] {\n  overflow: hidden;\n  cursor: pointer;\n  background: #fff;\n  border: 1px solid #EEEEEE;\n  border-radius: 50%;\n}\n.lz-cropper-avatar-image-wrapper img[data-v-11899759] {\n  width: 100%;\n}\n.lz-cropper-avatar-image-mask[data-v-11899759] {\n  opacity: 0;\n  position: absolute;\n  width: inherit;\n  height: inherit;\n  border-radius: inherit;\n  border: inherit;\n  background: rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n  transition: opacity 0.4s;\n}\n.lz-cropper-avatar-image-mask[data-v-11899759] svg {\n  margin: auto;\n}\n.lz-cropper-avatar-image-mask[data-v-11899759]:hover {\n  opacity: 40;\n}\n.lz-cropper-avatar-upload-btn[data-v-11899759] {\n  margin: 10px auto;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n";const _withId$1=withScopeId(),_sfc_render$5=_withId$1(((e,t,n,r,o,i)=>{const a=resolveComponent("Icon"),u=resolveComponent("a-button"),s=resolveComponent("CopperModal");return openBlock(),createBlock("div",{class:e.getClass,style:e.getStyle},[createVNode("div",{class:`${e.prefixCls}-image-wrapper`,style:e.getImageWrapperStyle,onClick:t[1]||(t[1]=(...t)=>e.openModal&&e.openModal(...t))},[createVNode("div",{class:`${e.prefixCls}-image-mask`,style:e.getImageWrapperStyle},[createVNode(a,{icon:"ant-design:cloud-upload-outlined",size:e.getIconWidth,style:e.getImageWrapperStyle,color:"#d6d6d6"},null,8,["size","style"])],6),e.sourceValue?(openBlock(),createBlock("img",{key:0,src:e.sourceValue,alt:"avatar"},null,8,["src"])):createCommentVNode("",!0)],6),e.showBtn?(openBlock(),createBlock(u,mergeProps({key:0,class:`${e.prefixCls}-upload-btn`,onClick:e.openModal},e.btnProps),{default:_withId$1((()=>[createTextVNode(toDisplayString(e.btnText?e.btnText:e.t("component.cropper.selectImage")),1)])),_:1},16,["class","onClick"])):createCommentVNode("",!0),createVNode(s,{onRegister:e.register,onUploadSuccess:e.handleUploadSuccess,uploadApi:e.uploadApi,src:e.sourceValue},null,8,["onRegister","onUploadSuccess","uploadApi","src"])],6)}));_sfc_main$5.render=_sfc_render$5,_sfc_main$5.__scopeId="data-v-11899759",withInstall(_sfc_main$7),withInstall(_sfc_main$5);var tinymce$2={exports:{}},module;module=tinymce$2,function(){var e=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},t=function(e){return{eq:e}},n=t((function(e,t){return e===t})),r=function(e){return t((function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0}))},o=function(e,n){return function(e,n){return t((function(t,r){return e.eq(n(t),n(r))}))}(r(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,n)}))},i=function(e){return t((function(t,r){var i=Object.keys(t),a=Object.keys(r);if(!o(n).eq(i,a))return!1;for(var u=i.length,s=0;s<u;s++){var c=i[s];if(!e.eq(t[c],r[c]))return!1}return!0}))},a=t((function(t,n){if(t===n)return!0;var o=e(t);return o===e(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(o)?t===n:"array"===o?r(a).eq(t,n):"object"===o&&i(a).eq(t,n))})),u=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},s=function(e){return function(t){return typeof t===e}},c=function(e){return function(t){return e===t}},l=u("string"),f=u("object"),d=u("array"),p=c(null),h=s("boolean"),m=c(void 0),g=function(e){return null==e},v=function(e){return!g(e)},y=s("function"),b=s("number"),C=function(){},x=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},w=function(e){return function(){return e}},_=function(e){return e};function S(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var E,A,D,k=function(e){return function(t){return!e(t)}},T=function(e){return function(){throw new Error(e)}},O=function(e){return e()},B=function(e){e()},N=w(!1),F=w(!0),M=function(){return P},P=(E=function(e){return e.isNone()},{fold:function(e,t){return e()},is:N,isSome:N,isNone:F,getOr:D=function(e){return e},getOrThunk:A=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:w(null),getOrUndefined:w(void 0),or:D,orThunk:A,map:M,each:C,bind:M,exists:N,forall:F,filter:M,equals:E,equals_:E,toArray:function(){return[]},toString:w("none()")}),I=function(e){var t=w(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:F,isNone:N,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return I(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:P},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(N,(function(t){return n(e,t)}))}};return o},R={some:I,none:M,from:function(e){return null==e?P:I(e)}},L=Array.prototype.slice,z=Array.prototype.indexOf,V=Array.prototype.push,H=function(e,t){return z.call(e,t)},$=function(e,t){return H(e,t)>-1},j=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},U=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},W=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},q=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)},G=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},X=function(e,t,n){return q(e,(function(e){n=t(n,e)})),n},K=function(e,t,n){return W(e,(function(e){n=t(n,e)})),n},Y=function(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return R.some(i);if(n(i,r))break}return R.none()}(e,t,N)},J=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return R.some(n);return R.none()},Q=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!d(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);V.apply(t,e[n])}return t}(U(e,t))},Z=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},ee=function(e){var t=L.call(e,0);return t.reverse(),t},te=function(e,t){return G(e,(function(e){return!$(t,e)}))},ne=function(e,t){return t>=0&&t<e.length?R.some(e[t]):R.none()},re=function(e){return ne(e,0)},oe=function(e){return ne(e,e.length-1)},ie=y(Array.from)?Array.from:function(e){return L.call(e)},ae=Object.keys,ue=Object.hasOwnProperty,se=function(e,t){for(var n=ae(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},ce=function(e,t){return le(e,(function(e,n){return{k:n,v:t(e,n)}}))},le=function(e,t){var n={};return se(e,(function(e,r){var o=t(e,r);n[o.k]=o.v})),n},fe=function(e){return function(t,n){e[n]=t}},de=function(e,t,n,r){return se(e,(function(e,o){(t(e,o)?n:r)(e,o)})),{}},pe=function(e,t){var n={},r={};return de(e,t,fe(n),fe(r)),{t:n,f:r}},he=function(e,t){var n={};return de(e,t,fe(n),C),n},me=function(e){return function(e,t){var n=[];return se(e,(function(e,r){n.push(t(e,r))})),n}(e,(function(e){return e}))},ge=function(e,t){return ve(e,t)?R.from(e[t]):R.none()},ve=function(e,t){return ue.call(e,t)},ye=function(e,t){return ve(e,t)&&void 0!==e[t]&&null!==e[t]},be=Array.isArray,Ce=function(e,t,n){var r,o;if(!e)return!1;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return!1;return!0},xe=function(e,t){var n=[];return Ce(e,(function(r,o){n.push(t(r,o,e))})),n},we=function(e,t){var n=[];return Ce(e,(function(r,o){t&&!t(r,o,e)||n.push(r)})),n},_e=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Se=function(e,t,n,r){for(var o=m(n)?e[0]:n,i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o},Ee=function(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},Ae=function(e){return e[e.length-1]},De=function(){return(De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ke(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var Te,Oe,Be,Ne=function(){return Fe(0,0)},Fe=function(e,t){return{major:e,minor:t}},Me={nu:Fe,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Ne():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Fe(r(1),r(2))}(e,n)},unknown:Ne},Pe=function(e,t){var n=String(t).toLowerCase();return Y(e,(function(e){return e.search(n)}))},Ie=function(e,t){return Pe(e,t).map((function(e){var n=Me.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Re=function(e,t){return Pe(e,t).map((function(e){var n=Me.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Le=function(e,t){return-1!==e.indexOf(t)},ze=function(e,t){return function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(e,t,0)},Ve=function(e){return function(t){return t.replace(e,"")}},He=Ve(/^\s+|\s+$/g),$e=Ve(/^\s+/g),je=Ve(/\s+$/g),Ue=function(e){return e.length>0},We=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qe=function(e){return function(t){return Le(t,e)}},Ge=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Le(e,"edge/")&&Le(e,"chrome")&&Le(e,"safari")&&Le(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,We],search:function(e){return Le(e,"chrome")&&!Le(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Le(e,"msie")||Le(e,"trident")}},{name:"Opera",versionRegexes:[We,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qe("firefox")},{name:"Safari",versionRegexes:[We,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Le(e,"safari")||Le(e,"mobile/"))&&Le(e,"applewebkit")}}],Xe=[{name:"Windows",search:qe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Le(e,"iphone")||Le(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:qe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qe("linux"),versionRegexes:[]},{name:"Solaris",search:qe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ke={browsers:w(Ge),oses:w(Xe)},Ye="Edge",Je="Chrome",Qe="Opera",Ze="Firefox",et="Safari",tt=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r(Ye),isChrome:r(Je),isIE:r("IE"),isOpera:r(Qe),isFirefox:r(Ze),isSafari:r(et)}},nt={unknown:function(){return tt({current:void 0,version:Me.unknown()})},nu:tt,edge:w(Ye),chrome:w(Je),ie:w("IE"),opera:w(Qe),firefox:w(Ze),safari:w(et)},rt="Windows",ot="Android",it="Linux",at="Solaris",ut="FreeBSD",st="ChromeOS",ct=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r(rt),isiOS:r("iOS"),isAndroid:r(ot),isOSX:r("OSX"),isLinux:r(it),isSolaris:r(at),isFreeBSD:r(ut),isChromeOS:r(st)}},lt={unknown:function(){return ct({current:void 0,version:Me.unknown()})},nu:ct,windows:w(rt),ios:w("iOS"),android:w(ot),linux:w(it),osx:w("OSX"),solaris:w(at),freebsd:w(ut),chromeos:w(st)},ft=function(e,t){var n=Ke.browsers(),r=Ke.oses(),o=Ie(n,e).fold(nt.unknown,nt.nu),i=Re(r,e).fold(lt.unknown,lt.nu),a=function(e,t,n,r){var o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),c=i||a&&!s,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),f=!c&&!s&&!l;return{isiPad:w(o),isiPhone:w(i),isTablet:w(s),isPhone:w(c),isTouch:w(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:w(l),isDesktop:w(f)}}(i,o,e,t);return{browser:o,os:i,deviceType:a}},dt=function(e){return window.matchMedia(e).matches},pt=(Te=function(){return ft(navigator.userAgent,dt)},Be=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Be||(Be=!0,Oe=Te.apply(null,e)),Oe}),ht=function(){return pt()},mt=navigator.userAgent,gt=ht(),vt=gt.browser,yt=gt.os,bt=gt.deviceType,Ct=/WebKit/.test(mt)&&!vt.isEdge(),xt="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,wt=-1!==mt.indexOf("Windows Phone"),_t={opera:vt.isOpera(),webkit:Ct,ie:!(!vt.isIE()&&!vt.isEdge())&&vt.version.major,gecko:vt.isFirefox(),mac:yt.isOSX()||yt.isiOS(),iOS:bt.isiPad()||bt.isiPhone(),android:yt.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:vt.isIE()?document.documentMode||7:10,fileApi:xt,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!vt.isIE(),desktop:bt.isDesktop(),windowsPhone:wt,browser:{current:vt.current,version:vt.version,isChrome:vt.isChrome,isEdge:vt.isEdge,isFirefox:vt.isFirefox,isIE:vt.isIE,isOpera:vt.isOpera,isSafari:vt.isSafari},os:{current:yt.current,version:yt.version,isAndroid:yt.isAndroid,isChromeOS:yt.isChromeOS,isFreeBSD:yt.isFreeBSD,isiOS:yt.isiOS,isLinux:yt.isLinux,isOSX:yt.isOSX,isSolaris:yt.isSolaris,isWindows:yt.isWindows},deviceType:{isDesktop:bt.isDesktop,isiPad:bt.isiPad,isiPhone:bt.isiPhone,isPhone:bt.isPhone,isTablet:bt.isTablet,isTouch:bt.isTouch,isWebView:bt.isWebView}},St=/^\s*|\s*$/g,Et=function(e){return null==e?"":(""+e).replace(St,"")},At=function(e,t){return t?!("array"!==t||!be(e))||typeof e===t:void 0!==e},Dt=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Ce(e,(function(e,o){if(!1===t.call(r,e,o,n))return!1;Dt(e,t,n,r)})))},kt={trim:Et,isArray:be,is:At,toArray:function(e){if(be(e))return e;for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},makeMap:function(e,t,n){var r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:Ce,map:xe,grep:we,inArray:_e,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r];for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];void 0!==a&&(e[i]=a)}}return e},create:function(e,t,n){var r,o,i,a=this,u=0,s=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],c=a.createNS(e[3].replace(/\.\w+$/,""),n);if(!c[s]){if("static"===e[2])return c[s]=t,void(this.onCreate&&this.onCreate(e[2],e[3],c[s]));t[s]||(t[s]=function(){},u=1),c[s]=t[s],a.extend(c[s].prototype,t),e[5]&&(r=a.resolve(e[5]).prototype,o=e[5].match(/\.(\w+)$/i)[1],i=c[s],c[s]=u?function(){return r[o].apply(this,arguments)}:function(){return this.parent=r[o],i.apply(this,arguments)},c[s].prototype[s]=c[s],a.each(r,(function(e,t){c[s].prototype[t]=r[t]})),a.each(t,(function(e,t){r[t]?c[s].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==s&&(c[s].prototype[t]=e)}))),a.each(t.static,(function(e,t){c[s][t]=e}))}},walk:Dt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||At(e,"array")?e:xe(e.split(t||","),Et)},_addCacheSuffix:function(e){var t=_t.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Tt=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ot={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return Tt(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return Tt(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return Tt(n)},fromDom:Tt,fromPoint:function(e,t,n){return R.from(e.dom.elementFromPoint(t,n)).map(Tt)}},Bt=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Nt=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ft=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},Mt=function(e,t){return e.dom===t.dom},Pt=function(e,t){return n=e.dom,r=t.dom,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(n,r,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,r},It=function(e,t){return ht().browser.isIE()?Pt(e,t):function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)}(e,t)};"undefined"!=typeof window?window:Function("return this;")();var Rt,Lt,zt=function(e){return e.dom.nodeName.toLowerCase()},Vt=function(e){return e.dom.nodeType},Ht=function(e){return function(t){return Vt(t)===e}},$t=Ht(1),jt=Ht(3),Ut=Ht(9),Wt=Ht(11),qt=function(e){return Ot.fromDom(e.dom.ownerDocument)},Gt=function(e){return Ut(e)?e:qt(e)},Xt=function(e){return Ot.fromDom(Gt(e).dom.defaultView)},Kt=function(e){return R.from(e.dom.parentNode).map(Ot.fromDom)},Yt=function(e){return R.from(e.dom.previousSibling).map(Ot.fromDom)},Jt=function(e){return R.from(e.dom.nextSibling).map(Ot.fromDom)},Qt=function(e){return ee(Bt(e,Yt))},Zt=function(e){return Bt(e,Jt)},en=function(e){return U(e.dom.childNodes,Ot.fromDom)},tn=function(e,t){var n=e.dom.childNodes;return R.from(n[t]).map(Ot.fromDom)},nn=function(e){return tn(e,0)},rn=function(e){return tn(e,e.dom.childNodes.length-1)},on=function(e){return Wt(e)&&v(e.dom.host)},an=y(Element.prototype.attachShadow)&&y(Node.prototype.getRootNode),un=w(an),sn=an?function(e){return Ot.fromDom(e.dom.getRootNode())}:Gt,cn=function(e){return on(e)?e:function(e){var t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return Ot.fromDom(t)}(Gt(e))},ln=function(e){return Ot.fromDom(e.dom.host)},fn=function(e){return v(e.dom.shadowRoot)},dn=function(e,t){Kt(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},pn=function(e,t){Jt(e).fold((function(){Kt(e).each((function(e){mn(e,t)}))}),(function(e){dn(e,t)}))},hn=function(e,t){nn(e).fold((function(){mn(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},mn=function(e,t){e.dom.appendChild(t.dom)},gn=function(e,t){W(t,(function(t){mn(e,t)}))},vn=function(e){e.dom.textContent="",W(en(e),(function(e){yn(e)}))},yn=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},bn=function(e){var t,n=en(e);n.length>0&&(t=e,W(n,(function(e){dn(t,e)}))),yn(e)},Cn=function(e){var t=jt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r,o=t.ownerDocument;return function(e){var t=sn(e);return on(t)?R.some(t):R.none()}(Ot.fromDom(t)).fold((function(){return o.body.contains(t)}),(n=Cn,r=ln,function(e){return n(r(e))}))},xn=function(e,t){return{left:e,top:t,translate:function(n,r){return xn(e+n,t+r)}}},wn=xn,_n=function(e,t){return void 0!==e?e:void 0!==t?t:0},Sn=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?wn(n.offsetLeft,n.offsetTop):Cn(e)?function(e){var t=e.getBoundingClientRect();return wn(t.left,t.top)}(t):wn(0,0)},En=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return wn(n,r)},An=function(e,t,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Dn=function(e,t){ht().browser.isSafari()&&y(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},kn=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Tn=function(e){var t=void 0===e?window:e,n=t.document,r=En(Ot.fromDom(n));return function(e){var t=void 0===e?window:e;return R.from(t.visualViewport)}(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,o=e.clientHeight;return kn(r.left,r.top,n,o)}),(function(e){return kn(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)}))},On=function(e){return function(t){return!!t&&t.nodeType===e}},Bn=function(e){return!!e&&!Object.getPrototypeOf(e)},Nn=On(1),Fn=function(e){var t=e.map((function(e){return e.toLowerCase()}));return function(e){if(e&&e.nodeName){var n=e.nodeName.toLowerCase();return $(t,n)}return!1}},Mn=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(Nn(t))for(r=0;r<n.length;r++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[r])return!0}return!1}},Pn=function(e){return function(t){return Nn(t)&&t.hasAttribute(e)}},In=function(e){return Nn(e)&&e.hasAttribute("data-mce-bogus")},Rn=function(e){return Nn(e)&&"TABLE"===e.tagName},Ln=function(e){return function(t){if(Nn(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},zn=Fn(["textarea","input"]),Vn=On(3),Hn=On(8),$n=On(9),jn=On(11),Un=Fn(["br"]),Wn=Fn(["img"]),qn=Ln("true"),Gn=Ln("false"),Xn=Fn(["td","th"]),Kn=Fn(["video","audio","object","embed"]),Yn=function(e){return void 0!==e.style&&y(e.style.getPropertyValue)},Jn=function(e,t,n){if(!(l(n)||h(n)||b(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Qn=function(e,t,n){Jn(e.dom,t,n)},Zn=function(e,t){var n=e.dom;se(t,(function(e,t){Jn(n,t,e)}))},er=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},tr=function(e,t){return R.from(er(e,t))},nr=function(e,t){e.dom.removeAttribute(t)},rr=function(e,t){var n=e.dom;se(t,(function(e,t){!function(e,t,n){if(!l(n))throw new Error("CSS value must be a string: "+n);Yn(e)&&e.style.setProperty(t,n)}(n,t,e)}))},or=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Cn(e)?r:ir(n,t)},ir=function(e,t){return Yn(e)?e.style.getPropertyValue(t):""},ar=function(e,t){var n=e.dom,r=ir(n,t);return R.from(r).filter((function(e){return e.length>0}))},ur=function(e){var t={},n=e.dom;if(Yn(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},sr=ht().browser,cr=function(e){return Y(e,$t)},lr=function(e,t){return e.children&&$(e.children,t)},fr=function(e,t,n){var r,o,i=0,a=0,u=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===or(Ot.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,y:a=o.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType&&!lr(r,n);)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType&&!lr(r,n);)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=function(e){return sr.isFirefox()&&"table"===zt(e)?cr(en(e)).filter((function(e){return"caption"===zt(e)})).bind((function(e){return cr(Zt(e)).map((function(t){var n=t.dom.offsetTop,r=e.dom.offsetTop,o=e.dom.offsetHeight;return n<=r?-o:0}))})).getOr(0):0}(Ot.fromDom(t))}return{x:i,y:a}},dr={},pr={exports:dr};Rt=dr,Lt=pr,function(e){"object"==typeof Rt&&void 0!==Lt?Lt.exports=e():("undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s=!1;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();var c,l=[],f=!1,d=-1;function p(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!f){var e=s(p);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||f||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(o){return void s(t.promise,o)}u(t.promise,r)}else(1===e._state?u:s)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(a){s(e,a)}var r,o}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(r){if(n)return;n=!0,s(t,r)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new l(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),n)}t[i]=a,0==--r&&e(t)}catch(s){n(s)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},i._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[t]=!0,o((function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}));var hr=pr.exports.boltExport,mr=function(e){var t=R.none(),n=[],r=function(e){o()?a(e):n.push(e)},o=function(){return t.isSome()},i=function(e){W(e,a)},a=function(e){t.each((function(t){setTimeout((function(){e(t)}),0)}))};return e((function(e){o()||(t=R.some(e),i(n),n=[])})),{get:r,map:function(e){return mr((function(t){r((function(n){t(e(n))}))}))},isReady:o}},gr={nu:mr,pure:function(e){return mr((function(t){t(e)}))}},vr=function(e){setTimeout((function(){throw e}),0)},yr=function(e){var t=function(t){e().then(t,vr)};return{map:function(t){return yr((function(){return e().then(t)}))},bind:function(t){return yr((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return yr((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return gr.nu(t)},toCached:function(){var t=null;return yr((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},br=function(e){return yr((function(){return new hr(e)}))},Cr=function(e,t){return t((function(t){var n=[],r=0;0===e.length?t([]):W(e,(function(o,i){o.get(function(o){return function(i){n[o]=i,++r>=e.length&&t(n)}}(i))}))}))},xr=function(e){return{is:function(t){return e===t},isValue:F,isError:N,getOr:w(e),getOrThunk:w(e),getOrDie:w(e),or:function(t){return xr(e)},orThunk:function(t){return xr(e)},fold:function(t,n){return n(e)},map:function(t){return xr(t(e))},mapError:function(t){return xr(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return R.some(e)}}},wr=function(e){return{is:N,isValue:N,isError:F,getOr:_,getOrThunk:function(e){return e()},getOrDie:function(){return T(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return wr(e)},mapError:function(t){return wr(t(e))},each:C,bind:function(t){return wr(e)},exists:N,forall:F,toOptional:R.none}},_r={value:xr,error:wr,fromOption:function(e,t){return e.fold((function(){return wr(t)}),xr)}},Sr=function(e){if(!d(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return W(e,(function(r,o){var i=ae(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!d(u))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length;if(i!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+i);var s=function(e){var r=ae(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!Z(t,(function(e){return $(r,e)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);var i=t[o];return i.apply(null,n)},match:s,log:function(e){}}}})),n};Sr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Er=function(e){return e.fold(_,_)};function Ar(e,t,n,r,o){return e(n,r)?R.some(n):y(o)&&o(n)?R.none():t(n,r,o)}var Dr,kr,Tr,Or,Br,Nr,Fr,Mr,Pr,Ir,Rr,Lr,zr,Vr,Hr,$r,jr,Ur,Wr,qr,Gr,Xr=function(e,t,n){for(var r=e.dom,o=y(n)?n:N;r.parentNode;){r=r.parentNode;var i=Ot.fromDom(r);if(t(i))return R.some(i);if(o(i))break}return R.none()},Kr=function(e,t,n){return Ar((function(e,t){return t(e)}),Xr,e,t,n)},Yr=function(e,t){return Y(e.dom.childNodes,(function(e){return t(Ot.fromDom(e))})).map(Ot.fromDom)},Jr=function(e,t,n){return Xr(e,(function(e){return Nt(e,t)}),n)},Qr=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Ft(n)?R.none():R.from(n.querySelector(e)).map(Ot.fromDom)}(t,e)},Zr=function(e,t,n){return Ar((function(e,t){return Nt(e,t)}),Jr,e,t,n)},eo=window.Promise?window.Promise:function(){var e=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.apply(t,n)}},t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(i,this),e(a,this))},r=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){return setTimeout(e,1)};function o(e){var t=this;null!==this._state?r((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void e.reject(o)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function i(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void c(e(n,t),e(i,this),e(a,this))}this._state=!0,this._value=t,u.call(this)}catch(r){a.call(this,r)}}function a(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}var c=function(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(o){if(r)return;r=!0,n(o)}};return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n((function(n,i){o.call(r,new s(e,t,n,i))}))},n.all=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=Array.prototype.slice.call(1===e.length&&t(e[0])?e[0]:e);return new n((function(e,t){if(0===o.length)return e([]);for(var n=o.length,r=function(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){r(i,e)}),t)}o[i]=a,0==--n&&e(o)}catch(s){t(s)}},i=0;i<o.length;i++)r(i,o[i])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,n){n(e)}))},n.race=function(e){return new n((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},n}(),to=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},no=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},ro=function(e,t){var n,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];clearTimeout(n),n=to((function(){e.apply(this,r)}),t)};return r.stop=function(){clearTimeout(n)},r},oo={requestAnimationFrame:function(e,t){Dr?Dr.then(e):Dr=new eo((function(e){t||(t=document.body),function(e,t){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=window[r[o]+"RequestAnimationFrame"];n||(n=function(e){window.setTimeout(e,0)}),n(e,t)}(e,t)})).then(e)},setTimeout:to,setInterval:no,setEditorTimeout:function(e,t,n){return to((function(){e.removed||t()}),n)},setEditorInterval:function(e,t,n){var r=no((function(){e.removed?clearInterval(r):t()}),n);return r},debounce:ro,throttle:ro,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},io=function(e,t){void 0===t&&(t={});var n=0,r={},o=Ot.fromDom(e),i=Gt(o),a=t.maxLoadTime||5e3,u=function(u,s,c){var l,f=kt._addCacheSuffix(u),d=function(e){return ge(r,e).getOrThunk((function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}}))}(f);r[f]=d,d.count++;var p=function(e,t){for(var n=e.length;n--;)e[n]();d.status=t,d.passed=[],d.failed=[],l&&(l.onload=null,l.onerror=null,l=null)},h=function(){return p(d.passed,2)},m=function(){return p(d.failed,3)},g=function(){var t;t=g,function(){for(var t=e.styleSheets,n=t.length;n--;){var r=t[n].ownerNode;if(r&&r.id===l.id)return h(),!0}return!1}()||(Date.now()-b<a?oo.setTimeout(t):m())};if(s&&d.passed.push(s),c&&d.failed.push(c),1!==d.status)if(2!==d.status)if(3!==d.status){d.status=1;var v=Ot.fromTag("link",i.dom);Zn(v,{rel:"stylesheet",type:"text/css",id:d.id});var y,b=Date.now();t.contentCssCors&&Qn(v,"crossOrigin","anonymous"),t.referrerPolicy&&Qn(v,"referrerpolicy",t.referrerPolicy),(l=v.dom).onload=g,l.onerror=m,y=v,mn(cn(o),y),Qn(v,"href",f)}else m();else h()},s=function(e){return br((function(t){u(e,x(t,w(_r.value(e))),x(t,w(_r.error(e))))}))},c=function(e){var t=kt._addCacheSuffix(e);ge(r,t).each((function(e){0==--e.count&&(delete r[t],function(e){var t=cn(o);Qr(t,"#"+e).each(yn)}(e.id))}))};return{load:u,loadAll:function(e,t,n){var r;(r=U(e,s),Cr(r,br)).get((function(e){var r=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}}(e,(function(e){return e.isValue()}));r.fail.length>0?n(r.fail.map(Er)):t(r.pass.map(Er))}))},unload:c,unloadAll:function(e){W(e,(function(e){c(e)}))},_setReferrerPolicy:function(e){t.referrerPolicy=e}}},ao=(kr=new WeakMap,{forElement:function(e,t){var n=sn(e).dom;return R.from(kr.get(n)).getOrThunk((function(){var e=io(n,t);return kr.set(n,e),e}))}}),uo=function(){function e(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node},e.prototype.prev=function(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node},e.prototype.prev2=function(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node},e.prototype.findSibling=function(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(o=e[n])return o;for(i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(o=i[n])return o}}},e.prototype.findPreviousNode=function(e,t,n,r){var o,i,a;if(e){if(o=e[n],this.rootNode&&o===this.rootNode)return;if(o){if(!r)for(a=o[t];a;a=a[t])if(!a[t])return a;return o}if((i=e.parentNode)&&i!==this.rootNode)return i}},e}(),so=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}(e,F)).hasOwnProperty(zt(n))}},co=so(["h1","h2","h3","h4","h5","h6"]),lo=so(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),fo=function(e){return $t(e)&&!lo(e)},po=function(e){return $t(e)&&"br"===zt(e)},ho=so(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),mo=so(["ul","ol","dl"]),go=so(["li","dd","dt"]),vo=so(["thead","tbody","tfoot"]),yo=so(["td","th"]),bo=so(["pre","script","textarea","style"]),Co="",xo="\ufeff",wo=function(e){return"\ufeff"===e},_o=function(e){return e.replace(/\uFEFF/g,"")},So=Nn,Eo=Vn,Ao=function(e){return Eo(e)&&(e=e.parentNode),So(e)&&e.hasAttribute("data-mce-caret")},Do=function(e){return Eo(e)&&wo(e.data)},ko=function(e){return Ao(e)||Do(e)},To=function(e){return e.firstChild!==e.lastChild||!Un(e.firstChild)},Oo=function(e){var t=e.container();return!!Vn(t)&&(t.data.charAt(e.offset())===xo||e.isAtStart()&&Do(t.previousSibling))},Bo=function(e){var t=e.container();return!!Vn(t)&&(t.data.charAt(e.offset()-1)===xo||e.isAtEnd()&&Do(t.nextSibling))},No=function(e,t,n){var r,o=t.ownerDocument.createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((r=document.createElement("br")).setAttribute("data-mce-bogus","1"),r));var i=t.parentNode;return n?i.insertBefore(o,t):t.nextSibling?i.insertBefore(o,t.nextSibling):i.appendChild(o),o},Fo=function(e){return Eo(e)&&e.data[0]===xo},Mo=function(e){return Eo(e)&&e.data[e.data.length-1]===xo},Po=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),n=t[t.length-1],In(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},Io=qn,Ro=Gn,Lo=Un,zo=Vn,Vo=Fn(["script","style","textarea"]),Ho=Fn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$o=Fn(["table"]),jo=ko,Uo=function(e){return!jo(e)&&(zo(e)?!Vo(e.parentNode):Ho(e)||Lo(e)||$o(e)||Wo(e))},Wo=function(e){return!1===function(e){return Nn(e)&&"true"===e.getAttribute("unselectable")}(e)&&Ro(e)},qo=function(e,t){return Uo(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Wo(e))return!1;if(Io(e))return!0}return!0}(e,t)},Go=/^[ \t\r\n]*$/,Xo=function(e){return Go.test(e)},Ko=function(e,t){var n,r,o,i=Ot.fromDom(t),a=Ot.fromDom(e);return n=a,r="pre,code",o=S(Mt,i),Jr(n,r,o).isSome()},Yo=function(e,t){return Uo(e)&&!1===function(e,t){return Vn(e)&&Xo(e.data)&&!1===Ko(e,t)}(e,t)||function(e){return Nn(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))}(e)||Jo(e)},Jo=Pn("data-mce-bookmark"),Qo=Pn("data-mce-bogus"),Zo=(Tr="data-mce-bogus",Or="all",function(e){return Nn(e)&&e.getAttribute(Tr)===Or}),ei=function(e,t){return void 0===t&&(t=!0),function(e,t){var n,r=0;if(Yo(e,e))return!1;if(!(n=e.firstChild))return!0;var o=new uo(n,e);do{if(t){if(Zo(n)){n=o.next(!0);continue}if(Qo(n)){n=o.next();continue}}if(Un(n))r++,n=o.next();else{if(Yo(n,e))return!1;n=o.next()}}while(n);return r<=1}(e.dom,t)},ti=function(e,t){return v(e)&&(Yo(e,t)||fo(Ot.fromDom(e)))},ni=function(e){return function(e){return"span"===e.nodeName.toLowerCase()}(e)&&"bookmark"===e.getAttribute("data-mce-type")},ri=function(e,t){return Vn(e)&&e.data.length>0&&function(e,t){var n=new uo(e,t).prev(!1),r=new uo(e,t).next(!1),o=m(n)||ti(n,t),i=m(r)||ti(r,t);return o&&i}(e,t)},oi=function(e,t,n){var r=n||t;if(Nn(t)&&ni(t))return t;for(var o=t.childNodes,i=o.length-1;i>=0;i--)oi(e,o[i],r);if(Nn(t)){var a=t.childNodes;1===a.length&&ni(a[0])&&t.parentNode.insertBefore(a[0],t)}return function(e){return jn(e)||$n(e)}(t)||Yo(t,r)||function(e){return!!Nn(e)&&e.childNodes.length>0}(t)||ri(t,r)||e.remove(t),t},ii=kt.makeMap,ai=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ui=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,si=/[<>&\"\']/g,ci=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,li={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},fi={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},di={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},pi=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),fi[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}},hi=pi("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),mi=function(e,t){return e.replace(t?ai:ui,(function(e){return fi[e]||e}))},gi=function(e,t){return e.replace(t?ai:ui,(function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":fi[e]||"&#"+e.charCodeAt(0)+";"}))},vi=function(e,t,n){return n=n||hi,e.replace(t?ai:ui,(function(e){return fi[e]||n[e]||e}))},yi={encodeRaw:mi,encodeAllRaw:function(e){return(""+e).replace(si,(function(e){return fi[e]||e}))},encodeNumeric:gi,encodeNamed:vi,getEncodeFunc:function(e,t){var n=pi(t)||hi,r=ii(e.replace(/\+/g,","));return r.named&&r.numeric?function(e,t){return e.replace(t?ai:ui,(function(e){return void 0!==fi[e]?fi[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))}:r.named?t?function(e,t){return vi(e,t,n)}:vi:r.numeric?gi:mi},decode:function(e){return e.replace(ci,(function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):li[t]||String.fromCharCode(t):di[e]||hi[e]||function(e){var t=Ot.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e}(e)}))}},bi={},Ci={},xi=kt.makeMap,wi=kt.each,_i=kt.extend,Si=kt.explode,Ei=kt.inArray,Ai=function(e,t){return(e=kt.trim(e))?e.split(t||" "):[]},Di=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),wi(e,(function(e,r){n[r]=n[r.toUpperCase()]="map"===t?xi(e,/[, ]/):Si(e,/[, ]/)}))),n},ki=function(e){var t,n,r,o,i,a,u,s,c,l,f={},d={},p=[],h={},m={},g=function(t,n,r){var o=e[t];return o?o=xi(o,/[, ]/,xi(o.toUpperCase(),/[, ]/)):(o=bi[t])||(o=xi(n," ",xi(n.toUpperCase()," ")),o=_i(o,r),bi[t]=o),o},v=(t=(e=e||{}).schema,s={},c=function(e,t,r){var o,i,a,u=function(e,t){var n,r,o={};for(n=0,r=e.length;n<r;n++)o[e[n]]=t||{};return o};t=t||"","string"==typeof(r=r||[])&&(r=Ai(r));var c=Ai(e);for(o=c.length;o--;)a={attributes:u(i=Ai([n,t].join(" "))),attributesOrder:i,children:u(r,Ci)},s[c[o]]=a},l=function(e,t){var n,r,o,i,a=Ai(e);n=a.length;for(var u=Ai(t);n--;)for(r=s[a[n]],o=0,i=u.length;o<i;o++)r.attributes[u[o]]={},r.attributesOrder.push(u[o])},bi[t]?bi[t]:(n="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(n+=" xml:lang",o=[o,u="acronym applet basefont big font strike tt"].join(" "),wi(Ai(u),(function(e){c(e,"",o)})),r=[r,a="center dir isindex noframes"].join(" "),i=[r,o].join(" "),wi(Ai(a),(function(e){c(e,"",i)}))),i=i||[r,o].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),c("address dt dd div caption","",i),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",i),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",i),c("dl","","dt dd"),c("a","href target rel media hreflang type",o),c("q","cite",o),c("ins del","cite datetime",i),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",i),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),c("param","name value"),c("map","name",[i,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",i),c("th","colspan rowspan headers scope abbr",i),c("form","accept-charset action autocomplete enctype method name novalidate target",i),c("fieldset","disabled form name",[i,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?i:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[i,"li"].join(" ")),c("noscript","",i),"html4"!==t&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",i),c("mark rt rp summary bdi","",o),c("canvas","width height",i),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",i),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[i,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",i),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[i,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==t&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("img","loading"),l("iframe","sandbox seamless allowfullscreen loading")),wi(Ai("a form meter progress dfn"),(function(e){s[e]&&delete s[e].children[e]})),delete s.caption.children.table,delete s.script,bi[t]=s,s));!1===e.verify_html&&(e.valid_elements="*[*]");var y=Di(e.valid_styles),b=Di(e.invalid_styles,"map"),C=Di(e.valid_classes,"map"),x=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),_=g("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),E="td th iframe video audio object script code",A=g("non_empty_elements",E+" pre",_),D=g("move_caret_before_on_enter_elements",E+" table",_),k=g("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),T=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",k),O=g("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");wi((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(e){m[e]=new RegExp("</"+e+"[^>]*>","gi")}));var B=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},N=function(e){var t,n,r,o,i,a,u,s,c,l,d,h,m,g,v,y,b,C,x=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,w=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(e){var S=Ai(e,",");for(f["@"]&&(y=f["@"].attributes,b=f["@"].attributesOrder),t=0,n=S.length;t<n;t++)if(i=x.exec(S[t])){if(g=i[1],c=i[2],v=i[3],s=i[5],a={attributes:h={},attributesOrder:m=[]},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),y&&(se(y,(function(e,t){h[t]=e})),m.push.apply(m,b)),s)for(r=0,o=(s=Ai(s,"|")).length;r<o;r++)if(i=w.exec(s[r])){if(u={},d=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],C=i[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(l),u.required=!0),"-"===d){delete h[l],m.splice(Ei(m,l),1);continue}g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:l,value:C}),u.defaultValue=C),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:l,value:C}),u.forcedValue=C),"<"===g&&(u.validValues=xi(C,"?"))),_.test(l)?(a.attributePatterns=a.attributePatterns||[],u.pattern=B(l),a.attributePatterns.push(u)):(h[l]||m.push(l),h[l]=u)}y||"@"!==c||(y=h,b=m),v&&(a.outputName=c,f[v]=a),_.test(c)?(a.pattern=B(c),p.push(a)):f[c]=a}}},F=function(e){f={},p=[],N(e),wi(v,(function(e,t){d[t]=e.children}))},M=function(e){var t=/^(~)?(.+)$/;e&&(bi.text_block_elements=bi.block_elements=null,wi(Ai(e,","),(function(e){var n=t.exec(e),r="~"===n[1],o=r?"span":"div",i=n[2];if(d[i]=d[o],h[i]=o,r||(T[i.toUpperCase()]={},T[i]={}),!f[i]){var a=f[o];delete(a=_i({},a)).removeEmptyAttrs,delete a.removeEmpty,f[i]=a}wi(d,(function(e,t){e[o]&&(d[t]=e=_i({},d[t]),e[i]=e[o])}))})))},P=function(t){var n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;bi[e.schema]=null,t&&wi(Ai(t,","),(function(e){var t,r,o=n.exec(e);o&&(r=o[1],t=r?d[o[2]]:d[o[2]]={"#comment":{}},t=d[o[2]],wi(Ai(o[3],"|"),(function(e){"-"===r?delete t[e]:t[e]={}})))}))},I=function(e){var t,n=f[e];if(n)return n;for(t=p.length;t--;)if((n=p[t]).pattern.test(e))return n};return e.valid_elements?F(e.valid_elements):(wi(v,(function(e,t){f[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},d[t]=e.children})),"html5"!==e.schema&&wi(Ai("strong/b em/i"),(function(e){var t=Ai(e,"/");f[t[1]].outputName=t[0]})),wi(Ai("ol ul sub sup blockquote span font a table tbody strong em b i"),(function(e){f[e]&&(f[e].removeEmpty=!0)})),wi(Ai("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){f[e].paddEmpty=!0})),wi(Ai("span"),(function(e){f[e].removeEmptyAttrs=!0}))),M(e.custom_elements),P(e.valid_children),N(e.extended_valid_elements),P("+ol[ul|ol],+ul[ul|ol]"),wi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,t){f[t]&&(f[t].parentsRequired=Ai(e))})),e.invalid_elements&&wi(Si(e.invalid_elements),(function(e){f[e]&&delete f[e]})),I("span")||N("span[!data-mce-type|*]"),{children:d,elements:f,getValidStyles:function(){return y},getValidClasses:function(){return C},getBlockElements:function(){return T},getInvalidStyles:function(){return b},getShortEndedElements:function(){return _},getTextBlockElements:function(){return k},getTextInlineElements:function(){return O},getBoolAttrs:function(){return S},getElementRule:I,getSelfClosingElements:function(){return w},getNonEmptyElements:function(){return A},getMoveCaretBeforeOnEnterElements:function(){return D},getWhiteSpaceElements:function(){return x},getSpecialElements:function(){return m},isValidChild:function(e,t){var n=d[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,o=I(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return h},addValidElements:N,setValidElements:F,addCustomElements:M,addValidChildren:P}},Ti=function(e,t,n,r){var o=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+o(t)+o(n)+o(r)},Oi=function(e,t){var n,r,o,i=this,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={},f="\ufeff";e=e||{},t&&(r=t.getValidStyles(),o=t.getInvalidStyles());var d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(n=0;n<d.length;n++)l[d[n]]=f+n,l[f+n]=d[n];return{toHex:function(e){return e.replace(a,Ti)},parse:function(t){var r,o,d,p,h,m,g,v,y={},b=e.url_converter,C=e.url_converter_scope||i,x=function(e,t,r){var o=y[e+"-top"+t];if(o){var i=y[e+"-right"+t];if(i){var a=y[e+"-bottom"+t];if(a){var u=y[e+"-left"+t];if(u){var s=[o,i,a,u];for(n=s.length-1;n--&&s[n]===s[n+1];);n>-1&&r||(y[e+t]=-1===n?s[0]:s.join(" "),delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t])}}}}},w=function(e){var t,n=y[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}},_=function(e){return p=!0,l[e]},S=function(e,t){return p&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return l[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},E=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},A=function(e){return e.replace(/\\[0-9a-f]+/gi,E)},D=function(t,n,r,o,i,a){if(i=i||a)return"'"+(i=S(i)).replace(/\'/g,"\\'")+"'";if(n=S(n||r||o),!e.allow_script_urls){var u=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(u))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(u))return""}return b&&(n=b.call(C,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,_)}));r=s.exec(t);)if(s.lastIndex=r.index+r[0].length,o=r[1].replace(c,"").toLowerCase(),d=r[2].replace(c,""),o&&d){if(o=A(o),d=A(d),-1!==o.indexOf(f)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(d)))continue;"font-weight"===o&&"700"===d?d="bold":"color"!==o&&"background-color"!==o||(d=d.toLowerCase()),d=(d=d.replace(a,Ti)).replace(u,D),y[o]=p?S(d,!0):d}x("border","",!0),x("border","-width"),x("border","-color"),x("border","-style"),x("padding",""),x("margin",""),h="border",g="border-style",v="border-color",w(m="border-width")&&w(g)&&w(v)&&(y[h]=y[m]+" "+y[g]+" "+y[v],delete y[m],delete y[g],delete y[v]),"medium none"===y.border&&delete y.border,"none"===y["border-image"]&&delete y["border-image"]}return y},serialize:function(e,t){var n="",i=function(t){var o,i=r[t];if(i)for(var a=0,u=i.length;a<u;a++)t=i[a],(o=e[t])&&(n+=(n.length>0?" ":"")+t+": "+o+";")};return t&&r?(i("*"),i(t)):se(e,(function(e,r){!e||o&&!function(e,t){var n=o["*"];return!(n&&n[e]||(n=o[t])&&n[e])}(r,t)||(n+=(n.length>0?" ":"")+r+": "+e+";")})),n}}},Bi=/^(?:mouse|contextmenu)|click/,Ni={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},Fi=N,Mi=F,Pi=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ii=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Ri=function(e,t){var n,r=t||{};for(n in e)Ni[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),r.composedPath&&(r.composedPath=function(){return e.composedPath()}),e&&function(e){return Bi.test(e.type)}(e)&&void 0===e.pageX&&void 0!==e.clientX){var o=r.target.ownerDocument||document,i=o.documentElement,a=o.body;r.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.defaultPrevented=!0,r.isDefaultPrevented=Mi,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.cancelBubble=!0,r.isPropagationStopped=Mi,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Mi,r.stopPropagation()},!1===function(e){return e.isDefaultPrevented===Mi||e.isDefaultPrevented===Fi}(r)&&(r.isDefaultPrevented=!0===r.defaultPrevented?Mi:Fi,r.isPropagationStopped=!0===r.cancelBubble?Mi:Fi,r.isImmediatePropagationStopped=Fi),void 0===r.metaKey&&(r.metaKey=!1),r},Li=function(e,t,n){var r=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var i=function(){Ii(e,"DOMContentLoaded",i),Ii(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?i():Pi(e,"DOMContentLoaded",i),n.domLoaded||Pi(e,"load",i)}},zi=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(e,t,n,r){var o,i,a,u,s,c,l,f=this,d=window,p=function(e){f.executeHandlers(Ri(e||d.event),o)};if(e&&3!==e.nodeType&&8!==e.nodeType){e[f.expando]?o=e[f.expando]:(o=f.count++,e[f.expando]=o,f.events[o]={}),r=r||e;var h=t.split(" ");for(a=h.length;a--;)c=p,s=l=!1,"DOMContentLoaded"===(u=h[a])&&(u="ready"),f.domLoaded&&"ready"===u&&"complete"===e.readyState?n.call(r,Ri({type:u})):(f.hasMouseEnterLeave||(s=f.mouseEnterLeave[u])&&(c=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Ri(e||d.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,f.executeHandlers(e,o))}),f.hasFocusIn||"focusin"!==u&&"focusout"!==u||(l=!0,s="focusin"===u?"focus":"blur",c=function(e){(e=Ri(e||d.event)).type="focus"===e.type?"focusin":"focusout",f.executeHandlers(e,o)}),(i=f.events[o][u])?"ready"===u&&f.domLoaded?n(Ri({type:u})):i.push({func:n,scope:r}):(f.events[o][u]=i=[{func:n,scope:r}],i.fakeName=s,i.capture=l,i.nativeHandler=c,"ready"===u?Li(e,c,f):Pi(e,s||u,c,l)));return e=i=null,n}},e.prototype.unbind=function(e,t,n){var r,o,i,a,u;if(!e||3===e.nodeType||8===e.nodeType)return this;var s=e[this.expando];if(s){if(u=this.events[s],t){var c=t.split(" ");for(o=c.length;o--;)if(r=u[a=c[o]]){if(n)for(i=r.length;i--;)if(r[i].func===n){var l=r.nativeHandler,f=r.fakeName,d=r.capture;(r=r.slice(0,i).concat(r.slice(i+1))).nativeHandler=l,r.fakeName=f,r.capture=d,u[a]=r}n&&0!==r.length||(delete u[a],Ii(e,r.fakeName||a,r.nativeHandler,r.capture))}}else se(u,(function(t,n){Ii(e,t.fakeName||n,t.nativeHandler,t.capture)})),u={};for(a in u)if(ve(u,a))return this;delete this.events[s];try{delete e[this.expando]}catch(p){e[this.expando]=null}}return this},e.prototype.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return this;var o=Ri(null,n);o.type=t,o.target=e;do{(r=e[this.expando])&&this.executeHandlers(o,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this},e.prototype.clean=function(e){var t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(e,t){var n=this.events[t],r=n&&n[e.type];if(r)for(var o=0,i=r.length;o<i;o++){var a=r[o];if(a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}},e.Event=new e,e}(),Vi="sizzle"+-new Date,Hi=window.document,$i=0,ji=0,Ui=_a(),Wi=_a(),qi=_a(),Gi=function(e,t){return e===t&&(Vr=!0),0},Xi="undefined",Ki=1<<31,Yi={}.hasOwnProperty,Ji=[],Qi=Ji.pop,Zi=Ji.push,ea=Ji.push,ta=Ji.slice,na=Ji.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},ra="[\\x20\\t\\r\\n\\f]",oa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ia="\\[[\\x20\\t\\r\\n\\f]*("+oa+")(?:"+ra+"*([*^$|!~]?=)"+ra+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oa+"))|)"+ra+"*\\]",aa=":("+oa+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ia+")*)|.*)\\)|)",ua=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),sa=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),ca=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),la=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),fa=new RegExp(aa),da=new RegExp("^"+oa+"$"),pa={ID:new RegExp("^#("+oa+")"),CLASS:new RegExp("^\\.("+oa+")"),TAG:new RegExp("^("+oa+"|[*])"),ATTR:new RegExp("^"+ia),PSEUDO:new RegExp("^"+aa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},ha=/^(?:input|select|textarea|button)$/i,ma=/^h\d$/i,ga=/^[^{]+\{\s*\[native \w/,va=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ya=/[+~]/,ba=/'|\\/g,Ca=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),xa=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{ea.apply(Ji=ta.call(Hi.childNodes),Hi.childNodes),Ji[Hi.childNodes.length].nodeType}catch(VA){ea={apply:Ji.length?function(e,t){Zi.apply(e,ta.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var wa=function(e,t,n,r){var o,i,a,u,s,c,l,f,d,p;if((t?t.ownerDocument||t:Hi)!==$r&&Hr(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=(t=t||$r).nodeType)&&9!==u)return[];if(Ur&&!r){if(o=va.exec(e))if(a=o[1]){if(9===u){if(!(i=t.getElementById(a))||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&Gr(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return ea.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&Br.getElementsByClassName)return ea.apply(n,t.getElementsByClassName(a)),n}if(Br.qsa&&(!Wr||!Wr.test(e))){if(f=l=Vi,d=t,p=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(c=Pr(e),(l=t.getAttribute("id"))?f=l.replace(ba,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",s=c.length;s--;)c[s]=f+Ta(c[s]);d=ya.test(e)&&Da(t.parentNode)||t,p=c.join(",")}if(p)try{return ea.apply(n,d.querySelectorAll(p)),n}catch(h){}finally{l||t.removeAttribute("id")}}}return Rr(e.replace(ua,"$1"),t,n,r)};function _a(){var e=[];return function t(n,r){return e.push(n+" ")>Nr.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function Sa(e){return e[Vi]=!0,e}function Ea(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Ki)-(~e.sourceIndex||Ki);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Aa(e){return Sa((function(t){return t=+t,Sa((function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))}))}))}function Da(e){return e&&typeof e.getElementsByTagName!==Xi&&e}function ka(){}function Ta(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Oa(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=ji++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var u,s,c=[$i,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if((u=(s=t[Vi]||(t[Vi]={}))[r])&&u[0]===$i&&u[1]===i)return c[2]=u[2];if(s[r]=c,c[2]=e(t,n,a))return!0}}}function Ba(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function Na(e,t,n,r,o){for(var i,a=[],u=0,s=e.length,c=null!=t;u<s;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(u)));return a}function Fa(e,t,n,r,o,i){return r&&!r[Vi]&&(r=Fa(r)),o&&!o[Vi]&&(o=Fa(o,i)),Sa((function(i,a,u,s){var c,l,f,d=[],p=[],h=a.length,m=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)wa(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),g=!e||!i&&t?m:Na(m,d,e,u,s),v=n?o||(i?e:h||r)?[]:a:g;if(n&&n(g,v,u,s),r)for(c=Na(v,p),r(c,[],u,s),l=c.length;l--;)(f=c[l])&&(v[p[l]]=!(g[p[l]]=f));if(i){if(o||e){if(o){for(c=[],l=v.length;l--;)(f=v[l])&&c.push(g[l]=f);o(null,v=[],c,s)}for(l=v.length;l--;)(f=v[l])&&(c=o?na.call(i,f):d[l])>-1&&(i[c]=!(a[c]=f))}}else v=Na(v===a?v.splice(h,v.length):v),o?o(null,a,v,s):ea.apply(a,v)}))}function Ma(e){for(var t,n,r,o=e.length,i=Nr.relative[e[0].type],a=i||Nr.relative[" "],u=i?1:0,s=Oa((function(e){return e===t}),a,!0),c=Oa((function(e){return na.call(t,e)>-1}),a,!0),l=[function(e,n,r){var o=!i&&(r||n!==Lr)||((t=n).nodeType?s(e,n,r):c(e,n,r));return t=null,o}];u<o;u++)if(n=Nr.relative[e[u].type])l=[Oa(Ba(l),n)];else{if((n=Nr.filter[e[u].type].apply(null,e[u].matches))[Vi]){for(r=++u;r<o&&!Nr.relative[e[r].type];r++);return Fa(u>1&&Ba(l),u>1&&Ta(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(ua,"$1"),n,u<r&&Ma(e.slice(u,r)),r<o&&Ma(e=e.slice(r)),r<o&&Ta(e))}l.push(n)}return Ba(l)}Br=wa.support={},Mr=wa.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Hr=wa.setDocument=function(e){var t,n=e?e.ownerDocument||e:Hi,r=n.defaultView;return n!==$r&&9===n.nodeType&&n.documentElement?($r=n,jr=n.documentElement,Ur=!Mr(n),r&&r!==function(e){try{return e.top}catch(t){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",(function(){Hr()}),!1):r.attachEvent&&r.attachEvent("onunload",(function(){Hr()}))),Br.attributes=!0,Br.getElementsByTagName=!0,Br.getElementsByClassName=ga.test(n.getElementsByClassName),Br.getById=!0,Nr.find.ID=function(e,t){if(typeof t.getElementById!==Xi&&Ur){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Nr.filter.ID=function(e){var t=e.replace(Ca,xa);return function(e){return e.getAttribute("id")===t}},Nr.find.TAG=Br.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Xi)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},Nr.find.CLASS=Br.getElementsByClassName&&function(e,t){if(Ur)return t.getElementsByClassName(e)},qr=[],Wr=[],Br.disconnectedMatch=!0,Wr=Wr.length&&new RegExp(Wr.join("|")),qr=qr.length&&new RegExp(qr.join("|")),t=ga.test(jr.compareDocumentPosition),Gr=t||ga.test(jr.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Gi=t?function(e,t){if(e===t)return Vr=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Br.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===Hi&&Gr(Hi,e)?-1:t===n||t.ownerDocument===Hi&&Gr(Hi,t)?1:zr?na.call(zr,e)-na.call(zr,t):0:4&r?-1:1)}:function(e,t){if(e===t)return Vr=!0,0;var r,o=0,i=e.parentNode,a=t.parentNode,u=[e],s=[t];if(!i||!a)return e===n?-1:t===n?1:i?-1:a?1:zr?na.call(zr,e)-na.call(zr,t):0;if(i===a)return Ea(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;u[o]===s[o];)o++;return o?Ea(u[o],s[o]):u[o]===Hi?-1:s[o]===Hi?1:0},n):$r},wa.matches=function(e,t){return wa(e,null,null,t)},wa.matchesSelector=function(e,t){if((e.ownerDocument||e)!==$r&&Hr(e),t=t.replace(la,"='$1']"),Br.matchesSelector&&Ur&&(!qr||!qr.test(t))&&(!Wr||!Wr.test(t)))try{var n=(void 0).call(e,t);if(n||Br.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(VA){}return wa(t,$r,null,[e]).length>0},wa.contains=function(e,t){return(e.ownerDocument||e)!==$r&&Hr(e),Gr(e,t)},wa.attr=function(e,t){(e.ownerDocument||e)!==$r&&Hr(e);var n=Nr.attrHandle[t.toLowerCase()],r=n&&Yi.call(Nr.attrHandle,t.toLowerCase())?n(e,t,!Ur):void 0;return void 0!==r?r:Br.attributes||!Ur?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},wa.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},wa.uniqueSort=function(e){var t,n=[],r=0,o=0;if(Vr=!Br.detectDuplicates,zr=!Br.sortStable&&e.slice(0),e.sort(Gi),Vr){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return zr=null,e},Fr=wa.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Fr(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=Fr(t);return n},(Nr=wa.selectors={cacheLength:50,createPseudo:Sa,match:pa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ca,xa),e[3]=(e[3]||e[4]||e[5]||"").replace(Ca,xa),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||wa.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&wa.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pa.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fa.test(n)&&(t=Pr(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ca,xa).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Ui[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+ra+"|$)"))&&Ui(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Xi&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=wa.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,s){var c,l,f,d,p,h,m=i!==a?"nextSibling":"previousSibling",g=t.parentNode,v=u&&t.nodeName.toLowerCase(),y=!s&&!u;if(g){if(i){for(;m;){for(f=t;f=f[m];)if(u?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(p=(c=(l=g[Vi]||(g[Vi]={}))[e]||[])[0]===$i&&c[1],d=c[0]===$i&&c[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(d=p=0)||h.pop();)if(1===f.nodeType&&++d&&f===t){l[e]=[$i,p,d];break}}else if(y&&(c=(t[Vi]||(t[Vi]={}))[e])&&c[0]===$i)d=c[1];else for(;(f=++p&&f&&f[m]||(d=p=0)||h.pop())&&((u?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(y&&((f[Vi]||(f[Vi]={}))[e]=[$i,d]),f!==t)););return(d-=o)===r||d%r==0&&d/r>=0}}},PSEUDO:function(e,t){var n,r=Nr.pseudos[e]||Nr.setFilters[e.toLowerCase()]||wa.error("unsupported pseudo: "+e);return r[Vi]?r(t):r.length>1?(n=[e,e,"",t],Nr.setFilters.hasOwnProperty(e.toLowerCase())?Sa((function(e,n){for(var o,i=r(e,t),a=i.length;a--;)e[o=na.call(e,i[a])]=!(n[o]=i[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:Sa((function(e){var t=[],n=[],r=Ir(e.replace(ua,"$1"));return r[Vi]?Sa((function(e,t,n,o){for(var i,a=r(e,null,o,[]),u=e.length;u--;)(i=a[u])&&(e[u]=!(t[u]=i))})):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:Sa((function(e){return function(t){return wa(e,t).length>0}})),contains:Sa((function(e){return e=e.replace(Ca,xa),function(t){return(t.textContent||t.innerText||Fr(t)).indexOf(e)>-1}})),lang:Sa((function(e){return da.test(e||"")||wa.error("unsupported lang: "+e),e=e.replace(Ca,xa).toLowerCase(),function(t){var n;do{if(n=Ur?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===jr},focus:function(e){return e===$r.activeElement&&(!$r.hasFocus||$r.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Nr.pseudos.empty(e)},header:function(e){return ma.test(e.nodeName)},input:function(e){return ha.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Aa((function(){return[0]})),last:Aa((function(e,t){return[t-1]})),eq:Aa((function(e,t,n){return[n<0?n+t:n]})),even:Aa((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:Aa((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:Aa((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:Aa((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=Nr.pseudos.eq,W(["radio","checkbox","file","password","image"],(function(e){var t;Nr.pseudos[e]=(t=e,function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})})),W(["submit","reset"],(function(e){var t;Nr.pseudos[e]=(t=e,function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t})})),ka.prototype=Nr.filters=Nr.pseudos,Nr.setFilters=new ka,Pr=wa.tokenize=function(e,t){var n,r,o,i,a,u,s,c=Wi[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],s=Nr.preFilter;a;){for(i in n&&!(r=sa.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=ca.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(ua," ")}),a=a.slice(n.length)),Nr.filter)Nr.filter.hasOwnProperty(i)&&(!(r=pa[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length)));if(!n)break}return t?a.length:a?wa.error(e):Wi(e,u).slice(0)},Ir=wa.compile=function(e,t){var n,r=[],o=[],i=qi[e+" "];if(!i){for(t||(t=Pr(e)),n=t.length;n--;)(i=Ma(t[n]))[Vi]?r.push(i):o.push(i);(i=qi(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,i,a,u,s){var c,l,f,d=0,p="0",h=o&&[],m=[],g=Lr,v=o||r&&Nr.find.TAG("*",s),y=$i+=null==g?1:Math.random()||.1,b=v.length;for(s&&(Lr=i!==$r&&i);p!==b&&null!=(c=v[p]);p++){if(r&&c){for(l=0;f=e[l++];)if(f(c,i,a)){u.push(c);break}s&&($i=y)}n&&((c=!f&&c)&&d--,o&&h.push(c))}if(d+=p,n&&p!==d){for(l=0;f=t[l++];)f(h,m,i,a);if(o){if(d>0)for(;p--;)h[p]||m[p]||(m[p]=Qi.call(u));m=Na(m)}ea.apply(u,m),s&&!o&&m.length>0&&d+t.length>1&&wa.uniqueSort(u)}return s&&($i=y,Lr=g),h};return n?Sa(o):o}(o,r))).selector=e}return i},Rr=wa.select=function(e,t,n,r){var o,i,a,u,s,c="function"==typeof e&&e,l=!r&&Pr(e=c.selector||e);if(n=n||[],1===l.length){if((i=l[0]=l[0].slice(0)).length>2&&"ID"===(a=i[0]).type&&Br.getById&&9===t.nodeType&&Ur&&Nr.relative[i[1].type]){if(!(t=(Nr.find.ID(a.matches[0].replace(Ca,xa),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=pa.needsContext.test(e)?0:i.length;o--&&(a=i[o],!Nr.relative[u=a.type]);)if((s=Nr.find[u])&&(r=s(a.matches[0].replace(Ca,xa),ya.test(i[0].type)&&Da(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&Ta(i)))return ea.apply(n,r),n;break}}return(c||Ir(e,l))(r,t,!Ur,n,ya.test(e)&&Da(t.parentNode)||t),n},Br.sortStable=Vi.split("").sort(Gi).join("")===Vi,Br.detectDuplicates=!!Vr,Hr(),Br.sortDetached=!0;var Pa=document,Ia=Array.prototype.push,Ra=Array.prototype.slice,La=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,za=zi.Event,Va=kt.makeMap("children,contents,next,prev"),Ha=function(e){return void 0!==e},$a=function(e){return"string"==typeof e},ja=function(e,t){var n,r=(t=t||Pa).createElement("div"),o=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)o.appendChild(n);return o},Ua=function(e,t,n,r){var o;if($a(t))t=ja(t,ou(e[0]));else if(t.length&&!t.nodeType){if(t=su.makeArray(t),r)for(o=t.length-1;o>=0;o--)Ua(e,t[o],n,r);else for(o=0;o<t.length;o++)Ua(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},Wa=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},qa=function(e,t,n){var r,o;return t=su(t)[0],e.each((function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)})),e},Ga=kt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Xa=kt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Ka={for:"htmlFor",class:"className",readonly:"readOnly"},Ya={float:"cssFloat"},Ja={},Qa={},Za=function(e,t){return new su.fn.init(e,t)},eu=/^\s*|\s*$/g,tu=function(e){return null==e?"":(""+e).replace(eu,"")},nu=function(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},ru=function(e,t){var n=[];return nu(e,(function(e,r){t(r,e)&&n.push(r)})),n},ou=function(e){return e?9===e.nodeType?e:e.ownerDocument:Pa};Za.fn=Za.prototype={constructor:Za,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return su(e).attr(t);o.context=t=document}if($a(e)){if(o.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:La.exec(e)))return su(t).find(e);if(n[1])for(r=ja(e,ou(t)).firstChild;r;)Ia.call(o,r),r=r.nextSibling;else{if(!(r=ou(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1);return o},toArray:function(){return kt.toArray(this)},add:function(e,t){var n,r,o=this;if($a(e))return o.add(su(e));if(!1!==t)for(n=su.unique(o.toArray().concat(su.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else Ia.apply(o,su.makeArray(e));return o},attr:function(e,t){var n,r=this;if("object"==typeof e)nu(e,(function(e,t){r.attr(e,t)}));else{if(!Ha(t)){if(r[0]&&1===r[0].nodeType){if((n=Ja[e])&&n.get)return n.get(r[0],e);if(Xa[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=Ja[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Ka[e]||e))nu(e,(function(e,t){n.prop(e,t)}));else{if(!Ha(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each((function(){1===this.nodeType&&(this[e]=t)}))}return n},css:function(e,t){var n,r,o=this,i=function(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))},a=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))};if("object"==typeof e)nu(e,(function(e,t){o.css(e,t)}));else if(Ha(t))e=i(e),"number"!=typeof t||Ga[e]||(t=t.toString()+"px"),o.each((function(){var n=this.style;if((r=Qa[e])&&r.set)r.set(this,t);else{try{this.style[Ya[e]||e]=t}catch(o){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}}));else{if(n=o[0],(r=Qa[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[i(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(u){return}}return o},remove:function(){for(var e,t=this.length;t--;)e=this[t],za.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(Ha(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){su(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(Ha(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Ua(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)}))},prepend:function(){return Ua(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Ua(e,arguments,(function(e){this.parentNode.insertBefore(e,this)})):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Ua(e,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0):e},appendTo:function(e){return su(e).append(this),this},prependTo:function(e){return su(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return qa(this,e)},wrapAll:function(e){return qa(this,e,!0)},wrapInner:function(e){return this.each((function(){su(this).contents().wrapAll(e)})),this},unwrap:function(){return this.parent().each((function(){su(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];return this.each((function(){e.push(this.cloneNode(!0))})),su(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?nu(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,r){var o=Wa(r,e);if(o!==t){var i=r.className;o?r.className=tu((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e}}))),n},hasClass:function(e){return Wa(this[0],e)},each:function(e){return nu(this,e)},on:function(e,t){return this.each((function(){za.bind(this,e,t)}))},off:function(e,t){return this.each((function(){za.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"==typeof e?za.fire(this,e.type,e):za.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return su(Ra.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)su.find(e,this[t],r);return su(r)},filter:function(e){return su("function"==typeof e?ru(this.toArray(),(function(t,n){return e(n,t)})):su.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof su&&(e=e[0]),this.each((function(n,r){for(;r;){if("string"==typeof e&&su(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}})),su(t)},offset:function(e){var t,n,r,o,i=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(i=(o=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:Ia,sort:Array.prototype.sort,splice:Array.prototype.splice},kt.extend(Za,{extend:kt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:kt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:kt.isArray,each:nu,trim:tu,grep:ru,find:wa,expr:wa.selectors,unique:wa.uniqueSort,text:wa.getText,contains:wa.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?su.find.matchesSelector(t[0],e)?[t[0]]:[]:su.find.matches(e,t)}});var iu=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof su&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&su(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},au=function(e,t,n,r){var o=[];for(r instanceof su&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&su(e).is(r))break}o.push(e)}return o},uu=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};nu({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return iu(e,"parentNode")},next:function(e){return uu(e,"nextSibling",1)},prev:function(e){return uu(e,"previousSibling",1)},children:function(e){return au(e.firstChild,"nextSibling",1)},contents:function(e){return kt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){Za.fn[e]=function(n){var r=[];this.each((function(){var e=t.call(r,this,n,r);e&&(su.isArray(e)?r.push.apply(r,e):r.push(e))})),this.length>1&&(Va[e]||(r=su.unique(r)),0===e.indexOf("parents")&&(r=r.reverse()));var o=su(r);return n?o.filter(n):o}})),nu({parentsUntil:function(e,t){return iu(e,"parentNode",t)},nextUntil:function(e,t){return au(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return au(e,"previousSibling",1,t).slice(1)}},(function(e,t){Za.fn[e]=function(n,r){var o=[];this.each((function(){var e=t.call(o,this,n,o);e&&(su.isArray(e)?o.push.apply(o,e):o.push(e))})),this.length>1&&(o=su.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse()));var i=su(o);return r?i.filter(r):i}})),Za.fn.is=function(e){return!!e&&this.filter(e).length>0},Za.fn.init.prototype=Za.fn,Za.overrideDefaults=function(e){var t,n=function(r,o){return t=t||e(),0===arguments.length&&(r=t.element),o||(o=t.context),new n.fn.init(r,o)};return su.extend(n,this),n},Za.attrHooks=Ja,Za.cssHooks=Qa;var su=Za,cu=kt.each,lu=kt.grep,fu=_t.ie,du=/^([a-z0-9],?)+$/i,pu=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},hu=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o},mu=function(e,t){void 0===t&&(t={});var n={},r=window,o={},i=0,a=ao.forElement(Ot.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),u=[],s=t.schema?t.schema:ki({}),c=Oi({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),f=t.ownEvents?new zi:zi.Event,d=s.getBlockElements(),p=su.overrideDefaults((function(){return{context:e,element:$.getRoot()}})),h=function(t){return t&&e&&l(t)?e.getElementById(t):t},m=function(e){return p("string"==typeof e?h(e):e)},v=function(e,t,n){var r,o,i=m(e);return i.length&&(o=(r=j[t])&&r.get?r.get(i,t):i.attr(t)),void 0===o&&(o=n||""),o},y=function(e){var t=h(e);return t?t.attributes:[]},b=function(e,n,r){""===r&&(r=null);var o=m(e),i=o.attr(n);if(o.length){var a=j[n];a&&a.set?a.set(o,r,n):o.attr(n,r),i!==r&&t.onSetAttrib&&t.onSetAttrib({attrElm:o,attrName:n,attrValue:r})}},x=function(){return t.root_element||e.body},w=function(t,n){return fr(e.body,h(t),n)},_=function(e,t,n){var r=m(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=_t.browser.isIE()?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},S=function(e){var t,n;return e=h(e),t=_(e,"width"),n=_(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},E=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(du.test(t)){var r=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var i=Array.isArray(e)?e:[e];return wa(t,i[0].ownerDocument||i[0],null,i).length>0},A=function(e,t,n,r){var o,i=[],a=h(e);for(r=void 0===r,n=n||("BODY"!==x().nodeName?x().parentNode:null),kt.is(t,"string")&&(o=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return E(e,o)});a&&!(a===n||g(a.nodeType)||$n(a)||jn(a));){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},D=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return E(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},k=function(e,t,n){var r,o="string"==typeof e?h(e):e;if(!o)return!1;if(kt.isArray(o)&&(o.length||0===o.length))return r=[],cu(o,(function(e,o){e&&r.push(t.call(n,"string"==typeof e?h(e):e,o))})),r;var i=n||this;return t.call(i,o)},T=function(e,t){m(e).each((function(e,n){cu(t,(function(e,t){b(n,t,e)}))}))},O=function(e,t){var n=m(e);fu?n.each((function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(r){su("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}})):n.html(t)},B=function(t,n,r,o,i){return k(t,(function(t){var a="string"==typeof n?e.createElement(n):n;return T(a,r),o&&("string"!=typeof o&&o.nodeType?a.appendChild(o):"string"==typeof o&&O(a,o)),i?a:t.appendChild(a)}))},N=function(t,n,r){return B(e.createElement(t),t,n,r,!0)},F=yi.encodeAllRaw,M=function(e,t){var n=m(e);return t?n.each((function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():n.remove(),n.length>1?n.toArray():n[0]},P=function(e,t,n){m(e).toggleClass(t,n).each((function(){""===this.className&&su(this).attr("class",null)}))},I=function(e,t,n){return k(t,(function(t){return kt.is(t,"array")&&(e=e.cloneNode(!0)),n&&cu(lu(t.childNodes),(function(t){e.appendChild(t)})),t.parentNode.replaceChild(e,t)}))},R=function(e){if(Nn(e)){var t="a"===e.nodeName.toLowerCase()&&!v(e,"href")&&v(e,"id");if(v(e,"name")||v(e,"data-mce-bookmark")||t)return!0}return!1},L=function(){return e.createRange()},z=function(n,o,i,a){if(kt.isArray(n)){for(var s=n.length,c=[];s--;)c[s]=z(n[s],o,i,a);return c}return!t.collect||n!==e&&n!==r||u.push([n,o,i,a]),f.bind(n,o,i,a||$)},V=function(t,n,o){if(kt.isArray(t)){for(var i=t.length,a=[];i--;)a[i]=V(t[i],n,o);return a}if(u.length>0&&(t===e||t===r))for(i=u.length;i--;){var s=u[i];t!==s[0]||n&&n!==s[1]||o&&o!==s[2]||f.unbind(s[0],s[1],s[2])}return f.unbind(t,n,o)},H=function(e){if(e&&Nn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},$={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:u,styles:c,schema:s,events:f,isBlock:function(e){if("string"==typeof e)return!!d[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!d[e.nodeName])}return!1},$:p,$$:m,root:null,clone:function(t,n){if(!fu||1!==t.nodeType||n)return t.cloneNode(n);var r=e.createElement(t.nodeName);return cu(y(t),(function(e){b(r,e.nodeName,v(t,e.nodeName))})),r},getRoot:x,getViewPort:function(e){var t=Tn(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:function(e){e=h(e);var t=w(e),n=S(e);return{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:S,getParent:function(e,t,n){var r=A(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:A,get:h,getNext:function(e,t){return D(e,t,"nextSibling")},getPrev:function(e,t){return D(e,t,"previousSibling")},select:function(n,r){return wa(n,h(r)||t.root_element||e,[])},is:E,add:B,create:N,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+F(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(t){var n,r=e.createElement("div"),o=e.createDocumentFragment();for(o.appendChild(r),t&&(r.innerHTML=t);n=r.firstChild;)o.appendChild(n);return o.removeChild(r),o},remove:M,setStyle:function(e,n,r){var o=l(n)?m(e).css(n,r):m(e).css(n);t.update_styles&&pu(c,o)},getStyle:_,setStyles:function(e,n){var r=m(e).css(n);t.update_styles&&pu(c,r)},removeAllAttribs:function(e){return k(e,(function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:b,setAttribs:T,getAttrib:v,getPos:w,parseStyle:function(e){return c.parse(e)},serializeStyle:function(e,t){return c.serialize(e,t)},addStyle:function(t){var r,o;if($!==mu.DOM&&e===document){if(n[t])return;n[t]=!0}(o=e.getElementById("mceDefaultStyles"))||((o=e.createElement("style")).id="mceDefaultStyles",o.type="text/css",(r=e.getElementsByTagName("head")[0]).firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=t:o.appendChild(e.createTextNode(t))},loadCSS:function(e){e||(e=""),W(e.split(","),(function(e){o[e]=!0,a.load(e,C)}))},addClass:function(e,t){m(e).addClass(t)},removeClass:function(e,t){P(e,t,!1)},hasClass:function(e,t){return m(e).hasClass(t)},toggleClass:P,show:function(e){m(e).show()},hide:function(e){m(e).hide()},isHidden:function(e){return"none"===m(e).css("display")},uniqueId:function(e){return(e||"mce_")+i++},setHTML:O,getOuterHTML:function(e){var t="string"==typeof e?h(e):e;return Nn(t)?t.outerHTML:su("<div></div>").append(su(t).clone()).html()},setOuterHTML:function(e,t){m(e).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}M(su(this).html(t),!0)}))},decode:yi.decode,encode:F,insertAfter:function(e,t){var n=h(t);return k(e,(function(e){var t=n.parentNode,r=n.nextSibling;return r?t.insertBefore(e,r):t.appendChild(e),e}))},replace:I,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=N(t),cu(y(e),(function(t){b(n,t.nodeName,v(e,t.nodeName))})),I(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return c.toHex(kt.trim(e))},run:k,getAttribs:y,isEmpty:function(e,t){var n,r,o=0;if(R(e))return!1;if(e=e.firstChild){var i=new uo(e,e.parentNode),a=s?s.getWhiteSpaceElements():{};t=t||(s?s.getNonEmptyElements():null);do{if(n=e.nodeType,Nn(e)){var u=e.getAttribute("data-mce-bogus");if(u){e=i.next("all"===u);continue}if(r=e.nodeName.toLowerCase(),t&&t[r]){if("br"===r){o++,e=i.next();continue}return!1}if(R(e))return!1}if(8===n)return!1;if(3===n&&!Xo(e.nodeValue))return!1;if(3===n&&e.parentNode&&a[e.parentNode.nodeName]&&Xo(e.nodeValue))return!1;e=i.next()}while(e)}return o<=1},createRng:L,nodeIndex:hu,split:function(e,t,n){var r,o,i,a=L();if(e&&t)return a.setStart(e.parentNode,hu(e)),a.setEnd(t.parentNode,hu(t)),r=a.extractContents(),(a=L()).setStart(t.parentNode,hu(t)+1),a.setEnd(e.parentNode,hu(e)+1),o=a.extractContents(),(i=e.parentNode).insertBefore(oi($,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(oi($,o),e),M(e),n||t},bind:z,unbind:V,fire:function(e,t,n){return f.fire(e,t,n)},getContentEditable:H,getContentEditableParent:function(e){for(var t=x(),n=null;e&&e!==t&&null===(n=H(e));e=e.parentNode);return n},destroy:function(){if(u.length>0)for(var e=u.length;e--;){var t=u[e];f.unbind(t[0],t[1],t[2])}se(o,(function(e,t){a.unload(t),delete o[t]})),wa.setDocument&&wa.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},j=function(e,t,n){var r=t.keep_values,o={set:function(e,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,o,e[0])),e.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},i={style:{set:function(t,n){null===n||"object"!=typeof n?(r&&t.attr("data-mce-style",n),null!==n&&"string"==typeof n?(t.removeAttr("style"),t.css(e.parse(n))):t.attr("style",n)):t.css(n)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}};return r&&(i.href=i.src=o),i}(c,t,(function(){return $}));return $};mu.DOM=mu(document),mu.nodeIndex=hu;var gu=mu.DOM,vu=kt.each,yu=kt.grep,bu=function(){function e(e){void 0===e&&(e={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=e}return e.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e},e.prototype.loadScript=function(e,t,n){var r,o=gu,i=function(){o.remove(a),r&&(r.onerror=r.onload=r=null)},a=o.uniqueId();(r=document.createElement("script")).id=a,r.type="text/javascript",r.src=kt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=function(){i(),t()},r.onerror=function(){i(),y(n)?n():"undefined"!=typeof console&&console.log},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)},e.prototype.isDone=function(e){return 2===this.states[e]},e.prototype.markDone=function(e){this.states[e]=2},e.prototype.add=function(e,t,n,r){var o=this.states[e];this.queue.push(e),void 0===o&&(this.states[e]=0),t&&(this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]),this.scriptLoadedCallbacks[e].push({success:t,failure:r,scope:n||this}))},e.prototype.load=function(e,t,n,r){return this.add(e,t,n,r)},e.prototype.remove=function(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]},e.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)},e.prototype.loadScripts=function(e,t,n,r){var o=this,i=[],a=function(e,t){vu(o.scriptLoadedCallbacks[t],(function(t){y(t[e])&&t[e].call(t.scope)})),o.scriptLoadedCallbacks[t]=void 0};o.queueLoadedCallbacks.push({success:t,failure:r,scope:n||this});var u=function(){var t=yu(e);if(e.length=0,vu(t,(function(e){2!==o.states[e]?3!==o.states[e]?1!==o.states[e]&&(o.states[e]=1,o.loading++,o.loadScript(e,(function(){o.states[e]=2,o.loading--,a("success",e),u()}),(function(){o.states[e]=3,o.loading--,i.push(e),a("failure",e),u()}))):a("failure",e):a("success",e)})),!o.loading){var n=o.queueLoadedCallbacks.slice(0);o.queueLoadedCallbacks.length=0,vu(n,(function(e){0===i.length?y(e.success)&&e.success.call(e.scope):y(e.failure)&&e.failure.call(e.scope,i)}))}};u()},e.ScriptLoader=new e,e}(),Cu=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},xu={},wu=Cu("en"),_u=function(){return ge(xu,wu.get())},Su={getData:function(){return ce(xu,(function(e){return De({},e)}))},setCode:function(e){e&&wu.set(e)},getCode:function(){return wu.get()},add:function(e,t){var n=xu[e];n||(xu[e]=n={}),se(t,(function(e,t){n[t.toLowerCase()]=e}))},translate:function(e){var t,n=_u().getOr({}),r=function(e){return y(e)?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null==e},i=function(e){var t=r(e);return ge(n,t.toLowerCase()).map(r).getOr(t)},a=function(e){return e.replace(/{context:\w+}$/,"")};if(o(e))return"";if(f(t=e)&&ve(t,"raw"))return r(e.raw);if(function(e){return d(e)&&e.length>1}(e)){var u=e.slice(1);return a(i(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return ve(u,t)?r(u[t]):e})))}return a(i(e))},isRtl:function(){return _u().bind((function(e){return ge(e,"_dir")})).exists((function(e){return"rtl"===e}))},hasCode:function(e){return ve(xu,e)}},Eu=function(){var e=[],t={},n={},r=[],o=function(e,t){var n=G(r,(function(n){return n.name===e&&n.state===t}));W(n,(function(e){return e.callback()}))},i=function(e){var t;return n[e]&&(t=n[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},u=function(e,r,s,c,l){if(!t[e]){var f="string"==typeof r?r:r.prefix+r.resource+r.suffix;0!==f.indexOf("/")&&-1===f.indexOf("://")&&(f=Eu.baseURL+"/"+f),t[e]=f.substring(0,f.lastIndexOf("/"));var d=function(){o(e,"loaded"),function(e,t,n,r){var o=i(e);W(o,(function(e){var n=a(t,e);u(n.resource,n,void 0,void 0)})),n&&(r?n.call(r):n.call(bu))}(e,r,s,c)};n[e]?d():bu.ScriptLoader.add(f,d,c,l)}},s=function(e,o,i){void 0===i&&(i="added"),ve(n,e)&&"added"===i||ve(t,e)&&"loaded"===i?o():r.push({name:e,state:i,callback:o})};return{items:e,urls:t,lookup:n,_listeners:r,get:function(e){if(n[e])return n[e].instance},dependencies:i,requireLangPack:function(e,n){!1!==Eu.languageLoad&&s(e,(function(){var r=Su.getCode();!r||n&&-1===(","+(n||"")+",").indexOf(","+r+",")||bu.ScriptLoader.add(t[e]+"/langs/"+r+".js")}),"loaded")},add:function(t,r,i){var a=r;return e.push(a),n[t]={instance:a,dependencies:i},o(t,"added"),a},remove:function(e){delete t[e],delete n[e]},createUrl:a,addComponents:function(e,n){var r=t[e];W(n,(function(e){bu.ScriptLoader.add(r+"/"+e)}))},load:u,waitFor:s}};Eu.languageLoad=!0,Eu.baseURL="",Eu.PluginManager=Eu(),Eu.ThemeManager=Eu();var Au=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null===n&&(n=setTimeout((function(){e.apply(null,r),n=null}),t))}}},Du=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout((function(){e.apply(null,r),n=null}),t)}}},ku=function(e,t){var n=er(e,t);return void 0===n||""===n?[]:n.split(" ")},Tu=function(e){return void 0!==e.dom.classList},Ou=function(e,t){return function(e,t,n){var r=ku(e,t).concat([n]);return Qn(e,t,r.join(" ")),!0}(e,"class",t)},Bu=function(e,t){return function(e,t,n){var r=G(ku(e,t),(function(e){return e!==n}));return r.length>0?Qn(e,t,r.join(" ")):nr(e,t),!1}(e,"class",t)},Nu=function(e,t){Tu(e)?e.dom.classList.add(t):Ou(e,t)},Fu=function(e){0===(Tu(e)?e.dom.classList:function(e){return ku(e,"class")}(e)).length&&nr(e,"class")},Mu=function(e,t){return Tu(e)&&e.dom.classList.contains(t)},Pu=function(e,t){var n=[];return W(en(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(Pu(e,t))})),n},Iu=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Ft(n)?[]:U(n.querySelectorAll(e),Ot.fromDom)}(t,e)},Ru=w("mce-annotation"),Lu=w("data-mce-annotation"),zu=w("data-mce-annotation-uid"),Vu=function(e,t){var n=e.selection.getRng(),r=Ot.fromDom(n.startContainer),o=Ot.fromDom(e.getBody()),i=t.fold((function(){return"."+Ru()}),(function(e){return"["+Lu()+'="'+e+'"]'})),a=tn(r,n.startOffset).getOr(r),u=Zr(a,i,(function(e){return Mt(e,o)})),s=function(e,t){return n=t,(r=e.dom)&&r.hasAttribute&&r.hasAttribute(n)?R.some(er(e,t)):R.none();var n,r};return u.bind((function(t){return s(t,""+zu()).bind((function(n){return s(t,""+Lu()).map((function(t){var r=Hu(e,n);return{uid:n,name:t,elements:r}}))}))}))},Hu=function(e,t){var n=Ot.fromDom(e.getBody());return Iu(n,"["+zu()+'="'+t+'"]')},$u=function(e,t){var n=Cu({}),r=function(e,t){o(e,(function(e){return t(e),e}))},o=function(e,t){var r=n.get(),o=t(r.hasOwnProperty(e)?r[e]:{listeners:[],previous:Cu(R.none())});r[e]=o,n.set(r)},i=Du((function(){var t,i,a,u=n.get(),s=(t=ae(u),(a=L.call(t,0)).sort(i),a);W(s,(function(t){o(t,(function(n){var o=n.previous.get();return Vu(e,R.some(t)).fold((function(){o.isSome()&&(function(e){r(e,(function(t){W(t.listeners,(function(t){return t(!1,e)}))}))}(t),n.previous.set(R.none()))}),(function(e){var t=e.uid,i=e.name,a=e.elements;o.is(t)||(function(e,t,n){r(e,(function(r){W(r.listeners,(function(r){return r(!0,e,{uid:t,nodes:U(n,(function(e){return e.dom}))})}))}))}(i,t,a),n.previous.set(R.some(t)))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);return e.on("remove",(function(){i.cancel()})),e.on("NodeChange",(function(){i.throttle()})),{addListener:function(e,t){o(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))}}},ju=function(e,t){e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){W(e,(function(e){(function(e){return R.from(e.attr(Lu())).bind(t.lookup)})(e).each((function(t){!1===t.persistent&&e.unwrap()}))}))}))}))},Uu=0,Wu=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Uu+String(t)},qu=function(e,t){var n,r,o=qt(e).dom,i=Ot.fromDom(o.createDocumentFragment()),a=(n=t,(r=(o||document).createElement("div")).innerHTML=n,en(Ot.fromDom(r)));gn(i,a),vn(e),mn(e,i)},Gu=function(e,t){return Ot.fromDom(e.dom.cloneNode(t))},Xu=function(e){return Gu(e,!1)},Ku=function(e){return Gu(e,!0)},Yu=function(e,t,n){void 0===n&&(n=N);var r=new uo(e,t),o=function(e){var t;do{t=r[e]()}while(t&&!Vn(t)&&!n(t));return R.from(t).filter(Vn)};return{current:function(){return R.from(r.current()).filter(Vn)},next:function(){return o("next")},prev:function(){return o("prev")},prev2:function(){return o("prev2")}}},Ju=function(e,t){var n=t||function(t){return e.isBlock(t)||Un(t)||Gn(t)},r=function(e,t,n,o){if(Vn(e)){var i=o(e,t,e.data);if(-1!==i)return R.some({container:e,offset:i})}return n().bind((function(e){return r(e.container,e.offset,n,o)}))};return{backwards:function(e,t,o,i){var a=Yu(e,i,n);return r(e,t,(function(){return a.prev().map((function(e){return{container:e,offset:e.length}}))}),o).getOrNull()},forwards:function(e,t,o,i){var a=Yu(e,i,n);return r(e,t,(function(){return a.next().map((function(e){return{container:e,offset:0}}))}),o).getOrNull()}}},Qu=function(e,t,n){return e.isSome()&&t.isSome()?R.some(n(e.getOrDie(),t.getOrDie())):R.none()},Zu=Math.round,es=function(e){return e?{left:Zu(e.left),top:Zu(e.top),bottom:Zu(e.bottom),right:Zu(e.right),width:Zu(e.width),height:Zu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},ts=function(e,t){return e=es(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},ns=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},rs=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&ns(t.top-e.bottom,e,t)},os=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&ns(t.bottom-e.top,e,t)},is=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},as=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},us=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},ss=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),cs=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&ss.test(e)},ls=Nn,fs=Uo,ds=Mn("display","block table"),ps=Mn("float","left right"),hs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}(ls,fs,k(ps)),ms=k(Mn("white-space","pre pre-line pre-wrap")),gs=Vn,vs=Un,ys=mu.nodeIndex,bs=us,Cs=function(e){return"createRange"in e?e.createRange():mu.DOM.createRng()},xs=function(e){return e&&/[\r\n\t ]/.test(e)},ws=function(e){return!!e.setStart&&!!e.setEnd},_s=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(xs(e.toString())&&ms(n.parentNode)&&Vn(n)&&(t=n.data,xs(t[r-1])||xs(t[r+1])))},Ss=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},Es=function(e){var t,n=e.getClientRects();return t=n.length>0?es(n[0]):es(e.getBoundingClientRect()),!ws(e)&&vs(e)&&Ss(t)?function(e){var t=e.ownerDocument,n=Cs(t),r=t.createTextNode(Co),o=e.parentNode;o.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);var i=es(n.getBoundingClientRect());return o.removeChild(r),i}(e):Ss(t)&&ws(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&Vn(n)&&0===r&&1===o){var i=e.cloneRange();return i.setEndAfter(n),Es(i)}return null}(e):t},As=function(e,t){var n=ts(e,t);return n.width=1,n.right=n.left+1,n},Ds=function(e,t,n){var r=function(){return n||(n=function(e){var t,n,r=[],o=function(e){var t,n;0!==e.height&&(r.length>0&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},i=function(e,t){var n=Cs(e.ownerDocument);if(t<e.data.length){if(cs(e.data[t]))return r;if(cs(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!_s(n)))return o(As(Es(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),_s(n)||o(As(Es(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),_s(n)||o(As(Es(n),!0)))};if(gs(e.container()))return i(e.container(),e.offset()),r;if(ls(e.container()))if(e.isAtEnd())n=bs(e.container(),e.offset()),gs(n)&&i(n,n.data.length),hs(n)&&!vs(n)&&o(As(Es(n),!1));else{if(n=bs(e.container(),e.offset()),gs(n)&&i(n,0),hs(n)&&e.isAtEnd())return o(As(Es(n),!1)),r;t=bs(e.container(),e.offset()-1),hs(t)&&!vs(t)&&(ds(t)||ds(n)||!hs(n))&&o(As(Es(t),!1)),hs(n)&&o(As(Es(n),!0))}return r}(Ds(e,t))),n};return{container:w(e),offset:w(t),toRange:function(){var n=Cs(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return gs(e),0===t},isAtEnd:function(){return gs(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return bs(e,n?t-1:t)}}};Ds.fromRangeStart=function(e){return Ds(e.startContainer,e.startOffset)},Ds.fromRangeEnd=function(e){return Ds(e.endContainer,e.endOffset)},Ds.after=function(e){return Ds(e.parentNode,ys(e)+1)},Ds.before=function(e){return Ds(e.parentNode,ys(e))},Ds.isAbove=function(e,t){return Qu(re(t.getClientRects()),oe(e.getClientRects()),rs).getOr(!1)},Ds.isBelow=function(e,t){return Qu(oe(t.getClientRects()),re(e.getClientRects()),os).getOr(!1)},Ds.isAtStart=function(e){return!!e&&e.isAtStart()},Ds.isAtEnd=function(e){return!!e&&e.isAtEnd()},Ds.isTextPosition=function(e){return!!e&&Vn(e.container())},Ds.isElementPosition=function(e){return!1===Ds.isTextPosition(e)};var ks,Ts,Os=function(e,t){Vn(t)&&0===t.data.length&&e.remove(t)},Bs=function(e,t,n){jn(n)?function(e,t,n){var r=R.from(n.firstChild),o=R.from(n.lastChild);t.insertNode(n),r.each((function(t){return Os(e,t.previousSibling)})),o.each((function(t){return Os(e,t.nextSibling)}))}(e,t,n):function(e,t,n){t.insertNode(n),Os(e,n.previousSibling),Os(e,n.nextSibling)}(e,t,n)},Ns=Vn,Fs=In,Ms=mu.nodeIndex,Ps=function(e){var t=e.parentNode;return Fs(t)?Ps(t):t},Is=function(e){return e?Se(e.childNodes,(function(e,t){return Fs(t)&&"BR"!==t.nodeName?e=e.concat(Is(t)):e.push(t),e}),[]):[]},Rs=function(e){return function(t){return e===t}},Ls=function(e){return(Ns(e)?"text()":e.nodeName.toLowerCase())+"["+function(e){var t,n;t=Is(Ps(e)),n=Ee(t,Rs(e),e),t=t.slice(0,n+1);var r=Se(t,(function(e,n,r){return Ns(n)&&Ns(t[r-1])&&e++,e}),0);return t=we(t,Fn([e.nodeName])),(n=Ee(t,Rs(e),e))-r}(e)+"]"},zs=function(e,t){var n,r,o,i,a,u=[];return n=t.container(),r=t.offset(),Ns(n)?o=function(e,t){for(;(e=e.previousSibling)&&Ns(e);)t+=e.data.length;return t}(n,r):(r>=(i=n.childNodes).length?(o="after",r=i.length-1):o="before",n=i[r]),u.push(Ls(n)),a=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r}(e,n),a=we(a,k(In)),(u=u.concat(xe(a,(function(e){return Ls(e)})))).reverse().join("/")+","+o},Vs=function(e,t){var n;if(!t)return null;var r=t.split(","),o=r[0].split("/");n=r.length>1?r[1]:"before";var i=Se(o,(function(e,t){var n,r,o,i,a=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return a?("text()"===a[1]&&(a[1]="#text"),n=e,r=a[1],o=parseInt(a[2],10),i=Is(n),i=we(i,(function(e,t){return!Ns(e)||!Ns(i[t-1])})),(i=we(i,Fn([r])))[o]):null}),e);return i?Ns(i)?function(e,t){for(var n,r=e,o=0;Ns(r);){if(n=r.data.length,t>=o&&t<=o+n){e=r,t-=o;break}if(!Ns(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return Ns(e)&&t>e.data.length&&(t=e.data.length),Ds(e,t)}(i,parseInt(n,10)):(n="after"===n?Ms(i)+1:Ms(i),Ds(i.parentNode,n)):null},Hs=Gn,$s=function(e,t,n,r,o){var i,a=r[o?"startContainer":"endContainer"],u=r[o?"startOffset":"endOffset"],s=[],c=0,l=e.getRoot();for(Vn(a)?s.push(n?function(e,t,n){var r,o;for(o=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Vn(r);r=r.previousSibling)o+=e(r.data).length;return o}(t,a,u):u):(u>=(i=a.childNodes).length&&i.length&&(c=1,u=Math.max(0,i.length-1)),s.push(e.nodeIndex(i[u],n)+c));a&&a!==l;a=a.parentNode)s.push(e.nodeIndex(a,n));return s},js=function(e,t,n){var r=0;return kt.each(e.select(t),(function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++})),r},Us=function(e,t){var n,r,o,i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],Nn(n)&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Ws=function(e){return Us(e,!0),Us(e,!1),e},qs=function(e,t){var n;if(Nn(e)&&(e=us(e,t),Hs(e)))return e;if(ko(e)){if(Vn(e)&&Ao(e)&&(e=e.parentNode),n=e.previousSibling,Hs(n))return n;if(n=e.nextSibling,Hs(n))return n}},Gs=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(Hs(r)||"IMG"===o)return{name:o,index:js(n.dom,o,r)};var a=function(e){return qs(e.startContainer,e.startOffset)||qs(e.endContainer,e.endOffset)}(i);return a?{name:o=a.tagName,index:js(n.dom,o,a)}:function(e,t,n,r){var o=t.dom,i={};return i.start=$s(o,e,n,r,!0),t.isCollapsed()||(i.end=$s(o,e,n,r,!1)),i}(e,n,t,i)},Xs=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Ks=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),u=a.nodeName;if("IMG"===u)return{name:u,index:js(n,u,a)};var s=Ws(r.cloneRange());if(!i){s.collapse(!1);var c=Xs(n,o+"_end",t);Bs(n,s,c)}(r=Ws(r)).collapse(!0);var l=Xs(n,o+"_start",t);return Bs(n,r,l),e.moveToBookmark({id:o,keep:!0}),{id:o}},Ys=function(e,t,n){return 2===t?Gs(_o,n,e):3===t?function(e){var t=e.getRng();return{start:zs(e.dom.getRoot(),Ds.fromRangeStart(t)),end:zs(e.dom.getRoot(),Ds.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):Ks(e,!1)},Js=S(Gs,_,!0),Qs=mu.DOM,Zs=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r},ec=function(e){return e.getParam("content_security_policy","")},tc=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},nc=function(e){return e.getParam("forced_root_block_attrs",{})},rc=function(e){return e.getParam("automatic_uploads",!0,"boolean")},oc=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},ic=function(e){return e.getParam("icons","","string")},ac=function(e){return e.getParam("images_upload_url","","string")},uc=function(e){return e.getParam("images_upload_base_path","","string")},sc=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},cc=function(e){return e.getParam("images_upload_handler",null,"function")},lc=function(e){return e.getParam("content_css_cors",!1,"boolean")},fc=function(e){return e.getParam("referrer_policy","","string")},dc=function(e){return e.getParam("language","en","string")},pc=function(e){return e.getParam("indent_use_margin",!1)},hc=function(e){var t=e.getParam("font_css",[]);return d(t)?t:U(t.split(","),He)},mc=function(e){var t=e.getParam("object_resizing");return!1!==t&&!_t.iOS&&(l(t)?t:"table,img,figure.image,div,video,iframe")},gc=function(e){return e.getParam("event_root")},vc=function(e){return e.getParam("theme")},yc=function(e){return e.getParam("validate")},bc=function(e){return!1!==e.getParam("inline_boundaries")},Cc=function(e){return e.getParam("content_css_cors")},xc=function(e){return e.getParam("plugins","","string")},wc=Nn,_c=Vn,Sc=function(e){var t=e.parentNode;t&&t.removeChild(e)},Ec=function(e){var t=_o(e);return{count:e.length-t.length,text:t}},Ac=function(e){for(var t;-1!==(t=e.data.lastIndexOf(xo));)e.deleteData(t,1)},Dc=function(e,t){return Bc(e),t},kc=function(e,t){var n=t.container(),r=function(e,t){var n=H(e,t);return-1===n?R.none():R.some(n)}(ie(n.childNodes),e).map((function(e){return e<t.offset()?Ds(n,t.offset()-1):t})).getOr(t);return Bc(e),r},Tc=function(e,t){return _c(e)&&t.container()===e?function(e,t){var n=Ec(e.data.substr(0,t.offset())),r=Ec(e.data.substr(t.offset()));return(n.text+r.text).length>0?(Ac(e),Ds(e,t.offset()-n.count)):t}(e,t):Dc(e,t)},Oc=function(e,t){return Ds.isTextPosition(t)?Tc(e,t):function(e,t){return t.container()===e.parentNode?kc(e,t):Dc(e,t)}(e,t)},Bc=function(e){wc(e)&&ko(e)&&(To(e)?e.removeAttribute("data-mce-caret"):Sc(e)),_c(e)&&(Ac(e),0===e.data.length&&Sc(e))},Nc=ht().browser,Fc=Gn,Mc=Kn,Pc=Xn,Ic=function(e,t,n){var r,o,i,a,u,s=ts(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,o=e.scrollLeft||r.scrollLeft,i=e.scrollTop||r.scrollTop):(u=e.getBoundingClientRect(),o=e.scrollLeft-u.left,i=e.scrollTop-u.top),s.left+=o,s.right+=o,s.top+=i,s.bottom+=i,s.width=1,(a=t.offsetWidth-t.clientWidth)>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},Rc=function(e,t,n,r){var o,i,a=Cu(R.none()),u=tc(e),s=u.length>0?u:"p",c=function(){!function(e){for(var t=Iu(Ot.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),n=0;n<t.length;n++){var r,o=t[n].dom,i=o.previousSibling;Mo(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(r.length-1,1)),i=o.nextSibling,Fo(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}}(t),i&&(Bc(i),i=null),a.get().each((function(e){su(e.caret).remove(),a.set(R.none())})),o&&(oo.clearInterval(o),o=null)},l=function(){o=oo.setInterval((function(){r()?su("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):su("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")}),500)};return{show:function(e,r){var o,u;if(c(),Pc(r))return null;if(!n(r))return i=function(e,t){var n,r=e.ownerDocument.createTextNode(xo),o=e.parentNode;if(t){if(n=e.previousSibling,Eo(n)){if(ko(n))return n;if(Mo(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,Eo(n)){if(ko(n))return n;if(Fo(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r}(r,e),u=r.ownerDocument.createRange(),zc(i.nextSibling)?(u.setStart(i,0),u.setEnd(i,0)):(u.setStart(i,1),u.setEnd(i,1)),u;i=No(s,r,e),o=Ic(t,r,e),su(i).css("top",o.top);var f=su('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(o).appendTo(t)[0];return a.set(R.some({caret:f,element:r,before:e})),a.get().each((function(t){e&&su(t.caret).addClass("mce-visual-caret-before")})),l(),(u=r.ownerDocument.createRange()).setStart(i,0),u.setEnd(i,0),u},hide:c,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.get().each((function(e){var n=Ic(t,e.element,e.before);su(e.caret).css(De({},n))}))},destroy:function(){return oo.clearInterval(o)}}},Lc=function(){return Nc.isIE()||Nc.isEdge()||Nc.isFirefox()},zc=function(e){return Fc(e)||Mc(e)},Vc=function(e){return zc(e)||Rn(e)&&Lc()},Hc=Gn,$c=Kn,jc=Mn("display","block table table-cell table-caption list-item"),Uc=ko,Wc=Ao,qc=Nn,Gc=Uo,Xc=function(e){return e>0},Kc=function(e){return e<0},Yc=function(e,t){for(var n;n=e(t);)if(!Wc(n))return n;return null},Jc=function(e,t,n,r,o){var i=new uo(e,r),a=Hc(e)||Wc(e);if(Kc(t)){if(a&&n(e=Yc(i.prev.bind(i),!0)))return e;for(;e=Yc(i.prev.bind(i),o);)if(n(e))return e}if(Xc(t)){if(a&&n(e=Yc(i.next.bind(i),!0)))return e;for(;e=Yc(i.next.bind(i),o);)if(n(e))return e}return null},Qc=function(e,t){for(;e&&e!==t;){if(jc(e))return e;e=e.parentNode}return null},Zc=function(e,t,n){return Qc(e.container(),n)===Qc(t.container(),n)},el=function(e,t){if(!t)return null;var n=t.container(),r=t.offset();return qc(n)?n.childNodes[r+e]:null},tl=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},nl=function(e,t,n){return Qc(t,e)===Qc(n,e)},rl=function(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],Uc(r)&&(r=r[o]),Hc(r)||$c(r)){if(nl(t,r,n))return r;break}if(Gc(r))break;n=n.parentNode}return null},ol=S(tl,!0),il=S(tl,!1),al=function(e,t,n){var r,o,i,a=S(rl,!0,t),u=S(rl,!1,t);o=n.startContainer;var s=n.startOffset;if(Ao(o)){if(qc(o)||(o=o.parentNode),"before"===(i=o.getAttribute("data-mce-caret"))&&(r=o.nextSibling,Vc(r)))return ol(r);if("after"===i&&(r=o.previousSibling,Vc(r)))return il(r)}if(!n.collapsed)return n;if(Vn(o)){if(Uc(o)){if(1===e){if(r=u(o))return ol(r);if(r=a(o))return il(r)}if(-1===e){if(r=a(o))return il(r);if(r=u(o))return ol(r)}return n}if(Mo(o)&&s>=o.data.length-1)return 1===e&&(r=u(o))?ol(r):n;if(Fo(o)&&s<=1)return-1===e&&(r=a(o))?il(r):n;if(s===o.data.length)return(r=u(o))?ol(r):n;if(0===s)return(r=a(o))?il(r):n}return n},ul=function(e,t){return R.from(el(e?0:-1,t)).filter(Hc)},sl=function(e,t,n){var r=al(e,t,n);return-1===e?Ds.fromRangeStart(r):Ds.fromRangeEnd(r)},cl=function(e){return R.from(e.getNode()).map(Ot.fromDom)},ll=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},fl=function(e,t){var n=Zc(e,t);return!(n||!Un(e.getNode()))||n};(Ts=ks||(ks={}))[Ts.Backwards=-1]="Backwards",Ts[Ts.Forwards=1]="Forwards";var dl,pl,hl,ml,gl=Gn,vl=Vn,yl=Nn,bl=Un,Cl=Uo,xl=function(e){return Ho(e)||function(e){return!!Wo(e)&&!0!==K(ie(e.getElementsByTagName("*")),(function(e,t){return e||Io(t)}),!1)}(e)},wl=qo,_l=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Sl=function(e,t){if(Xc(e)){if(Cl(t.previousSibling)&&!vl(t.previousSibling))return Ds.before(t);if(vl(t))return Ds(t,0)}if(Kc(e)){if(Cl(t.nextSibling)&&!vl(t.nextSibling))return Ds.after(t);if(vl(t))return Ds(t,t.data.length)}return Kc(e)?bl(t)?Ds.before(t):Ds.after(t):Ds.before(t)},El=function(e,t,n){var r,o,i,a;if(!yl(n)||!t)return null;if(t.isEqual(Ds.after(n))&&n.lastChild){if(a=Ds.after(n.lastChild),Kc(e)&&Cl(n.lastChild)&&yl(n.lastChild))return bl(n.lastChild)?Ds.before(n.lastChild):a}else a=t;var u=a.container(),s=a.offset();if(vl(u)){if(Kc(e)&&s>0)return Ds(u,--s);if(Xc(e)&&s<u.length)return Ds(u,++s);r=u}else{if(Kc(e)&&s>0&&(o=_l(u,s-1),Cl(o)))return!xl(o)&&(i=Jc(o,e,wl,o))?vl(i)?Ds(i,i.data.length):Ds.after(i):vl(o)?Ds(o,o.data.length):Ds.before(o);if(Xc(e)&&s<u.childNodes.length&&(o=_l(u,s),Cl(o)))return bl(o)?function(e,t){var n=t.nextSibling;return n&&Cl(n)?vl(n)?Ds(n,0):Ds.before(n):El(ks.Forwards,Ds.after(t),e)}(n,o):!xl(o)&&(i=Jc(o,e,wl,o))?vl(i)?Ds(i,0):Ds.before(i):vl(o)?Ds(o,0):Ds.after(o);r=o||a.getNode()}if((Xc(e)&&a.isAtEnd()||Kc(e)&&a.isAtStart())&&(r=Jc(r,e,F,n,!0),wl(r,n)))return Sl(e,r);o=Jc(r,e,wl,n);var c=Ae(G(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(u,n),gl));return!c||o&&c.contains(o)?o?Sl(e,o):null:a=Xc(e)?Ds.after(c):Ds.before(c)},Al=function(e){return{next:function(t){return El(ks.Forwards,t,e)},prev:function(t){return El(ks.Backwards,t,e)}}},Dl=function(e){return Ds.isTextPosition(e)?0===e.offset():Uo(e.getNode())},kl=function(e){if(Ds.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Uo(e.getNode(!0))},Tl=function(e,t){return!Ds.isTextPosition(e)&&!Ds.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Ol=function(e,t,n){return e?!Tl(t,n)&&(r=t,!(!Ds.isTextPosition(r)&&Un(r.getNode())))&&kl(t)&&Dl(n):!Tl(n,t)&&Dl(t)&&kl(n);var r},Bl=function(e,t,n){var r=Al(t);return R.from(e?r.next(n):r.prev(n))},Nl=function(e,t,n){return Bl(e,t,n).bind((function(r){return Zc(n,r,t)&&Ol(e,n,r)?Bl(e,t,r):R.some(r)}))},Fl=function(e,t,n,r){return Nl(e,t,n).bind((function(n){return r(n)?Fl(e,t,n,r):R.some(n)}))},Ml=function(e,t){var n,r=e?t.firstChild:t.lastChild;return Vn(r)?R.some(Ds(r,e?0:r.data.length)):r?Uo(r)?R.some(e?Ds.before(r):Un(n=r)?Ds.before(n):Ds.after(n)):function(e,t,n){var r=e?Ds.before(n):Ds.after(n);return Bl(e,t,r)}(e,t,r):R.none()},Pl=S(Bl,!0),Il=S(Bl,!1),Rl=S(Ml,!0),Ll=S(Ml,!1),zl="_mce_caret",Vl=function(e){return Nn(e)&&e.id===zl},Hl=function(e,t){for(;t&&t!==e;){if(t.id===zl)return t;t=t.parentNode}return null},$l=function(e,t){return Nn(t)&&e.isBlock(t)&&!t.innerHTML&&!_t.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},jl=function(e,t){return Ll(e).fold(N,(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},Ul=function(e,t,n){return!(!function(e){return!1===e.hasChildNodes()}(t)||!Hl(e,t)||(function(e,t){var n=e.ownerDocument.createTextNode(xo);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),0))},Wl=function(e,t,n,r){var o,i,a,u,s=n[t?"start":"end"],c=e.getRoot();if(s){for(a=s[0],i=c,o=s.length-1;o>=1;o--){if(u=i.childNodes,Ul(c,i,r))return!0;if(s[o]>u.length-1)return!!Ul(c,i,r)||jl(i,r);i=u[s[o]]}3===i.nodeType&&(a=Math.min(s[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(s[0],i.childNodes.length)),t?r.setStart(i,a):r.setEnd(i,a)}return!0},ql=function(e){return Vn(e)&&e.data.length>0},Gl=function(e,t,n){var r,o,i,a,u,s,c=e.get(n.id+"_"+t),l=n.keep;if(c){if(r=c.parentNode,"start"===t?(l?c.hasChildNodes()?(r=c.firstChild,o=1):ql(c.nextSibling)?(r=c.nextSibling,o=0):ql(c.previousSibling)?(r=c.previousSibling,o=c.previousSibling.data.length):(r=c.parentNode,o=e.nodeIndex(c)+1):o=e.nodeIndex(c),u=r,s=o):(l?c.hasChildNodes()?(r=c.firstChild,o=1):ql(c.previousSibling)?(r=c.previousSibling,o=c.previousSibling.data.length):(r=c.parentNode,o=e.nodeIndex(c)):o=e.nodeIndex(c),u=r,s=o),!l){for(a=c.previousSibling,i=c.nextSibling,kt.each(kt.grep(c.childNodes),(function(e){Vn(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));c=e.get(n.id+"_"+t);)e.remove(c,!0);a&&i&&a.nodeType===i.nodeType&&Vn(a)&&!_t.opera&&(o=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),u=a,s=o)}return R.some(Ds(u,s))}return R.none()},Xl=function(e,t){var n=e.dom;if(t){if(function(e){return kt.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return Wl(e,!0,t,n)&&Wl(e,!1,t,n)?R.some(n):R.none()}(n,t);if(function(e){return l(e.start)}(t))return R.some(function(e,t){var n,r=e.createRng();return n=Vs(e.getRoot(),t.start),r.setStart(n.container(),n.offset()),n=Vs(e.getRoot(),t.end),r.setEnd(n.container(),n.offset()),r}(n,t));if(function(e){return e.hasOwnProperty("id")}(t))return function(e,t){var n=Gl(e,"start",t),r=Gl(e,"end",t);return Qu(n,r.or(n),(function(t,n){var r=e.createRng();return r.setStart($l(e,t.container()),t.offset()),r.setEnd($l(e,n.container()),n.offset()),r}))}(n,t);if(function(e){return e.hasOwnProperty("name")}(t))return function(e,t){return R.from(e.select(t.name)[t.index]).map((function(t){var n=e.createRng();return n.selectNode(t),n}))}(n,t);if(function(e){return e.hasOwnProperty("rng")}(t))return R.some(t.rng)}return R.none()},Kl=function(e,t,n){return Ys(e,t,n)},Yl=function(e,t){Xl(e,t).each((function(t){e.setRng(t)}))},Jl=function(e){return Nn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Ql=(dl=Co,function(e){return dl===e}),Zl=function(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},ef=function(e){return!Zl(e)&&!Ql(e)},tf=function(e){return!!e.nodeType},nf=function(e,t,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===u.nodeType)for(a<(i=u.childNodes).length?(u=i[a],r=new uo(u,e.getParent(u,e.isBlock))):(u=i[i.length-1],(r=new uo(u,e.getParent(u,e.isBlock))).next(!0)),o=r.current();o;o=r.next())if(3===o.nodeType&&!uf(o))return n.setStart(o,0),void t.setRng(n)},rf=function(e,t,n){if(e){var r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(1===e.nodeType||!uf(e))return e}},of=function(e,t){return tf(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},af=function(e,t,n){return e.schema.isValidChild(t,n)},uf=function(e,t){if(void 0===t&&(t=!1),v(e)&&Vn(e)){var n=t?e.data.replace(/ /g,""):e.data;return Xo(n)}return!1},sf=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e},cf=function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},lf=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},ff=function(e,t,n){return lf(e,e.getStyle(t,n),n)},df=function(e,t){var n;return e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n})),n},pf=function(e,t,n){return e.getParents(t,n,e.getRoot())},hf=function(e,t,n){var r=["inline","block","selector","attributes","styles","classes"],o=function(e){return he(e,(function(e,t){return j(r,(function(e){return e===t}))}))};return j(e.formatter.get(t),(function(t){var r=o(t);return j(e.formatter.get(n),(function(e){var t=o(e);return function(e,t,n){return void 0===n&&(n=a),i(n).eq(e,t)}(r,t)}))}))},mf=function(e){return ye(e,"block")},gf=function(e){return ye(e,"selector")},vf=function(e){return ye(e,"inline")},yf=function(e,t){return j(t.childNodes,e.isBlock)},bf=Jl,Cf=pf,xf=uf,wf=of,_f=function(e,t){for(var n=t;n;){if(Nn(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Sf=function(e,t,n,r){for(var o=t.data,i=n;e?i>=0:i<o.length;e?i--:i++)if(r(o.charAt(i)))return e?i+1:i;return-1},Ef=function(e,t,n){return Sf(e,t,n,(function(e){return Ql(e)||Zl(e)}))},Af=function(e,t,n){return Sf(e,t,n,ef)},Df=function(e,t,n,r,o,i){var a,u=e.getParent(n,e.isBlock)||t,s=function(t,n,r){var i=Ju(e),s=o?i.backwards:i.forwards;return R.from(s(t,n,(function(e,t){return bf(e.parentNode)?-1:(a=e,r(o,e,t))}),u))};return s(n,r,Ef).bind((function(e){return i?s(e.container,e.offset+(o?-1:0),Af):R.some(e)})).orThunk((function(){return a?R.some({container:a,offset:o?0:a.length}):R.none()}))},kf=function(e,t,n,r,o){Vn(r)&&0===r.nodeValue.length&&r[o]&&(r=r[o]);for(var i=Cf(e,r),a=0;a<i.length;a++)for(var u=0;u<t.length;u++){var s=t[u];if((!("collapsed"in s)||s.collapsed===n.collapsed)&&e.is(i[a],s.selector))return i[a]}return r},Tf=function(e,t,n,r){var o,i=e.dom,a=i.getRoot();if(t[0].wrapper||(o=i.getParent(n,t[0].block,a)),!o){var u=i.getParent(n,"LI,TD,TH");o=i.getParent(Vn(n)?n.parentNode:n,(function(t){return t!==a&&wf(e,t)}),u)}if(o&&t[0].wrapper&&(o=Cf(i,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!i.isBlock(o[r])&&(o=o[r],!cf(o,"br")););return o||n},Of=function(e,t,n,r){var o=n.parentNode;return!v(n[r])&&(!(o!==t&&!g(o)&&!e.isBlock(o))||Of(e,t,o,r))},Bf=function(e,t,n,r,o){var i,a,u=n,s=o?"previousSibling":"nextSibling",c=e.getRoot();if(Vn(n)&&!xf(n)&&(o?r>0:r<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(i=u[s];i;i=i[s]){var l=Vn(i)&&!Of(e,c,i,s);if(!bf(i)&&(!Un(a=i)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!xf(i,l))return u}if(u===c||u.parentNode===c){n=u;break}u=u.parentNode}return n},Nf=function(e){return bf(e.parentNode)||bf(e)},Ff=function(e,t,n,r){void 0===r&&(r=!1);var o=t.startContainer,i=t.startOffset,a=t.endContainer,u=t.endOffset,s=e.dom;return Nn(o)&&o.hasChildNodes()&&(o=us(o,i),Vn(o)&&(i=0)),Nn(a)&&a.hasChildNodes()&&(a=us(a,t.collapsed?u:u-1),Vn(a)&&(u=a.nodeValue.length)),o=_f(s,o),a=_f(s,a),Nf(o)&&(o=bf(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,Vn(o)&&(i=t.collapsed?o.length:0)),Nf(a)&&(a=bf(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,Vn(a)&&(u=t.collapsed?0:a.length)),t.collapsed&&(Df(s,e.getBody(),o,i,!0,r).each((function(e){var t=e.container,n=e.offset;o=t,i=n})),Df(s,e.getBody(),a,u,!1,r).each((function(e){var t=e.container,n=e.offset;a=t,u=n}))),(n[0].inline||n[0].block_expand)&&(n[0].inline&&Vn(o)&&0!==i||(o=Bf(s,n,o,i,!0)),n[0].inline&&Vn(a)&&u!==a.nodeValue.length||(a=Bf(s,n,a,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=kf(s,n,t,o,"previousSibling"),a=kf(s,n,t,a,"nextSibling")),(n[0].block||n[0].selector)&&(o=Tf(e,n,o,"previousSibling"),a=Tf(e,n,a,"nextSibling"),n[0].block&&(s.isBlock(o)||(o=Bf(s,n,o,i,!0)),s.isBlock(a)||(a=Bf(s,n,a,u,!1)))),Nn(o)&&(i=s.nodeIndex(o),o=o.parentNode),Nn(a)&&(u=s.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:i,endContainer:a,endOffset:u}},Mf=function(e,t){var n=e.childNodes;return t>=n.length?t=n.length-1:t<0&&(t=0),n[t]||e},Pf=function(e,t,n){var r=t.startContainer,o=t.startOffset,i=t.endContainer,a=t.endOffset,u=function(e){var t;return 3===(t=e[0]).nodeType&&t===r&&o>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===a&&e.length>0&&t===i&&3===t.nodeType&&e.splice(e.length-1,1),e},s=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},c=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},l=function(e,t,r){for(var o=r?"nextSibling":"previousSibling",i=e,a=i.parentNode;i&&i!==t;i=a){a=i.parentNode;var c=s(i===e?i:i[o],o);c.length&&(r||c.reverse(),n(u(c)))}};if(1===r.nodeType&&r.hasChildNodes()&&(r=Mf(r,o)),1===i.nodeType&&i.hasChildNodes()&&(i=Mf(i,a-1)),r===i)return n(u([r]));for(var f=e.findCommonAncestor(r,i),d=r;d;d=d.parentNode){if(d===i)return l(r,f,!0);if(d===f)break}for(d=i;d;d=d.parentNode){if(d===r)return l(i,f);if(d===f)break}var p=c(r,f)||r,h=c(i,f)||i;l(r,p,!0);var m=s(p===r?p:p.nextSibling,"nextSibling",h===i?h.nextSibling:h);m.length&&n(u(m)),l(i,h)},If=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Rf=function(e){return G(function(e){return Q(e,(function(e){var t=as(e);return t?[Ot.fromDom(t)]:[]}))}(e),yo)},Lf=function(e,t){var n=Iu(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Rf(e)},zf=function(e){return Lf(If(e.selection.getSel()),Ot.fromDom(e.getBody()))},Vf=function(e){return nn(e).fold(w([e]),(function(t){return[e].concat(Vf(t))}))},Hf=function(e){return rn(e).fold(w([e]),(function(t){return"br"===zt(t)?Yt(t).map((function(t){return[e].concat(Hf(t))})).getOr([]):[e].concat(Hf(t))}))},$f=function(e,t){return Qu(function(e){var t=e.startContainer,n=e.startOffset;return Vn(t)?0===n?R.some(Ot.fromDom(t)):R.none():R.from(t.childNodes[n]).map(Ot.fromDom)}(t),function(e){var t=e.endContainer,n=e.endOffset;return Vn(t)?n===t.data.length?R.some(Ot.fromDom(t)):R.none():R.from(t.childNodes[n-1]).map(Ot.fromDom)}(t),(function(t,n){var r=Y(Vf(e),S(Mt,t)),o=Y(Hf(e),S(Mt,n));return r.isSome()&&o.isSome()})).getOr(!1)},jf=function(e,t,n,r){var o=n,i=new uo(n,o),a=he(e.schema.getMoveCaretBeforeOnEnterElements(),(function(e,t){return!$(["td","th","table"],t.toLowerCase())}));do{if(Vn(n)&&0!==kt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Uf=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},Wf=function(e,t){var n=zf(e);n.length>0?W(n,(function(n){var r=n.dom,o=e.dom.createRng();o.setStartBefore(r),o.setEndAfter(r),t(o,!0)})):t(e.selection.getRng(),!1)},qf=function(e,t,n){var r=Ks(e,t);n(r),e.moveToBookmark(r)},Gf=(pl=jt,hl="text",{get:function(e){if(!pl(e))throw new Error("Can only get "+hl+" value of a "+hl+" node");return ml(e).getOr("")},getOption:ml=function(e){return pl(e)?R.from(e.dom.nodeValue):R.none()},set:function(e,t){if(!pl(e))throw new Error("Can only set raw "+hl+" value of a "+hl+" node");e.dom.nodeValue=t}}),Xf=function(e){return Gf.get(e)},Kf=function(e,t,n,r){return Kt(t).fold((function(){return"skipping"}),(function(o){return"br"===r||function(e){return jt(e)&&Xf(e)===xo}(t)?"valid":function(e){return $t(e)&&Mu(e,Ru())}(t)?"existing":Vl(t.dom)?"caret":af(e,n,r)&&af(e,zt(o),n)?"valid":"invalid-child"}))},Yf=function(e,t,n,r){var o=t.uid,i=void 0===o?Wu("mce-annotation"):o,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["uid"]),u=Ot.fromTag("span",e);Nu(u,Ru()),Qn(u,""+zu(),i),Qn(u,""+Lu(),n);var s=r(i,a),c=s.attributes,l=void 0===c?{}:c,f=s.classes,d=void 0===f?[]:f;return Zn(u,l),function(e,t){W(t,(function(t){Nu(e,t)}))}(u,d),u},Jf=function(e,t,n,r,o){var i=[],a=Yf(e.getDoc(),o,n,r),u=Cu(R.none()),s=function(){u.set(R.none())},c=function(e){W(e,l)},l=function(t){switch(Kf(e,t,"span",zt(t))){case"invalid-child":s();var n=en(t);c(n),s();break;case"valid":!function(e,t){dn(e,t),mn(t,e)}(t,u.get().getOrThunk((function(){var e=Xu(a);return i.push(e),u.set(R.some(e)),e})))}};return Pf(e.dom,t,(function(e){s(),function(e){var t=U(e,Ot.fromDom);c(t)}(e)})),i},Qf=function(e,t,n,r){e.undoManager.transact((function(){var o=e.selection,i=o.getRng(),a=zf(e).length>0;if(i.collapsed&&!a&&function(e,t){var n=Ff(e,t,[{inline:!0}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,i),o.getRng().collapsed&&!a){var u=Yf(e.getDoc(),r,t,n.decorate);qu(u,Co),o.getRng().insertNode(u.dom),o.select(u.dom)}else qf(o,!1,(function(){Wf(e,(function(o){Jf(e,o,t,n.decorate,r)}))}))}))},Zf=function(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?R.from(t[e]).map((function(e){return e.settings})):R.none()}});ju(e,n);var r=$u(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,r){n.lookup(t).each((function(n){Qf(e,t,n,r)}))},annotationChanged:function(e,t){r.addListener(e,t)},remove:function(t){Vu(e,R.some(t)).each((function(e){var t=e.elements;W(t,bn)}))},getAll:function(t){var n=function(e,t){var n=Ot.fromDom(e.getBody()),r=Iu(n,"["+Lu()+'="'+t+'"]'),o={};return W(r,(function(e){var t=er(e,zu()),n=o.hasOwnProperty(t)?o[t]:[];o[t]=n.concat([e])})),o}(e,t);return ce(n,(function(e){return U(e,(function(e){return e.dom}))}))}}},ed=function(e){return{getBookmark:S(Kl,e),moveToBookmark:S(Yl,e)}};ed.isBookmarkNode=Jl;var td=function(e,t){for(;t&&t!==e;){if(qn(t)||Gn(t))return t;t=t.parentNode}return null},nd=function(e,t,n){if(n.collapsed)return!1;if(_t.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(Nn(r))return j(r.getClientRects(),(function(n){return is(n,e,t)}))}return j(n.getClientRects(),(function(n){return is(n,e,t)}))},rd=function(e,t,n){return e.fire(t,n)},od={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||od.metaKeyPressed(e)},metaKeyPressed:function(e){return _t.mac?e.metaKey:e.ctrlKey&&!e.altKey}},id=Gn,ad=function(e,t){var n,r,o,i,a,u,s,c,l,f,d,p,h,m,g,y="data-mce-selected",b=t.dom,C=kt.each,x=t.getDoc(),w=document,_=Math.abs,S=Math.round,E=t.getBody(),A={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},D=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},k=function(e){return Kn(e)||b.hasClass(e,"mce-preview-object")},T=function(e){var n=e.target;(function(e,t){if("longpress"===e.type||0===e.type.indexOf("touch")){var n=e.touches[0];return D(e.target)&&!nd(n.clientX,n.clientY,t)}return D(e.target)&&!nd(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},O=function(e){return b.is(e,"figure.image")?[e.querySelector("img")]:b.hasClass(e,"mce-preview-object")&&v(e.firstElementChild)?[e,e.firstElementChild]:[e]},B=function(e){var n=mc(t);return!!n&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(b.hasClass(e,"mce-preview-object")?Nt(Ot.fromDom(e.firstElementChild),n):Nt(Ot.fromDom(e),n))},N=function(e,n,r){if(v(r)){var o=O(e);W(o,(function(e){e.style[n]||!t.schema.isValid(e.nodeName.toLowerCase(),n)?b.setStyle(e,n,r):b.setAttrib(e,n,""+r)}))}},F=function(e,t,n){N(e,"width",t),N(e,"height",n)},M=function(e){var a,v,y,C;a=e.screenX-u,v=e.screenY-s,p=a*i[2]+c,h=v*i[3]+l,p=p<5?5:p,h=h<5?5:h,((D(n)||k(n))&&!1!==function(e){return e.getParam("resize_img_proportional",!0,"boolean")}(t)?!od.modifierPressed(e):od.modifierPressed(e))&&(_(a)>_(v)?(h=S(p*f),p=S(h/f)):(p=S(h/f),h=S(p*f))),F(r,p,h),y=(y=i.startPos.x+a)>0?y:0,C=(C=i.startPos.y+v)>0?C:0,b.setStyles(o,{left:y,top:C,display:"block"}),o.innerHTML=p+" &times; "+h,i[2]<0&&r.clientWidth<=p&&b.setStyle(r,"left",void 0+(c-p)),i[3]<0&&r.clientHeight<=h&&b.setStyle(r,"top",void 0+(l-h)),(a=E.scrollWidth-m)+(v=E.scrollHeight-g)!=0&&b.setStyles(o,{left:y-a,top:C-v}),d||(function(e,t,n,r,o){e.fire("ObjectResizeStart",{target:t,width:n,height:r,origin:o})}(t,n,c,l,"corner-"+i.name),d=!0)},P=function(){var e=d;d=!1,e&&(N(n,"width",p),N(n,"height",h)),b.unbind(x,"mousemove",M),b.unbind(x,"mouseup",P),w!==x&&(b.unbind(w,"mousemove",M),b.unbind(w,"mouseup",P)),b.remove(r),b.remove(o),b.remove(a),I(n),e&&(function(e,t,n,r,o){e.fire("ObjectResized",{target:t,width:n,height:r,origin:o})}(t,n,p,h,"corner-"+i.name),b.setAttrib(n,"style",b.getAttrib(n,"style"))),t.nodeChanged()},I=function(e){V();var d=b.getPos(e,E),v=d.x,_=d.y,S=e.getBoundingClientRect(),D=S.width||S.right-S.left,T=S.height||S.bottom-S.top;n!==e&&(R(),n=e,p=h=0);var N=t.fire("ObjectSelected",{target:e}),I=b.getAttrib(n,y,"1");B(e)&&!N.isDefaultPrevented()?C(A,(function(e,t){var d,p=function(d){var p,h=O(n)[0];u=d.screenX,s=d.screenY,c=h.clientWidth,l=h.clientHeight,f=l/c,(i=e).name=t,i.startPos={x:D*e[0]+v,y:T*e[1]+_},m=E.scrollWidth,g=E.scrollHeight,a=b.add(E,"div",{class:"mce-resize-backdrop"}),b.setStyles(a,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),r=k(p=n)?b.create("img",{src:_t.transparentSrc}):p.cloneNode(!0),b.addClass(r,"mce-clonedresizable"),b.setAttrib(r,"data-mce-bogus","all"),r.contentEditable="false",b.setStyles(r,{left:v,top:_,margin:0}),F(r,D,T),r.removeAttribute(y),E.appendChild(r),b.bind(x,"mousemove",M),b.bind(x,"mouseup",P),w!==x&&(b.bind(w,"mousemove",M),b.bind(w,"mouseup",P)),o=b.add(E,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},c+" &times; "+l)};(d=b.get("mceResizeHandle"+t))&&b.remove(d),d=b.add(E,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===_t.ie&&(d.contentEditable=!1),b.bind(d,"mousedown",(function(e){e.stopImmediatePropagation(),e.preventDefault(),p(e)})),e.elm=d,b.setStyles(d,{left:D*e[0]+v-d.offsetWidth/2,top:T*e[1]+_-d.offsetHeight/2})})):R(),b.getAttrib(n,y)||n.setAttribute(y,I)},R=function(){V(),n&&n.removeAttribute(y),se(A,(function(e,t){var n=b.get("mceResizeHandle"+t);n&&(b.unbind(n),b.remove(n))}))},L=function(n){var r,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};d||t.removed||(C(b.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute(y)})),r="mousedown"===n.type?n.target:e.getNode(),o(r=b.$(r).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],E)&&(H(),o(e.getStart(!0),r)&&o(e.getEnd(!0),r))?I(r):R())},z=function(e){return id(td(t.getBody(),e))},V=function(){se(A,(function(e){e.elm&&(b.unbind(e.elm),delete e.elm)}))},H=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return t.on("init",(function(){if(H(),_t.browser.isIE()||_t.browser.isEdge()){t.on("mousedown click",(function(e){var n=e.target,r=n.nodeName;d||!/^(TABLE|IMG|HR)$/.test(r)||z(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}));var e=function(e){var n=function(e){oo.setEditorTimeout(t,(function(){return t.selection.select(e)}))};if(z(e.target)||Kn(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))};b.bind(E,"mscontrolselect",e),t.on("remove",(function(){return b.unbind(E,"mscontrolselect",e)}))}var r=oo.throttle((function(e){t.composing||L(e)}));t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",r),t.on("keyup compositionend",(function(e){n&&"TABLE"===n.nodeName&&r(e)})),t.on("hide blur",R),t.on("contextmenu longpress",T,!0)})),t.on("remove",V),{isResizable:B,showResizeRect:I,hideResizeRect:R,updateResizeRect:L,destroy:function(){n=r=a=null}}},ud=function(e){return qn(e)||Gn(e)},sd=function(e,t,n){var r,o,i=n;if(i.caretPositionFromPoint)(o=i.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(a){r=function(e,t,n){var r,o=n.elementFromPoint(e,t),i=n.body.createTextRange();if(o&&"HTML"!==o.tagName||(o=n.body),i.moveToElementText(o),(r=(r=kt.toArray(i.getClientRects())).sort((function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))}))).length>0){t=(r[0].bottom+r[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(a){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return Gn(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,ud))?null:e}(r,n.body)}return r},cd=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},ld=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},fd=function(e,t,n){return ld(e,t,(function(e){return e.nodeName===n}))},dd=function(e){return e&&"TABLE"===e.nodeName},pd=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},hd=function(e,t){return ko(e)&&!1===ld(e,t,Vl)},md=function(e,t,n){for(var r=new uo(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Un(t))return!0},gd=function(e,t,n,r,o){var i,a,u=e.getRoot(),s=e.schema.getNonEmptyElements(),c=e.getParent(o.parentNode,e.isBlock)||u;if(r&&Un(o)&&t&&e.isEmpty(c))return R.some(Ds(o.parentNode,e.nodeIndex(o)));for(var l=new uo(o,c);a=l[r?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||hd(a,u))return R.none();if(Vn(a)&&a.nodeValue.length>0)return!1===fd(a,u,"A")?R.some(Ds(a,r?a.nodeValue.length:0)):R.none();if(e.isBlock(a)||s[a.nodeName.toLowerCase()])return R.none();i=a}return n&&i?R.some(Ds(i,0)):R.none()},vd=function(e,t,n,r){var o,i,a,u,s=e.getRoot(),c=!1;o=r[(n?"start":"end")+"Container"],i=r[(n?"start":"end")+"Offset"];var l=Nn(o)&&i===o.childNodes.length,f=e.schema.getNonEmptyElements();if(u=n,ko(o))return R.none();if(Nn(o)&&i>o.childNodes.length-1&&(u=!1),$n(o)&&(o=s,i=0),o===s){if(u&&(a=o.childNodes[i>0?i-1:0])){if(ko(a))return R.none();if(f[a.nodeName]||dd(a))return R.none()}if(o.hasChildNodes()){if(i=Math.min(!u&&i>0?i-1:i,o.childNodes.length-1),o=o.childNodes[i],i=Vn(o)&&l?o.data.length:0,!t&&o===s.lastChild&&dd(o))return R.none();if(function(e,t){for(;t&&t!==e;){if(Gn(t))return!0;t=t.parentNode}return!1}(s,o)||ko(o))return R.none();if(o.hasChildNodes()&&!1===dd(o)){a=o;var d=new uo(o,s);do{if(Gn(a)||ko(a)){c=!1;break}if(Vn(a)&&a.nodeValue.length>0){i=u?0:a.nodeValue.length,o=a,c=!0;break}if(f[a.nodeName.toLowerCase()]&&!pd(a)){i=e.nodeIndex(a),o=a.parentNode,u||i++,c=!0;break}}while(a=u?d.next():d.prev())}}}return t&&(Vn(o)&&0===i&&gd(e,l,t,!0,o).each((function(e){o=e.container(),i=e.offset(),c=!0})),Nn(o)&&((a=o.childNodes[i])||(a=o.childNodes[i-1]),!a||!Un(a)||function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t}(a,"A")||md(e,a,!1)||md(e,a,!0)||gd(e,l,t,!0,a).each((function(e){o=e.container(),i=e.offset(),c=!0})))),u&&!t&&Vn(o)&&i===o.nodeValue.length&&gd(e,l,t,!1,o).each((function(e){o=e.container(),i=e.offset(),c=!0})),c?R.some(Ds(o,i)):R.none()},yd=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=Ds.fromRangeStart(t);return vd(e,n,!0,r).each((function(e){n&&Ds.isAbove(o,e)||r.setStart(e.container(),e.offset())})),n||vd(e,n,!1,r).each((function(e){r.setEnd(e.container(),e.offset())})),n&&r.collapse(!0),cd(t,r)?R.none():R.some(r)},bd=function(e,t){return e.splitText(t)},Cd=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&Vn(t)?n>0&&n<t.nodeValue.length&&(t=(r=bd(t,n)).previousSibling,o>n?(t=r=bd(r,o-=n).previousSibling,o=r.nodeValue.length,n=0):o=0):(Vn(t)&&n>0&&n<t.nodeValue.length&&(t=bd(t,n),n=0),Vn(r)&&o>0&&o<r.nodeValue.length&&(o=(r=bd(r,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},xd=function(e){return{walk:function(t,n){return Pf(e,t,n)},split:Cd,normalize:function(t){return yd(e,t).fold(N,(function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0}))}}};xd.compareRanges=cd,xd.getCaretRangeFromPoint=sd,xd.getSelectedNode=as,xd.getNode=us;var wd,_d=function(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var o=or(n,e);return parseFloat(o)||0}return r},r=function(e,t){return K(t,(function(t,n){var r=or(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,n){if(!b(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;Yn(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var o=r(e,n);return t>o?t-o:0}}}("height",(function(e){var t=e.dom;return Cn(e)?t.getBoundingClientRect().height:t.offsetHeight})),Sd=function(e,t){return e.view(t).fold(w([]),(function(t){var n=e.owner(t),r=Sd(e,n);return[t].concat(r)}))},Ed=Object.freeze({__proto__:null,view:function(e){var t;return(e.dom===document?R.none():R.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(Ot.fromDom)},owner:function(e){return Gt(e)}}),Ad=function(e){var t=Ot.fromDom(document),n=En(t),r=function(e,t){var n=t.owner(e);return Sd(t,n)}(e,Ed),o=Sn(e),i=X(r,(function(e,t){var n=Sn(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return wn(i.left+o.left+n.left,i.top+o.top+n.top)},Dd=function(e){return"textarea"===zt(e)},kd=function(e,t){var n=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom)return wn(n.offsetLeft,n.offsetTop);var i=_n(null==r?void 0:r.pageYOffset,o.scrollTop),a=_n(null==r?void 0:r.pageXOffset,o.scrollLeft),u=_n(o.clientTop,n.clientTop),s=_n(o.clientLeft,n.clientLeft);return Sn(e).translate(a-s,i-u)}(e),r=function(e){return _d.get(e)}(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},Td=function(e,t){var n=function(e,t){var n=en(e);if(0===n.length||Dd(e))return{element:e,offset:t};if(t<n.length&&!Dd(n[t]))return{element:n[t],offset:0};var r=n[n.length-1];return Dd(r)?{element:e,offset:t}:"img"===zt(r)?{element:r,offset:1}:jt(r)?{element:r,offset:Xf(r).length}:{element:r,offset:en(r).length}}(e,t),r=Ot.fromHtml('<span data-mce-bogus="all">\ufeff</span>');return dn(n.element,r),kd(r,(function(){return yn(r)}))},Od=function(e,t,n,r){Md(e,(function(o,i){return Nd(e,t,n,r)}),n)},Bd=function(e,t,n,r,o){var i={elm:r.element.dom,alignToTop:o};(function(e,t){return e.fire("ScrollIntoView",t).isDefaultPrevented()})(e,i)||(n(t,En(t).top,r,o),function(e,t){e.fire("AfterScrollIntoView",t)}(e,i))},Nd=function(e,t,n,r){var o=Ot.fromDom(e.getBody()),i=Ot.fromDom(e.getDoc());o.dom.offsetWidth;var a=Td(Ot.fromDom(n.startContainer),n.startOffset);Bd(e,i,t,a,r),a.cleanup()},Fd=function(e,t,n,r){var o=Ot.fromDom(e.getDoc());Bd(e,o,n,function(e){return kd(Ot.fromDom(e),C)}(t),r)},Md=function(e,t,n){var r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;t(Ot.fromDom(r),Ot.fromDom(i));var u=e.dom.createRng();u.setStart(r,o),u.setEnd(i,a),e.selection.setRng(n)},Pd=function(e,t,n,r){var o=e.pos;if(n)An(o.left,o.top,r);else{var i=o.top-t+e.height;An(o.left,i,r)}},Id=function(e,t,n,r,o){var i=n+t,a=r.pos.top,u=r.bottom,s=u-a>=n;a<t?Pd(r,n,!1!==o,e):a>i?Pd(r,n,s?!1!==o:!0===o,e):u>i&&!s&&Pd(r,n,!0===o,e)},Rd=function(e,t,n,r){var o=e.dom.defaultView.innerHeight;Id(e,t,o,n,r)},Ld=function(e,t,n,r){var o=e.dom.defaultView.innerHeight;Id(e,t,o,n,r);var i=Ad(n.element),a=Tn(window);i.top<a.y?Dn(n.element,!1!==r):i.top>a.bottom&&Dn(n.element,!0===r)},zd=function(e,t,n){return Od(e,Rd,t,n)},Vd=function(e,t,n){return Fd(e,t,Rd,n)},Hd=function(e,t,n){return Od(e,Ld,t,n)},$d=function(e,t,n){return Fd(e,t,Ld,n)},jd=function(e,t,n){(e.inline?zd:Hd)(e,t,n)},Ud=function(e){var t=sn(e).dom;return e.dom===t.activeElement},Wd=function(e){return void 0===e&&(e=Ot.fromDom(document)),R.from(e.dom.activeElement).map(Ot.fromDom)},qd=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},Gd=Sr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xd=(Gd.before,Gd.on,Gd.after,function(e){return e.fold(_,_,_)}),Kd=Sr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Yd={domRange:Kd.domRange,relative:Kd.relative,exact:Kd.exact,exactFromRange:function(e){return Kd.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t=function(e){return e.match({domRange:function(e){return Ot.fromDom(e.startContainer)},relative:function(e,t){return Xd(e)},exact:function(e,t,n,r){return e}})}(e);return Xt(t)},range:qd},Jd=ht().browser,Qd=function(e,t){var n=jt(t)?Xf(t).length:en(t).length+1;return e>n?n:e<0?0:e},Zd=function(e){return Yd.range(e.start,Qd(e.soffset,e.start),e.finish,Qd(e.foffset,e.finish))},ep=function(e,t){return!Bn(t.dom)&&(It(e,t)||Mt(e,t))},tp=function(e){return function(t){return ep(e,t.start)&&ep(e,t.finish)}},np=function(e){return!0===e.inline||Jd.isIE()},rp=function(e){return Yd.range(Ot.fromDom(e.startContainer),e.startOffset,Ot.fromDom(e.endContainer),e.endOffset)},op=function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?R.from(t.getRangeAt(0)):R.none()).map(rp)}(Xt(e).dom).filter(tp(e))},ip=function(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),R.some(t)}catch(n){return R.none()}},ap=function(e){var t=np(e)?op(Ot.fromDom(e.getBody())):R.none();e.bookmark=t.isSome()?t:e.bookmark},up=function(e){return(e.bookmark?e.bookmark:R.none()).bind((function(t){return function(e,t){return R.from(t).filter(tp(e)).map(Zd)}(Ot.fromDom(e.getBody()),t)})).bind(ip)},sp={isEditorUIElement:function(e){var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},cp=function(e,t){ht().browser.isIE()?function(e){e.on("focusout",(function(){ap(e)}))}(e):function(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))}(e,t),e.on("keyup NodeChange",(function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||ap(e)}))},lp=function(e){var t=Au((function(){ap(e)}),0);e.on("init",(function(){e.inline&&function(e,t){var n=function(){t.throttle()};mu.DOM.bind(document,"mouseup",n),e.on("remove",(function(){mu.DOM.unbind(document,"mouseup",n)}))}(e,t),cp(e,t)})),e.on("remove",(function(){t.cancel()}))},fp=mu.DOM,dp=function(e,t){var n=function(e){return e.getParam("custom_ui_selector","","string")}(e);return null!==fp.getParent(t,(function(t){return function(e){return sp.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)}))},pp=function(e,t){var n=t.editor;lp(n),n.on("focusin",(function(){var t=e.focusedEditor;t!==n&&(t&&t.fire("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.fire("focus",{blurredEditor:t}),n.focus(!0))})),n.on("focusout",(function(){oo.setEditorTimeout(n,(function(){var t=e.focusedEditor;dp(n,function(e){try{var t=sn(Ot.fromDom(e.getElement()));return Wd(t).fold((function(){return document.body}),(function(e){return e.dom}))}catch(n){return document.body}}(n))||t!==n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),wd||(wd=function(t){var n=e.activeEditor;n&&function(e){if(un()&&v(e.target)){var t=Ot.fromDom(e.target);if($t(t)&&fn(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return re(n)}}return R.from(e.target)}(t).each((function(t){t.ownerDocument===document&&(t===document.body||dp(n,t)||e.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))}))},fp.bind(document,"focusin",wd))},hp=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(fp.unbind(document,"focusin",wd),wd=null)},mp=function(e,t){return function(e){return e.collapsed?R.from(us(e.startContainer,e.startOffset)).map(Ot.fromDom):R.none()}(t).bind((function(t){return vo(t)?R.some(t):!1===It(e,t)?R.some(e):R.none()}))},gp=function(e,t){mp(Ot.fromDom(e.getBody()),t).bind((function(e){return Rl(e.dom)})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},vp=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},yp=function(e){return Ud(e)||(t=e,Wd(sn(t)).filter((function(e){return t.dom.contains(e.dom)}))).isSome();var t},bp=function(e){return e.inline?function(e){var t=e.getBody();return t&&yp(Ot.fromDom(t))}(e):function(e){return e.iframeElement&&Ud(Ot.fromDom(e.iframeElement))}(e)},Cp=function(e){return bp(e)||function(e){var t=sn(Ot.fromDom(e.getElement()));return Wd(t).filter((function(t){return!(void 0!==(n=t.dom.classList)&&(n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body")))&&dp(e,t.dom);var n})).isSome()}(e)},xp=function(e){return e.editorManager.setActive(e)},wp=function(e,t){e.removed||(t?xp(e):function(e){var t=e.selection,n=e.getBody(),r=t.getRng();e.quirks.refreshContentEditable(),void 0!==e.bookmark&&!1===bp(e)&&up(e).each((function(t){e.selection.setRng(t),r=t}));var o=function(e,t){return e.dom.getParent(t,(function(t){return"true"===e.dom.getContentEditable(t)}))}(e,t.getNode());if(e.$.contains(n,o))return vp(o),gp(e,r),void xp(e);e.inline||(_t.opera||vp(n),e.getWin().focus()),(_t.gecko||e.inline)&&(vp(n),gp(e,r)),xp(e)}(e))},_p=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return R.from(i).map(Ot.fromDom).map((function(e){return r&&t.collapsed?e:tn(e,o(e,a)).getOr(e)})).bind((function(e){return $t(e)?R.some(e):Kt(e).filter($t)})).map((function(e){return e.dom})).getOr(e)},Sp=function(e,t,n){return _p(e,t,!0,n,(function(e,t){return Math.min(e.dom.childNodes.length,t)}))},Ep=function(e,t,n){return _p(e,t,!1,n,(function(e,t){return t>0?t-1:t}))},Ap=function(e,t){for(var n=e;e&&Vn(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Dp=function(e,t){return U(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},kp={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Tp=function(e,t,n){var r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){var i=e[o];if(i)return i;for(var a=e.parent;a&&a!==t;a=a.parent)if(i=a[o])return i}},Op=function(e){if(!Xo(e.value))return!1;var t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)},Bp=function(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},Np=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r=new e(t,kp[t]||1);return n&&se(n,(function(e,t){r.attr(t,e)})),r},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,r=this;if("string"!=typeof e)return null!=e&&se(e,(function(e,t){r.attr(t,e)})),r;if(n=r.attributes){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}return r}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},e.prototype.clone=function(){var t,n=this,r=new e(n.name,n.type);if(t=n.attributes){var o=[];o.map={};for(var i=0,a=t.length;i<a;i++){var u=t[i];"id"!==u.name&&(o[o.length]={name:u.name,value:u.value},o.map[u.name]=u.value)}r.attributes=o}return r.value=n.value,r.shortEnded=n.shortEnded,r},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){for(var e=this,t=e.firstChild;t;){var n=t.next;e.insert(t,e,!0),t=n}e.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t=this;e.parent&&e.remove();var n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},e.prototype.insert=function(e,t,n){e.parent&&e.remove();var r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=Tp(n,this))n.name===e&&t.push(n);return t},e.prototype.empty=function(){var e=this;if(e.firstChild){for(var t=[],n=e.firstChild;n;n=Tp(n,e))t.push(n);for(var r=t.length;r--;)(n=t[r]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return e.firstChild=e.lastChild=null,e},e.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var r=this,o=r.firstChild;if(Bp(r))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(e[o.name])return!1;if(Bp(o))return!1}if(8===o.type)return!1;if(3===o.type&&!Op(o))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&Xo(o.value))return!1;if(n&&n(o))return!1}while(o=Tp(o,r));return!0},e.prototype.walk=function(e){return Tp(this,null,e)},e}(),Fp=function(e,t){return e.replace(t.re,(function(e){return ge(t.uris,e).getOr(e)}))},Mp=["img","video"],Pp=function(e,t,n){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?function(e,t){return!(g(e)?$(Mp,t):e)}(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},Ip=function(e,t,n){var r,o,i=1,a=e.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_:.]+)(\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g;for(u.lastIndex=r=n;o=u.exec(t);){if(r=u.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in a)continue;i++}if(0===i)break}return r},Rp=function(e,t){var n=e.exec(t);if(n){var r=n[1],o=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?o:null}return null},Lp=function(e,t){void 0===t&&(t=ki()),!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var n=e.comment?e.comment:C,r=e.cdata?e.cdata:C,o=e.text?e.text:C,i=e.start?e.start:C,a=e.end?e.end:C,u=e.pi?e.pi:C,s=e.doctype?e.doctype:C,c=function(c,l){void 0===l&&(l="html");for(var f,d,p,h,m,g,v,y,b,C,x,w,_,S,E,A,D,k,T,O=c.html,B=0,N=[],F=0,M=yi.decode,P=kt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),I=/((java|vb)script|mhtml):/i,R="html"===l?0:1,L=function(e){var t,n;for(t=N.length;t--&&N[t].name!==e;);if(t>=0){for(n=N.length-1;n>=t;n--)(e=N[n]).valid&&a(e.name);N.length=t}},z=function(e,t){return o(Fp(e,c),t)},V=function(t){""!==t&&(">"===t.charAt(0)&&(t=" "+t),e.allow_conditional_comments||"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t),n(Fp(t,c)))},H=function(e,t){var n=e||"",r=!ze(n,"--"),o=function(e,t,n){void 0===n&&(n=0);var r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&function(e,t){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t))}(r,n)){var o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(t){var i=r.indexOf(">",n);return-1!==i?i:r.length}var a=/--!?>/g;a.lastIndex=n;var u=a.exec(e);return u?u.index+u[0].length:r.length}(O,r,t);return e=O.substr(t,o-t),V(r?n+e:e),o+1},$=function(t,n,r,o,i){var a,u;if(r=function(e){return Fp(e,c)}((n=n.toLowerCase())in G?n:M(r||o||i||"")),X&&!y&&!1===function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")}(n)){if(!(a=S[n])&&E){for(u=E.length;u--&&!(a=E[u]).pattern.test(n););-1===u&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(P[n]&&!e.allow_script_urls){var s=r.replace(/[\s\u0000-\u001F]+/g,"");try{s=decodeURIComponent(s)}catch(l){s=unescape(s)}if(I.test(s))return;if(Pp(e,s,t))return}y&&(n in P||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))},j=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),U=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,W=t.getShortEndedElements(),q=e.self_closing_elements||t.getSelfClosingElements(),G=t.getBoolAttrs(),X=e.validate,K=e.remove_internals,Y=e.fix_self_closing,J=t.getSpecialElements(),Q=O+">";f=j.exec(Q);){var Z=f[0];if(B<f.index&&z(M(O.substr(B,f.index-B))),d=f[7])":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),L(d);else if(d=f[8]){if(f.index+Z.length>O.length){z(M(O.substr(f.index))),B=f.index+Z.length;continue}":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),b=d in W,Y&&q[d]&&N.length>0&&N[N.length-1].name===d&&L(d);var ee=Rp(U,f[9]);if(null!==ee){if("all"===ee){B=Ip(t,O,j.lastIndex),j.lastIndex=B;continue}x=!1}if(!X||(C=t.getElementRule(d))){if(x=!0,X&&(S=C.attributes,E=C.attributePatterns),(_=f[9])?((y=-1!==_.indexOf("data-mce-type"))&&K&&(x=!1),(h=[]).map={},_.replace(U,(function(e,t,n,r,o){return $(d,t,n,r,o),""}))):(h=[]).map={},X&&!y){if(A=C.attributesRequired,D=C.attributesDefault,k=C.attributesForced,C.removeEmptyAttrs&&!h.length&&(x=!1),k)for(m=k.length;m--;)v=(w=k[m]).name,"{$uid}"===(T=w.value)&&(T="mce_"+F++),h.map[v]=T,h.push({name:v,value:T});if(D)for(m=D.length;m--;)(v=(w=D[m]).name)in h.map||("{$uid}"===(T=w.value)&&(T="mce_"+F++),h.map[v]=T,h.push({name:v,value:T}));if(A){for(m=A.length;m--&&!(A[m]in h.map););-1===m&&(x=!1)}if(w=h.map["data-mce-bogus"]){if("all"===w){B=Ip(t,O,j.lastIndex),j.lastIndex=B;continue}x=!1}}x&&i(d,h,b)}else x=!1;if(p=J[d]){p.lastIndex=B=f.index+Z.length,(f=p.exec(O))?(x&&(g=O.substr(B,f.index-B)),B=f.index+f[0].length):(g=O.substr(B),B=O.length),x&&(g.length>0&&z(g,!0),a(d)),j.lastIndex=B;continue}b||(_&&_.indexOf("/")===_.length-1?x&&a(d):N.push({name:d,valid:x}))}else if(d=f[1])V(d);else if(d=f[2]){if(!(1===R||e.preserve_cdata||N.length>0&&t.isValidChild(N[N.length-1].name,"#cdata"))){B=H("",f.index+2),j.lastIndex=B;continue}r(d)}else if(d=f[3])s(d);else{if((d=f[4])||"<!"===Z){B=H(d,f.index+Z.length),j.lastIndex=B;continue}if(d=f[5]){if(1!==R){B=H("?",f.index+2),j.lastIndex=B;continue}u(d,f[6])}}B=f.index+Z.length}for(B<O.length&&z(M(O.substr(B))),m=N.length-1;m>=0;m--)(d=N[m]).valid&&a(d.name)};return{parse:function(e,t){void 0===t&&(t="html"),c(function(e){for(var t,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,r=[],o={},i=Wu("img"),a=0,u=0;t=n.exec(e);){var s=t[0],c=i+"_"+u++;o[c]=s,a<t.index&&r.push(e.substr(a,t.index-a)),r.push(c),a=t.index+s.length}var l=new RegExp(i+"_[0-9]+","g");return 0===a?{prefix:i,uris:o,html:e,re:l}:(a<e.length&&r.push(e.substr(a)),{prefix:i,uris:o,html:r.join(""),re:l})}(e),t)}}};Lp.findEndTag=Ip;var zp=function(e,t){var n,r,o,i,a=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;a=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")}(e.getTempAttrs(),a);for(var c=s.getShortEndedElements();i=u.exec(a);)r=u.lastIndex,o=i[0].length,n=c[i[1]]?r:Lp.findEndTag(s,a,r),a=a.substring(0,r-o)+a.substring(n),u.lastIndex=r-o;return _o(a)},Vp=zp,Hp=function(e,t,n,r){var o;return t.format=n,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),o="raw"===t.format?kt.trim(Vp(e.serializer,r.innerHTML)):"text"===t.format?e.dom.isEmpty(r)?"":_o(r.innerText||r.textContent):"tree"===t.format?e.serializer.serialize(r,t):function(e,t){var n=tc(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")}(e,e.serializer.serialize(r,t)),$(["text","tree"],t.format)||bo(Ot.fromDom(r))?t.content=o:t.content=kt.trim(o),t.no_events||e.fire("GetContent",t),t.content},$p=kt.each,jp=function(e){return{compare:function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return $p(e.getAttribs(t),(function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))})),n},o=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!o(r(t),r(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Jl(t)||Jl(n))}}},Up=kt.makeMap,Wp=function(e){var t=[],n=(e=e||{}).indent,r=Up(e.indent_before||""),o=Up(e.indent_after||""),i=yi.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="html"===e.element_format;return{start:function(e,u,s){var c,l,f,d;if(n&&r[e]&&t.length>0&&(d=t[t.length-1]).length>0&&"\n"!==d&&t.push("\n"),t.push("<",e),u)for(c=0,l=u.length;c<l;c++)f=u[c],t.push(" ",f.name,'="',i(f.value,!0),'"');t[t.length]=!s||a?">":" />",s&&n&&o[e]&&t.length>0&&(d=t[t.length-1]).length>0&&"\n"!==d&&t.push("\n")},end:function(e){var r;t.push("</",e,">"),n&&o[e]&&t.length>0&&(r=t[t.length-1]).length>0&&"\n"!==r&&t.push("\n")},text:function(e,n){e.length>0&&(t[t.length]=n?e:i(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("\x3c!--",e,"--\x3e")},pi:function(e,r){r?t.push("<?",e," ",i(r),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},qp=function(e,t){void 0===t&&(t=ki());var n=Wp(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}};n.reset();var a=function(e){var r,u,s,c,l,f,d,p,h,m=i[e.type];if(m)m(e);else{if(r=e.name,u=e.shortEnded,s=e.attributes,o&&s&&s.length>1&&((f=[]).map={},h=t.getElementRule(e.name))){for(d=0,p=h.attributesOrder.length;d<p;d++)(c=h.attributesOrder[d])in s.map&&(l=s.map[c],f.map[c]=l,f.push({name:c,value:l}));for(d=0,p=s.length;d<p;d++)(c=s[d].name)in f.map||(l=s.map[c],f.map[c]=l,f.push({name:c,value:l}));s=f}if(n.start(e.name,s,u),!u){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()}}},Gp=new Set;W(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(function(e){Gp.add(e)}));var Xp=["font","text-decoration","text-emphasis"],Kp=function(e,t){return ae(e.parseStyle(e.getAttrib(t,"style")))},Yp=function(e,t){return Z(Kp(e,t),(function(e){return!function(e){return Gp.has(e)}(e)}))},Jp=function(e,t,n){var r=Kp(e,t),o=Kp(e,n),i=function(r){var o=e.getStyle(t,r),i=e.getStyle(n,r);return Ue(o)&&Ue(i)&&o!==i};return j(r,(function(e){var t=function(t){return j(t,(function(t){return t===e}))};if(!t(o)&&t(Xp)){var n=G(o,(function(e){return j(Xp,(function(t){return ze(e,t)}))}));return j(n,i)}return i(e)}))},Qp=function(e,t,n){return R.from(n.container()).filter(Vn).exists((function(r){var o=e?0:-1;return t(r.data.charAt(n.offset()+o))}))},Zp=S(Qp,!0,Zl),eh=S(Qp,!1,Zl),th=function(e){var t=e.container();return Vn(t)&&(0===t.data.length||wo(t.data)&&ed.isBookmarkNode(t.parentNode))},nh=function(e,t){return function(n){return R.from(el(e?0:-1,n)).filter(t).isSome()}},rh=function(e){return Wn(e)&&"block"===or(Ot.fromDom(e),"display")},oh=function(e){return Gn(e)&&!function(e){return Nn(e)&&"all"===e.getAttribute("data-mce-bogus")}(e)},ih=nh(!0,rh),ah=nh(!1,rh),uh=nh(!0,Kn),sh=nh(!1,Kn),ch=nh(!0,Rn),lh=nh(!1,Rn),fh=nh(!0,oh),dh=nh(!1,oh),ph=function(e){var t=Iu(e,"br"),n=G(function(e){for(var t=[],n=e.dom;n;)t.push(Ot.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),po);t.length===n.length&&W(n,yn)},hh=function(e){vn(e),mn(e,Ot.fromHtml('<br data-mce-bogus="1">'))},mh=function(e){rn(e).each((function(t){Yt(t).each((function(n){lo(e)&&po(t)&&lo(n)&&yn(t)}))}))},gh=function(e,t,n){return It(t,e)?function(e,t){for(var n=y(t)?t:N,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Ot.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,(function(e){return n(e)||Mt(e,t)})).slice(0,-1):[]},vh=function(e,t){return gh(e,t,N)},yh=function(e,t){return[e].concat(vh(e,t))},bh=function(e,t,n){return Fl(e,t,n,th)},Ch=function(e,t){return Y(yh(Ot.fromDom(t.container()),e),lo)},xh=function(e,t,n){return bh(e,t.dom,n).forall((function(e){return Ch(t,n).fold((function(){return!1===Zc(e,n,t.dom)}),(function(r){return!1===Zc(e,n,t.dom)&&It(r,Ot.fromDom(e.container()))}))}))},wh=function(e,t,n){return Ch(t,n).fold((function(){return bh(e,t.dom,n).forall((function(e){return!1===Zc(e,n,t.dom)}))}),(function(t){return bh(e,t.dom,n).isNone()}))},_h=S(wh,!1),Sh=S(wh,!0),Eh=S(xh,!1),Ah=S(xh,!0),Dh=function(e){return cl(e).exists(po)},kh=function(e,t,n){var r=G(yh(Ot.fromDom(n.container()),t),lo),o=re(r).getOr(t);return Bl(e,o.dom,n).filter(Dh)},Th=function(e,t){return cl(t).exists(po)||kh(!0,e,t).isSome()},Oh=function(e,t){return function(e){return R.from(e.getNode(!0)).map(Ot.fromDom)}(t).exists(po)||kh(!1,e,t).isSome()},Bh=S(kh,!1),Nh=S(kh,!0),Fh=function(e){return Ds.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},Mh=function(e,t){var n=G(yh(Ot.fromDom(t.container()),e),lo);return re(n).getOr(e)},Ph=function(e,t){return Fh(t)?eh(t):eh(t)||Il(Mh(e,t).dom,t).exists(eh)},Ih=function(e,t){return Fh(t)?Zp(t):Zp(t)||Pl(Mh(e,t).dom,t).exists(Zp)},Rh=function(e){return cl(e).bind((function(e){return Kr(e,$t)})).exists((function(e){return t=or(e,"white-space"),$(["pre","pre-wrap"],t);var t}))},Lh=function(e,t){return function(e,t){return Il(e.dom,t).isNone()}(e,t)||function(e,t){return Pl(e.dom,t).isNone()}(e,t)||_h(e,t)||Sh(e,t)||Oh(e,t)||Th(e,t)},zh=function(e,t){return!Rh(t)&&(_h(e,t)||Eh(e,t)||Oh(e,t)||Ph(e,t))},Vh=function(e,t){return!Rh(t)&&(Sh(e,t)||Ah(e,t)||Th(e,t)||Ih(e,t))},Hh=function(e,t){return zh(e,t)||Vh(e,function(e){var t=e.container(),n=e.offset();return Vn(t)&&n<t.data.length?Ds(t,n+1):e}(t))},$h=function(e,t){return Ql(e.charAt(t))},jh=function(e){var t=e.container();return Vn(t)&&Le(t.data,Co)},Uh=function(e){var t=e.data,n=function(e){var t=e.split("");return U(t,(function(e,n){return Ql(e)&&n>0&&n<t.length-1&&ef(t[n-1])&&ef(t[n+1])?" ":e})).join("")}(t);return n!==t&&(e.data=n,!0)},Wh=function(e,t){return R.some(t).filter(jh).bind((function(t){var n=t.container();return function(e,t){var n=t.data,r=Ds(t,0);return!(!$h(n,0)||Hh(e,r)||(t.data=" "+n.slice(1),0))}(e,n)||Uh(n)||function(e,t){var n=t.data,r=Ds(t,n.length-1);return!(!$h(n,n.length-1)||Hh(e,r)||(t.data=n.slice(0,-1)+" ",0))}(e,n)?R.some(t):R.none()}))},qh=function(e){var t=Ot.fromDom(e.getBody());e.selection.isCollapsed()&&Wh(t,Ds.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))},Gh=function(e,t,n){if(0!==n){var r=Ot.fromDom(e),o=Xr(r,lo).getOr(r),i=e.data.slice(t,t+n),a=t+n>=e.data.length&&Vh(o,Ds(e,e.data.length)),u=0===t&&zh(o,Ds(e,0));e.replaceData(t,n,function(e,t,n){return K(e,(function(r,o){return Zl(o)||Ql(o)?r.previousCharIsSpace||""===r.str&&t||r.str.length===e.length-1&&n?{previousCharIsSpace:!1,str:r.str+Co}:{previousCharIsSpace:!0,str:r.str+" "}:{previousCharIsSpace:!1,str:r.str+o}}),{previousCharIsSpace:!1,str:""}).str}(i,u,a))}},Xh=function(e,t){var n=e.data.slice(t),r=n.length-$e(n).length;return Gh(e,t,r)},Kh=function(e,t){var n=e.data.slice(0,t),r=n.length-je(n).length;return Gh(e,t-r,r)},Yh=function(e,t,n,r){void 0===r&&(r=!0);var o=je(e.data).length,i=r?e:t,a=r?t:e;return r?i.appendData(a.data):i.insertData(0,a.data),yn(Ot.fromDom(a)),n&&Xh(i,o),i},Jh=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===Ds.isTextPosition(e)&&n===t.parentNode&&r>Ds.before(t).offset()}(t,e)?Ds(t.container(),t.offset()-1):t},Qh=function(e){return Uo(e.previousSibling)?R.some((t=e.previousSibling,Vn(t)?Ds(t,t.data.length):Ds.after(t))):e.previousSibling?Ll(e.previousSibling):R.none();var t},Zh=function(e){return Uo(e.nextSibling)?R.some((t=e.nextSibling,Vn(t)?Ds(t,0):Ds.before(t))):e.nextSibling?Rl(e.nextSibling):R.none();var t},em=function(e,t){return Qh(t).orThunk((function(){return Zh(t)})).orThunk((function(){return function(e,t){var n=Ds.before(t.previousSibling?t.previousSibling:t.parentNode);return Il(e,n).fold((function(){return Pl(e,Ds.after(t))}),R.some)}(e,t)}))},tm=function(e,t){return Zh(t).orThunk((function(){return Qh(t)})).orThunk((function(){return function(e,t){return Pl(e,Ds.after(t)).fold((function(){return Il(e,Ds.before(t))}),R.some)}(e,t)}))},nm=function(e,t,n){return function(e,t,n){return e?tm(t,n):em(t,n)}(e,t,n).map(S(Jh,n))},rm=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},om=function(e,t){return t&&ve(e.schema.getBlockElements(),zt(t))},im=function(e){if(ei(e)){var t=Ot.fromHtml('<br data-mce-bogus="1">');return vn(e),mn(e,t),R.some(Ds.before(t.dom))}return R.none()},am=function(e,t,n){var r=Yt(e).filter(jt),o=Jt(e).filter(jt);return yn(e),function(e,t,n,r){return e.isSome()&&t.isSome()&&n.isSome()?R.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):R.none()}(r,o,t,(function(e,t,r){var o=e.dom,i=t.dom,a=o.data.length;return Yh(o,i,n),r.container()===i?Ds(o,a):r})).orThunk((function(){return n&&(r.each((function(e){return Kh(e.dom,e.dom.length)})),o.each((function(e){return Xh(e.dom,0)}))),t}))},um=function(e,t,n,r){void 0===r&&(r=!0);var o,i=nm(t,e.getBody(),n.dom),a=Xr(n,S(om,e),(o=e.getBody(),function(e){return e.dom===o})),u=am(n,i,function(e,t){return ve(e.schema.getTextInlineElements(),zt(t))}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(im).fold((function(){r&&rm(e,t,u)}),(function(n){r&&rm(e,t,R.some(n))}))},sm=function(e,t){return{start:e,end:t}},cm=Sr([{removeTable:["element"]},{emptyCells:["cells"]},{deleteCellSelection:["rng","cell"]}]),lm=function(e,t){return Zr(Ot.fromDom(e),"td,th",t)},fm=function(e,t){return Jr(e,"table",t)},dm=function(e){return!Mt(e.start,e.end)},pm=function(e,t){return fm(e.start,t).bind((function(n){return fm(e.end,t).bind((function(e){return t=Mt(n,e),r=n,t?R.some(r):R.none();var t,r}))}))},hm=function(e){return Iu(e,"td,th")},mm=function(e,t){var n=lm(t.startContainer,e),r=lm(t.endContainer,e);return t.collapsed?R.none():Qu(n,r,sm).fold((function(){return n.fold((function(){return r.bind((function(t){return fm(t,e).bind((function(e){return re(hm(e)).map((function(e){return sm(e,t)}))}))}))}),(function(t){return fm(t,e).bind((function(e){return oe(hm(e)).map((function(e){return sm(t,e)}))}))}))}),(function(t){return gm(e,t)?R.none():function(e,t){return fm(e.start,t).bind((function(t){return oe(hm(t)).map((function(t){return sm(e.start,t)}))}))}(t,e)}))},gm=function(e,t){return pm(t,e).isSome()},vm=function(e,t,n){return e.filter((function(e){return dm(e)&&gm(n,e)})).orThunk((function(){return mm(n,t)})).bind((function(e){return function(e,t){return pm(e,t).map((function(t){return function(e,t,n){return{rng:e,table:t,cells:n}}(e,t,hm(t))}))}(e,n)}))},ym=function(e,t){return J(e,(function(e){return Mt(e,t)}))},bm=function(e,t,n){return e.filter((function(e){return function(e,t){return!dm(e)&&pm(e,t).exists((function(e){var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))}(e,n)&&$f(e.start,t)})).map((function(e){return e.start}))},Cm=function(e){return function(e){return Qu(ym(e.cells,e.rng.start),ym(e.cells,e.rng.end),(function(t,n){return e.cells.slice(t,n+1)}))}(e).map((function(t){var n=e.cells;return t.length===n.length?cm.removeTable(e.table):cm.emptyCells(t)}))},xm=function(e,t){var n=function(e){return function(t){return Mt(e,t)}}(e),r=function(e,t){var n=lm(e.startContainer,t),r=lm(e.endContainer,t);return Qu(n,r,sm)}(t,n);return bm(r,t,n).map((function(e){return cm.deleteCellSelection(t,e)})).orThunk((function(){return vm(r,t,n).bind(Cm)}))},wm=function(e){var t;return(8===Vt(t=e)||"#comment"===zt(t)?Yt(e):rn(e)).bind(wm).orThunk((function(){return R.some(e)}))},_m=function(e,t){return W(t,hh),e.selection.setCursorLocation(t[0].dom,0),!0},Sm=function(e,t,n){t.deleteContents();var r,o=wm(n).getOr(n),i=Ot.fromDom(e.dom.getParent(o.dom,e.dom.isBlock));if(ei(i)&&(hh(i),e.selection.setCursorLocation(i.dom,0)),!Mt(n,i)){var a=Kt(i).is(n)?[]:Kt(r=i).map(en).map((function(e){return G(e,(function(e){return!Mt(r,e)}))})).getOr([]);W(a.concat(en(n)),(function(e){Mt(e,i)||It(e,i)||yn(e)}))}return!0},Em=function(e,t){return um(e,!1,t),!0},Am=function(e,t,n,r){return km(t,r).fold((function(){return function(e,t,n){return xm(t,n).map((function(t){return t.fold(S(Em,e),S(_m,e),S(Sm,e))}))}(e,t,n)}),(function(t){return function(e,t){return Tm(e,t)}(e,t)})).getOr(!1)},Dm=function(e,t){return Y(yh(t,e),yo)},km=function(e,t){return Y(yh(t,e),(function(e){return"caption"===zt(e)}))},Tm=function(e,t){return hh(t),e.selection.setCursorLocation(t.dom,0),R.some(!0)},Om=function(e,t,n,r,o){return Nl(n,e.getBody(),o).bind((function(i){return function(e,t,n,r){return Rl(e.dom).bind((function(o){return Ll(e.dom).map((function(e){return t?n.isEqual(o)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(o)}))})).getOr(!0)}(r,n,o,i)?function(e,t){return Tm(e,t)}(e,r):function(e,t,n){return km(e,Ot.fromDom(n.getNode())).map((function(e){return!1===Mt(e,t)}))}(t,r,i)})).or(R.some(!0))},Bm=function(e,t,n,r){var o=Ds.fromRangeStart(e.selection.getRng());return Dm(n,r).bind((function(r){return ei(r)?Tm(e,r):function(e,t,n,r,o){return Nl(n,e.getBody(),o).bind((function(e){return Dm(t,Ot.fromDom(e.getNode())).map((function(e){return!1===Mt(e,r)}))}))}(e,n,t,r,o)})).getOr(!1)},Nm=function(e,t){return e?ch(t):lh(t)},Fm=function(e,t,n){var r=Ot.fromDom(e.getBody());return km(r,n).fold((function(){return Bm(e,t,r,n)||function(e,t){var n=Ds.fromRangeStart(e.selection.getRng());return Nm(t,n)||Bl(t,e.getBody(),n).exists((function(e){return Nm(t,e)}))}(e,t)}),(function(n){return function(e,t,n,r){var o=Ds.fromRangeStart(e.selection.getRng());return ei(r)?Tm(e,r):Om(e,n,t,r,o)}(e,t,r,n).getOr(!1)}))},Mm=function(e,t){var n=Ot.fromDom(e.selection.getStart(!0)),r=zf(e);return e.selection.isCollapsed()&&0===r.length?Fm(e,t,n):function(e,t){var n=Ot.fromDom(e.getBody()),r=e.selection.getRng(),o=zf(e);return 0!==o.length?_m(e,o):Am(e,n,r,t)}(e,n)},Pm=function(e){var t=Ds.fromRangeStart(e),n=Ds.fromRangeEnd(e),r=e.commonAncestorContainer;return Bl(!1,r,n).map((function(o){return!Zc(t,n,r)&&Zc(t,o,r)?function(e,t,n,r){var o=document.createRange();return o.setStart(e,t),o.setEnd(n,r),o}(t.container(),t.offset(),o.container(),o.offset()):e})).getOr(e)},Im=function(e){return e.collapsed?e:Pm(e)},Rm=function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||e.value===Co}(t.firstChild)},Lm=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Rm(e,t))}(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)},zm=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return e.data===Co||Un(e)}(e.firstChild)},Vm=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||zm(t))?e.slice(0,-1):e;var t},Hm=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},$m=function(e,t){var n=Ds.after(e),r=Al(t).prev(n);return r?r.toRange():null},jm=function(e,t,n){var r=e.parentNode;return kt.each(t,(function(t){r.insertBefore(t,e)})),function(e,t){var n=Ds.before(e),r=Al(t).next(n);return r?r.toRange():null}(e,n)},Um=function(e,t,n,r){var o,i=function(e,t,n){var r=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(r))}(t,e,r),a=Hm(t,n.startContainer),u=Vm((o=i.firstChild,kt.grep(o.childNodes,(function(e){return"LI"===e.nodeName})))),s=t.getRoot(),c=function(e){var r=Ds.fromRangeStart(n),o=Al(t.getRoot()),i=1===e?o.prev(r):o.next(r);return!i||Hm(t,i.getNode())!==a};return c(1)?jm(a,u,s):c(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),$m(t[0],n)}(a,u,s,t):function(e,t,n,r){var o=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),i=e.parentNode;return i.insertBefore(o[0],e),kt.each(t,(function(t){i.insertBefore(t,e)})),i.insertBefore(o[1],e),i.removeChild(e),$m(t[t.length-1],n)}(a,u,s,n)},Wm=Xn,qm=function(e){var t=e.dom,n=Im(e.selection.getRng());e.selection.setRng(n);var r=t.getParent(n.startContainer,Wm);!function(e,t,n){return null!==n&&n===e.getParent(t.endContainer,Wm)&&$f(Ot.fromDom(n),t)}(t,n,r)?e.getDoc().execCommand("Delete",!1,null):Sm(e,n,Ot.fromDom(r))},Gm=function(e,t,n){var r,o,i,a,u,s,c=e.selection,l=e.dom;/^ | $/.test(t)&&(t=function(e,t,n){var r=Ot.fromDom(e.getRoot());return n=zh(r,Ds.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),Vh(r,Ds.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(l,c.getRng(),t));var f=e.parser,d=n.merge,p=qp({validate:yc(e)},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';if(i={content:t,format:"html",selection:!0,paste:n.paste},(i=e.fire("BeforeSetContent",i)).isDefaultPrevented())e.fire("SetContent",{content:i.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=i.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h);var m=(u=c.getRng()).startContainer||(u.parentElement?u.parentElement():null),g=e.getBody();m===g&&c.isCollapsed()&&l.isBlock(g.firstChild)&&function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(e,g.firstChild)&&l.isEmpty(g.firstChild)&&((u=l.createRng()).setStart(g.firstChild,0),u.setEnd(g.firstChild,0),c.setRng(u)),c.isCollapsed()||qm(e);var y,b={context:(r=c.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},C=f.parse(t,b);if(!0===n.paste&&Lm(e.schema,C)&&function(e,t){return!!Hm(e,t)}(l,r))return u=Um(p,l,c.getRng(),C),c.setRng(u),void e.fire("SetContent",i);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(C),"mce_marker"===(s=C.lastChild).attr("id"))for(a=s,s=s.prev;s;s=s.walk(!0))if(3===s.type||!l.isBlock(s.name)){e.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(a,s,"br"===s.name);break}if(e._selectionOverrides.showBlockCaretContainer(r),b.invalid){for(e.selection.setContent(h),r=c.getNode(),o=e.getBody(),9===r.nodeType?r=s=o:s=r;s!==o;)r=s,s=s.parentNode;t=r===o?o.innerHTML:l.getOuterHTML(r),t=p.serialize(f.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return p.serialize(C)})))),r===o?l.setHTML(o,t):l.setOuterHTML(r,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}}(e,t=p.serialize(C),r);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var o=e.getBody(),i=jp(r);kt.each(r.select("*[data-mce-fragment]"),(function(e){if(v(n[e.nodeName.toLowerCase()])&&Yp(r,e))for(var t=e.parentNode;v(t)&&t!==o&&!Jp(r,e,t);t=t.parentNode)if(i.compare(t,e)){r.remove(e,!0);break}}))}}(e,d),function(e,t){var n,r,o=e.dom,i=e.selection;if(t){i.scrollIntoView(t);var a=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===o.getContentEditable(t))return t;return null}(t);if(a)return o.remove(t),void i.select(a);var u=o.createRng(),s=t.previousSibling;s&&3===s.nodeType?(u.setStart(s,s.nodeValue.length),_t.ie||(r=t.nextSibling)&&3===r.nodeType&&(s.appendData(r.data),r.parentNode.removeChild(r))):(u.setStartBefore(t),u.setEndBefore(t));var c=o.getParent(t,o.isBlock);o.remove(t),c&&o.isEmpty(c)&&(e.$(c).empty(),u.setStart(c,0),u.setEnd(c,0),Wm(c)||function(e){return!!e.getAttribute("data-mce-fragment")}(c)||!(n=function(t){var n=Ds.fromRangeStart(t);if(n=Al(e.getBody()).next(n))return n.toRange()}(u))?o.add(c,o.create("br",{"data-mce-bogus":"1"})):(u=n,o.remove(c))),i.setRng(u)}}(e,l.get("mce_marker")),y=e.getBody(),kt.each(y.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")})),function(e,t){R.from(e.getParent(t,"td,th")).map(Ot.fromDom).each(mh)}(l,c.getStart()),e.fire("SetContent",i),e.addVisual()}},Xm=function(e,t){t(e),e.firstChild&&Xm(e.firstChild,t),e.next&&Xm(e.next,t)},Km=function(e,t,n){var r=function(e,t,n){var r={},o={},i=[];for(var a in n.firstChild&&Xm(n.firstChild,(function(n){W(e,(function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})})),W(t,(function(e){"string"==typeof n.attr(e.name)&&(o[e.name]?o[e.name].nodes.push(n):o[e.name]={filter:e,nodes:[n]})}))})),r)r.hasOwnProperty(a)&&i.push(r[a]);for(var u in o)o.hasOwnProperty(u)&&i.push(o[u]);return i}(e,t,n);W(r,(function(e){W(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))},Ym=function(e){return e instanceof Np},Jm=function(e,t){e.dom.setHTML(e.getBody(),t),function(e){bp(e)&&Rl(e.getBody()).each((function(t){var n=t.getNode(),r=Rn(n)?Rl(n).getOr(t):t;e.selection.setRng(r.toRange())}))}(e)},Qm=function(e,t,n){return n.format=n.format?n.format:"html",n.set=!0,n.content=Ym(t)?"":t,n.no_events||e.fire("BeforeSetContent",n),Ym(t)||(t=n.content),R.from(e.getBody()).fold(w(t),(function(r){return Ym(t)?function(e,t,n,r){Km(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=qp({validate:e.validate},e.schema).serialize(n);return r.content=bo(Ot.fromDom(t))?o:kt.trim(o),Jm(e,r.content),r.no_events||e.fire("SetContent",r),n}(e,r,t,n):function(e,t,n,r){var o,i;return 0===n.length||/^\s+$/.test(n)?(i='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>"),(o=tc(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),o.toLowerCase())?(n=i,n=e.dom.createHTML(o,nc(e),n)):n||(n='<br data-mce-bogus="1">'),Jm(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=qp({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=bo(Ot.fromDom(t))?n:kt.trim(n),Jm(e,r.content),r.no_events||e.fire("SetContent",r)),r.content}(e,r,t,n)}))},Zm=function(e,t){return function(e,t){var n=e.dom;return n.parentNode?Yr(Ot.fromDom(n.parentNode),(function(n){return!Mt(e,n)&&t(n)})):R.none()}(e,t).isSome()},eg=function(e){return y(e)?e:N},tg=function(e,t,n){var r=t(e),o=eg(n);return r.orThunk((function(){return o(e)?R.none():function(e,t,n){for(var r=e.dom,o=eg(n);r.parentNode;){r=r.parentNode;var i=Ot.fromDom(r),a=t(i);if(a.isSome())return a;if(o(i))break}return R.none()}(e,t,o)}))},ng=cf,rg=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},og=function(e,t,n,r){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,(function(t){return!!rg(e,t,n)||t.parentNode===o||!!ug(e,t,n,r,!0)})),ug(e,t,n,r))},ig=function(e,t,n){return!!ng(t,n.inline)||!!ng(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},ag=function(e,t,n,r,o,i){var a,u,s,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(u="attributes"===r?e.getAttrib(t,a):ff(e,t,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!ng(u,lf(e,sf(c[a],i),a)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?e.getAttrib(t,c[s]):ff(e,t,c[s]))return n;return n},ug=function(e,t,n,r,o){var i,a,u,s,c=e.formatter.get(n),l=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],ig(e.dom,t,i)&&ag(l,t,i,"attributes",o,r)&&ag(l,t,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!e.dom.hasClass(t,sf(s[u],r)))return;return i}},sg=function(e,t,n,r){if(r)return og(e,r,t,n);if(r=e.selection.getNode(),og(e,r,t,n))return!0;var o=e.selection.getStart();return!(o===r||!og(e,o,t,n))},cg=function(e,t){var n=function(t){return Mt(t,Ot.fromDom(e.getBody()))};return R.from(e.selection.getStart(!0)).bind((function(r){return tg(Ot.fromDom(r),(function(n){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return R.none()}(t,(function(t){return function(t,n){return ug(e,t.dom,n)?R.some(n):R.none()}(n,t)}))}),n)})).getOrNull()},lg=function(e,t,n){return K(n,(function(n,r){var o=function(e,t){return j(e.formatter.get(t),(function(e){var t=function(e){return e.length>1&&"%"===e.charAt(0)};return j(["styles","attributes"],(function(n){return ge(e,n).exists((function(e){var n=d(e)?e:me(e);return j(n,t)}))}))}))}(e,r);return e.formatter.matchNode(t,r,{},o)?n.concat([r]):n}),[])},fg=xo,dg="_mce_caret",pg=function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==fg||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0},hg=function(e){if(e){var t=new uo(e,e);for(e=t.current();e;e=t.next())if(Vn(e))return e}return null},mg=function(e){var t=Ot.fromTag("span");return Zn(t,{id:dg,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&mn(t,Ot.fromText(fg)),t},gg=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(pg(t))um(e,!1,Ot.fromDom(t),n);else{var i=o.getRng(),a=r.getParent(t,r.isBlock),u=i.startContainer,s=i.startOffset,c=i.endContainer,l=i.endOffset,f=function(e){var t=hg(e);return t&&t.nodeValue.charAt(0)===fg&&t.deleteData(0,1),t}(t);r.remove(t,!0),u===f&&s>0&&i.setStart(f,s-1),c===f&&l>0&&i.setEnd(f,l-1),a&&r.isEmpty(a)&&hh(Ot.fromDom(a)),o.setRng(i)}},vg=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)gg(e,t,n);else if(!(t=Hl(e.getBody(),o.getStart())))for(;t=r.get(dg);)gg(e,t,!1)},yg=function(e,t){return e.appendChild(t),t},bg=function(e,t){var n=X(e,(function(e,t){return yg(e,t.cloneNode(!1))}),t);return yg(n,n.ownerDocument.createTextNode(fg))},Cg=function(e,t,n,r){var o,i,a,u=e.dom,s=e.selection,c=[],l=s.getRng(),f=l.startContainer,d=l.startOffset;for(i=f,3===f.nodeType&&(d!==f.nodeValue.length&&(o=!0),i=i.parentNode);i;){if(ug(e,i,t,n,r)){a=i;break}i.nextSibling&&(o=!0),c.push(i),i=i.parentNode}if(a)if(o){var p=s.getBookmark();l.collapse(!0);var h=Ff(e,l,e.formatter.get(t),!0);h=Cd(h),e.formatter.remove(t,n,h,r),s.moveToBookmark(p)}else{var m=Hl(e.getBody(),a),g=mg(!1).dom;!function(e,t,n){var r=e.dom,o=r.getParent(n,S(of,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(ph(Ot.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))}(e,g,null!==m?m:a);var v=function(e,t,n,r,o,i){var a=e.formatter,u=e.dom,s=G(ae(a.get()),(function(e){return e!==r&&!Le(e,"removeformat")})),c=lg(e,n,s);if(G(c,(function(t){return!hf(e,t,r)})).length>0){var l=n.cloneNode(!1);return u.add(t,l),a.remove(r,o,l,i),u.remove(l),R.some(l)}return R.none()}(e,g,a,t,n,r),y=bg(c.concat(v.toArray()),g);gg(e,m,!1),s.setCursorLocation(y,1),u.isEmpty(a)&&u.remove(a)}},xg=function(e){e.on("mouseup keydown",(function(t){!function(e,t){var n=e.selection,r=e.getBody();vg(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==fg||vg(e,Hl(r,n.getStart())),37!==t&&39!==t||vg(e,Hl(r,n.getStart()))}(e,t.keyCode)}))},wg=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(zt(t))&&!Vl(t.dom)&&!In(t.dom)},_g={},Sg=we,Eg=Ce;!function(e,t){_g[e]||(_g[e]=[]),_g[e].push(t)}("pre",(function(e){var t,n=e.selection.getRng(),r=Fn(["pre"]);n.collapsed||(t=e.selection.getSelectedBlocks(),Eg(Sg(Sg(t,r),(function(e){return r(e.previousSibling)&&-1!==_e(t,e.previousSibling)})),(function(e){var t,n;t=e.previousSibling,su(n=e).remove(),su(t).append("<br><br>").append(n.childNodes)})))}));var Ag,Dg,kg=kt.each,Tg=function(e){return Nn(e)&&!Jl(e)&&!Vl(e)&&!In(e)},Og=function(e,t){var n;for(n=e;n;n=n[t]){if(Vn(n)&&0!==n.nodeValue.length)return e;if(Nn(n)&&!Jl(n))return n}return e},Bg=function(e,t,n){var r,o,i=jp(e);if(t&&n&&(t=Og(t,"previousSibling"),n=Og(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)o=r,r=r.nextSibling,t.appendChild(o);return e.remove(n),kt.each(kt.grep(n.childNodes),(function(e){t.appendChild(e)})),t}return n},Ng=function(e,t,n,r){if(r&&!1!==t.merge_siblings){var o=Bg(e,rf(r),r);Bg(e,o,rf(o,!0))}},Fg=function(e,t,n){kg(e.childNodes,(function(e){Tg(e)&&(t(e)&&n(e),e.hasChildNodes()&&Fg(e,t,n))}))},Mg=function(e,t){return function(n){return!(!n||!ff(e,n,t))}},Pg=function(e,t,n){return function(r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)}(e,r)}},Ig=Sr([{keep:[]},{rename:["name"]},{removed:[]}]),Rg=/^(src|href|style)$/,Lg=kt.each,zg=cf,Vg=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Hg=function(e,t,n){var r,o;if(r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],Nn(r)){var i=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>i?i:o]}return Vn(r)&&n&&o>=r.nodeValue.length&&(r=new uo(r,e.getBody()).next()||r),Vn(r)&&!n&&0===o&&(r=new uo(r,e.getBody()).prev()||r),r},$g=function(e,t){var n=t?"firstChild":"lastChild";if(function(e){return/^(TR|TH|TD)$/.test(e.nodeName)}(e)&&e[n]){var r=e[n];return"TR"===e.nodeName&&r[n]||r}return e},jg=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},Ug=function(e,t,n,r,o){var i=Ot.fromDom(t),a=Ot.fromDom(e.create(r,o)),u=n?Zt(i):Qt(i);return gn(a,u),n?(dn(i,a),hn(a,i)):(pn(i,a),mn(a,i)),a.dom},Wg=function(e,t,n,r){return!(t=rf(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},qg=function(e,t,n,r,o){var i,a=e.dom;if(!function(e,t,n){return!!zg(t,n.inline)||!!zg(t,n.block)||(n.selector?Nn(t)&&e.is(t,n.selector):void 0)}(a,r,t)&&!function(e,t){return t.links&&"A"===e.nodeName}(r,t))return Ig.keep();var u=r;if(t.inline&&"all"===t.remove&&d(t.preserve_attributes)){var s=G(a.getAttribs(u),(function(e){return $(t.preserve_attributes,e.name.toLowerCase())}));if(a.removeAllAttribs(u),W(s,(function(e){return a.setAttrib(u,e.name,e.value)})),s.length>0)return Ig.rename("span")}if("all"!==t.remove){Lg(t.styles,(function(e,r){e=lf(a,sf(e,n),r+""),b(r)&&(r=e,o=null),(t.remove_similar||!o||zg(ff(a,o,r),e))&&a.setStyle(u,r,""),i=!0})),i&&""===a.getAttrib(u,"style")&&(u.removeAttribute("style"),u.removeAttribute("data-mce-style")),Lg(t.attributes,(function(e,r){var i;if(e=sf(e,n),b(r)&&(r=e,o=null),t.remove_similar||!o||zg(a.getAttrib(o,r),e)){if("class"===r&&(e=a.getAttrib(u,r))&&(i="",W(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)})),i))return void a.setAttrib(u,r,i);if(Rg.test(r)&&u.removeAttribute("data-mce-"+r),"style"===r&&Fn(["li"])(u)&&"none"===a.getStyle(u,"list-style-type"))return u.removeAttribute(r),void a.setStyle(u,"list-style-type","none");"class"===r&&u.removeAttribute("className"),u.removeAttribute(r)}})),Lg(t.classes,(function(e){e=sf(e,n),o&&!a.hasClass(o,e)||a.removeClass(u,e)}));for(var c=a.getAttribs(u),l=0;l<c.length;l++){var f=c[l].nodeName;if(0!==f.indexOf("_")&&0!==f.indexOf("data-"))return Ig.keep()}}return"none"!==t.remove?(function(e,t,n){var r,o=t.parentNode,i=e.dom,a=tc(e);n.block&&(a?o===i.getRoot()&&(n.list_block&&zg(t,n.list_block)||W(ie(t.childNodes),(function(t){af(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=jg(i,t,a),i.setAttribs(r,e.settings.forced_root_block_attrs)):r=0}))):i.isBlock(t)&&!i.isBlock(o)&&(Wg(i,t,!1)||Wg(i,t.firstChild,!0,!0)||t.insertBefore(i.create("br"),t.firstChild),Wg(i,t,!0)||Wg(i,t.lastChild,!1,!0)||t.appendChild(i.create("br")))),n.selector&&n.inline&&!zg(n.inline,t)||i.remove(t,!0)}(e,u,t),Ig.removed()):Ig.keep()},Gg=function(e,t,n,r,o){return qg(e,t,n,r,o).fold(N,(function(t){return e.dom.rename(r,t),!0}),F)},Xg=function(e,t,n,r){return qg(e,t,n,r,r).fold(w(r),(function(t){return e.dom.createFragment().appendChild(r),e.dom.rename(r,t)}),w(null))},Kg=function(e,t,n,r,o){var i=e.formatter.get(t),a=i[0],u=!0,s=e.dom,c=e.selection,l=function(r){var u=function(e,t,n,r,o){var i;return W(pf(e.dom,t.parentNode).reverse(),(function(t){if(!i&&"_start"!==t.id&&"_end"!==t.id){var a=ug(e,t,n,r,o);a&&!1!==a.split&&(i=t)}})),i}(e,r,t,n,o);return function(e,t,n,r,o,i,a,u){var s,c,l,f=e.dom;if(n){for(var d=n.parentNode,p=r.parentNode;p&&p!==d;p=p.parentNode){s=f.clone(p,!1);for(var h=0;h<t.length&&null!==(s=Xg(e,t[h],u,s));h++);s&&(c&&s.appendChild(c),l||(l=s),c=s)}!i||a.mixed&&f.isBlock(n)||(r=f.split(n,r)),c&&(o.parentNode.insertBefore(c,o),l.appendChild(o),a.inline&&Ng(f,a,0,c))}return r}(e,i,u,r,r,!0,a,n)},f=function(t){var r,o,c=t.parentNode;Vn(t)&&yf(s,c)&&Gg(e,a,n,c,c),Nn(t)&&s.getContentEditable(t)&&(r=u,u="true"===s.getContentEditable(t),o=!0);var l=ie(t.childNodes);if(u&&!o)for(var d=0;d<i.length&&!Gg(e,i[d],n,t,t);d++);if(a.deep&&l.length){for(d=0;d<l.length;d++)f(l[d]);o&&(u=r)}},d=function(e){var t=s.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return function(e){return Jl(e)&&Nn(e)&&("_start"===e.id||"_end"===e.id)}(n)&&(n=n[e?"firstChild":"lastChild"]),Vn(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),s.remove(t,!0),n},p=function(t){var n,r,o=Ff(e,t,i,t.collapsed);if(a.split){if(o=Cd(o),(n=Hg(e,o,!0))!==(r=Hg(e,o))){if(n=$g(n,!0),r=$g(r,!1),Vg(s,n,r)){var u=R.from(n.firstChild).getOr(n);return l(Ug(s,u,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void d(!0)}if(Vg(s,r,n))return u=R.from(r.lastChild).getOr(r),l(Ug(s,u,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void d(!1);n=jg(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=jg(s,r,"span",{id:"_end","data-mce-type":"bookmark"});var c=s.createRng();c.setStartAfter(n),c.setEndBefore(r),Pf(s,c,(function(e){W(e,(function(e){Jl(e)||Jl(e.parentNode)||l(e)}))})),l(n),l(r),n=d(!0),r=d()}else n=r=l(n);o.startContainer=n.parentNode?n.parentNode:n,o.startOffset=s.nodeIndex(n),o.endContainer=r.parentNode?r.parentNode:r,o.endOffset=s.nodeIndex(r)+1}Pf(s,o,(function(t){W(t,(function(t){f(t),W(["underline","line-through","overline"],(function(n){Nn(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&df(s,t.parentNode)===n&&Gg(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,t)}))}))}))};if(r)if(tf(r)){var h=s.createRng();h.setStartBefore(r),h.setEndAfter(r),p(h)}else p(r);else if("false"!==s.getContentEditable(c.getNode()))c.isCollapsed()&&a.inline&&!zf(e).length?Cg(e,t,n,o):(qf(c,!0,(function(){Wf(e,p)})),a.inline&&sg(e,t,n,c.getStart())&&nf(s,c,c.getRng()),e.nodeChanged());else{r=c.getNode();for(var m=0;m<i.length&&(!i[m].ceFalseOverride||!Gg(e,i[m],n,r,r));m++);}},Yg=kt.each,Jg=function(e,t,n,r){Yg(t,(function(t){Yg(e.dom.select(t.inline,r),(function(r){Tg(r)&&Gg(e,t,n,r,t.exact?r:null)})),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";kg(e.select(r,n),(function(n){Tg(n)&&kg(t.styles,(function(t,r){e.setStyle(n,r,"")}))}))}}(e.dom,t,r)}))},Qg=kt.each,Zg=function(e,t){return ye(e,t)},ev=function(e,t,n,r){var o=e.formatter.get(t),i=o[0],a=!r&&e.selection.isCollapsed(),u=e.dom,s=e.selection,c=function(e,t){if(t=t||i,e){if(t.onformat&&t.onformat(e,t,n,r),Qg(t.styles,(function(t,r){u.setStyle(e,r,sf(t,n))})),t.styles){var o=u.getAttrib(e,"style");o&&u.setAttrib(e,"data-mce-style",o)}Qg(t.attributes,(function(t,r){u.setAttrib(e,r,sf(t,n))})),Qg(t.classes,(function(t){t=sf(t,n),u.hasClass(e,t)||u.addClass(e,t)}))}},l=function(e,t){var n=!1;return!!gf(i)&&(Qg(e,(function(e){if(!("collapsed"in e)||e.collapsed===a)return u.is(t,e.selector)&&!Vl(t)?(c(t,e),n=!0,!1):void 0})),n)},f=function(r,a,u,s){var f=[],d=!0,p=i.inline||i.block,h=r.create(p);c(h),Pf(r,a,(function(a){var u,m=function(a){var g=!1,v=d,y=a.nodeName.toLowerCase(),b=a.parentNode.nodeName.toLowerCase();if(Nn(a)&&r.getContentEditable(a)&&(v=d,d="true"===r.getContentEditable(a),g=!0),Un(a)&&!function(e,t,n,r){if(function(e){return e.getParam("format_empty_lines",!1,"boolean")}(e)&&vf(t)){var o=De(De({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),i=Zm(Ot.fromDom(n),(function(e){return Vl(e.dom)}));return ye(o,r)&&ei(Ot.fromDom(n.parentNode),!1)&&!i}return!1}(e,i,a,b))return u=null,void(mf(i)&&r.remove(a));if(i.wrapper&&ug(e,a,t,n))u=null;else{if(d&&!g&&mf(i)&&!i.wrapper&&of(e,y)&&af(e,b,p)){var C=r.rename(a,p);return c(C),f.push(C),void(u=null)}if(gf(i)){var x=l(o,a);if(Vn(a)&&yf(r,a.parentNode)&&l(o,a.parentNode),!Zg(i,"inline")||x)return void(u=null)}!d||g||!af(e,p,y)||!af(e,b,p)||!s&&3===a.nodeType&&1===a.nodeValue.length&&65279===a.nodeValue.charCodeAt(0)||Vl(a)||Zg(i,"inline")&&r.isBlock(a)?(u=null,Qg(kt.grep(a.childNodes),m),g&&(d=v),u=null):(u||(u=r.clone(h,!1),a.parentNode.insertBefore(u,a),f.push(u)),u.appendChild(a))}};Qg(a,m)})),!0===i.links&&Qg(f,(function(e){var t=function(e){"A"===e.nodeName&&c(e,i),Qg(kt.grep(e.childNodes),t)};t(e)})),Qg(f,(function(a){var u,s=function(e){var t=!1;return Qg(e.childNodes,(function(e){if(function(e){return e&&1===e.nodeType&&!Jl(e)&&!Vl(e)&&!In(e)}(e))return t=e,!1})),t},l=(u=0,Qg(a.childNodes,(function(e){(function(e){return v(e)&&Vn(e)&&0===e.length})(e)||Jl(e)||u++})),u);!(f.length>1)&&r.isBlock(a)||0!==l?(vf(i)||i.wrapper)&&(i.exact||1!==l||(a=function(e){var t,n=s(e);return n&&!Jl(n)&&ig(r,n,i)&&(t=r.clone(n,!1),c(t),r.replace(t,e,!0),r.remove(n,!0)),t||e}(a)),Jg(e,o,n,a),function(e,t,n,r,o){ug(e,o.parentNode,n,r)&&Gg(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,(function(i){if(ug(e,i,n,r))return Gg(e,t,r,o),!0}))}(e,i,t,n,a),function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Fg(r,Mg(e,"fontSize"),Pg(e,"backgroundColor",sf(t.styles.backgroundColor,n)))}(r,i,n,a),function(e,t,n,r){var o=function(t){if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){var n=df(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(kt.walk(r,o,"childNodes"),o(r))}(r,i,0,a),function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(Fg(r,Mg(e,"fontSize"),Pg(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))}(r,i,0,a),Ng(r,i,0,a)):r.remove(a,!0)}))};if("false"!==u.getContentEditable(s.getNode())){if(i){if(r)if(tf(r)){if(!l(o,r)){var d=u.createRng();d.setStartBefore(r),d.setEndAfter(r),f(u,Ff(e,d,o),0,!0)}}else f(u,r,0,!0);else if(a&&vf(i)&&!zf(e).length)!function(e,t,n){var r,o,i=e.selection,a=i.getRng(),u=a.startOffset,s=a.startContainer.nodeValue;(r=Hl(e.getBody(),i.getStart()))&&(o=hg(r));var c,l,f=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(s&&u>0&&u<s.length&&f.test(s.charAt(u))&&f.test(s.charAt(u-1))){var d=i.getBookmark();a.collapse(!0);var p=Ff(e,a,e.formatter.get(t));p=Cd(p),e.formatter.apply(t,n,p),i.moveToBookmark(d)}else r&&o.nodeValue===fg||(c=e.getDoc(),l=mg(!0).dom,o=(r=c.importNode(l,!0)).firstChild,a.insertNode(r),u=1),e.formatter.apply(t,n,r),i.setCursorLocation(o,u)}(e,t,n);else{var p=s.getNode(),h=o[0];e.settings.forced_root_block||!h.defaultBlock||u.getParent(p,u.isBlock)||ev(e,h.defaultBlock),s.setRng(Im(s.getRng())),qf(s,!0,(function(t){Wf(e,(function(t,n){var r=n?t:Ff(e,t,o);f(u,r)}))})),nf(u,s,s.getRng()),e.nodeChanged()}!function(e,t){Eg(_g[e],(function(e){e(t)}))}(t,e)}}else{r=s.getNode();for(var m=0,g=o.length;m<g;m++){var y=o[m];if(y.ceFalseOverride&&gf(y)&&u.is(r,y.selector))return void c(r,y)}}},tv=function(e,t,n,r){var o=ae(n.get()),i={},a={},u=G(pf(e.dom,t),(function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}));se(r,(function(t,n){kt.each(u,(function(r){return e.formatter.matchNode(r,n,{},t.similar)?(-1===o.indexOf(n)&&(W(t.callbacks,(function(e){e(!0,{node:r,format:n,parents:u})})),i[n]=t.callbacks),a[n]=t.callbacks,!1):!rg(e,r,n)&&void 0}))}));var s=nv(n.get(),a,t,u);n.set(De(De({},i),s))},nv=function(e,t,n,r){return pe(e,(function(e,o){return!!ve(t,o)||(W(e,(function(e){e(!1,{node:n,format:o,parents:r})})),!1)})).t},rv=function(e,t,n,r,o){return null===t.get()&&function(e,t){var n=Cu({});e.set({}),t.on("NodeChange",(function(r){tv(t,r.element,n,e.get())}))}(t,e),function(e,t,n,r){var o=e.get();W(t.split(","),(function(e){o[e]||(o[e]={similar:r,callbacks:[]}),o[e].callbacks.push(n)})),e.set(o)}(t,n,r,o),{unbind:function(){return function(e,t,n){var r=e.get();W(t.split(","),(function(e){r[e].callbacks=G(r[e].callbacks,(function(e){return e!==n})),0===r[e].callbacks.length&&delete r[e]})),e.set(r)}(t,n,r)}}},ov=function(e,t){var n=(t||document).createDocumentFragment();return W(e,(function(e){n.appendChild(e.dom)})),Ot.fromDom(n)},iv=function(e,t,n){return{element:e,width:t,rows:n}},av=function(e,t){return{element:e,cells:t}},uv=function(e,t){return{x:e,y:t}},sv=function(e,t){var n=parseInt(er(e,t),10);return isNaN(n)?1:n},cv=function(e,t,n){var r=e.rows;return!!(r[n]?r[n].cells:[])[t]},lv=function(e){return K(e,(function(e,t){return t.cells.length>e?t.cells.length:e}),0)},fv=function(e,t){for(var n=e.rows,r=0;r<n.length;r++)for(var o=n[r].cells,i=0;i<o.length;i++)if(Mt(o[i],t))return R.some(uv(i,r));return R.none()},dv=function(e,t,n,r,o){for(var i=[],a=e.rows,u=n;u<=o;u++){var s=a[u].cells,c=t<r?s.slice(t,r+1):s.slice(r,t+1);i.push(av(a[u].element,c))}return i},pv=function(e){var t=iv(Xu(e),0,[]);return W(Iu(e,"tr"),(function(e,n){W(Iu(e,"td,th"),(function(r,o){!function(e,t,n,r,o){for(var i=sv(o,"rowspan"),a=sv(o,"colspan"),u=e.rows,s=n;s<n+i;s++){u[s]||(u[s]=av(Ku(r),[]));for(var c=t;c<t+a;c++)u[s].cells[c]=s===n&&c===t?o:Xu(o)}}(t,function(e,t,n){for(;cv(e,t,n);)t++;return t}(t,o,n),n,e,r)}))})),iv(t.element,lv(t.rows),t.rows)},hv=function(e){return function(e,t){var n=Xu(e.element),r=Ot.fromTag("tbody");return gn(r,t),mn(n,r),n}(e,function(e){return U(e.rows,(function(e){var t=U(e.cells,(function(e){var t=Ku(e);return nr(t,"colspan"),nr(t,"rowspan"),t})),n=Xu(e.element);return gn(n,t),n}))}(e))},mv=function(e,t,n){return fv(e,t).bind((function(t){return fv(e,n).map((function(n){return function(e,t,n){var r=t.x,o=t.y,i=n.x,a=n.y,u=o<a?dv(e,r,o,i,a):dv(e,r,a,i,o);return iv(e.element,lv(u),u)}(e,t,n)}))}))},gv=function(e,t){return Y(e,(function(e){return"li"===zt(e)&&$f(e,t)})).fold(w([]),(function(t){return function(e){return Y(e,(function(e){return"ul"===zt(e)||"ol"===zt(e)}))}(e).map((function(e){var t=Ot.fromTag(zt(e)),n=he(ur(e),(function(e,t){return ze(t,"list-style")}));return rr(t,n),[Ot.fromTag("li"),t]})).getOr([])}))},vv=function(e,t){var n=Ot.fromDom(t.commonAncestorContainer),r=yh(n,e),o=G(r,(function(e){return fo(e)||co(e)})),i=gv(r,t),a=o.concat(i.length?i:function(e){return go(e)?Kt(e).filter(mo).fold(w([]),(function(t){return[e,t]})):mo(e)?[e]:[]}(n));return U(a,Xu)},yv=function(){return ov([])},bv=function(e,t){return n=Ot.fromDom(t.cloneContents()),r=vv(e,t),o=K(r,(function(e,t){return mn(t,e),t}),n),r.length>0?ov([o]):o;var n,r,o},Cv=function(e,t){return(n=e,r=t[0],Jr(r,"table",S(Mt,n))).bind((function(e){var n=t[0],r=t[t.length-1],o=pv(e);return mv(o,n,r).map((function(e){return ov([hv(e)])}))})).getOrThunk(yv);var n,r},xv=function(e,t){var n=Lf(t,e);return n.length>0?Cv(e,n):function(e,t){return t.length>0&&t[0].collapsed?yv():bv(e,t[0])}(e,t)},wv=function(e,t){return t>=0&&t<e.length&&Zl(e.charAt(t))},_v=function(e,t){var n=_o(e.innerText);return t?function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")}(n):n},Sv=function(e,t,n){if(void 0===n&&(n={}),n.get=!0,n.format=t,n.selection=!0,(n=e.fire("BeforeGetContent",n)).isDefaultPrevented())return e.fire("GetContent",n),n.content;if("text"===n.format)return function(e){return R.from(e.selection.getRng()).map((function(t){var n=R.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),o=function(e){return e.map((function(e){return e.nodeName})).getOr("div").toLowerCase()}(n),i=_t.browser.isIE()&&"pre"!==o,a=e.dom.add(r,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),u=_v(a,i),s=_o(a.textContent);if(e.dom.remove(a),wv(s,0)||wv(s,s.length-1)){var c=n.getOr(r),l=_v(c,i),f=l.indexOf(u);return-1===f?u:(wv(l,f-1)?" ":"")+u+(wv(l,f+u.length)?" ":"")}return u})).getOr("")}(e);n.getInner=!0;var r=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),o=e.selection.getSel(),i=Dp(e,If(o)),a=t.contextual?xv(Ot.fromDom(e.getBody()),i).dom:n.cloneContents();return a&&r.appendChild(a),e.selection.serializer.serialize(r,t)}(e,n);return"tree"===n.format?r:(n.content=e.selection.isCollapsed()?"":r,e.fire("GetContent",n),n.content)},Ev=function(e){return Nn(e)?e.outerHTML:Vn(e)?yi.encodeRaw(e.data,!1):Hn(e)?"\x3c!--"+e.data+"--\x3e":""},Av=function(e,t,n){var r=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodes[n];o.parentNode.insertBefore(r,o)}else e.appendChild(r)},Dv=function(e,t){var n,r,o,i,a,u,s,c,l,f=U(ie(t.childNodes),Ev);return function(e,t){var n=0;W(e,(function(e){0===e[0]?n++:1===e[0]?(Av(t,e[1],n),n++):2===e[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)}))}((r=e,o=(n=f).length+r.length+2,i=new Array(o),a=new Array(o),u=function(e,t,o,i,a){var s=c(e,t,o,i);if(null===s||s.start===t&&s.diag===t-i||s.end===e&&s.diag===e-o)for(var l=e,f=o;l<t||f<i;)l<t&&f<i&&n[l]===r[f]?(a.push([0,n[l]]),++l,++f):t-e>i-o?(a.push([2,n[l]]),++l):(a.push([1,r[f]]),++f);else{u(e,s.start,o,s.start-s.diag,a);for(var d=s.start;d<s.end;++d)a.push([0,n[d]]);u(s.end,t,s.end-s.diag,i,a)}},s=function(e,t,o,i){for(var a=e;a-t<i&&a<o&&n[a]===r[a-t];)++a;return function(e,t,n){return{start:e,end:t,diag:n}}(e,a,t)},c=function(e,t,o,u){var c=t-e,l=u-o;if(0===c||0===l)return null;var f,d,p,h,m,g=c-l,v=l+c,y=(v%2==0?v:v+1)/2;for(i[1+y]=e,a[1+y]=t+1,f=0;f<=y;++f){for(d=-f;d<=f;d+=2){for(p=d+y,d===-f||d!==f&&i[p-1]<i[p+1]?i[p]=i[p+1]:i[p]=i[p-1]+1,m=(h=i[p])-e+o-d;h<t&&m<u&&n[h]===r[m];)i[p]=++h,++m;if(g%2!=0&&g-f<=d&&d<=g+f&&a[p-g]<=i[p])return s(a[p-g],d+e-o,t,u)}for(d=g-f;d<=g+f;d+=2){for(p=d+y-g,d===g-f||d!==g+f&&a[p+1]<=a[p-1]?a[p]=a[p+1]-1:a[p]=a[p-1],m=(h=a[p]-1)-e+o-d;h>=e&&m>=o&&n[h]===r[m];)a[p]=h--,m--;if(g%2==0&&-f<=d&&d<=f&&a[p]<=i[p+g])return s(a[p],d+e-o,t,u)}}},l=[],u(0,n.length,0,r.length,l),l),t),t},kv=Cu(R.none()),Tv=function(e){var t,n=(t=e.getBody(),G(U(ie(t.childNodes),Ev),(function(e){return e.length>0}))),r=Q(n,(function(t){var n=zp(e.serializer,t);return n.length>0?[n]:[]})),o=r.join("");return-1!==o.indexOf("</iframe>")?function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}(r):function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}(o)},Ov=function(e,t,n){"fragmented"===t.type?Dv(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},Bv=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},Nv=function(e){var t=Ot.fromTag("body",kv.get().getOrThunk((function(){var e=document.implementation.createHTMLDocument("undo");return kv.set(R.some(e)),e})));return qu(t,Bv(e)),W(Iu(t,"*[data-mce-bogus]"),bn),t.dom.innerHTML},Fv=function(e,t){return!(!e||!t)&&(!!function(e,t){return Bv(e)===Bv(t)}(e,t)||function(e,t){return Nv(e)===Nv(t)}(e,t))},Mv=function(e){return 0===e.get()},Pv=function(e,t,n){Mv(n)&&(e.typing=t)},Iv=function(e,t){e.typing&&(Pv(e,!1,t),e.add())},Rv=function(e){return{undoManager:{beforeChange:function(t,n){return function(e,t,n){Mv(t)&&n.set(R.some(Js(e.selection)))}(e,t,n)},addUndoLevel:function(t,n,r,o,i,a){return function(e,t,n,r,o,i,a){var u=Tv(e);if(i=i||{},i=kt.extend(i,u),!1===Mv(r)||e.removed)return null;var s=t.data[n.get()];if(e.fire("BeforeAddUndo",{level:i,lastLevel:s,originalEvent:a}).isDefaultPrevented())return null;if(s&&Fv(s,i))return null;t.data[n.get()]&&o.get().each((function(e){t.data[n.get()].beforeBookmark=e}));var c=function(e){return e.getParam("custom_undo_redo_levels",0,"number")}(e);if(c&&t.data.length>c){for(var l=0;l<t.data.length-1;l++)t.data[l]=t.data[l+1];t.data.length--,n.set(t.data.length)}i.bookmark=Js(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(i),n.set(t.data.length-1);var f={level:i,lastLevel:s,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.fire("AddUndo",f),e.fire("change",f)):e.fire("AddUndo",f),i}(e,t,n,r,o,i,a)},undo:function(t,n,r){return function(e,t,n,r){var o;return t.typing&&(t.add(),t.typing=!1,Pv(t,!1,n)),r.get()>0&&(r.set(r.get()-1),o=t.data[r.get()],Ov(e,o,!0),e.setDirty(!0),e.fire("Undo",{level:o})),o}(e,t,n,r)},redo:function(t,n){return function(e,t,n){var r;return t.get()<n.length-1&&(t.set(t.get()+1),r=n[t.get()],Ov(e,r,!1),e.setDirty(!0),e.fire("Redo",{level:r})),r}(e,t,n)},clear:function(t,n){return function(e,t,n){t.data=[],n.set(0),t.typing=!1,e.fire("ClearUndos")}(e,t,n)},reset:function(e){return function(e){e.clear(),e.add()}(e)},hasUndo:function(t,n){return function(e,t,n){return n.get()>0||t.typing&&t.data[0]&&!Fv(Tv(e),t.data[0])}(e,t,n)},hasRedo:function(e,t){return function(e,t){return t.get()<e.data.length-1&&!e.typing}(e,t)},transact:function(e,t,n){return function(e,t,n){return Iv(e,t),e.beforeChange(),e.ignore(n),e.add()}(e,t,n)},ignore:function(e,t){return function(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}}(e,t)},extra:function(t,n,r,o){return function(e,t,n,r,o){if(t.transact(r)){var i=t.data[n.get()].bookmark,a=t.data[n.get()-1];Ov(e,a,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=i)}}(e,t,n,r,o)}},formatter:{match:function(t,n,r){return sg(e,t,n,r)},matchAll:function(t,n){return function(e,t,n){var r=[],o={},i=e.selection.getStart();return e.dom.getParent(i,(function(i){for(var a=0;a<t.length;a++){var u=t[a];!o[u]&&ug(e,i,u,n)&&(o[u]=!0,r.push(u))}}),e.dom.getRoot()),r}(e,t,n)},matchNode:function(t,n,r,o){return ug(e,t,n,r,o)},canApply:function(t){return function(e,t){var n,r,o,i,a,u=e.formatter.get(t),s=e.dom;if(u)for(n=e.selection.getStart(),r=pf(s,n),i=u.length-1;i>=0;i--){if(!(a=u[i].selector)||u[i].defaultBlock)return!0;for(o=r.length-1;o>=0;o--)if(s.is(r[o],a))return!0}return!1}(e,t)},closest:function(t){return cg(e,t)},apply:function(t,n,r){return ev(e,t,n,r)},remove:function(t,n,r,o){return Kg(e,t,n,r,o)},toggle:function(t,n,r){return function(e,t,n,r){var o=e.formatter.get(t);!sg(e,t,n,r)||"toggle"in o[0]&&!o[0].toggle?ev(e,t,n,r):Kg(e,t,n,r)}(e,t,n,r)},formatChanged:function(t,n,r,o){return rv(e,t,n,r,o)}},editor:{getContent:function(t,n){return function(e,t,n){return R.from(e.getBody()).fold(w("tree"===t.format?new Np("body",11):""),(function(r){return Hp(e,t,n,r)}))}(e,t,n)},setContent:function(t,n){return Qm(e,t,n)},insertContent:function(t,n){return Gm(e,t,n)},addVisual:function(t){return function(e,t){var n=e.dom,r=v(t)?t:e.getBody();m(e.hasVisual)&&(e.hasVisual=function(e){return e.getParam("visual",!0,"boolean")}(e)),W(n.select("table,a",r),(function(t){switch(t.nodeName){case"TABLE":var r=function(e){return e.getParam("visual_table_class","mce-item-table","string")}(e),o=n.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?n.removeClass(t,r):n.addClass(t,r);break;case"A":if(!n.getAttrib(t,"href")){var i=n.getAttrib(t,"name")||t.id,a=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")}(e);i&&e.hasVisual?n.addClass(t,a):n.removeClass(t,a)}}})),e.fire("VisualAid",{element:t,hasVisual:e.hasVisual})}(e,t)}},selection:{getContent:function(t,n){return Sv(e,t,n)}},raw:{getModel:function(){return R.none()}}}},Lv=function(e){return ve(e.plugins,"rtc")},zv=function(e){var t=e;return function(e){return ge(e.plugins,"rtc").bind((function(e){return R.from(e.setup)}))}(e).fold((function(){return t.rtcInstance=Rv(e),R.none()}),(function(e){return R.some(e().then((function(e){return t.rtcInstance=function(e){var t=function(e){return f(e)?e:{}},n=T("Unimplemented feature for rtc"),r=e.undoManager,o=e.formatter,i=e.editor,a=e.selection,u=e.raw;return{undoManager:{beforeChange:C,addUndoLevel:n,undo:function(){return r.undo()},redo:function(){return r.redo()},clear:function(){return r.clear()},reset:function(){return r.reset()},hasUndo:function(){return r.hasUndo()},hasRedo:function(){return r.hasRedo()},transact:function(e,t,n){return r.transact(n)},ignore:function(e,t){return r.ignore(t)},extra:function(e,t,n,o){return r.extra(n,o)}},formatter:{match:function(e,n,r){return o.match(e,t(n))},matchAll:n,matchNode:n,canApply:function(e){return o.canApply(e)},closest:function(e){return o.closest(e)},apply:function(e,n,r){return o.apply(e,t(n))},remove:function(e,n,r,i){return o.remove(e,t(n))},toggle:function(e,n,r){return o.toggle(e,t(n))},formatChanged:function(e,t,n,r){return o.formatChanged(t,n,r)}},editor:{getContent:function(e,t){return i.getContent(e)},setContent:function(e,t){return i.setContent(e,t)},insertContent:function(e,t){return i.insertContent(e)},addVisual:C},selection:{getContent:function(e,t){return a.getContent(t)}},raw:{getModel:function(){return R.some(u.getRawModel())}}}}(e),e.rtc.isRemote}),(function(e){var n,r;return t.rtcInstance=(n=w(null),r=w(""),{undoManager:{beforeChange:C,addUndoLevel:n,undo:n,redo:n,clear:C,reset:C,hasUndo:N,hasRedo:N,transact:n,ignore:C,extra:C},formatter:{match:N,matchAll:w([]),matchNode:N,canApply:N,closest:r,apply:C,remove:C,toggle:C,formatChanged:w({unbind:C})},editor:{getContent:r,setContent:r,insertContent:C,addVisual:C},selection:{getContent:r},raw:{getModel:w(R.none())}}),eo.reject(e)})))}))},Vv=function(e){return e.rtcInstance?e.rtcInstance:Rv(e)},Hv=function(e){var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},$v=function(e,t){return void 0===t&&(t={}),function(e,t,n){return Hv(e).selection.getContent(t,n)}(e,t.format?t.format:"html",t)},jv=function(e){return 0===e.dom.length?(yn(e),R.none()):R.some(e)},Uv=function(e,t,n,r){e.bind((function(e){return(r?Kh:Xh)(e.dom,r?e.dom.length:0),t.filter(jt).map((function(t){return function(e,t,n,r){var o=e.dom,i=t.dom,a=r?o.length:i.length;r?(Yh(o,i,!1,!r),n.setStart(i,a)):(Yh(i,o,!1,!r),n.setEnd(i,a))}(e,t,n,r)}))})).orThunk((function(){return function(e,t){return e.filter((function(e){return ed.isBookmarkNode(e.dom)})).bind(t?Jt:Yt)}(t,r).or(t).filter(jt).map((function(e){return function(e,t){Kt(e).each((function(n){var r=e.dom;t&&zh(n,Ds(r,0))?Xh(r,0):!t&&Vh(n,Ds(r,r.length))&&Kh(r,r.length)}))}(e,r)}))}))},Wv=function(e,t,n){void 0===n&&(n={});var r=function(e,t){return De(De({format:"html"},e),{set:!0,selection:!0,content:t})}(n,t);if(r.no_events||!(r=e.fire("BeforeSetContent",r)).isDefaultPrevented()){n.content=function(e,t){if("raw"!==t.format){var n=e.selection.getRng(),r=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=r?{context:r.nodeName.toLowerCase()}:{},i=e.parser.parse(t.content,De(De({isRootContent:!0,forced_root_block:!1},o),t));return qp({validate:e.validate},e.schema).serialize(i)}return t.content}(e,r);var o=e.selection.getRng();!function(e,t){var n=R.from(t.firstChild).map(Ot.fromDom),r=R.from(t.lastChild).map(Ot.fromDom);e.deleteContents(),e.insertNode(t);var o=n.bind(Yt).filter(jt).bind(jv),i=r.bind(Jt).filter(jt).bind(jv);Uv(o,n,e,!0),Uv(i,r,e,!1),e.collapse(!1)}(o,o.createContextualFragment(n.content)),e.selection.setRng(o),jd(e,o),r.no_events||e.fire("SetContent",r)}else e.fire("SetContent",r)},qv=function(e,t,n){if(e&&e.hasOwnProperty(t)){var r=G(e[t],(function(e){return e!==n}));0===r.length?delete e[t]:e[t]=r}},Gv=function(e){return!!e.select},Xv=function(e){return!(!e||!e.ownerDocument)&&It(Ot.fromDom(e.ownerDocument),Ot.fromDom(e))},Kv=function(e,t,n,r){var o,i,a=function(e,t){var n,r;return{selectorChangedWithUnbind:function(o,i){return n||(n={},r={},t.on("NodeChange",(function(t){var o=t.element,i=e.getParents(o,null,e.getRoot()),a={};kt.each(n,(function(t,n){kt.each(i,(function(o){if(e.is(o,n))return r[n]||(kt.each(t,(function(e){e(!0,{node:o,selector:n,parents:i})})),r[n]=t),a[n]=t,!1}))})),kt.each(r,(function(e,t){a[t]||(delete r[t],kt.each(e,(function(e){e(!1,{node:o,selector:t,parents:i})})))}))}))),n[o]||(n[o]=[]),n[o].push(i),{unbind:function(){qv(n,o,i),qv(r,o,i)}}}}}(e,r).selectorChangedWithUnbind,u=function(e,t){return Wv(r,e,t)},s=function(e){var t=l();t.collapse(!!e),f(t)},c=function(){return t.getSelection?t.getSelection():t.document.selection},l=function(){var n,a,u,s=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}},l=t.document;if(void 0!==r.bookmark&&!1===bp(r)){var f=up(r);if(f.isSome())return f.map((function(e){return Dp(r,[e])[0]})).getOr(l.createRange())}try{(n=c())&&!Bn(n.anchorNode)&&(a=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange(),a=Dp(r,[a])[0])}catch(d){}return a||(a=l.createRange?l.createRange():l.body.createTextRange()),a.setStart&&9===a.startContainer.nodeType&&a.collapsed&&(u=e.getRoot(),a.setStart(u,0),a.setEnd(u,0)),o&&i&&(0===s(a.START_TO_START,a,o)&&0===s(a.END_TO_END,a,o)?a=i:(o=null,i=null)),a},f=function(e,t){var n;if(function(e){return!!e&&(!!Gv(e)||Xv(e.startContainer)&&Xv(e.endContainer))}(e)){var a=Gv(e)?e:null;if(a){i=null;try{a.select()}catch(s){}}else{var u=c();if(e=r.fire("SetSelectionRange",{range:e,forward:t}).range,u){i=e;try{u.removeAllRanges(),u.addRange(e)}catch(s){}!1===t&&u.extend&&(u.collapse(e.endContainer,e.endOffset),u.extend(e.startContainer,e.startOffset)),o=u.rangeCount>0?u.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!u.setBaseAndExtent||_t.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(u.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),u.anchorNode===e.startContainer&&u.focusNode===e.endContainer||u.setBaseAndExtent(n,0,n,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},d=function(){var t=c(),n=null==t?void 0:t.anchorNode,r=null==t?void 0:t.focusNode;if(!t||!n||!r||Bn(n)||Bn(r))return!0;var o=e.createRng();o.setStart(n,t.anchorOffset),o.collapse(!0);var i=e.createRng();return i.setStart(r,t.focusOffset),i.collapse(!0),o.compareBoundaryPoints(o.START_TO_START,i)<=0},p={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:s,setCursorLocation:function(t,n){var o=e.createRng();v(t)&&v(n)?(o.setStart(t,n),o.setEnd(t,n),f(o),s(!1)):(jf(e,o,r.getBody(),!0),f(o))},getContent:function(e){return $v(r,e)},setContent:u,getBookmark:function(e,t){return h.getBookmark(e,t)},moveToBookmark:function(e){return h.moveToBookmark(e)},select:function(t,n){return function(e,t,n){return R.from(t).map((function(t){var r=e.nodeIndex(t),o=e.createRng();return o.setStart(t.parentNode,r),o.setEnd(t.parentNode,r+1),n&&(jf(e,o,t,!0),jf(e,o,t,!1)),o}))}(e,t,n).each(f),t},isCollapsed:function(){var e=l(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:d,setNode:function(t){return u(e.getOuterHTML(t)),t},getNode:function(){return function(e,t){var n,r,o;if(!t)return e;r=t.startContainer,o=t.endContainer;var i=t.startOffset,a=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(r===o&&a-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType&&3===o.nodeType&&(r=r.length===i?Ap(r.nextSibling,!0):r.parentNode,o=0===a?Ap(o.previousSibling,!1):o.parentNode,r&&r===o))?r:n&&3===n.nodeType?n.parentNode:n}(r.getBody(),l())},getSel:c,setRng:f,getRng:l,getStart:function(e){return Sp(r.getBody(),l(),e)},getEnd:function(e){return Ep(r.getBody(),l(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var o,i=[],a=e.getRoot();if(n=e.getParent(n||Sp(a,t,t.collapsed),e.isBlock),r=e.getParent(r||Ep(a,t,t.collapsed),e.isBlock),n&&n!==a&&i.push(n),n&&r&&n!==r){o=n;for(var u=new uo(n,a);(o=u.next())&&o!==r;)e.isBlock(o)&&i.push(o)}return r&&n!==r&&r!==a&&i.push(r),i}(e,l(),t,n)},normalize:function(){var t=l(),n=c();if(!(If(n).length>1)&&Uf(r)){var o=yd(e,t);return o.each((function(e){f(e,d())})),o.getOr(t)}return t},selectorChanged:function(e,t){return a(e,t),p},selectorChangedWithUnbind:a,getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){(e.inline?Vd:$d)(e,t,n)}(r,e,t)},placeCaretAt:function(e,t){return f(sd(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=l();return e.collapsed?Ds.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=o=i=null,m.destroy()}},h=ed(p),m=ad(p,r);return p.bookmarkManager=h,p.controlSelection=m,p},Yv=function(e,t,n){e.addNodeFilter("font",(function(e){W(e,(function(e){var r=t.parse(e.attr("style")),o=e.attr("color"),i=e.attr("face"),a=e.attr("size");o&&(r.color=o),i&&(r["font-family"]=i),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),function(e,t){W(t,(function(t){e.attr(t,null)}))}(e,["color","face","size"])}))}))},Jv=function(e,t){var n=Oi();t.convert_fonts_to_spans&&Yv(e,n,kt.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",(function(e){W(e,(function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))}))}))}(e,n)},Qv=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}},Zv=function(e,t){var n;try{n=atob(t)}catch(VA){return R.none()}for(var r=new Uint8Array(n.length),o=0;o<r.length;o++)r[o]=n.charCodeAt(o);return R.some(new Blob([r],{type:e}))},ey=function(e){return 0===e.indexOf("blob:")?function(e){return new eo((function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){200===o.status?t(o.response):r()},o.onerror=r,o.send()}catch(i){r()}}))}(e):0===e.indexOf("data:")?(t=e,new eo((function(e){var n=Qv(t),r=n.type,o=n.data;Zv(r,o).fold((function(){return e(new Blob([]))}),e)}))):null;var t},ty=0,ny=function(e){return(e||"blobid")+ty++},ry=function(e,t,n,r){var o,i;if(0!==t.src.indexOf("blob:")){var a=Qv(t.src),u=a.data,s=a.type;o=u,(i=e.getByData(o,s))?n({image:t,blobInfo:i}):ey(t.src).then((function(r){i=e.create(ny(),r,o),e.add(i),n({image:t,blobInfo:i})}),(function(e){r(e)}))}else(i=e.getByUri(t.src))?n({image:t,blobInfo:i}):ey(t.src).then((function(r){(function(e){return new eo((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))})(r).then((function(a){o=Qv(a).data,i=e.create(ny(),r,o),e.add(i),n({image:t,blobInfo:i})}))}),(function(e){r(e)}))},oy=function(e,t){var n={};return{findAll:function(r,o){o||(o=F);var i=G(function(e){return e?ie(e.getElementsByTagName("img")):[]}(r),(function(t){var n=t.src;return!!_t.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===_t.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&o(t):0===n.indexOf("data:")&&o(t))})),a=U(i,(function(e){if(void 0!==n[e.src])return new eo((function(t){n[e.src].then((function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));var r=new eo((function(n,r){ry(t,e,n,r)})).then((function(e){return delete n[e.image.src],e})).catch((function(t){return delete n[e.src],t}));return n[e.src]=r,r}));return eo.all(a)}}},iy=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new Np("br",1)).shortEnded=!0:r.empty().append(new Np("#text",3)).value=Co},ay=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},uy=function(e,t,n,r){return r.isEmpty(t,n,(function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)}))},sy=function(e,t){var n=t.blob_cache,r=function(e){var r,o,i=e.attr("src");(function(e){return e.attr("src")===_t.transparentSrc||e.attr("data-mce-placeholder")})(e)||function(e){return e.attr("data-mce-bogus")}(e)||(r=i,o=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(r),o?R.some({type:o[1],data:decodeURIComponent(o[2])}):R.none()).filter((function(){return function(e,t){if(t.images_dataimg_filter){var n=new Image;return n.src=e.attr("src"),se(e.attributes.map,(function(e,t){n.setAttribute(t,e)})),t.images_dataimg_filter(n)}return!0}(e,t)})).bind((function(e){var t=e.type,r=e.data;return R.from(n.getByData(r,t)).orThunk((function(){return Zv(t,r).map((function(e){var t=n.create(ny(),e,r);return n.add(t),t}))}))})).each((function(t){e.attr("src",t.blobUri())}))};n&&e.addAttributeFilter("src",(function(e){return W(e,r)}))},cy=kt.makeMap,ly=kt.each,fy=kt.explode,dy=kt.extend,py=function(e,t){void 0===t&&(t=ki());var n={},r=[],o={},i={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,u;(a=e.name)in n&&((u=o[a])?u.push(e):o[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&((u=i[a])?u.push(e):i[a]=[e]);return e},u={schema:t,addAttributeFilter:function(e,t){ly(fy(e),(function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})}))},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){ly(fy(e),(function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)}))},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(u,s){var c,l,f,d,p,h,m,g,v,y=[];s=s||{},o={},i={};var b,C=dy(cy("script,style,head,html,body,title,meta,param"),t.getBlockElements()),x=t.getNonEmptyElements(),w=t.children,_=e.validate,S="forced_root_block"in s?s.forced_root_block:e.forced_root_block,E=!1===(b=S)?"":!0===b?"p":b,A=t.getWhiteSpaceElements(),D=/^[ \t\r\n]+/,k=/[ \t\r\n]+$/,T=/[ \t\r\n]+/g,O=/^[ \t\r\n]+$/;g=A.hasOwnProperty(s.context)||A.hasOwnProperty(e.root_name);var B=function(e,t){var r,i=new Np(e,t);return e in n&&((r=o[e])?r.push(i):o[e]=[i]),i},N=function(e){var n,r,o,i,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((o=n.value.replace(k,"")).length>0)return void(n.value=o);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}i=n.prev,n.remove(),n=i}},F=Lp({validate:_,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){v.append(B("#cdata",4)).value=e},text:function(e,t){var n;g||(e=e.replace(T," "),function(e,t){return e&&(t[e.name]||"br"===e.name)}(v.lastChild,C)&&(e=e.replace(D,""))),0!==e.length&&((n=B("#text",3)).raw=!!t,v.append(n).value=e)},comment:function(e){v.append(B("#comment",8)).value=e},pi:function(e,t){v.append(B(e,7)).value=t,N(v)},doctype:function(e){v.append(B("#doctype",10)).value=e,N(v)},start:function(e,n,o){var a,u,s,c,l=_?t.getElementRule(e):{};if(l){for((a=B(l.outputName||e,1)).attributes=n,a.shortEnded=o,v.append(a),(c=w[v.name])&&w[a.name]&&!c[a.name]&&y.push(a),u=r.length;u--;)(s=r[u].name)in n.map&&((h=i[s])?h.push(a):i[s]=[a]);C[e]&&N(a),o||(v=a),!g&&A[e]&&(g=!0)}},end:function(n){var r,o,i,a,u=_?t.getElementRule(n):{};if(u){if(C[n]&&!g){if((r=v.firstChild)&&3===r.type)if((o=r.value.replace(D,"")).length>0)r.value=o,r=r.next;else for(i=r.next,r.remove(),r=i;r&&3===r.type;)o=r.value,i=r.next,(0===o.length||O.test(o))&&(r.remove(),r=i),r=i;if((r=v.lastChild)&&3===r.type)if((o=r.value.replace(k,"")).length>0)r.value=o,r=r.prev;else for(i=r.prev,r.remove(),r=i;r&&3===r.type;)o=r.value,i=r.prev,(0===o.length||O.test(o))&&(r.remove(),r=i),r=i}if(g&&A[n]&&(g=!1),u.removeEmpty&&uy(t,x,A,v))return a=v.parent,C[v.name]?v.empty().remove():v.unwrap(),void(v=a);u.paddEmpty&&(function(e){return ay(e,"#text")&&e.firstChild.value===Co}(v)||uy(t,x,A,v))&&iy(e,s,C,v),v=v.parent}}},t),M=v=new Np(s.context||e.root_name,11);if(F.parse(u,s.format),_&&y.length&&(s.context?s.invalid=!0:function(e){var n,r,o,i,u,s,c,l,f,d,p,h=cy("tr,td,th,tbody,thead,tfoot,table"),m=t.getNonEmptyElements(),g=t.getWhiteSpaceElements(),v=t.getTextBlockElements(),y=t.getSpecialElements();for(n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(v[r.name]&&"li"===r.parent.name){for(d=r.next;d&&v[d.name];)d.name="li",d.fixed=!0,r.parent.insert(d,r.parent),d=d.next;r.unwrap(r)}else{for(i=[r],o=r.parent;o&&!t.isValidChild(o.name,r.name)&&!h[o.name];o=o.parent)i.push(o);if(o&&i.length>1){for(i.reverse(),u=s=a(i[0].clone()),f=0;f<i.length-1;f++){for(t.isValidChild(s.name,i[f].name)?(c=a(i[f].clone()),s.append(c)):c=s,l=i[f].firstChild;l&&l!==i[f+1];)p=l.next,c.append(l),l=p;s=c}uy(t,m,g,u)?o.insert(r,i[0],!0):(o.insert(u,i[0],!0),o.insert(r,u)),o=i[0],(uy(t,m,g,o)||ay(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((d=r.prev)&&("ul"===d.name||"ol"===d.name)){d.append(r);continue}if((d=r.next)&&("ul"===d.name||"ol"===d.name)){d.insert(r,d.firstChild,!0);continue}r.wrap(a(new Np("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(a(new Np("div",1))):y[r.name]?r.empty().remove():r.unwrap()}}}(y)),E&&("body"===M.name||s.isRootContent)&&function(){var n,r,o=M.firstChild,i=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(D,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(k,"")))};if(t.isValidChild(M.name,E.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!C[o.name]&&!o.attr("data-mce-type")?(r||((r=B(E,1)).attr(e.forced_root_block_attrs),M.insert(r,o)),r.append(o)):(i(r),r=null),o=n;i(r)}}(),!s.invalid){for(m in o)if(o.hasOwnProperty(m)){for(h=n[m],d=(c=o[m]).length;d--;)c[d].parent||c.splice(d,1);for(l=0,f=h.length;l<f;l++)h[l](c,m,s)}for(l=0,f=r.length;l<f;l++)if((h=r[l]).name in i){for(d=(c=i[h.name]).length;d--;)c[d].parent||c.splice(d,1);for(d=0,p=h.callbacks.length;d<p;d++)h.callbacks[d](c,h.name,s)}}return M}};return function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,r,o){var i,a,u,s,c,l,f,d,p=e.length,h=kt.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getWhiteSpaceElements();for(h.body=1,i=0;i<p;i++)if(u=(a=e[i]).parent,h[a.parent.name]&&a===u.lastChild){for(c=a.prev;c;){if("span"!==(l=c.name)||"bookmark"!==c.attr("data-mce-type")){"br"===l&&(a=null);break}c=c.prev}a&&(a.remove(),uy(n,m,g,u)&&(f=n.getElementRule(u.name))&&(f.removeEmpty?u.remove():f.paddEmpty&&iy(t,o,h,u)))}else{for(s=a;u&&u.firstChild===s&&u.lastChild===s&&(s=u,!h[u.name]);)u=u.parent;s===u&&!0!==t.padd_empty_with_br&&((d=new Np("#text",3)).value=Co,a.replace(d))}})),e.addAttributeFilter("href",(function(e){var n,r,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;){var i=e[o];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",(r=void 0,r=(n=i.attr("rel"))?kt.trim(n):"",/\b(noopener)\b/g.test(r)?r:function(e){return e.split(" ").filter((function(e){return e.length>0})).concat(["noopener"]).sort().join(" ")}(r)))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href")){r=o.parent,t=o.lastChild;do{n=t.prev,r.insert(t,o),t=n}while(t)}})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new Np("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(function(e){for(var t,r,o,i,a,u,s,c=e.length,l=n.getValidClasses();c--;){for(r=(t=e[c]).attr("class").split(" "),a="",o=0;o<r.length;o++)i=r[o],s=!1,(u=l["*"])&&u[i]&&(s=!0),u=l[t.name],!s&&u&&u[i]&&(s=!0),s&&(a&&(a+=" "),a+=i);a.length||(a=null),t.attr("class",a)}})),sy(e,t)}(u,e),function(e,t){t.inline_styles&&Jv(e,t)}(u,e),u},hy=function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var r,o,i=e.dom;t=t.cloneNode(!0);var a=document.implementation;return a.createHTMLDocument&&(r=a.createHTMLDocument(""),kt.each("BODY"===t.nodeName?t.childNodes:[t],(function(e){r.body.appendChild(r.importNode(e,!0))})),t="BODY"!==t.nodeName?r.body.firstChild:r.body,o=i.doc,i.doc=r),function(e,t){e.fire("PreProcess",t)}(e,De(De({},n),{node:t})),o&&(i.doc=o),t}(e,t,n):t},my=function(e,t,n){-1===kt.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.push(n))},gy=function(e,t,n,r,o){return function(e,t,n){return!t.no_events&&e?function(e,t){return e.fire("PostProcess",t)}(e,De(De({},t),{content:n})).content:n}(e,o,function(e,t,n){return qp(e,t).serialize(n)}(t,n,r))},vy=function(e,t){var n=["data-mce-selected"],r=t&&t.dom?t.dom:mu.DOM,o=t&&t.schema?t.schema:ki(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;var i=py(e,o);return function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)})),e.addAttributeFilter("src,href,style",(function(e,r){for(var o,i,a=e.length,u="data-mce-"+r,s=t.url_converter,c=t.url_converter_scope;a--;)void 0!==(i=(o=e[a]).attr(u))?(o.attr(r,i.length>0?i:null),o.attr(u,null)):(i=o.attr(r),"style"===r?i=n.serializeStyle(n.parseStyle(i),o.name):s&&(i=s.call(c,i,r,o.name)),o.attr(r,i.length>0?i:null))})),e.addAttributeFilter("class",(function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attr("data-mce-type")||n.cleanup||(R.from(r.firstChild).exists((function(e){return!wo(e.value)}))?r.unwrap():r.remove())})),e.addNodeFilter("noscript",(function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=yi.decode(t.value))})),e.addNodeFilter("script,style",(function(e,n){for(var r,o,i,a=e.length,u=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)o=(r=e[a]).firstChild?r.firstChild.value:"","script"===n?((i=r.attr("type"))&&r.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="// <![CDATA[\n"+u(o)+"\n// ]]>")):"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="\x3c!--\n"+u(o)+"\n--\x3e")})),e.addNodeFilter("#comment",(function(e){for(var r,o=e.length;o--;)r=e[o],t.preserve_cdata&&0===r.value.indexOf("[CDATA[")?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===r.value.indexOf("mce:protected ")&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))})),e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))})),e.addAttributeFilter("data-mce-type",(function(t){W(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}(i,e,r),{schema:o,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:function(n,a){void 0===a&&(a={});var u=De({format:"html"},a),s=hy(t,n,u),c=function(e,t,n){var r=_o(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||bo(Ot.fromDom(t))?r:kt.trim(r)}(r,s,u),l=function(e,t,n){var r=n.selection?De({forced_root_block:!1},n):n,o=e.parse(t,r);return function(e){var t=function(e){return e&&"br"===e.name},n=e.lastChild;if(t(n)){var r=n.prev;t(r)&&(n.remove(),r.remove())}}(o),o}(i,c,u);return"tree"===u.format?l:gy(t,e,o,l,u)},addRules:function(e){o.addValidElements(e)},setRules:function(e){o.setValidElements(e)},addTempAttr:S(my,i,n),getTempAttrs:w(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters}},yy=function(e,t){var n=vy(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},by=function(e,t){return void 0===t&&(t={}),function(e,t,n){return Vv(e).editor.getContent(t,n)}(e,t,t.format?t.format:"html")},Cy=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){return Vv(e).editor.setContent(t,n)}(e,t,n)},xy=mu.DOM,wy=function(e){return R.from(e).each((function(e){return e.destroy()}))},_y=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&xy.remove(o.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&r&&function(e){xy.setStyle(e.id,"display",e.orgDisplay)}(e),function(e){e.fire("detach")}(e),xy.remove(e.getContainer()),wy(t),wy(n),e.destroy()}},Sy=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),wy(n),wy(r)),function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),xy.unbind(t,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())},Ey=Object.prototype.hasOwnProperty,Ay=(Ag=function(e,t){return f(e)&&f(t)?Ay(e,t):t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var i in o)Ey.call(o,i)&&(n[i]=Ag(n[i],o[i]))}return n}),Dy=ht().deviceType,ky=Dy.isTouch(),Ty=Dy.isPhone(),Oy=Dy.isTablet(),By=["lists","autolink","autosave"],Ny={table_grid:!1,object_resizing:!1,resize:!1},Fy=function(e){var t=d(e)?e.join(" "):e,n=U(l(t)?t.split(" "):[],He);return G(n,(function(e){return e.length>0}))},My=function(e,t){var n=pe(t,(function(t,n){return $(e,n)}));return function(e,t){return{sections:w(e),settings:w(t)}}(n.t,n.f)},Py=function(e,t){return e.sections().hasOwnProperty(t)},Iy=function(e,t){return ge(e,"toolbar_mode").orThunk((function(){return ge(e,"toolbar_drawer").map((function(e){return!1===e?"wrap":e}))})).getOr(t)},Ry=function(e,t){var n={resize:!1,toolbar_mode:Iy(e,"scrolling"),toolbar_sticky:!1};return De(De(De({},Ny),n),t?{menubar:!1}:{})},Ly=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?kt.extend({},e.external_plugins,n):n},zy=function(e,t,n,r){return e&&function(e,t,n){var r=e.sections();return Py(e,t)&&r[t].theme===n}(t,"mobile","mobile")?G(r,S($,By)):e&&Py(t,"mobile")?r:n},Vy=function(e,t,n,r){var o=Fy(n.forced_plugins),i=Fy(r.plugins),a=function(e,t){return Py(e,t)?e.sections()[t]:{}}(t,"mobile"),u=a.plugins?Fy(a.plugins):i,s=function(e,t){return[].concat(Fy(e)).concat(Fy(t))}(o,zy(e,t,i,u));if(_t.browser.isIE()&&$(s,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return kt.extend(r,{plugins:s.join(" ")})},Hy=function(e,t,n,r,o){var i=e?{mobile:Ry(o.mobile||{},t)}:{},a=My(["mobile"],Ay(i,o)),u=kt.extend(n,r,a.settings(),function(e,t){return e&&Py(t,"mobile")}(e,a)?function(e,t,n){void 0===n&&(n={});var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return kt.extend({},n,o)}(a,"mobile"):{},{validate:!0,external_plugins:Ly(r,a.settings())});return Vy(e,a,r,u)},$y=function(e,t,n,r,o){var i=function(e,t,n,r,o){var i={id:t,theme:"silver",toolbar_mode:Iy(e,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o};return De(De({},i),r?Ny:{})}(o,t,n,ky,e);return Hy(Ty||Oy,Ty,i,r,o)},jy=function(e,t,n){return R.from(t.settings[n]).filter(e)},Uy=function(e,t,n,r){var o,i=t in e.settings?e.settings[t]:n;return"hash"===r?function(e){var t={};return"string"==typeof e?W(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),(function(e){var n=e.split("=");n.length>1?t[kt.trim(n[0])]=kt.trim(n[1]):t[kt.trim(n[0])]=kt.trim(n[0])})):t=e,t}(i):"string"===r?jy(l,e,t).getOr(n):"number"===r?jy(b,e,t).getOr(n):"boolean"===r?jy(h,e,t).getOr(n):"object"===r?jy(f,e,t).getOr(n):"array"===r?jy(d,e,t).getOr(n):"string[]"===r?jy((o=l,function(e){return d(e)&&Z(e,o)}),e,t).getOr(n):"function"===r?jy(y,e,t).getOr(n):i},Wy=(Dg={},{add:function(e,t){Dg[e]=t},get:function(e){return Dg[e]?Dg[e]:{icons:{}}},has:function(e){return ve(Dg,e)}}),qy=function(e,t){return t.dom[e]},Gy=function(e,t){return parseInt(or(t,e),10)},Xy=S(qy,"clientWidth"),Ky=S(qy,"clientHeight"),Yy=S(Gy,"margin-top"),Jy=S(Gy,"margin-left"),Qy=function(e,t,n){var r,o=Ot.fromDom(e.getBody()),i=e.inline?o:(r=o,Ot.fromDom(Gt(r).dom.documentElement)),a=function(e,t,n,r){var o=function(e){return e.dom.getBoundingClientRect()}(t);return{x:n-(e?o.left+t.dom.clientLeft+Jy(t):0),y:r-(e?o.top+t.dom.clientTop+Yy(t):0)}}(e.inline,i,t,n);return function(e,t,n){var r=Xy(e),o=Ky(e);return t>=0&&n>=0&&t<=r&&n<=o}(i,a.x,a.y)},Zy=function(e){var t,n=e.inline?e.getBody():e.getContentAreaContainer();return(t=n,R.from(t).map(Ot.fromDom)).map(Cn).getOr(!1)},eb=function(e){var t,n=[],r=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},o=function(){return R.from(n[0])},i=function(){n.length>0&&r().reposition(n)},a=function(e){J(n,(function(t){return t===e})).each((function(e){n.splice(e,1)}))},u=function(t,u){if(void 0===u&&(u=!0),!e.removed&&Zy(e))return u&&e.fire("BeforeOpenNotification",{notification:t}),Y(n,(function(e){return n=r().getArgs(e),o=t,!(n.type!==o.type||n.text!==o.text||n.progressBar||n.timeout||o.progressBar||o.timeout);var n,o})).getOrThunk((function(){e.editorManager.setActive(e);var u=r().open(t,(function(){a(u),i(),o().fold((function(){return e.focus()}),(function(e){return Ot.fromDom(e.getEl()).dom.focus()}))}));return function(e){n.push(e)}(u),i(),e.fire("OpenNotification",{notification:De({},u)}),u}))};return(t=e).on("SkinLoaded",(function(){var e=function(e){return e.getParam("service_message")}(t);e&&u({text:e,type:"warning",timeout:0},!1)})),t.on("ResizeEditor ResizeWindow NodeChange",(function(){oo.requestAnimationFrame(i)})),t.on("remove",(function(){W(n.slice(),(function(e){r().close(e)}))})),{open:u,close:function(){o().each((function(e){r().close(e),a(e),i()}))},getNotifications:function(){return n}}},tb=Eu.PluginManager,nb=Eu.ThemeManager,rb=function(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t?t.apply(e,n):void 0}},o=function(n){t.push(n),function(t){e.fire("OpenWindow",{dialog:t})}(n)},i=function(n){!function(t){e.fire("CloseWindow",{dialog:t})}(n),0===(t=G(t,(function(e){return e!==n}))).length&&e.focus()},a=function(t){e.editorManager.setActive(e),ap(e);var n=t();return o(n),n};return e.on("remove",(function(){W(t,(function(e){n().close(e)}))})),{open:function(e,t){return a((function(){return n().open(e,t,i)}))},openUrl:function(e){return a((function(){return n().openUrl(e,i)}))},alert:function(e,t,o){var i=n();i.alert(e,r(o||i,t))},confirm:function(e,t,o){var i=n();i.confirm(e,r(o||i,t))},close:function(){R.from(t[t.length-1]).each((function(e){n().close(e),i(e)}))}}},ob=function(e,t){e.notificationManager.open({type:"error",text:t})},ib=function(e,t){e._skinLoaded?ob(e,t):e.on("SkinLoaded",(function(){ob(e,t)}))},ab=function(e,t,n){rd(e,t,{message:n})},ub=function(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t},sb=function(e,t,n){ab(e,"PluginLoadError",ub("plugin",t,n))},cb=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,ke([e],t)):r.log.apply(r,ke([e],t)))},lb=function(e){return fb(e,function(e){var t=e.getParam("content_css");return l(t)?U(t.split(","),He):d(t)?t:!1===t||e.inline?[]:["default"]}(e))},fb=function(e,t){var n=e.editorManager.baseURL+"/skins/content",r="content"+e.editorManager.suffix+".css",o=!0===e.inline;return U(t,(function(t){return function(e){return/^[a-z0-9\-]+$/i.test(e)}(t)&&!o?n+"/"+t+"/"+r:e.documentBaseURI.toAbsolute(t)}))},db=function(e){e.contentCSS=e.contentCSS.concat(lb(e),function(e){return fb(e,hc(e))}(e))},pb=function(){var e={},t=function(e,t){return{status:e,resultUri:t}},n=function(t){return t in e};return{hasBlobUri:n,getResultUri:function(t){var n=e[t];return n?n.resultUri:null},isPending:function(t){return!!n(t)&&1===e[t].status},isUploaded:function(t){return!!n(t)&&2===e[t].status},markPending:function(n){e[n]=t(1,null)},markUploaded:function(n,r){e[n]=t(2,r)},removeFailed:function(t){delete e[t]},destroy:function(){e={}}}},hb=0,mb=function(e){return e+hb+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t},gb=function(e,t){var n={},r=function(e,n,r,o){var i=new XMLHttpRequest;i.open("POST",t.url),i.withCredentials=t.credentials,i.upload.onprogress=function(e){o(e.loaded/e.total*100)},i.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=function(){if(i.status<200||i.status>=300)r("HTTP Error: "+i.status);else{var e,o,a=JSON.parse(i.responseText);a&&"string"==typeof a.location?n((e=t.basePath,o=a.location,e?e.replace(/\/$/,"")+"/"+o.replace(/^\//,""):o)):r("Invalid JSON: "+i.responseText)}};var a=new FormData;a.append("file",e.blob(),e.filename()),i.send(a)},o=function(e,t){return{url:t,blobInfo:e,status:!0}},i=function(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}},a=function(e,t){kt.each(n[e],(function(e){e(t)})),delete n[e]},u=function(r,u){return r=kt.grep(r,(function(t){return!e.isUploaded(t.blobUri())})),eo.all(kt.map(r,(function(r){return e.isPending(r.blobUri())?function(e){var t=e.blobUri();return new eo((function(e){n[t]=n[t]||[],n[t].push(e)}))}(r):function(t,n,r){return e.markPending(t.blobUri()),new eo((function(u){var s;try{var c=function(){s&&s.close()};n(t,(function(n){c(),e.markUploaded(t.blobUri(),n),a(t.blobUri(),o(t,n)),u(o(t,n))}),(function(n,r){var o=r||{};c(),e.removeFailed(t.blobUri()),a(t.blobUri(),i(t,n,o)),u(i(t,n,o))}),(function(e){e<0||e>100||R.from(s).orThunk((function(){return R.from(r).map(O)})).each((function(t){s=t,t.progressBar.value(e)}))}))}catch(l){u(i(t,l.message,{}))}}))}(r,t.handler,u)})))};return!1===y(t.handler)&&(t.handler=r),{upload:function(e,n){return t.url||t.handler!==r?u(e,n):new eo((function(e){e([])}))}}},vb=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},yb=function(e,t){return gb(t,{url:ac(e),basePath:uc(e),credentials:sc(e),handler:cc(e)})},bb=function(e){var t,n,r,o,i,a,u=(t=[],n=function(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t,n=e.id||mb("blobid"),r=e.name||n,o=e.blob;return{id:w(n),name:w(r),filename:w(e.filename||r+"."+(t=o.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.toLowerCase()]||"dat")),blob:w(o),base64:w(e.base64),blobUri:w(e.blobUri||URL.createObjectURL(o)),uri:w(e.uri)}},{create:function(e,t,r,o,i){if(l(e))return n({id:e,name:o,filename:i,blob:t,base64:r});if(f(e))return n(e);throw new Error("Unknown input type")},add:function(e){o(e.id())||t.push(e)},get:o=function(e){return r((function(t){return t.id()===e}))},getByUri:function(e){return r((function(t){return t.blobUri()===e}))},getByData:function(e,t){return r((function(n){return n.base64()===e&&n.blob().type===t}))},findFirst:r=function(e){return Y(t,e).getOrUndefined()},removeByUri:function(e){t=G(t,(function(t){return t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)}))},destroy:function(){W(t,(function(e){URL.revokeObjectURL(e.blobUri())})),t=[]}}),s=pb(),c=[],d=function(e){var t=Cu(null);return e.on("change AddUndo",(function(e){t.set(De({},e.level))})),{fireIfChanged:function(){var n=e.undoManager.data;oe(n).filter((function(e){return!Fv(t.get(),e)})).each((function(t){e.setDirty(!0),e.fire("change",{level:t,lastLevel:ne(n,n.length-2).getOrNull()})}))}}}(e),p=function(t){return function(n){return e.selection?t(n):[]}},h=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},m=function(e,t,n){var r='src="'+n+'"'+(n===_t.transparentSrc?' data-mce-placeholder="1"':"");return e=h(e,'src="'+t+'"',r),e=h(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},g=function(t,n){W(e.undoManager.data,(function(e){"fragmented"===e.type?e.fragments=U(e.fragments,(function(e){return m(e,t,n)})):e.content=m(e.content,t,n)}))},v=function(t){return i||(i=yb(e,s)),C().then(p((function(n){var r=U(n,(function(e){return e.blobInfo}));return i.upload(r,vb(e)).then(p((function(r){var o=[],i=U(r,(function(t,r){var i=n[r].blobInfo,a=n[r].image;return t.status&&function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")}(e)?(u.removeByUri(a.src),function(t,n){var r,o=e.convertURL(n,"src");g(t.src,n),e.$(t).attr({src:oc(e)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":o})}(a,t.url)):t.error&&(t.error.options.remove&&(g(a.getAttribute("src"),_t.transparentSrc),o.push(a)),function(e,t){ib(e,Su.translate(["Failed to upload image: {0}",t]))}(e,t.error.message)),{element:a,status:t.status,uploadUri:t.url,blobInfo:i}}));return i.length>0&&d.fireIfChanged(),o.length>0&&(Lv(e)||e.undoManager.transact((function(){W(o,(function(t){e.dom.remove(t),u.removeByUri(t.src)}))}))),t&&t(i),i})))})))},y=function(t){if(rc(e))return v(t)},b=function(t){return!1!==Z(c,(function(e){return e(t)}))&&(0!==t.getAttribute("src").indexOf("data:")||function(e){return e.getParam("images_dataimg_filter",F,"function")}(e)(t))},C=function(){return a||(a=oy(s,u)),a.findAll(e.getBody(),b).then(p((function(t){return t=G(t,(function(t){return"string"!=typeof t||(ib(e,t),!1)})),W(t,(function(e){g(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),t})))},x=function(t){return t.replace(/src="(blob:[^"]+)"/g,(function(t,n){var r=s.getResultUri(n);if(r)return'src="'+r+'"';var o=u.getByUri(n);return o||(o=K(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t}))};return e.on("SetContent",(function(){rc(e)?y():C()})),e.on("RawSaveContent",(function(e){e.content=x(e.content)})),e.on("GetContent",(function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=x(e.content))})),e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){W(e,(function(e){var t=e.attr("src");if(!u.getByUri(t)){var n=s.getResultUri(t);n&&e.attr("src",n)}}))}))})),{blobCache:u,addFilter:function(e){c.push(e)},uploadImages:v,uploadImagesAuto:y,scanForImages:C,destroy:function(){u.destroy(),s.destroy(),a=i=null}}},Cb=function(e){var t={},n=function(e,r){e&&("string"!=typeof e?kt.each(e,(function(e,t){n(t,e)})):(d(r)||(r=[r]),kt.each(r,(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),t[e]=r))};return n(function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return Nn(e)&&e.hasAttribute("href")},onformat:function(t,n,r){kt.each(r,(function(n,r){e.setAttrib(t,r,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return kt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}})),t}(e.dom)),n(function(e){return e.getParam("formats")}(e)),{get:function(e){return e?t[e]:t},has:function(e){return ve(t,e)},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}},xb=kt.each,wb=mu.DOM,_b=function(e,t){var n,r,o,i=t&&t.schema||ki({}),a=function(e){r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t=wb.create(r.name);return function(e,t){t.classes.length&&wb.addClass(e,t.classes.join(" ")),wb.setAttribs(e,t.attrs)}(t,r),t},u=function(e,t,n){var r,o,s=t.length>0&&t[0],c=s&&s.name,l=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=i.getElementRule(n),o=r&&r.parentsRequired;return!(!o||!o.length)&&(t&&-1!==kt.inArray(o,t)?t:o[0])}(e,c);if(l)c===l?(o=t[0],t=t.slice(1)):o=l;else if(s)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(r=a(o)).appendChild(e),n&&(r||(r=wb.create("div")).appendChild(e),kt.each(n,(function(t){var n=a(t);r.insertBefore(n,e)}))),u(r,t,o&&o.siblings)};return e&&e.length?(r=e[0],n=a(r),(o=wb.create("div")).appendChild(u(n,e.slice(1),r.siblings)),o):""},Sb=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=kt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,r,o,i){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==kt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===o){var a=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""}))),n.name=t||"div",n},Eb=function(e,t){var n,r,o,i="",a=function(e){var t=e.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");return l(t)?t:""}(e);if(""===a)return"";var u=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}if("preview"in t){var s=ge(t,"preview");if(s.is(!1))return"";a=s.getOr(a)}n=t.block||t.inline||"span";var c,f=(c=t.selector)&&"string"==typeof c?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),kt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=kt.map(e.split(/(?:~\+|~|\+)/),Sb),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[];f.length?(f[0].name||(f[0].name=n),n=t.selector,r=_b(f,e)):r=_b([n],e);var d=wb.select(n,r)[0]||r.firstChild;return xb(t.styles,(function(e,t){var n=u(e);n&&wb.setStyle(d,t,n)})),xb(t.attributes,(function(e,t){var n=u(e);n&&wb.setAttrib(d,t,n)})),xb(t.classes,(function(e){var t=u(e);wb.hasClass(d,t)||wb.addClass(d,t)})),e.fire("PreviewFormats"),wb.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),o=wb.getStyle(e.getBody(),"fontSize",!0),o=/px$/.test(o)?parseInt(o,10):0,xb(a.split(" "),(function(t){var n=wb.getStyle(d,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=wb.getStyle(e.getBody(),t,!0),"#ffffff"===wb.toHex(n).toLowerCase())||"color"===t&&"#000000"===wb.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===o)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*o+"px"}"border"===t&&n&&(i+="padding:0 2px;"),i+=t+":"+n+";"}})),e.fire("AfterPreviewFormats"),wb.remove(r),i},Ab=function(e){var t=Cb(e),n=Cu(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(e),xg(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:function(t,n,r){!function(e,t,n,r){Hv(e).formatter.apply(t,n,r)}(e,t,n,r)},remove:function(t,n,r,o){!function(e,t,n,r,o){Hv(e).formatter.remove(t,n,r,o)}(e,t,n,r,o)},toggle:function(t,n,r){!function(e,t,n,r){Hv(e).formatter.toggle(t,n,r)}(e,t,n,r)},match:function(t,n,r){return function(e,t,n,r){return Hv(e).formatter.match(t,n,r)}(e,t,n,r)},closest:function(t){return function(e,t){return Hv(e).formatter.closest(t)}(e,t)},matchAll:function(t,n){return function(e,t,n){return Hv(e).formatter.matchAll(t,n)}(e,t,n)},matchNode:function(t,n,r,o){return function(e,t,n,r,o){return Hv(e).formatter.matchNode(t,n,r,o)}(e,t,n,r,o)},canApply:function(t){return function(e,t){return Hv(e).formatter.canApply(t)}(e,t)},formatChanged:function(t,r,o){return function(e,t,n,r,o){return void 0===o&&(o=!1),Hv(e).formatter.formatChanged(t,n,r,o)}(e,n,t,r,o)},getCssText:S(Eb,e)}},Db=function(e){var t=Cu(R.none()),n=Cu(0),r=Cu(0),o={data:[],typing:!1,beforeChange:function(){!function(e,t,n){Hv(e).undoManager.beforeChange(t,n)}(e,n,t)},add:function(i,a){return function(e,t,n,r,o,i,a){return Hv(e).undoManager.addUndoLevel(t,n,r,o,i,a)}(e,o,r,n,t,i,a)},undo:function(){return function(e,t,n,r){return Hv(e).undoManager.undo(t,n,r)}(e,o,n,r)},redo:function(){return function(e,t,n){return Hv(e).undoManager.redo(t,n)}(e,r,o.data)},clear:function(){!function(e,t,n){Hv(e).undoManager.clear(t,n)}(e,o,r)},reset:function(){!function(e,t){Hv(e).undoManager.reset(t)}(e,o)},hasUndo:function(){return function(e,t,n){return Hv(e).undoManager.hasUndo(t,n)}(e,o,r)},hasRedo:function(){return function(e,t,n){return Hv(e).undoManager.hasRedo(t,n)}(e,o,r)},transact:function(t){return function(e,t,n,r){return Hv(e).undoManager.transact(t,n,r)}(e,o,n,t)},ignore:function(t){!function(e,t,n){Hv(e).undoManager.ignore(t,n)}(e,n,t)},extra:function(t,n){!function(e,t,n,r,o){Hv(e).undoManager.extra(t,n,r,o)}(e,o,r,t,n)}};return Lv(e)||function(e,t,n){var r=Cu(!1),o=function(e){Pv(t,!1,n),t.add({},e)};e.on("init",(function(){t.add()})),e.on("BeforeExecCommand",(function(e){var r=e.command.toLowerCase();"undo"!==r&&"redo"!==r&&"mcerepaint"!==r&&(Iv(t,n),t.beforeChange())})),e.on("ExecCommand",(function(e){var t=e.command.toLowerCase();"undo"!==t&&"redo"!==t&&"mcerepaint"!==t&&o(e)})),e.on("ObjectResizeStart cut",(function(){t.beforeChange()})),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",(function(n){var i=n.keyCode;n.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||n.ctrlKey)&&(o(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),r.get()&&t.typing&&!1===Fv(Tv(e),t.data[0])&&(!1===e.isDirty()&&(e.setDirty(!0),e.fire("change",{level:t.data[0],lastLevel:null})),e.fire("TypingUndo"),r.set(!1),e.nodeChanged()))})),e.on("keydown",(function(e){var i=e.keyCode;if(!e.isDefaultPrevented())if(i>=33&&i<=36||i>=37&&i<=40||45===i)t.typing&&o(e);else{var a=e.ctrlKey&&!e.altKey||e.metaKey;!(i<16||i>20)||224===i||91===i||t.typing||a||(t.beforeChange(),Pv(t,!0,n),t.add({},e),r.set(!0))}})),e.on("mousedown",(function(e){t.typing&&o(e)})),e.on("input",(function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||function(e){return"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType}(e))&&o(e)})),e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()}))}(e,o,n),function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")}(e),o},kb=[9,27,od.HOME,od.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,od.DOWN,od.UP,od.LEFT,od.RIGHT].concat(_t.browser.isFirefox()?[224]:[]),Tb="data-mce-placeholder",Ob=function(e){return"keydown"===e.type||"keyup"===e.type},Bb=function(e){var t=e.keyCode;return t===od.BACKSPACE||t===od.DELETE},Nb=function(e){var t=e.dom,n=tc(e),r=function(e){return e.getParam("placeholder",Qs.getAttrib(e.getElement(),"placeholder"),"string")}(e),o=function(i,a){if(!function(e){if(Ob(e)){var t=e.keyCode;return!Bb(e)&&(od.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||$(kb,t))}return!1}(i)){var u=e.getBody(),s=!function(e){return Ob(e)&&!(Bb(e)||"keyup"===e.type&&229===e.keyCode)}(i)&&function(e,t,n){if(ei(Ot.fromDom(t),!1)){var r=""===n,o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&(r?!e.isBlock(o):n===o.nodeName.toLowerCase())}return!1}(t,u,n);(""!==t.getAttrib(u,Tb)!==s||a)&&(t.setAttrib(u,Tb,s?r:null),t.setAttrib(u,"aria-placeholder",s?r:null),function(e,t){e.fire("PlaceholderToggle",{state:t})}(e,s),e.on(s?"keydown":"keyup",o),e.off(s?"keyup":"keydown",o))}};r&&e.on("init",(function(t){o(t,!0),e.on("change SetContent ExecCommand",o),e.on("paste",(function(t){return oo.setEditorTimeout(e,(function(){return o(t)}))}))}))},Fb=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Mb=function(e,t){return Nt(Ot.fromDom(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},Pb=function(e){return"rtl"===mu.DOM.getStyle(e,"direction",!0)||(t=e.textContent,Fb.test(t));var t},Ib=function(e,t,n){var r=function(e,t,n){return G(mu.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return R.from(r[r.length-1])},Rb=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?Do(n)?Vn(n.nextSibling)?Ds(n.nextSibling,0):Ds.after(n):Oo(t)?Ds(n,r+1):t:Do(n)?Vn(n.previousSibling)?Ds(n.previousSibling,n.previousSibling.data.length):Ds.before(n):Bo(t)?Ds(n,r-1):t},Lb=S(Rb,!0),zb=S(Rb,!1),Vb=function(e,t){return It(e,t)?Kr(t,(function(e){return ho(e)||go(e)}),function(e){return function(t){return Mt(e,Ot.fromDom(t.dom.parentNode))}}(e)):R.none()},Hb=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)}(e))},$b=function(e,t){return{from:e,to:t}},jb=function(e,t){var n=Ot.fromDom(e),r=Ot.fromDom(t.container());return Vb(n,r).map((function(e){return function(e,t){return{block:e,position:t}}(e,t)}))},Ub=function(e,t,n){var r=jb(e,Ds.fromRangeStart(n)),o=r.bind((function(n){return Bl(t,e,n.position).bind((function(n){return jb(e,n).map((function(n){return function(e,t,n){return Un(n.position.getNode())&&!1===ei(n.block)?Ml(!1,n.block.dom).bind((function(r){return r.isEqual(n.position)?Bl(t,e,r).bind((function(t){return jb(e,t)})):R.some(n)})).getOr(n):n}(e,t,n)}))}))}));return Qu(r,o,$b).filter((function(e){return function(e){return!1===Mt(e.from.block,e.to.block)}(e)&&function(e){return Kt(e.from.block).bind((function(t){return Kt(e.to.block).filter((function(e){return Mt(t,e)}))})).isSome()}(e)&&function(e){return!1===Gn(e.from.block.dom)&&!1===Gn(e.to.block.dom)}(e)}))},Wb=function(e){var t=function(e){var t=en(e);return J(t,lo).fold((function(){return t}),(function(e){return t.slice(0,e)}))}(e);return W(t,yn),t},qb=function(e,t){var n=yh(t,e);return Y(n.reverse(),(function(e){return ei(e)})).each(yn)},Gb=function(e,t,n,r){if(ei(n))return hh(n),Rl(n.dom);0===G(Qt(r),(function(e){return!ei(e)})).length&&ei(t)&&dn(r,Ot.fromTag("br"));var o=Il(n.dom,Ds.before(r.dom));return W(Wb(t),(function(e){dn(r,e)})),qb(e,t),o},Xb=function(e,t,n){if(ei(n))return yn(n),ei(t)&&hh(t),Rl(t.dom);var r=Ll(n.dom);return W(Wb(t),(function(e){mn(n,e)})),qb(e,t),r},Kb=function(e,t){return It(t,e)?function(e,t){var n=yh(t,e);return R.from(n[n.length-1])}(t,e):R.none()},Yb=function(e,t){Ml(e,t.dom).map((function(e){return e.getNode()})).map(Ot.fromDom).filter(po).each(yn)},Jb=function(e,t,n){return Yb(!0,t),Yb(!1,n),Kb(t,n).fold(S(Xb,e,t,n),S(Gb,e,t,n))},Qb=function(e,t,n,r){return t?Jb(e,r,n):Jb(e,n,r)},Zb=function(e,t){var n=Ot.fromDom(e.getBody()),r=function(e,t,n){return n.collapsed?Ub(e,t,n):R.none()}(n.dom,t,e.selection.getRng()).bind((function(e){return Qb(n,t,e.from.block,e.to.block)}));return r.each((function(t){e.selection.setRng(t.toRange())})),r.isSome()},eC=function(e,t){var n=Ot.fromDom(t),r=S(Mt,e);return Xr(n,yo,r).isSome()},tC=function(e,t){var n=Il(e.dom,Ds.fromRangeStart(t)).isNone(),r=Pl(e.dom,Ds.fromRangeEnd(t)).isNone();return!function(e,t){return eC(e,t.startContainer)||eC(e,t.endContainer)}(e,t)&&n&&r},nC=function(e){var t=Ot.fromDom(e.getBody()),n=e.selection.getRng();return tC(t,n)?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return Qu(Vb(e,Ot.fromDom(n.startContainer)),Vb(e,Ot.fromDom(n.endContainer)),(function(r,o){return!1===Mt(r,o)&&(n.deleteContents(),Qb(e,!0,r,o).each((function(e){t.setRng(e.toRange())})),!0)})).getOr(!1)}(t,e.selection)},rC=function(e,t){return!e.selection.isCollapsed()&&nC(e)},oC=qn,iC=Gn,aC=function(e,t,n,r,o){return R.from(t._selectionOverrides.showCaret(e,n,r,o))},uC=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?R.none():R.some(function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t))},sC=function(e,t,n){var r=al(1,e.getBody(),t),o=Ds.fromRangeStart(r),i=o.getNode();if(zc(i))return aC(1,e,i,!o.isAtEnd(),!1);var a=o.getNode(!0);if(zc(a))return aC(1,e,a,!1,!1);var u=e.dom.getParent(o.getNode(),(function(e){return iC(e)||oC(e)}));return zc(u)?aC(1,e,u,!1,n):R.none()},cC=function(e,t,n){return t.collapsed?sC(e,t,n).getOr(t):t},lC=function(e){return fh(e)||uh(e)},fC=function(e){return dh(e)||sh(e)},dC=function(e,t,n,r,o,i){return aC(r,e,i.getNode(!o),o,!0).each((function(n){if(t.collapsed){var r=t.cloneRange();o?r.setEnd(n.startContainer,n.startOffset):r.setStart(n.endContainer,n.endOffset),r.deleteContents()}else t.deleteContents();e.selection.setRng(n)})),function(e,t){Vn(t)&&0===t.data.length&&e.remove(t)}(e.dom,n),!0},pC=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Vn(n.commonAncestorContainer))return!1;var r=t?ks.Forwards:ks.Backwards,o=Al(e.getBody()),i=S(ll,t?o.next:o.prev),a=t?lC:fC,u=sl(r,e.getBody(),n),s=Rb(t,i(u));if(!s||!fl(u,s))return!1;if(a(s))return dC(e,n,u.getNode(),r,t,s);var c=i(s);return!!(c&&a(c)&&fl(s,c))&&dC(e,n,u.getNode(),r,t,c)}(e,t)},hC=Sr([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),mC=function(e,t,n,r){var o=r.getNode(!1===t);return Vb(Ot.fromDom(e),Ot.fromDom(n.getNode())).map((function(e){return ei(e)?hC.remove(e.dom):hC.moveToElement(o)})).orThunk((function(){return R.some(hC.moveToElement(o))}))},gC=function(e,t,n){return Bl(t,e,n).bind((function(r){return o=r.getNode(),yo(Ot.fromDom(o))||go(Ot.fromDom(o))||function(e,t,n,r){var o=function(t){return fo(Ot.fromDom(t))&&!Zc(n,r,e)};return ul(!t,n).fold((function(){return ul(t,r).fold(N,o)}),o)}(e,t,n,r)?R.none():t&&Gn(r.getNode())||!1===t&&Gn(r.getNode(!0))?mC(e,t,n,r):t&&dh(n)||!1===t&&fh(n)?R.some(hC.moveToPosition(r)):R.none();var o}))},vC=function(e,t,n){return function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return Nn(n)&&n.getAttribute("data-mce-caret")===r}(t,n)?function(e,t){return e&&Gn(t.nextSibling)?R.some(hC.moveToElement(t.nextSibling)):!1===e&&Gn(t.previousSibling)?R.some(hC.moveToElement(t.previousSibling)):R.none()}(t,n.getNode(!1===t)).fold((function(){return gC(e,t,n)}),R.some):gC(e,t,n).bind((function(t){return function(e,t,n){return n.fold((function(e){return R.some(hC.remove(e))}),(function(e){return R.some(hC.moveToElement(e))}),(function(n){return Zc(t,n,e)?R.none():R.some(hC.moveToPosition(n))}))}(e,n,t)}))},yC=function(e,t){return R.from(td(e.getBody(),t))},bC=function(e,t){var n=e.selection.getNode();return yC(e,n).filter(Gn).fold((function(){return function(e,t,n){var r=al(t?1:-1,e,n),o=Ds.fromRangeStart(r),i=Ot.fromDom(e);return!1===t&&dh(o)?R.some(hC.remove(o.getNode(!0))):t&&fh(o)?R.some(hC.remove(o.getNode())):!1===t&&fh(o)&&Oh(i,o)?Bh(i,o).map((function(e){return hC.remove(e.getNode())})):t&&dh(o)&&Th(i,o)?Nh(i,o).map((function(e){return hC.remove(e.getNode())})):vC(e,t,o)}(e.getBody(),t,e.selection.getRng()).exists((function(n){return n.fold(function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),um(e,t,Ot.fromDom(n)),!0}}(e,t),function(e,t){return function(n){var r=t?Ds.before(n):Ds.after(n);return e.selection.setRng(r.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}))}),F)},CC=function(e,t){var n=e.selection.getNode();return!!Gn(n)&&yC(e,n.parentNode).filter(Gn).fold((function(){var n;return n=Ot.fromDom(e.getBody()),W(Iu(n,".mce-offscreen-selection"),yn),um(e,t,Ot.fromDom(e.selection.getNode())),Hb(e),!0}),F)},xC=function(e){var t=e.dom,n=e.selection,r=td(e.getBody(),n.getNode());if(qn(r)&&t.isBlock(r)&&t.isEmpty(r)){var o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(o),n.setRng(Ds.before(o).toRange())}return!0},wC=function(e,t){return e.selection.isCollapsed()?bC(e,t):CC(e,t)},_C=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n=Ds.fromRangeStart(e.selection.getRng());return Bl(t,e.getBody(),n).filter((function(e){return t?ih(e):ah(e)})).bind((function(e){return R.from(el(t?0:-1,e))})).exists((function(t){return e.selection.select(t),!0}))}(e,t)},SC=Vn,EC=function(e){return SC(e)&&e.data[0]===xo},AC=function(e){return SC(e)&&e.data[e.data.length-1]===xo},DC=function(e){return e.ownerDocument.createTextNode(xo)},kC=function(e,t){return e?function(e){if(SC(e.previousSibling))return AC(e.previousSibling)||e.previousSibling.appendData(xo),e.previousSibling;if(SC(e))return EC(e)||e.insertData(0,xo),e;var t=DC(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(SC(e.nextSibling))return EC(e.nextSibling)||e.nextSibling.insertData(0,xo),e.nextSibling;if(SC(e))return AC(e)||e.appendData(xo),e;var t=DC(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},TC=S(kC,!0),OC=S(kC,!1),BC=function(e,t){return Vn(e.container())?kC(t,e.container()):kC(t,e.getNode())},NC=function(e,t){var n=t.get();return n&&e.container()===n&&Do(n)},FC=function(e,t){return t.fold((function(t){Bc(e.get());var n=TC(t);return e.set(n),R.some(Ds(n,n.length-1))}),(function(t){return Rl(t).map((function(t){if(NC(t,e))return Ds(e.get(),1);Bc(e.get());var n=BC(t,!0);return e.set(n),Ds(n,1)}))}),(function(t){return Ll(t).map((function(t){if(NC(t,e))return Ds(e.get(),e.get().length-1);Bc(e.get());var n=BC(t,!1);return e.set(n),Ds(n,n.length-1)}))}),(function(t){Bc(e.get());var n=OC(t);return e.set(n),R.some(Ds(n,1))}))},MC=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return R.none()},PC=Sr([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),IC=function(e,t){var n=Qc(t,e);return n||e},RC=function(e,t,n){var r=Lb(n),o=IC(t,r.container());return Ib(e,o,r).fold((function(){return Pl(o,r).bind(S(Ib,e,o)).map((function(e){return PC.before(e)}))}),R.none)},LC=function(e,t){return null===Hl(e,t)},zC=function(e,t,n){return Ib(e,t,n).filter(S(LC,t))},VC=function(e,t,n){var r=zb(n);return zC(e,t,r).bind((function(e){return Il(e,r).isNone()?R.some(PC.start(e)):R.none()}))},HC=function(e,t,n){var r=Lb(n);return zC(e,t,r).bind((function(e){return Pl(e,r).isNone()?R.some(PC.end(e)):R.none()}))},$C=function(e,t,n){var r=zb(n),o=IC(t,r.container());return Ib(e,o,r).fold((function(){return Il(o,r).bind(S(Ib,e,o)).map((function(e){return PC.after(e)}))}),R.none)},jC=function(e){return!1===Pb(WC(e))},UC=function(e,t,n){return MC([RC,VC,HC,$C],[e,t,n]).filter(jC)},WC=function(e){return e.fold(_,_,_,_)},qC=function(e){return e.fold(w("before"),w("start"),w("end"),w("after"))},GC=function(e){return e.fold(PC.before,PC.before,PC.after,PC.after)},XC=function(e){return e.fold(PC.start,PC.start,PC.end,PC.end)},KC=function(e,t,n,r,o,i){return Qu(Ib(t,n,r),Ib(t,n,o),(function(t,r){return t!==r&&function(e,t,n){var r=Qc(t,e),o=Qc(n,e);return r&&r===o}(n,t,r)?PC.after(e?t:r):i})).getOr(i)},YC=function(e,t){return e.fold(F,(function(e){return r=t,!(qC(n=e)===qC(r)&&WC(n)===WC(r));var n,r}))},JC=function(e,t){return e?t.fold(x(R.some,PC.start),R.none,x(R.some,PC.after),R.none):t.fold(R.none,x(R.some,PC.before),R.none,x(R.some,PC.end))},QC=function(e,t,n,r){var o=Rb(e,r),i=UC(t,n,o);return UC(t,n,o).bind(S(JC,e)).orThunk((function(){return function(e,t,n,r,o){var i=Rb(e,o);return Bl(e,n,i).map(S(Rb,e)).fold((function(){return r.map(GC)}),(function(o){return UC(t,n,o).map(S(KC,e,t,n,i,o)).filter(S(YC,r))})).filter(jC)}(e,t,n,i,r)}))};S(QC,!1),S(QC,!0);var ZC,ex,tx=function(e,t,n){var r=e?1:-1;return t.setRng(Ds(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},nx=function(e,t){var n=t.selection.getRng(),r=e?Ds.fromRangeEnd(n):Ds.fromRangeStart(n);return!!function(e){return y(e.selection.getSel().modify)}(t)&&(e&&Oo(r)?tx(!0,t.selection,r):!(e||!Bo(r))&&tx(!1,t.selection,r))};(ex=ZC||(ZC={}))[ex.Br=0]="Br",ex[ex.Block=1]="Block",ex[ex.Wrap=2]="Wrap",ex[ex.Eol=3]="Eol";var rx,ox,ix=function(e,t){return e===ks.Backwards?ee(t):t},ax=function(e,t,n){return e===ks.Forwards?t.next(n):t.prev(n)},ux=function(e,t,n,r){return Un(r.getNode(t===ks.Forwards))?ZC.Br:!1===Zc(n,r)?ZC.Block:ZC.Wrap},sx=function(e,t,n,r){for(var o,i=Al(n),a=r,u=[];a&&(o=ax(t,i,a));){if(Un(o.getNode(!1)))return t===ks.Forwards?{positions:ix(t,u).concat([o]),breakType:ZC.Br,breakAt:R.some(o)}:{positions:ix(t,u),breakType:ZC.Br,breakAt:R.some(o)};if(o.isVisible()){if(e(a,o)){var s=ux(0,t,a,o);return{positions:ix(t,u),breakType:s,breakAt:R.some(o)}}u.push(o),a=o}else a=o}return{positions:ix(t,u),breakType:ZC.Eol,breakAt:R.none()}},cx=function(e,t,n,r){return t(n,r).breakAt.map((function(r){var o=t(n,r).positions;return e===ks.Backwards?o.concat(r):[r].concat(o)})).getOr([])},lx=function(e,t){return K(e,(function(e,n){return e.fold((function(){return R.some(n)}),(function(r){return Qu(re(r.getClientRects()),re(n.getClientRects()),(function(e,o){var i=Math.abs(t-e.left);return Math.abs(t-o.left)<=i?n:r})).or(e)}))}),R.none())},fx=function(e,t){return re(t.getClientRects()).bind((function(t){return lx(e,t.left)}))},dx=S(sx,Ds.isAbove,-1),px=S(sx,Ds.isBelow,1),hx=S(cx,-1,dx),mx=S(cx,1,px),gx=function(e){var t=function(t){return U(t,(function(t){return(t=es(t)).node=e,t}))};if(Nn(e))return t(e.getClientRects());if(Vn(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},vx=function(e){return Q(e,gx)};(ox=rx||(rx={}))[ox.Up=-1]="Up",ox[ox.Down=1]="Down";var yx,bx,Cx=function(e,t,n,r,o,i){var a=0,u=[],s=function(r){var i,s,l;for(l=vx([r]),-1===e&&(l=l.reverse()),i=0;i<l.length;i++)if(s=l[i],!n(s,c)){if(u.length>0&&t(s,Ae(u))&&a++,s.line=a,o(s))return!0;u.push(s)}},c=Ae(i.getClientRects());if(!c)return u;var l=i.getNode();return s(l),function(e,t,n,r){for(;r=Jc(r,e,qo,t);)if(n(r))return}(e,r,s,l),u},xx=S(Cx,rx.Up,rs,os),wx=S(Cx,rx.Down,os,rs),_x=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},Sx=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Ex=Gn,Ax=Jc,Dx=function(e,t){return Math.abs(e.left-t)},kx=function(e,t){return Math.abs(e.right-t)},Tx=function(e,t){return e>=t.left&&e<=t.right},Ox=function(e,t){return e>=t.top&&e<=t.bottom},Bx=function(e,t){return Se(e,(function(e,n){var r=Math.min(Dx(e,t),kx(e,t)),o=Math.min(Dx(n,t),kx(n,t));return Tx(t,n)?n:Tx(t,e)?e:o===r&&Ex(n.node)||o<r?n:e}))},Nx=function(e,t,n,r,o){var i=Ax(r,e,qo,t,!o);do{if(!i||n(i))return}while(i=Ax(i,e,qo,t))},Fx=function(e,t,n){var r=vx(function(e){return G(ie(e.getElementsByTagName("*")),Vc)}(e)),o=G(r,S(Ox,n)),i=Bx(o,t);if(i){var a=!Rn(i.node)&&!Kn(i.node);if((i=Bx(function(e,t,n){void 0===n&&(n=!0);var r=[],o=function(e,n){var o=G(vx([n]),(function(n){return!e(n,t)}));return r=r.concat(o),0===o.length};return r.push(t),Nx(rx.Up,e,S(o,rs),t.node,n),Nx(rx.Down,e,S(o,os),t.node,n),r}(e,i,a),t))&&Vc(i.node))return function(e,t){return{node:e.node,before:Dx(e,t)<kx(e,t)}}(i,t)}return null},Mx=function(e,t){e.selection.setRng(t),jd(e,e.selection.getRng())},Px=function(e,t,n){return R.some(cC(e,t,n))},Ix=function(e,t,n,r,o,i){var a=t===ks.Forwards,u=Al(e.getBody()),s=S(ll,a?u.next:u.prev),c=a?r:o;if(!n.collapsed){var l=as(n);if(i(l))return aC(t,e,l,t===ks.Backwards,!1)}var f=sl(t,e.getBody(),n);if(c(f))return uC(e,f.getNode(!a));var d=Rb(a,s(f)),p=function(e){return Ao(e.startContainer)}(n);if(!d)return p?R.some(n):R.none();if(c(d))return aC(t,e,d.getNode(!a),a,!1);var h=s(d);return h&&c(h)&&fl(d,h)?aC(t,e,h.getNode(!a),a,!1):p?Px(e,d.toRange(),!1):R.none()},Rx=function(e,t,n,r,o,i){var a=sl(t,e.getBody(),n),u=Ae(a.getClientRects()),s=t===rx.Down;if(!u)return R.none();var c,l=(s?wx:xx)(e.getBody(),_x(1),a),f=G(l,Sx(1)),d=u.left,p=Bx(f,d);if(p&&i(p.node)){var h=Math.abs(d-p.left),m=Math.abs(d-p.right);return aC(t,e,p.node,h<m,!1)}if(c=r(a)?a.getNode():o(a)?a.getNode(!0):as(n)){var g=function(e,t,n,r){var o,i,a,u,s,c=Al(t),l=[],f=0,d=function(e){return Ae(e.getClientRects())};1===e?(o=c.next,i=os,a=rs,u=Ds.after(r)):(o=c.prev,i=rs,a=os,u=Ds.before(r));var p=d(u);do{if(u.isVisible()&&!a(s=d(u),p)){if(l.length>0&&i(s,Ae(l))&&f++,(s=es(s)).position=u,s.line=f,n(s))return l;l.push(s)}}while(u=o(u));return l}(t,e.getBody(),_x(1),c),v=Bx(G(g,Sx(1)),d);if(v)return Px(e,v.position.toRange(),!1);if(v=Ae(G(g,Sx(0))))return Px(e,v.position.toRange(),!1)}return 0===f.length?Lx(e,s).filter(s?o:r).map((function(t){return cC(e,t.toRange(),!1)})):R.none()},Lx=function(e,t){var n=e.selection.getRng(),r=e.getBody();if(t){var o=Ds.fromRangeEnd(n),i=px(r,o);return oe(i.positions)}return o=Ds.fromRangeStart(n),i=dx(r,o),re(i.positions)},zx=function(e,t,n){return Lx(e,t).filter(n).exists((function(t){return e.selection.setRng(t.toRange()),!0}))},Vx=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Hx=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},$x=function(e,t,n){return FC(t,n).map((function(t){return Vx(e,t),n}))},jx=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=Ds.fromRangeStart(e.selection.getRng());Ds.isTextPosition(n)&&!1===function(e){return Oo(e)||Bo(e)}(n)&&(Vx(e,Oc(t.get(),n)),t.set(null))}},Ux=function(e,t,n){return!!bc(e)&&function(e,t,n){var r=e.getBody(),o=Ds.fromRangeStart(e.selection.getRng()),i=S(Mb,e);return QC(n,i,r,o).bind((function(n){return $x(e,t,n)}))}(e,t,n).isSome()},Wx=function(e,t,n){return!!bc(t)&&nx(e,t)},qx=function(e){var t=Cu(null),n=S(Mb,e);return e.on("NodeChange",(function(r){var o,i,a,u,s,c;!bc(e)||_t.browser.isIE()&&r.initial||(o=n,i=e.dom,a=r.parents,u=U(Iu(Ot.fromDom(i.getRoot()),'*[data-mce-selected="inline-boundary"]'),(function(e){return e.dom})),s=G(u,o),c=G(a,o),W(te(s,c),S(Hx,!1)),W(te(c,s),S(Hx,!0)),jx(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var o=G(r,e);W(o,(function(r){var o=Ds.fromRangeStart(t.selection.getRng());UC(e,t.getBody(),o).bind((function(e){return $x(t,n,e)}))}))}}(n,e,t,r.parents))})),t},Gx=S(Wx,!0),Xx=S(Wx,!1),Kx=function(e,t,n){if(bc(e)){var r=Lx(e,t).getOrThunk((function(){var n=e.selection.getRng();return t?Ds.fromRangeEnd(n):Ds.fromRangeStart(n)}));return UC(S(Mb,e),e.getBody(),r).exists((function(t){var r=GC(t);return FC(n,r).exists((function(t){return Vx(e,t),!0}))}))}return!1},Yx=function(e,t){return function(n){return FC(t,n).exists((function(t){return Vx(e,t),!0}))}},Jx=function(e,t,n,r){var o=e.getBody(),i=S(Mb,e);e.undoManager.ignore((function(){e.selection.setRng(function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,r)),e.execCommand("Delete"),UC(i,o,Ds.fromRangeStart(e.selection.getRng())).map(XC).map(Yx(e,t))})),e.nodeChanged()},Qx=function(e,t,n,r){var o=function(e,t){return Qc(t,e)||e}(e.getBody(),r.container()),i=S(Mb,e),a=UC(i,o,r);return a.bind((function(e){return n?e.fold(w(R.some(XC(e))),R.none,w(R.some(GC(e))),R.none):e.fold(R.none,w(R.some(GC(e))),R.none,w(R.some(XC(e))))})).map(Yx(e,t)).getOrThunk((function(){var u=Nl(n,o,r),s=u.bind((function(e){return UC(i,o,e)}));return Qu(a,s,(function(){return Ib(i,o,r).exists((function(t){return!!function(e){return Qu(Rl(e),Ll(e),(function(t,n){var r=Rb(!0,t),o=Rb(!1,n);return Pl(e,r).forall((function(e){return e.isEqual(o)}))})).getOr(!0)}(t)&&(um(e,n,Ot.fromDom(t)),!0)}))})).orThunk((function(){return s.bind((function(o){return u.map((function(o){return n?Jx(e,t,r,o):Jx(e,t,o,r),!0}))}))})).getOr(!1)}))},Zx=function(e,t,n){if(e.selection.isCollapsed()&&bc(e)){var r=Ds.fromRangeStart(e.selection.getRng());return Qx(e,t,n,r)}return!1},ew=function(e){return 1===en(e).length},tw=function(e,t,n,r){var o=S(wg,t),i=U(G(r,o),(function(e){return e.dom}));if(0===i.length)um(t,e,n);else{var a=function(e,t){var n=mg(!1),r=bg(t,n.dom);return dn(Ot.fromDom(e),n),yn(Ot.fromDom(e)),Ds(r,0)}(n.dom,i);t.selection.setRng(a.toRange())}},nw=function(e,t){var n=Ot.fromDom(e.getBody()),r=Ot.fromDom(e.selection.getStart()),o=G(function(e,t){var n=yh(t,e);return J(n,lo).fold(w(n),(function(e){return n.slice(0,e)}))}(n,r),ew);return oe(o).exists((function(n){var r,i=Ds.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Qu(Rl(n),Ll(n),(function(r,o){var i=Rb(!0,r),a=Rb(!1,o),u=Rb(!1,t);return e?Pl(n,u).exists((function(e){return e.isEqual(a)&&t.isEqual(i)})):Il(n,u).exists((function(e){return e.isEqual(i)&&t.isEqual(a)}))})).getOr(!0)}(t,i,n.dom)||(r=n,Vl(r.dom)&&pg(r.dom))||(tw(t,e,n,o),0))}))},rw=function(e,t){return!!e.selection.isCollapsed()&&nw(e,t)},ow=function(e,t,n){return e._selectionOverrides.hideFakeCaret(),um(e,t,Ot.fromDom(n)),!0},iw=function(e,t){return e.selection.isCollapsed()?function(e,t){var n=t?uh:sh,r=t?ks.Forwards:ks.Backwards,o=sl(r,e.getBody(),e.selection.getRng());return n(o)?ow(e,t,o.getNode(!t)):R.from(Rb(t,o)).filter((function(e){return n(e)&&fl(o,e)})).exists((function(n){return ow(e,t,n.getNode(!t))}))}(e,t):function(e,t){var n=e.selection.getNode();return!!Kn(n)&&ow(e,t,n)}(e,t)},aw=function(e){var t=parseInt(e,10);return isNaN(t)?0:t},uw=function(e,t){return(e||"table"===zt(t)?"margin":"padding")+("rtl"===or(t,"direction")?"-right":"-left")},sw=function(e){var t=lw(e);return!e.mode.isReadOnly()&&(t.length>1||function(e,t){return Z(t,(function(t){var n=uw(pc(e),t),r=ar(t,n).map(aw).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&r>0}))}(e,t))},cw=function(e){return mo(e)||go(e)},lw=function(e){return G(U(e.selection.getSelectedBlocks(),Ot.fromDom),(function(e){return!cw(e)&&!function(e){return Kt(e).map(cw).getOr(!1)}(e)&&Kr(e,(function(e){return qn(e.dom)||Gn(e.dom)})).exists((function(e){return qn(e.dom)}))}))},fw=function(e,t){var n=e.dom,r=e.selection,o=e.formatter,i=function(e){return e.getParam("indentation","40px","string")}(e),a=/[a-z%]+$/i.exec(i)[0],u=parseInt(i,10),s=pc(e),c=tc(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==c||n.getParent(r.getNode(),n.isBlock)||o.apply("div"),W(lw(e),(function(e){!function(e,t,n,r,o,i){var a=uw(n,Ot.fromDom(i));if("outdent"===t){var u=Math.max(0,aw(i.style[a])-r);e.setStyle(i,a,u?u+o:"")}else u=aw(i.style[a])+r+o,e.setStyle(i,a,u)}(n,t,s,u,a,e.dom)}))},dw=function(e,t){if(e.selection.isCollapsed()&&sw(e)){var n=e.dom,r=e.selection.getRng(),o=Ds.fromRangeStart(r),i=n.getParent(r.startContainer,n.isBlock);if(null!==i&&_h(Ot.fromDom(i),o))return fw(e,"outdent"),!0}return!1},pw=function(e,t){e.getDoc().execCommand(t,!1,null)},hw=function(e,t){e.addCommand("delete",(function(){!function(e,t){dw(e)||wC(e,!1)||pC(e,!1)||Zx(e,t,!1)||Zb(e,!1)||Mm(e)||_C(e,!1)||iw(e,!1)||rC(e)||rw(e,!1)||(pw(e,"Delete"),Hb(e))}(e,t)})),e.addCommand("forwardDelete",(function(){!function(e,t){wC(e,!0)||pC(e,!0)||Zx(e,t,!0)||Zb(e,!0)||Mm(e)||_C(e,!0)||iw(e,!0)||rC(e)||rw(e,!0)||pw(e,"ForwardDelete")}(e,t)}))},mw=function(e){return void 0===e.touches||1!==e.touches.length?R.none():R.some(e.touches[0])},gw=function(e){var t=Cu(R.none()),n=Cu(!1),r=Du((function(t){e.fire("longpress",De(De({},t),{type:"longpress"})),n.set(!0)}),400);e.on("touchstart",(function(e){mw(e).each((function(o){r.cancel();var i={x:o.clientX,y:o.clientY,target:e.target};r.throttle(e),n.set(!1),t.set(R.some(i))}))}),!0),e.on("touchmove",(function(o){r.cancel(),mw(o).each((function(r){t.get().each((function(o){(function(e,t){var n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(r,o)&&(t.set(R.none()),n.set(!1),e.fire("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(function(o){r.cancel(),"touchcancel"!==o.type&&t.get().filter((function(e){return e.target.isEqualNode(o.target)})).each((function(){n.get()?o.preventDefault():e.fire("tap",De(De({},o),{type:"tap"}))}))}),!0)},vw=function(e,t){return e.hasOwnProperty(t.nodeName)},yw=function(e,t){return!!Vn(t)||!!Nn(t)&&!vw(e,t)&&!Jl(t)},bw=function(e,t){if(Vn(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||vw(e,t.nextSibling)))return!0}return!1},Cw=function(e){var t,n,r,o=e.dom,i=e.selection,a=e.schema,u=a.getBlockElements(),s=i.getStart(),c=e.getBody(),l=tc(e);if(s&&Nn(s)&&l){var f=c.nodeName.toLowerCase();if(a.isValidChild(f,l.toLowerCase())&&!function(e,t,n){return j(vh(Ot.fromDom(n),Ot.fromDom(t)),(function(t){return vw(e,t.dom)}))}(u,c,s)){var d=i.getRng(),p=d.startContainer,h=d.startOffset,m=d.endContainer,g=d.endOffset,v=bp(e);for(s=c.firstChild;s;)if(yw(u,s)){if(bw(u,s)){n=s,s=s.nextSibling,o.remove(n);continue}t||(t=o.create(l,nc(e)),s.parentNode.insertBefore(t,s),r=!0),n=s,s=s.nextSibling,t.appendChild(n)}else t=null,s=s.nextSibling;r&&v&&(d.setStart(p,h),d.setEnd(m,g),i.setRng(d),e.nodeChanged())}}},xw=function(e,t){t.hasAttribute("data-mce-caret")&&(Po(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},ww=function(e,t){var n=function(e){return Qr(Ot.fromDom(e.getBody()),"*[data-mce-caret]").fold(w(null),(function(e){return e.dom}))}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void xw(e,n)):void(To(n)&&(xw(e,n),e.undoManager.add()))},_w=Gn,Sw=function(e,t,n){var r=Al(e.getBody()),o=S(ll,1===t?r.next:r.prev);if(n.collapsed&&function(e){return""!==tc(e)}(e)){var i=e.dom.getParent(n.startContainer,"PRE");if(!i)return;if(!o(Ds.fromRangeStart(n))){var a=function(e){var t=e.dom.create(tc(e));return(!_t.ie||_t.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e);1===t?e.$(i).after(a):e.$(i).before(a),e.selection.select(a,!0),e.selection.collapse()}}},Ew=function(e,t){var n=t?ks.Forwards:ks.Backwards,r=e.selection.getRng();return function(e,t,n){return Ix(t,e,n,fh,dh,_w)}(n,e,r).orThunk((function(){return Sw(e,n,r),R.none()}))},Aw=function(e,t){var n=t?1:-1,r=e.selection.getRng();return function(e,t,n){return Rx(t,e,n,(function(e){return fh(e)||ch(e)}),(function(e){return dh(e)||lh(e)}),_w)}(n,e,r).orThunk((function(){return Sw(e,n,r),R.none()}))},Dw=function(e,t){return Ew(e,t).exists((function(t){return Mx(e,t),!0}))},kw=function(e,t){return Aw(e,t).exists((function(t){return Mx(e,t),!0}))},Tw=function(e,t){return zx(e,t,t?dh:fh)},Ow=function(e){return $(["figcaption"],zt(e))},Bw=function(e){var t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},Nw=function(e,t,n){n?mn(e,t):hn(e,t)},Fw=function(e,t,n,r){return""===t?function(e,t){var n=Ot.fromTag("br");return Nw(e,n,t),Bw(n)}(e,r):function(e,t,n,r){var o=Ot.fromTag(n),i=Ot.fromTag("br");return Zn(o,r),mn(o,i),Nw(e,o,t),Bw(i)}(e,r,t,n)},Mw=function(e,t,n){return t?function(e,t){return px(e,t).breakAt.isNone()}(e.dom,n):function(e,t){return dx(e,t).breakAt.isNone()}(e.dom,n)},Pw=function(e,t){var n=Ot.fromDom(e.getBody()),r=Ds.fromRangeStart(e.selection.getRng()),o=tc(e),i=nc(e);return function(e,t){var n=S(Mt,t);return Kr(Ot.fromDom(e.container()),lo,n).filter(Ow)}(r,n).exists((function(){if(Mw(n,t,r)){var a=Fw(n,o,i,t);return e.selection.setRng(a),!0}return!1}))},Iw=function(e,t){return!!e.selection.isCollapsed()&&Pw(e,t)},Rw=function(e,t){return Q(function(e){return U(e,(function(e){return De({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:C},e)}))}(e),(function(e){return function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey}(e,t)?[e]:[]}))},Lw=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}},zw=function(e,t){return Y(Rw(e,t),(function(e){return e.action()}))},Vw=function(e,t){var n=t?ks.Forwards:ks.Backwards,r=e.selection.getRng();return Ix(e,n,r,uh,sh,Kn).exists((function(t){return Mx(e,t),!0}))},Hw=function(e,t){var n=t?1:-1,r=e.selection.getRng();return Rx(e,n,r,uh,sh,Kn).exists((function(t){return Mx(e,t),!0}))},$w=function(e,t){return zx(e,t,t?sh:uh)},jw=function(e,t,n,r,o){var i=Iu(Ot.fromDom(n),"td,th,caption").map((function(e){return e.dom}));return function(e,t,n){return K(e,(function(e,r){return e.fold((function(){return R.some(r)}),(function(e){var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return R.some(i<o?r:e)}))}),R.none())}(G(function(e,t){return Q(t,(function(t){var n=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}}(es(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))}(e,i),(function(e){return t(e,o)})),r,o).map((function(e){return e.cell}))},Uw=S(jw,(function(e){return e.bottom}),(function(e,t){return e.y<t})),Ww=S(jw,(function(e){return e.top}),(function(e,t){return e.y>t})),qw=function(e,t){return re(t.getClientRects()).bind((function(t){return Uw(e,t.left,t.top)})).bind((function(e){return fx(Ll(n=e).map((function(e){return dx(n,e).positions.concat(e)})).getOr([]),t);var n}))},Gw=function(e,t){return oe(t.getClientRects()).bind((function(t){return Ww(e,t.left,t.top)})).bind((function(e){return fx(Rl(n=e).map((function(e){return[e].concat(px(n,e).positions)})).getOr([]),t);var n}))},Xw=function(e,t,n){var r=e(t,n);return function(e){return e.breakType===ZC.Wrap&&0===e.positions.length}(r)||!Un(n.getNode())&&function(e){return e.breakType===ZC.Br&&1===e.positions.length}(r)?!function(e,t,n){return n.breakAt.exists((function(n){return e(t,n).breakAt.isSome()}))}(e,t,r):r.breakAt.isNone()},Kw=S(Xw,dx),Yw=S(Xw,px),Jw=function(e,t,n,r){var o=e.selection.getRng(),i=t?1:-1;return!(!Lc()||!function(e,t,n){var r=Ds.fromRangeStart(t);return Ml(!e,n).exists((function(e){return e.isEqual(r)}))}(t,o,n)||(aC(i,e,n,!t,!1).each((function(t){Mx(e,t)})),0))},Qw=function(e,t){var n=t.getNode(e);return Nn(n)&&"TABLE"===n.nodeName?R.some(n):R.none()},Zw=function(e,t,n){var r=Qw(!!t,n),o=!1===t;r.fold((function(){return Mx(e,n.toRange())}),(function(r){return Ml(o,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return Mx(e,n.toRange())}),(function(o){return function(e,t,n,r){var o=tc(t);o?t.undoManager.transact((function(){var r=Ot.fromTag(o);Zn(r,nc(t)),mn(r,Ot.fromTag("br")),e?pn(Ot.fromDom(n),r):dn(Ot.fromDom(n),r);var i=t.dom.createRng();i.setStart(r.dom,0),i.setEnd(r.dom,0),Mx(t,i)})):Mx(t,r.toRange())}(t,e,r,n)}))}))},e_=function(e,t,n,r){var o=e.selection.getRng(),i=Ds.fromRangeStart(o),a=e.getBody();if(!t&&Kw(r,i)){var u=function(e,t,n){return qw(t,n).orThunk((function(){return re(n.getClientRects()).bind((function(n){return lx(hx(e,Ds.before(t)),n.left)}))})).getOr(Ds.before(t))}(a,n,i);return Zw(e,t,u),!0}return!(!t||!Yw(r,i))&&(u=function(e,t,n){return Gw(t,n).orThunk((function(){return re(n.getClientRects()).bind((function(n){return lx(mx(e,Ds.after(t)),n.left)}))})).getOr(Ds.after(t))}(a,n,i),Zw(e,t,u),!0)},t_=function(e,t,n){return R.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(r){return R.from(e.dom.getParent(r,"table")).map((function(o){return n(e,t,o,r)}))})).getOr(!1)},n_=function(e,t){return t_(e,t,Jw)},r_=function(e,t){return t_(e,t,e_)},o_=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=ht().os;zw([{keyCode:od.RIGHT,action:Lw(Dw,e,!0)},{keyCode:od.LEFT,action:Lw(Dw,e,!1)},{keyCode:od.UP,action:Lw(kw,e,!1)},{keyCode:od.DOWN,action:Lw(kw,e,!0)},{keyCode:od.RIGHT,action:Lw(n_,e,!0)},{keyCode:od.LEFT,action:Lw(n_,e,!1)},{keyCode:od.UP,action:Lw(r_,e,!1)},{keyCode:od.DOWN,action:Lw(r_,e,!0)},{keyCode:od.RIGHT,action:Lw(Vw,e,!0)},{keyCode:od.LEFT,action:Lw(Vw,e,!1)},{keyCode:od.UP,action:Lw(Hw,e,!1)},{keyCode:od.DOWN,action:Lw(Hw,e,!0)},{keyCode:od.RIGHT,action:Lw(Ux,e,t,!0)},{keyCode:od.LEFT,action:Lw(Ux,e,t,!1)},{keyCode:od.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Lw(Gx,e,t)},{keyCode:od.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Lw(Xx,e,t)},{keyCode:od.UP,action:Lw(Iw,e,!1)},{keyCode:od.DOWN,action:Lw(Iw,e,!0)}],n).each((function(e){n.preventDefault()}))}(e,t,n)}))},i_=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){zw([{keyCode:od.BACKSPACE,action:Lw(dw,e,!1)},{keyCode:od.BACKSPACE,action:Lw(wC,e,!1)},{keyCode:od.DELETE,action:Lw(wC,e,!0)},{keyCode:od.BACKSPACE,action:Lw(pC,e,!1)},{keyCode:od.DELETE,action:Lw(pC,e,!0)},{keyCode:od.BACKSPACE,action:Lw(Zx,e,t,!1)},{keyCode:od.DELETE,action:Lw(Zx,e,t,!0)},{keyCode:od.BACKSPACE,action:Lw(Mm,e,!1)},{keyCode:od.DELETE,action:Lw(Mm,e,!0)},{keyCode:od.BACKSPACE,action:Lw(_C,e,!1)},{keyCode:od.DELETE,action:Lw(_C,e,!0)},{keyCode:od.BACKSPACE,action:Lw(iw,e,!1)},{keyCode:od.DELETE,action:Lw(iw,e,!0)},{keyCode:od.BACKSPACE,action:Lw(rC,e,!1)},{keyCode:od.DELETE,action:Lw(rC,e,!0)},{keyCode:od.BACKSPACE,action:Lw(Zb,e,!1)},{keyCode:od.DELETE,action:Lw(Zb,e,!0)},{keyCode:od.BACKSPACE,action:Lw(rw,e,!1)},{keyCode:od.DELETE,action:Lw(rw,e,!0)}],n).each((function(e){n.preventDefault()}))}(e,t,n)})),e.on("keyup",(function(t){!1===t.isDefaultPrevented()&&function(e,t){zw([{keyCode:od.BACKSPACE,action:Lw(xC,e)},{keyCode:od.DELETE,action:Lw(xC,e)}],t)}(e,t)}))},a_=function(e,t){var n,r=t,o=e.dom,i=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var a=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&t.insertBefore(o.doc.createTextNode(Co),t.firstChild)}var u=o.createRng();if(t.normalize(),t.hasChildNodes()){for(var s=new uo(t,t);n=s.current();){if(Vn(n)){u.setStart(n,0),u.setEnd(n,0);break}if(i[n.nodeName.toLowerCase()]){u.setStartBefore(n),u.setEndBefore(n);break}r=n,n=s.next()}n||(u.setStart(r,0),u.setEnd(r,0))}else Un(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(u.setStartBefore(t),u.setEndBefore(t)):(u.setStartAfter(t),u.setEndAfter(t)):(u.setStart(t,0),u.setEnd(t,0));e.selection.setRng(u),jd(e,u)}},u_=function(e){return R.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},s_=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},c_=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},l_=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},f_=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Nn(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},d_=function(e,t,n,r,o){var i=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var u;c_(u=n)&&c_(u.parentNode)&&(o="LI");var s=o?t(o):i.create("BR");if(f_(n,r,!0)&&f_(n,r,!1))if(s_(n,"LI")){var c=l_(n);i.insertAfter(s,c),function(e){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e}(n)?i.remove(c):i.remove(n)}else i.replace(s,n);else if(f_(n,r,!0))s_(n,"LI")?(i.insertAfter(s,l_(n)),s.appendChild(i.doc.createTextNode(" ")),s.appendChild(n)):n.parentNode.insertBefore(s,n),i.remove(r);else if(f_(n,r,!1))i.insertAfter(s,l_(n)),i.remove(r);else{n=l_(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var f=l.extractContents();"LI"===o&&function(e,t){return e.firstChild&&e.firstChild.nodeName===t}(f,"LI")?(s=f.firstChild,i.insertAfter(f,n)):(i.insertAfter(f,n),i.insertAfter(s,n)),i.remove(r)}a_(e,s)}},p_=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},h_=function(e){e.innerHTML='<br data-mce-bogus="1">'},m_=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},g_=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},v_=function(e,t,n){return!1===Vn(t)?n:e?1===n&&t.data.charAt(n-1)===xo?0:n:n===t.data.length-1&&t.data.charAt(n)===xo?t.data.length:n},y_=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},b_=function(e,t){var n=tc(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&function(e,t,n){var r=e.dom;R.from(n.style).map(r.parseStyle).each((function(e){var n=ur(Ot.fromDom(t)),o=De(De({},n),e);r.setStyles(t,o)}));var o=R.from(n.class).map((function(e){return e.split(/\s+/)})),i=R.from(t.className).map((function(e){return G(e.split(/\s+/),(function(e){return""!==e}))}));Qu(o,i,(function(e,n){var o=G(n,(function(t){return!$(e,t)})),i=ke(e,o);r.setAttrib(t,"class",i.join(" "))}));var a=["style","class"],u=he(n,(function(e,t){return!$(a,t)}));r.setAttribs(t,u)}(e,t,nc(e))},C_=function(e,t){var n,r,o,i,a,u,s,c,l,f,d=e.dom,p=e.schema,h=p.getNonEmptyElements(),m=e.selection.getRng(),g=function(t){var n,o,a,u=r,s=p.getTextInlineElements();if(a=n=t||"TABLE"===c||"HR"===c?d.create(t||l):i.cloneNode(!1),!1===function(e){return e.getParam("keep_styles",!0)}(e))d.setAttrib(n,"style",null),d.setAttrib(n,"class",null);else do{if(s[u.nodeName]){if(Vl(u)||Jl(u))continue;o=u.cloneNode(!1),d.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(a=o,n.appendChild(o))}}while((u=u.parentNode)&&u!==x);return b_(e,n),h_(a),n},v=function(e){var t,n,a=v_(e,r,o);if(Vn(r)&&(e?a>0:a<r.nodeValue.length))return!1;if(r.parentNode===i&&f&&!e)return!0;if(e&&Nn(r)&&r===i.firstChild)return!0;if(m_(r,"TABLE")||m_(r,"HR"))return f&&!e||!f&&e;var u=new uo(r,i);for(Vn(r)&&(e&&0===a?u.prev():e||a!==r.nodeValue.length||u.next());t=u.current();){if(Nn(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),h[n]&&"br"!==n))return!1}else if(Vn(t)&&!Xo(t.nodeValue))return!1;e?u.prev():u.next()}return!0},y=function(){a=/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==w?g(l):g(),function(e){return e.getParam("end_container_on_empty_block",!1)}(e)&&g_(d,s)&&d.isEmpty(i)?a=d.split(s,i):d.insertAfter(a,i),a_(e,a)};yd(d,m).each((function(e){m.setStart(e.startContainer,e.startOffset),m.setEnd(e.endContainer,e.endOffset)})),r=m.startContainer,o=m.startOffset,l=tc(e);var b=!(!t||!t.shiftKey),C=!(!t||!t.ctrlKey);Nn(r)&&r.hasChildNodes()&&(f=o>r.childNodes.length-1,r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r,o=f&&Vn(r)?r.nodeValue.length:0);var x=y_(d,r);if(x){(l&&!b||!l&&b)&&(r=function(e,t,n,r,o){var i,a,u,s,c,l,f=t||"P",d=e.dom,p=y_(d,r);if(!(a=d.getParent(r,d.isBlock))||!g_(d,a)){if(l=(a=a||p)===e.getBody()||function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=d.create(f),b_(e,i),a.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(s=r;s.parentNode!==a;)s=s.parentNode;for(;s&&!d.isBlock(s);)u=s,s=s.previousSibling;if(u&&e.schema.isValidChild(l,f.toLowerCase())){for(i=d.create(f),b_(e,i),u.parentNode.insertBefore(i,u),s=u;s&&!d.isBlock(s);)c=s.nextSibling,i.appendChild(s),s=c;n.setStart(r,o),n.setEnd(r,o)}}return r}(e,l,m,r,o)),i=d.getParent(r,d.isBlock),s=i?d.getParent(i.parentNode,d.isBlock):null,c=i?i.nodeName.toUpperCase():"";var w=s?s.nodeName.toUpperCase():"";"LI"!==w||C||(i=s,s=s.parentNode,c=w),/^(LI|DT|DD)$/.test(c)&&d.isEmpty(i)?d_(e,g,s,i,l):l&&i===e.getBody()||(l=l||"P",Ao(i)?(a=Po(i),d.isEmpty(i)&&h_(i),b_(e,a),a_(e,a)):v()?y():v(!0)?(a=i.parentNode.insertBefore(g(),i),a_(e,m_(i,"HR")?a:i)):((n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,v_(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,v_(!1,e.endContainer,e.endOffset)),t}(m).cloneRange()).setEndAfter(i),function(e){W(Pu(Ot.fromDom(e),jt),(function(e){var t=e.dom;t.nodeValue=_o(t.nodeValue)}))}(u=n.extractContents()),function(e){do{Vn(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(u),a=u.firstChild,d.insertAfter(u,i),function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Nn(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)(!(o=i[r]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue||p_(e,o))&&e.remove(o)}}(d,h,a),function(e,t){t.normalize();var n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(d,i),d.isEmpty(i)&&h_(i),a.normalize(),d.isEmpty(a)?(d.remove(a),y()):(b_(e,a),a_(e,a))),d.setAttrib(a,"id",""),e.fire("NewBlock",{newBlock:a}))}},x_=function(e,t,n){var r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),jd(e,r)},w_=function(e,t){var n,r,o=e.selection,i=e.dom,a=o.getRng();yd(i,a).each((function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var u=a.startOffset,s=a.startContainer;if(1===s.nodeType&&s.hasChildNodes()){var c=u>s.childNodes.length-1;s=s.childNodes[Math.min(u,s.childNodes.length-1)]||s,u=c&&3===s.nodeType?s.nodeValue.length:0}var l=i.getParent(s,i.isBlock),f=l?i.getParent(l.parentNode,i.isBlock):null,d=f?f.nodeName.toUpperCase():"",p=!(!t||!t.ctrlKey);"LI"!==d||p||(l=f),s&&3===s.nodeType&&u>=s.nodeValue.length&&(function(e,t,n){for(var r,o=new uo(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema,s,l)||(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=i.create("br"),Bs(i,a,n),x_(e,n,r),e.undoManager.add()},__=function(e,t){var n=Ot.fromTag("br");dn(Ot.fromDom(t),n),e.undoManager.add()},S_=function(e,t){E_(e.getBody(),t)||pn(Ot.fromDom(t),Ot.fromTag("br"));var n=Ot.fromTag("br");pn(Ot.fromDom(t),n),x_(e,n.dom,!1),e.undoManager.add()},E_=function(e,t){return n=Ds.after(t),!!Un(n.getNode())||Pl(e,Ds.after(t)).map((function(e){return Un(e.getNode())})).getOr(!1);var n},A_=function(e){return e&&"A"===e.nodeName&&"href"in e},D_=function(e){return e.fold(N,A_,A_,N)},k_=function(e,t){t.fold(C,S(__,e),S(S_,e),C)},T_=function(e,t){var n=function(e){var t=S(Mb,e),n=Ds.fromRangeStart(e.selection.getRng());return UC(t,e.getBody(),n).filter(D_)}(e);n.isSome()?n.each(S(k_,e)):w_(e,t)},O_=function(e,t){return u_(e).filter((function(e){return t.length>0&&Nt(Ot.fromDom(e),t)})).isSome()},B_=Sr([{br:[]},{block:[]},{none:[]}]),N_=function(e,t){return function(e){return O_(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},F_=function(e){return function(t,n){return""===tc(t)===e}},M_=function(e){return function(t,n){return function(e){return u_(e).filter((function(e){return go(Ot.fromDom(e))})).isSome()}(t)===e}},P_=function(e,t){return function(n,r){return function(e){return u_(e).fold(w(""),(function(e){return e.nodeName.toUpperCase()}))}(n)===e.toUpperCase()===t}},I_=function(e){return P_("pre",e)},R_=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},L_=function(e,t){return function(e){return O_(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},z_=function(e,t){return t},V_=function(e){var t=tc(e),n=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},H_=function(e,t){return function(n,r){return K(e,(function(e,t){return e&&t(n,r)}),!0)?R.some(t):R.none()}},$_=function(e,t){(function(e,t){return MC([H_([N_],B_.none()),H_([P_("summary",!0)],B_.br()),H_([I_(!0),R_(!1),z_],B_.br()),H_([I_(!0),R_(!1)],B_.block()),H_([I_(!0),R_(!0),z_],B_.block()),H_([I_(!0),R_(!0)],B_.br()),H_([M_(!0),z_],B_.br()),H_([M_(!0)],B_.block()),H_([F_(!0),z_,V_],B_.block()),H_([F_(!0)],B_.br()),H_([L_],B_.br()),H_([F_(!1),z_],B_.br()),H_([V_],B_.block())],[e,!(!t||!t.shiftKey)]).getOr(B_.none())})(e,t).fold((function(){T_(e,t)}),(function(){C_(e,t)}),C)},j_=function(e){e.on("keydown",(function(t){t.keyCode===od.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),$_(e,t)})))}(e,t)}))},U_=function(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){zw([{keyCode:od.END,action:Lw(Tw,e,!0)},{keyCode:od.HOME,action:Lw(Tw,e,!1)},{keyCode:od.END,action:Lw($w,e,!0)},{keyCode:od.HOME,action:Lw($w,e,!1)},{keyCode:od.END,action:Lw(Kx,e,!0,t)},{keyCode:od.HOME,action:Lw(Kx,e,!1,t)}],n).each((function(e){n.preventDefault()}))}(e,t,n)}))},W_=ht().browser,q_=function(e){!function(e){var t=Au((function(){e.composing||qh(e)}),0);W_.isIE()&&(e.on("keypress",(function(e){t.throttle()})),e.on("remove",(function(e){t.cancel()})))}(e),e.on("input",(function(t){!1===t.isComposing&&qh(e)}))},G_=ht(),X_=function(e){return e.stopImmediatePropagation()},K_=function(e){return e.keyCode===od.PAGE_UP||e.keyCode===od.PAGE_DOWN},Y_=function(e,t,n){n&&!e.get()?t.on("NodeChange",X_,!0):!n&&e.get()&&t.off("NodeChange",X_),e.set(n)},J_=function(e,t){if(!G_.os.isOSX()){var n=Cu(!1);e.on("keydown",(function(t){K_(t)&&Y_(n,e,!0)})),e.on("keyup",(function(r){!1===r.isDefaultPrevented()&&function(e,t,n){zw([{keyCode:od.PAGE_UP,action:Lw(Kx,e,!1,t)},{keyCode:od.PAGE_DOWN,action:Lw(Kx,e,!0,t)}],n)}(e,t,r),K_(r)&&n.get()&&(Y_(n,e,!1),e.nodeChanged())}))}},Q_=function(e,t){var n=t.container(),r=t.offset();return Vn(n)?(n.insertData(r,e),R.some(Ds(n,r+e.length))):cl(t).map((function(n){var r=Ot.fromText(e);return t.isAtEnd()?pn(n,r):dn(n,r),Ds(r.dom,e.length)}))},Z_=S(Q_,Co),eS=S(Q_," "),tS=function(e,t){return function(n){return function(e,t){return!Rh(t)&&(Lh(e,t)||Ph(e,t)||Ih(e,t))}(e,n)?Z_(t):eS(t)}},nS=function(e){var t=Ds.fromRangeStart(e.selection.getRng()),n=Ot.fromDom(e.getBody());if(e.selection.isCollapsed()){var r=S(Mb,e),o=Ds.fromRangeStart(e.selection.getRng());return UC(r,e.getBody(),o).bind(function(e){return function(t){return t.fold((function(t){return Il(e.dom,Ds.before(t))}),(function(e){return Rl(e)}),(function(e){return Ll(e)}),(function(t){return Pl(e.dom,Ds.after(t))}))}}(n)).bind(tS(n,t)).exists(function(e){return function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}}(e))}return!1},rS=function(e){e.on("keydown",(function(t){!1===t.isDefaultPrevented()&&function(e,t){zw([{keyCode:od.SPACEBAR,action:Lw(nS,e)}],t).each((function(e){t.preventDefault()}))}(e,t)}))},oS=function(e){var t=qx(e);return function(e){e.on("keyup compositionstart",S(ww,e))}(e),o_(e,t),i_(e,t),j_(e),rS(e),q_(e),U_(e,t),J_(e,t),t},iS=function(){function e(e){var t;this.lastPath=[],this.editor=e;var n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(function(n){var r=e.selection.getRng(),o={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&cd(o,t)||e.fire("SelectionChange"),t=o})),e.on("contextmenu",(function(){e.fire("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!_t.range&&e.selection.isCollapsed()||Uf(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(function(t){!t.isDefaultPrevented()&&Uf(e)&&("IMG"===e.selection.getNode().nodeName?oo.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())}))}return e.prototype.nodeChanged=function(e){var t,n,r,o=this.editor.selection;this.editor.initialized&&o&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),(t=o.getStart(!0)||r).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,r)||(t=r),n=[],this.editor.dom.getParent(t,(function(e){if(e===r)return!0;n.push(e)})),(e=e||{}).element=t,e.parents=n,this.editor.fire("NodeChange",e))},e.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1},e}(),aS=function(e){!function(e){e.on("click",(function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()}))}(e),function(e){e.parser.addNodeFilter("details",(function(e){W(e,(function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),e.serializer.addNodeFilter("details",(function(e){W(e,(function(e){var t=e.attr("data-mce-open");e.attr("open",l(t)?t:null),e.attr("data-mce-open",null)}))}))}(e)},uS=function(e){return Nn(e)&&ho(Ot.fromDom(e))},sS=function(e){e.on("click",(function(t){t.detail>=3&&function(e){var t=e.selection.getRng(),n=Ds.fromRangeStart(t),r=Ds.fromRangeEnd(t);if(Ds.isElementPosition(n)){var o=n.container();uS(o)&&Rl(o).each((function(e){return t.setStart(e.container(),e.offset())}))}Ds.isElementPosition(r)&&(o=n.container(),uS(o)&&Ll(o).each((function(e){return t.setEnd(e.container(),e.offset())}))),e.selection.setRng(Im(t))}(e)}))},cS=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,o=n.defaultView;return{top:t.top+o.pageYOffset-r.clientTop,left:t.left+o.pageXOffset-r.clientLeft}},lS=function(e,t){return n=function(e){return e.inline?cS(e.getBody()):{left:0,top:0}}(e),r=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),{pageX:(o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=cS(e.getContentAreaContainer()),r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:o}(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:o.top-n.top+r.top};var n,r,o},fS=Gn,dS=qn,pS=function(e,t,n,r){var o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:r}),o.setAttrib(i,"data-mce-selected",null);var a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a},hS=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},mS=function(e,t){return function(n){if(function(e){return 0===e.button}(n)){var r=Y(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}(fS,dS)).getOr(null);if(u=t.getBody(),fS(s=r)&&s!==u){var o=t.dom.getPos(r),i=t.getBody(),a=t.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?i.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?i.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:r.offsetWidth,height:r.offsetHeight,ghost:pS(t,r,r.offsetWidth,r.offsetHeight)})}}var u,s}},gS=function(e,t){return function(n){e.on((function(e){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!fS(t)}(t,(a=t.selection,3===(u=a.getSel().getRangeAt(0).startContainer).nodeType?u.parentNode:u),e.element)){var r=(o=e.element,(i=o.cloneNode(!0)).removeAttribute("data-mce-selected"),i);t.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact((function(){hS(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}var o,i,a,u})),vS(e)}},vS=function(e){e.on((function(e){hS(e.ghost)})),e.clear()},yS=function(e){var t,n=(t=Cu(R.none()),{clear:function(){return t.set(R.none())},set:function(e){return t.set(R.some(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}}),r=mu.DOM,o=document,i=mS(n,e),a=function(e,t){var n=oo.throttle((function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)}),0);return t.on("remove",n.stop),function(r){return e.on((function(e){var o,i,a=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&a>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var u=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,lS(t,r));o=e.ghost,i=t.getBody(),o.parentNode!==i&&i.appendChild(o),function(e,t,n,r,o,i){var a=0,u=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(u=t.pageY+r-i),e.style.width=n-a+"px",e.style.height=r-u+"px"}(e.ghost,u,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}))}}(n,e),u=gS(n,e),s=function(e,t){return function(){e.on((function(e){e.dragging&&t.fire("dragend")})),vS(e)}}(n,e);e.on("mousedown",i),e.on("mousemove",a),e.on("mouseup",u),r.bind(o,"mousemove",a),r.bind(o,"mouseup",s),e.on("remove",(function(){r.unbind(o,"mousemove",a),r.unbind(o,"mouseup",s)}))},bS=function(e){yS(e),function(e){e.on("drop",(function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(fS(n)||"false"===e.dom.getContentEditableParent(n))&&t.preventDefault()}))}(e),function(e){return e.getParam("block_unsupported_drop",!0,"boolean")}(e)&&function(e){var t=function(t){if(!t.isDefaultPrevented()){var n=t.dataTransfer;n&&($(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&ib(e,"Dropped file type is not supported"))}},n=function(n){dp(e,n.target)&&t(n)},r=function(){var r=mu.DOM,o=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),u=["drop","dragover"];W(u,(function(e){r.bind(i,e,n),o.bind(a,e,t)})),e.on("remove",(function(){W(u,(function(e){r.unbind(i,e,n),o.unbind(a,e,t)}))}))};e.on("init",(function(){oo.setEditorTimeout(e,r,0)}))}(e)},CS=qn,xS=Gn,wS=function(e,t){return td(e.getBody(),t)},_S=function(e){var t,n=e.selection,r=e.dom,o=r.isBlock,i=e.getBody(),a=Rc(e,i,o,(function(){return bp(e)})),u="sel-"+r.uniqueId(),s="data-mce-selected",c=function(e){return e!==i&&(xS(e)||Kn(e))&&r.isChildOf(e,i)},l=function(e){e&&n.setRng(e)},f=n.getRng,d=function(t,r,o,i){return void 0===i&&(i=!0),e.fire("ShowCaret",{target:r,direction:t,before:o}).isDefaultPrevented()?null:(i&&n.scrollIntoView(r,-1===t),a.show(o,r))},p=function(e){return ko(e)||Fo(e)||Mo(e)},h=function(e){return p(e.startContainer)||p(e.endContainer)},m=function(t){var n=e.schema.getShortEndedElements(),o=r.createRng(),i=t.startContainer,a=t.startOffset,u=t.endContainer,s=t.endOffset;return ve(n,i.nodeName.toLowerCase())?0===a?o.setStartBefore(i):o.setStartAfter(i):o.setStart(i,a),ve(n,u.nodeName.toLowerCase())?0===s?o.setEndBefore(u):o.setEndAfter(u):o.setEnd(u,s),o},g=function(o){var i=o.cloneNode(!0),a=e.fire("ObjectSelected",{target:o,targetClone:i});if(a.isDefaultPrevented())return null;var c=function(t,o,i){var a=e.$,s=Qr(Ot.fromDom(e.getBody()),"#"+u).fold((function(){return a([])}),(function(e){return a([e.dom])}));0===s.length&&(s=a('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",u)).appendTo(e.getBody());var c=r.createRng();o===i&&_t.ie?(s.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(o),c.setStartAfter(s[0].firstChild.firstChild),c.setEndAfter(o)):(s.empty().append(Co).append(o).append(Co),c.setStart(s[0].firstChild,1),c.setEnd(s[0].lastChild,0)),s.css({top:r.getPos(t,e.getBody()).y}),s[0].focus();var l=n.getSel();return l.removeAllRanges(),l.addRange(c),c}(o,a.targetClone,i),l=Ot.fromDom(o);return W(Iu(Ot.fromDom(e.getBody()),"*[data-mce-selected]"),(function(e){Mt(l,e)||nr(e,s)})),r.getAttrib(o,s)||o.setAttribute(s,"1"),t=o,b(),c},v=function(e,t){if(!e)return null;if(e.collapsed){if(!h(e)){var n=t?1:-1,o=sl(n,i,e),a=o.getNode(!t);if(Vc(a))return d(n,a,!!t&&!o.isAtEnd(),!1);var u=o.getNode(t);if(Vc(u))return d(n,u,!t&&!o.isAtEnd(),!1)}return null}var s=e.startContainer,l=e.startOffset,f=e.endOffset;if(3===s.nodeType&&0===l&&xS(s.parentNode)&&(s=s.parentNode,l=r.nodeIndex(s),s=s.parentNode),1!==s.nodeType)return null;if(f===l+1&&s===e.endContainer){var p=s.childNodes[l];if(c(p))return g(p)}return null},y=function(){t&&t.removeAttribute(s),Qr(Ot.fromDom(e.getBody()),"#"+u).each(yn),t=null},b=function(){a.hide()};return _t.ceFalse&&!Lv(e)&&function(){e.on("mouseup",(function(t){var n=f();n.collapsed&&Qy(e,t.clientX,t.clientY)&&sC(e,n,!1).each(l)})),e.on("click",(function(t){var o=wS(e,t.target);o&&(xS(o)&&(t.preventDefault(),e.focus()),CS(o)&&r.isChildOf(o,n.getNode())&&y())})),e.on("blur NewBlock",y),e.on("ResizeWindow FullscreenStateChanged",a.reposition);var s=function(e){var t=Al(e);if(!e.firstChild)return!1;var n,r=Ds.before(e.firstChild),o=t.next(r);return o&&!(fh(n=o)||dh(n)||uh(n)||sh(n))},p=function(t,n){var i,a,u=r.getParent(t,o),c=r.getParent(n,o);return!(!u||t===c||!r.isChildOf(u,c)||!1!==xS(wS(e,u)))||u&&(i=u,a=c,!(r.getParent(i,o)===r.getParent(a,o)))&&s(u)};e.on("tap",(function(t){var n=t.target,r=wS(e,n);xS(r)?(t.preventDefault(),uC(e,r).each(v)):c(n)&&uC(e,n).each(v)}),!0),e.on("mousedown",(function(t){var o=t.target;if((o===i||"HTML"===o.nodeName||r.isChildOf(o,i))&&!1!==Qy(e,t.clientX,t.clientY)){var a=wS(e,o);if(a)xS(a)?(t.preventDefault(),uC(e,a).each(v)):(y(),CS(a)&&t.shiftKey||nd(t.clientX,t.clientY,n.getRng())||(b(),n.placeCaretAt(t.clientX,t.clientY)));else if(c(o))uC(e,o).each(v);else if(!1===Vc(o)){y(),b();var u=Fx(i,t.clientX,t.clientY);if(u&&!p(o,u.node)){t.preventDefault();var s=d(1,u.node,u.before,!1);e.getBody().focus(),l(s)}}}})),e.on("keypress",(function(e){od.modifierPressed(e)||xS(n.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}})),e.on("SetSelectionRange",(function(e){e.range=m(e.range);var t=v(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(function(e){var t,n=e.range,o=n.startContainer.parentNode;h(n)||"mcepastebin"===o.id||b(),t=o,r.hasClass(t,"mce-offscreen-selection")||y()})),e.on("copy",(function(e){var t,n=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!_t.ie){var o=(t=r.get(u))?t.getElementsByTagName("*")[0]:t;o&&(e.preventDefault(),n.clearData(),n.setData("text/html",o.outerHTML),n.setData("text/plain",o.outerText||o.innerText))}})),bS(e),function(e){var t=Au((function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var n=cC(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancel()}))}(e),function(e){e.on("init",(function(){e.on("focusin",(function(t){var n=t.target;if(Kn(n)){var r=td(e.getBody(),n),o=Gn(r)?r:n;e.selection.getNode()!==o&&uC(e,o).each((function(t){return e.selection.setRng(t)}))}}))}))}(e)}(),{showCaret:d,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(Po(e),l(f()),n.scrollIntoView(e))},hideFakeCaret:b,destroy:function(){a.destroy(),t=null}}},SS=function(e){var t,n,r=kt.each,o=od.BACKSPACE,i=od.DELETE,a=e.dom,u=e.selection,s=e.parser,c=_t.gecko,l=_t.ie,f=_t.webkit,d="data:text/mce-internal,",p=l?"Text":"URL",h=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(r){}},m=function(e){return e.isDefaultPrevented()},g=function(){var t=function(e){var t=a.create("body"),n=e.cloneContents();return t.appendChild(n),u.serializer.serialize(t,{format:"html"})};e.on("keydown",(function(n){var r,u,s,c,l,f=n.keyCode;if(!m(n)&&(f===i||f===o)){if(r=e.selection.isCollapsed(),u=e.getBody(),r&&!a.isEmpty(u))return;if(!r&&(s=e.selection.getRng(),c=t(s),(l=a.createRng()).selectNode(e.getBody()),c!==t(l)))return;n.preventDefault(),e.setContent(""),u.firstChild&&a.isBlock(u.firstChild)?e.selection.setCursorLocation(u.firstChild,0):e.selection.setCursorLocation(u,0),e.nodeChanged()}}))},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},y=function(){Range.prototype.getClientRects||e.on("mousedown",(function(t){if(!m(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),oo.setEditorTimeout(e,(function(){n.focus()}))}}))},b=function(){e.on("click",(function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==a.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&a.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),u.select(n))}))},x=function(){e.on("keydown",(function(e){if(!m(e)&&e.keyCode===o&&u.isCollapsed()&&0===u.getRng().startOffset){var t=u.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},w=function(){(function(e){return e.getParam("readonly")})(e)||e.on("BeforeExecCommand mousedown",(function(){h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),mc(e)||h("enableObjectResizing",!1)}))},_=function(){e.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(a.select("a"),(function(e){var t=e.parentNode,n=a.getRoot();if(t.lastChild===e){for(;t&&!a.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}a.add(t,"br",{"data-mce-bogus":1})}}))}))},S=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},E=function(){e.inline||e.on("keydown",(function(){document.activeElement===document.body&&e.getWin().focus()}))},A=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(function(t){var n;if("HTML"===t.target.nodeName){if(_t.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}})))},D=function(){_t.mac&&e.on("keydown",(function(t){!od.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}))},k=function(){e.on("click",(function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},T=function(){e.on("init",(function(){e.dom.bind(e.getBody(),"submit",(function(e){e.preventDefault()}))}))},O=function(){e.on("dragstart",(function(t){!function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&u.select(t.target),(n=e.selection.getContent()).length>0&&(r=d+escape(e.id)+","+escape(n),t.dataTransfer.setData(p,r)))}(t)})),e.on("drop",(function(t){if(!m(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(p))&&t.indexOf(d)>=0?(t=t.substr(d.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=sd(t.x,t.y,e.getDoc());u.setRng(r),o=n.html,i=!0,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:o,internal:i}):e.execCommand("mceInsertContent",!1,o)}}var o,i}))},B=C;return Lv(e)?(f&&(b(),T(),v(),_t.iOS&&(E(),A(),k())),c&&(y(),w(),S(),D())):(e.on("keydown",(function(t){var n,r;if(!m(t)&&t.keyCode===od.BACKSPACE){var o=(n=u.getRng()).startContainer,i=n.startOffset,s=a.getRoot();if(r=o,n.collapsed&&0===i){for(;r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==s;)r=r.parentNode;"BLOCKQUOTE"===r.tagName&&(e.formatter.toggle("blockquote",null,r),(n=a.createRng()).setStart(o,0),n.setEnd(o,0),u.setRng(n))}}})),g(),_t.windowsPhone||e.on("keyup focusin mouseup",(function(e){od.modifierPressed(e)||u.normalize()}),!0),f&&(e.inline||a.bind(e.getDoc(),"mousedown mouseup",(function(t){var n;if(t.target===e.getDoc().documentElement)if(n=u.getRng(),e.getBody().focus(),"mousedown"===t.type){if(ko(n.startContainer))return;u.placeCaretAt(t.clientX,t.clientY)}else u.setRng(n)})),b(),tc(e)&&e.on("init",(function(){h("DefaultParagraphSeparator",tc(e))})),T(),x(),s.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),_t.iOS?(E(),A(),k()):v()),_t.ie>=11&&(A(),x()),_t.ie&&(v(),h("AutoUrlDetect",!1),O()),c&&(e.on("keydown",(function(t){if(!m(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&0===u.getRng().startOffset){var n=u.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return a.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(a.remove(r),t.preventDefault())}}})),y(),t=function(){var t=a.getAttribs(u.getStart().cloneNode(!1));return function(){var n=u.getStart();n!==e.getBody()&&(a.setAttrib(n,"style",null),r(t,(function(e){n.setAttributeNode(e.cloneNode(!0))})))}},n=function(){return!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock)},e.on("keypress",(function(r){var o;if(!m(r)&&(8===r.keyCode||46===r.keyCode)&&n())return o=t(),e.getDoc().execCommand("delete",!1,null),o(),r.preventDefault(),!1})),a.bind(e.getDoc(),"cut",(function(r){var o;!m(r)&&n()&&(o=t(),oo.setEditorTimeout(e,(function(){o()})))})),w(),_(),S(),D(),x())),{refreshContentEditable:B,isHidden:function(){if(!c||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},ES=mu.DOM,AS=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},DS=function(e){return he(e,(function(e){return!1===m(e)}))},kS=function(e){var t=e.settings,n=e.editorUpload.blobCache;return DS({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:AS(e),validate:!0,blob_cache:n,images_dataimg_filter:t.images_dataimg_filter})},TS=function(e){var t=e.dom.getRoot();e.inline||Uf(e)&&e.selection.getStart(!0)!==t||Rl(t).each((function(t){var n=t.getNode(),r=Rn(n)?Rl(n).getOr(t):t;_t.browser.isIE()?function(e,t){var n=Ot.fromDom(e.getBody()),r=(np(e)?R.from(t):R.none()).map(rp).filter(tp(n));e.bookmark=r.isSome()?r:e.bookmark}(e,r.toRange()):e.selection.setRng(r.toRange())}))},OS=function(e){e.bindPendingEventDelegates(),e.initialized=!0,function(e){e.fire("Init")}(e),e.focus(!0),TS(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&oo.setEditorTimeout(e,(function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()}),100)}(e)},BS=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},NS=function(e,t){var n=BS(e),r=hc(e),o=function(){n.unloadAll(t),e.inline||e.ui.styleSheetLoader.unloadAll(r)},i=function(){e.removed?o():(e.on("remove",o),OS(e))};eo.all(function(e,t,n){var r=[new eo((function(n,r){return BS(e).loadAll(t,n,r)}))];return e.inline?r:r.concat([new eo((function(t,r){return e.ui.styleSheetLoader.loadAll(n,t,r)}))])}(e,t,r)).then(i).catch(i)},FS=function(e){var t=e.settings,n=e.getDoc(),r=e.getBody();t.browser_spellcheck||t.gecko_spellcheck||(n.body.spellcheck=!1,ES.setAttrib(r,"spellcheck","false")),e.quirks=SS(e),function(e){e.fire("PostRender")}(e);var o=function(e){return e.getParam("directionality",Su.isRtl()?"rtl":void 0)}(e);if(void 0!==o&&(r.dir=o),t.protect&&e.on("BeforeSetContent",(function(e){kt.each(t.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),e.on("SetContent",(function(){e.addVisual(e.getBody())})),Lv(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",(function(t){e.composing="compositionstart"===t.type})),e.contentStyles.length>0){var i="";kt.each(e.contentStyles,(function(e){i+=e+"\r\n"})),e.dom.addStyle(i)}NS(e,e.contentCSS),t.content_style&&function(e,t){var n=Ot.fromDom(e.getBody()),r=cn(sn(n)),o=Ot.fromTag("style");Qn(o,"type","text/css"),mn(o,Ot.fromText(t)),mn(r,o),e.on("remove",(function(){yn(o)}))}(e,t.content_style)},MS=function(e,t){var n=e.settings,r=e.getElement(),o=e.getDoc();n.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline||(o.open(),o.write(e.iframeHTML),o.close()),e.inline&&(ES.addClass(r,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=r,e.contentAreaContainer=r);var i=e.getBody();i.disabled=!0,e.readonly=!!n.readonly,e.readonly||(e.inline&&"static"===ES.getStyle(i,"position",!0)&&(i.style.position="relative"),i.contentEditable=e.getParam("content_editable_state",!0)),i.disabled=!1,e.editorUpload=bb(e),e.schema=ki(n),e.dom=mu(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:lc(e),referrerPolicy:fc(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=py(kS(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(function(t,n){for(var r,o,i=t.length,a=e.dom,u="data-mce-"+n;i--;)if((o=(r=t[i]).attr(n))&&!r.attr(u)){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?((o=a.serializeStyle(a.parseStyle(o),r.name)).length||(o=null),r.attr(u,o),r.attr(n,o)):"tabindex"===n?(r.attr(u,o),r.attr(n,null)):r.attr(u,e.convertURL(o,n,r.name))}})),t.addNodeFilter("script",(function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}})),e.settings.preserve_cdata&&t.addNodeFilter("#cdata",(function(t){for(var n=t.length;n--;){var r=t[n];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode(r.value)+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){for(var n=t.length,r=e.schema.getNonEmptyElements();n--;){var o=t[n];o.isEmpty(r)&&0===o.getAll("br").length&&(o.append(new Np("br",1)).shortEnded=!0)}})),t}(e),e.serializer=yy(function(e){var t=e.settings;return De(De({},kS(e)),DS({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,element_format:t.element_format,entities:t.entities,entity_encoding:t.entity_encoding,indent:t.indent,indent_after:t.indent_after,indent_before:t.indent_before,block_elements:t.block_elements,boolean_attributes:t.boolean_attributes,custom_elements:t.custom_elements,extended_valid_elements:t.extended_valid_elements,invalid_elements:t.invalid_elements,invalid_styles:t.invalid_styles,move_caret_before_on_enter_elements:t.move_caret_before_on_enter_elements,non_empty_elements:t.non_empty_elements,schema:t.schema,self_closing_elements:t.self_closing_elements,short_ended_elements:t.short_ended_elements,special:t.special,text_block_elements:t.text_block_elements,text_inline_elements:t.text_inline_elements,valid_children:t.valid_children,valid_classes:t.valid_classes,valid_elements:t.valid_elements,valid_styles:t.valid_styles,verify_html:t.verify_html,whitespace_elements:t.whitespace_elements}))}(e),e),e.selection=Kv(e.dom,e.getWin(),e.serializer,e),e.annotator=Zf(e),e.formatter=Ab(e),e.undoManager=Db(e),e._nodeChangeDispatcher=new iS(e),e._selectionOverrides=_S(e),gw(e),aS(e),Lv(e)||sS(e);var a=function(e){return Lv(e)?Cu(null):oS(e)}(e);hw(e,a),function(e){tc(e)&&e.on("NodeChange",S(Cw,e))}(e),Nb(e),function(e){e.fire("PreInit")}(e),zv(e).fold((function(){FS(e)}),(function(t){e.setProgressState(!0),t.then((function(t){e.setProgressState(!1),FS(e)}),(function(t){e.notificationManager.open({type:"error",text:String(t)}),FS(e)}))}))},PS=mu.DOM,IS=function(e){var t=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(e)+"<html><head>";(function(e){return e.getParam("document_base_url","")})(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=function(e){return Zs(e,"body_id","tinymce")}(e),r=function(e){return Zs(e,"body_class","")}(e);return ec(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+ec(e)+'" />'),t+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>'},RS=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-0 for help."),r=function(e,t,n,r){var o=Ot.fromTag("iframe");return Zn(o,r),Zn(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Nu(o,"tox-edit-area__iframe"),o}(e.id,n,t.height,function(e){return e.getParam("iframe_attrs",{})}(e)).dom;r.onload=function(){r.onload=null,e.fire("load")};var o=function(e,t){if(document.domain!==window.location.hostname&&_t.browser.isIE()){var n=mb("mce");e[n]=function(){MS(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return PS.setAttrib(t,"src",r),!0}return!1}(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=IS(e),PS.add(t.iframeContainer,r),o},LS=mu.DOM,zS=function(e,t,n){var r=tb.get(n),o=tb.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=kt.trim(n),r&&-1===kt.inArray(t,n)){if(kt.each(tb.dependencies(n),(function(n){zS(e,t,n)})),e.plugins[n])return;try{var i=new r(e,o,e.$);e.plugins[n]=i,i.init&&(i.init(e,o),t.push(n))}catch(VA){!function(e,t,n){var r=Su.translate(["Failed to initialize plugin: {0}",t]);rd(e,"PluginLoadError",{message:r}),cb(r,n),ib(e,r)}(e,n,VA)}}},VS=function(e){return e.replace(/^\-/,"")},HS=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},$S=function(e){var t=e.getElement();return e.inline?HS(null):function(e){var t=LS.create("div");return LS.insertAfter(t,e),HS(t)}(t)},jS=function(e){var t=e.getElement();return e.orgDisplay=t.style.display,l(vc(e))?function(e){return e.theme.renderUI()}(e):y(vc(e))?function(e){var t=e.getElement(),n=vc(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n}(e):$S(e)},US=function(e){e.fire("ScriptsLoaded"),function(e){var t=kt.trim(ic(e)),n=e.ui.registry.getAll().icons,r=De(De({},Wy.get("default").icons),Wy.get(t).icons);se(r,(function(t,r){ve(n,r)||e.ui.registry.addIcon(r,t)}))}(e),function(e){var t=vc(e);if(l(t)){e.settings.theme=VS(t);var n=nb.get(t);e.theme=new n(e,nb.urls[t]),e.theme.init&&e.theme.init(e,nb.urls[t]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}}(e),function(e){var t=[];kt.each(xc(e).split(/[ ,]/),(function(n){zS(e,t,VS(n))}))}(e);var t=jS(e);!function(e,t){var n={show:R.from(t.show).getOr(C),hide:R.from(t.hide).getOr(C),disable:R.from(t.disable).getOr(C),isDisabled:R.from(t.isDisabled).getOr(N),enable:function(){e.mode.isReadOnly()||R.from(t.enable).map(B)}};e.ui=De(De({},e.ui),n)}(e,R.from(t.api).getOr({}));var n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,db(e),e.inline?MS(e):function(e,t){var n=RS(e,t);t.editorContainer&&(PS.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=PS.isHidden(t.editorContainer)),e.getElement().style.display="none",PS.setAttrib(e.id,"aria-hidden","true"),n||MS(e)}(e,n)},WS=mu.DOM,qS=function(e){return"-"===e.charAt(0)},GS=function(e,t){var n=dc(t),r=function(e){return e.getParam("language_url","","string")}(t);if(!1===Su.hasCode(n)&&"en"!==n){var o=""!==r?r:t.editorManager.baseURL+"/langs/"+n+".js";e.add(o,C,void 0,(function(){!function(e,t,n){ab(e,"LanguageLoadError",ub("language",t,n))}(t,o,n)}))}},XS=function(e,t,n){return R.from(t).filter((function(e){return e.length>0&&!Wy.has(e)})).map((function(t){return{url:e.editorManager.baseURL+"/icons/"+t+"/icons"+n+".js",name:R.some(t)}}))},KS=function(e,t,n){var r=XS(t,"default",n),o=function(e){return R.from(function(e){return e.getParam("icons_url","","string")}(e)).filter((function(e){return e.length>0})).map((function(e){return{url:e,name:R.none()}}))}(t).orThunk((function(){return XS(t,ic(t),"")}));W(function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([r,o]),(function(n){e.add(n.url,C,void 0,(function(){!function(e,t,n){ab(e,"IconsLoadError",ub("icons",t,n))}(t,n.url,n.name.getOrUndefined())}))}))},YS=function(e,t){var n=bu.ScriptLoader;!function(e,t,n,r){var o=vc(t);if(l(o)){if(!qS(o)&&!nb.urls.hasOwnProperty(o)){var i=function(e){return e.getParam("theme_url")}(t);i?nb.load(o,t.documentBaseURI.toAbsolute(i)):nb.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue((function(){nb.waitFor(o,r)}))}else r()}(n,e,t,(function(){GS(n,e),KS(n,e,t),function(e,t){kt.each(function(e){return e.getParam("external_plugins")}(e),(function(t,n){tb.load(n,t,C,void 0,(function(){sb(e,t,n)})),e.settings.plugins+=" "+n})),kt.each(xc(e).split(/[ ,]/),(function(n){if((n=kt.trim(n))&&!tb.urls[n])if(qS(n)){n=n.substr(1,n.length);var r=tb.dependencies(n);kt.each(r,(function(n){var r={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"},o=tb.createUrl(r,n);tb.load(o.resource,o,C,void 0,(function(){sb(e,o.prefix+o.resource+o.suffix,o.resource)}))}))}else{var o={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"};tb.load(n,o,C,void 0,(function(){sb(e,o.prefix+o.resource+o.suffix,n)}))}}))}(e,t),n.loadQueue((function(){e.removed||US(e)}),e,(function(){e.removed||US(e)}))}))},JS=function(e){var t=e.id;Su.setCode(dc(e));var n=function(){WS.unbind(window,"ready",n),e.render()};if(zi.Event.domLoaded){if(e.getElement()&&_t.contentEditable){var r=Ot.fromDom(e.getElement()),o=function(e){return K(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})}(r);e.on("remove",(function(){q(r.dom.attributes,(function(e){return nr(r,e.name)})),Zn(r,o)})),e.ui.styleSheetLoader=function(e,t){return ao.forElement(e,{contentCssCors:Cc(t),referrerPolicy:fc(t)})}(r,e),function(e){return e.getParam("inline")}(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||WS.getParent(t,"form");i&&(e.formElement=i,function(e){return e.getParam("hidden_input")}(e)&&!zn(e.getElement())&&(WS.insertAfter(WS.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},WS.bind(i,"submit reset",e.formEventDelegate),e.on("reset",(function(){e.resetContent()})),!function(e){return e.getParam("submit_patch")}(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=rb(e),e.notificationManager=eb(e),function(e){return"xml"===e.getParam("encoding")}(e)&&e.on("GetContent",(function(e){e.save&&(e.content=WS.encode(e.content))})),function(e){return e.getParam("add_form_submit_trigger")}(e)&&e.on("submit",(function(){e.initialized&&e.save()})),function(e){return e.getParam("add_unload_trigger")}(e)&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),YS(e,e.suffix)}}else WS.bind(window,"ready",n)},QS=function(e,t){return function(e,t){return Hv(e).editor.addVisual(t)}(e,t)},ZS={"font-size":"size","font-family":"face"},eE=function(e,t,n){return tg(Ot.fromDom(n),(function(t){return function(t){return ar(t,e).orThunk((function(){return"font"===zt(t)?ge(ZS,e).bind((function(e){return tr(t,e)})):R.none()}))}(t)}),(function(e){return Mt(Ot.fromDom(t),e)}))},tE=function(e){return function(t,n){return R.from(n).map(Ot.fromDom).filter($t).bind((function(n){return eE(e,t,n.dom).or(function(e,t){return R.from(mu.DOM.getStyle(t,e,!0))}(e,n.dom))})).getOr("")}},nE=tE("font-size"),rE=x((function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),tE("font-family")),oE=function(e){return Rl(e.getBody()).map((function(e){var t=e.container();return Vn(t)?t.parentNode:t}))},iE=function(e,t){return function(e){return R.from(e.selection.getRng()).bind((function(t){var n=e.getBody();return t.startContainer===n&&0===t.startOffset?R.none():R.from(e.selection.getStart(!0))}))}(e).orThunk(S(oE,e)).map(Ot.fromDom).filter($t).map(t)},aE=function(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=function(e){return kt.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))}(e),o=function(e){return kt.explode(e.getParam("font_size_classes",""))}(e);return o?o[n-1]||t:r[n-1]||t}return t}return t},uE=function(e){var t=e.split(/\s*,\s*/);return U(t,(function(e){return-1===e.indexOf(" ")||ze(e,'"')||ze(e,"'")?e:"'"+e+"'"})).join(",")},sE=function(e,t){var n=function(e){var t;return"string"!=typeof e?(t=kt.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}}(t);!function(e,t,n){Vv(e).editor.insertContent(t,n)}(e,n.content,n.details)},cE=kt.each,lE=kt.map,fE=kt.inArray,dE=function(){function e(e){this.commands={state:{},exec:{},value:{}},this.editor=e,this.setupCommands(e)}return e.prototype.execCommand=function(e,t,n,r){var o,i=!1,a=this;if(!a.editor.removed){var u;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus?(u=a.editor,up(u).each((function(e){return u.selection.setRng(e)}))):a.editor.focus(),(r=a.editor.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented())return!1;var s=e.toLowerCase();if(o=a.commands.exec[s])return o(s,t,n),a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(cE(this.editor.plugins,(function(r){if(r.execCommand&&r.execCommand(e,t,n))return a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),i=!0,!1})),i)return i;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(e,t,n))return a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{i=a.editor.getDoc().execCommand(e,t,n)}catch(c){}return!!i&&(a.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}},e.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(n){}return!1}},e.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(n){}}},e.prototype.addCommands=function(e,t){void 0===t&&(t="exec");var n=this;cE(e,(function(e,r){cE(r.toLowerCase().split(","),(function(r){n.commands[t][r]=e}))}))},e.prototype.addCommand=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.exec[e]=function(e,o,i,a){return t.call(n||r.editor,o,i,a)}},e.prototype.queryCommandSupported=function(e){if(e=e.toLowerCase(),this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(t){}return!1},e.prototype.addQueryStateHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.state[e]=function(){return t.call(n||r.editor)}},e.prototype.addQueryValueHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.value[e]=function(){return t.call(n||r.editor)}},e.prototype.hasCustomCommand=function(e){return e=e.toLowerCase(),!!this.commands.exec[e]},e.prototype.execNativeCommand=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(e,t,n)},e.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)},e.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t?{value:t}:void 0),this.editor.nodeChanged()},e.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(e){var t=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":C,"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var r,o=e.getDoc();try{t.execNativeCommand(n)}catch(a){r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");_t.mac&&(i=i.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var r=n.substring(7);"full"===r&&(r="justify"),cE("left,center,right,justify".split(","),(function(t){r!==t&&e.formatter.remove("align"+t)})),"none"!==r&&t.toggleFormat("align"+r)},"InsertUnorderedList,InsertOrderedList":function(n){var r;t.execNativeCommand(n);var o=e.dom.getParent(e.selection.getNode(),"ol,ul");o&&(r=o.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)&&(t.storeSelection(),e.dom.split(r,o),t.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){t.toggleFormat(e)},"ForeColor,HiliteColor":function(e,n,r){t.toggleFormat(e,r)},FontName:function(t,n,r){!function(e,t){var n=aE(e,t);e.formatter.toggle("fontname",{value:uE(n)}),e.nodeChanged()}(e,r)},FontSize:function(t,n,r){!function(e,t){e.formatter.toggle("fontsize",{value:aE(e,t)}),e.nodeChanged()}(e,r)},LineHeight:function(t,n,r){!function(e,t){e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()}(e,r)},RemoveFormat:function(t){e.formatter.remove(t)},mceBlockQuote:function(){t.toggleFormat("blockquote")},FormatBlock:function(e,n,r){return t.toggleFormat(r||"p")},mceCleanup:function(){var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},mceRemoveNode:function(n,r,o){var i=o||e.selection.getNode();i!==e.getBody()&&(t.storeSelection(),e.dom.remove(i,!0),t.restoreSelection())},mceSelectNodeDepth:function(t,n,r){var o=0;e.dom.getParent(e.selection.getNode(),(function(t){if(1===t.nodeType&&o++===r)return e.selection.select(t),!1}),e.getBody())},mceSelectNode:function(t,n,r){e.selection.select(r)},mceInsertContent:function(t,n,r){sE(e,r)},mceInsertRawHTML:function(t,n,r){e.selection.setContent("tiny_mce_marker");var o=e.getContent();e.setContent(o.replace(/tiny_mce_marker/g,(function(){return r})))},mceInsertNewLine:function(t,n,r){$_(e,r)},mceToggleFormat:function(e,n,r){t.toggleFormat(r)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){fw(e,t)},mceRepaint:C,InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,n,r){e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceInsertLink:function(t,n,r){"string"==typeof r&&(r={href:r});var o=e.dom.getParent(e.selection.getNode(),"a");r.href=r.href.replace(/ /g,"%20"),o&&r.href||e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,o)},selectAll:function(){var t=e.dom.getParent(e.selection.getStart(),qn);if(t){var n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return T_(e,r),!0}});var n=function(t){return function(){var n=e.selection,r=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks(),o=lE(r,(function(n){return!!e.formatter.matchNode(n,t)}));return-1!==fE(o,!0)}};t.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return t.isFormatMatch(e)},mceBlockQuote:function(){return t.isFormatMatch("blockquote")},Outdent:function(){return sw(e)},"InsertUnorderedList,InsertOrderedList":function(t){var n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state"),t.addCommands({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),t.addQueryValueHandler("FontName",(function(){return function(e){return iE(e,(function(t){return rE(e.getBody(),t.dom)})).getOr("")}(e)}),this),t.addQueryValueHandler("FontSize",(function(){return function(e){return iE(e,(function(t){return nE(e.getBody(),t.dom)})).getOr("")}(e)}),this),t.addQueryValueHandler("LineHeight",(function(){return function(e){return iE(e,(function(t){var n=Ot.fromDom(e.getBody());return tg(t,(function(e){return ar(e,"line-height")}),S(Mt,n)).getOrThunk((function(){var e=parseFloat(or(t,"line-height")),n=parseFloat(or(t,"font-size"));return String(e/n)}))})).getOr("")}(e)}),this)},e}(),pE="data-mce-contenteditable",hE=function(e,t,n){var r,o;Mu(e,t)&&!1===n?(o=t,Tu(r=e)?r.dom.classList.remove(o):Bu(r,o),Fu(r)):n&&Nu(e,t)},mE=function(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(r){}},gE=function(e,t){e.dom.contentEditable=t?"true":"false"},vE=function(e,t){var n=Ot.fromDom(e.getBody());hE(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),function(e){R.from(e.selection.getNode()).each((function(e){e.removeAttribute("data-mce-selected")}))}(e),e.readonly=!0,gE(n,!1),W(Iu(n,'*[contenteditable="true"]'),(function(e){Qn(e,pE,"true"),gE(e,!1)}))):(e.readonly=!1,gE(n,!0),function(e){W(Iu(e,'*[data-mce-contenteditable="true"]'),(function(e){nr(e,pE),gE(e,!0)}))}(n),mE(e,"StyleWithCSS",!1),mE(e,"enableInlineTableEditing",!1),mE(e,"enableObjectResizing",!1),Cp(e)&&e.focus(),function(e){e.selection.setRng(e.selection.getRng())}(e),e.nodeChanged())},yE=function(e){return e.readonly},bE=function(e){e.parser.addAttributeFilter("contenteditable",(function(t){yE(e)&&W(t,(function(e){e.attr(pE,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(pE,(function(t){yE(e)&&W(t,(function(e){e.attr("contenteditable",e.attr(pE))}))})),e.serializer.addTempAttr(pE)},CE=function(e,t){if(function(e){return"click"===e.type}(t)&&!od.metaKeyPressed(t)){var n=Ot.fromDom(t.target);(function(e,t){return Zr(t,"a",(function(t){return Mt(t,Ot.fromDom(e.getBody()))})).bind((function(e){return tr(e,"href")}))})(e,n).each((function(n){if(t.preventDefault(),/^#/.test(n)){var r=e.dom.select(n+',[name="'+(ze(o=n,i="#")?function(e,t){return e.substring(t)}(o,i.length):o)+'"]');r.length&&e.selection.scrollIntoView(r[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var o,i}))}},xE=kt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),wE=function(){function e(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||N}return e.isNative=function(e){return!!xE[e.toLowerCase()]},e.prototype.fire=function(e,t){var n=e.toLowerCase(),r=t||{};r.type=n,r.target||(r.target=this.scope),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=F},r.stopPropagation=function(){r.isPropagationStopped=F},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=F},r.isDefaultPrevented=N,r.isPropagationStopped=N,r.isImmediatePropagationStopped=N),this.settings.beforeFire&&this.settings.beforeFire(r);var o=this.bindings[n];if(o)for(var i=0,a=o.length;i<a;i++){var u=o[i];if(u.once&&this.off(n,u.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===u.func.call(this.scope,r))return r.preventDefault(),r}return r},e.prototype.on=function(e,t,n,r){if(!1===t&&(t=N),t){var o={func:t};r&&kt.extend(o,r);for(var i=e.toLowerCase().split(" "),a=i.length;a--;){var u=i[a],s=this.bindings[u];s||(s=this.bindings[u]=[],this.toggleEvent(u,!0)),n?s.unshift(o):s.push(o)}}return this},e.prototype.off=function(e,t){var n=this;if(e)for(var r=e.toLowerCase().split(" "),o=r.length;o--;){var i=r[o],a=this.bindings[i];if(!i)return se(this.bindings,(function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]})),this;if(a){if(t)for(var u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),this.bindings[i]=a);else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[i])}}else se(this.bindings,(function(e,t){n.toggleEvent(t,!1)})),this.bindings={};return this},e.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})},e.prototype.has=function(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)},e}(),_E=function(e){return e._eventDispatcher||(e._eventDispatcher=new wE({scope:e,toggleEvent:function(t,n){wE.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},SE={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return t;var o=_E(r).fire(e,t);if(!1!==n&&r.parent)for(var i=r.parent();i&&!o.isPropagationStopped();)i.fire(e,o,!1),i=i.parent();return o},on:function(e,t,n){return _E(this).on(e,t,n)},off:function(e,t){return _E(this).off(e,t)},once:function(e,t){return _E(this).once(e,t)},hasEventListeners:function(e){return _E(this).has(e)}},EE=mu.DOM,AE=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;var n=gc(e);return n?(e.eventRoot||(e.eventRoot=EE.select(n)[0]),e.eventRoot):e.getBody()},DE=function(e,t,n){!function(e){return!e.hidden&&!yE(e)}(e)?yE(e)&&CE(e,n):e.fire(t,n)},kE=function(e,t){var n;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var r=AE(e,t);if(gc(e)){if(yx||(yx={},e.editorManager.on("removeEditor",(function(){e.editorManager.activeEditor||yx&&(se(yx,(function(t,n){e.dom.unbind(AE(e,n))})),yx=null)}))),yx[t])return;n=function(n){for(var r=n.target,o=e.editorManager.get(),i=o.length;i--;){var a=o[i].getBody();(a===r||EE.isChildOf(r,a))&&DE(o[i],t,n)}},yx[t]=n,EE.bind(r,t,n)}else n=function(n){DE(e,t,n)},EE.bind(r,t,n),e.delegates[t]=n}},TE=De(De({},SE),{bindPendingEventDelegates:function(){var e=this;kt.each(e._pendingNativeEvents,(function(t){kE(e,t)}))},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?kE(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(AE(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e=this,t=e.getBody(),n=e.dom;e.delegates&&(se(e.delegates,(function(t,n){e.dom.unbind(AE(e,n),n,t)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),OE=["design","readonly"],BE=function(e,t,n,r){var o=n[t.get()],i=n[r];try{i.activate()}catch(VA){return}o.deactivate(),o.editorReadOnly!==i.editorReadOnly&&vE(e,i.editorReadOnly),t.set(r),function(e,t){e.fire("SwitchMode",{mode:t})}(e,r)},NE=function(e){var t=Cu("design"),n=Cu({design:{activate:C,deactivate:C,editorReadOnly:!1},readonly:{activate:C,deactivate:C,editorReadOnly:!0}});return function(e){e.serializer?bE(e):e.on("PreInit",(function(){bE(e)}))}(e),function(e){e.on("ShowCaret",(function(t){yE(e)&&t.preventDefault()})),e.on("ObjectSelected",(function(t){yE(e)&&t.preventDefault()}))}(e),{isReadOnly:function(){return yE(e)},set:function(r){return function(e,t,n,r){if(r!==n.get()){if(!ve(t,r))throw new Error("Editor mode '"+r+"' is invalid");e.initialized?BE(e,n,t,r):e.on("init",(function(){return BE(e,n,t,r)}))}}(e,n.get(),t,r)},get:function(){return t.get()},register:function(e,t){n.set(function(e,t,n){var r;if($(OE,t))throw new Error("Cannot override default mode "+t);return De(De({},e),((r={})[t]=De(De({},n),{deactivate:function(){try{n.deactivate()}catch(VA){}}}),r))}(n.get(),e,t))}}},FE=kt.each,ME=kt.explode,PE={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},IE=kt.makeMap("alt,ctrl,shift,meta,access"),RE=function(e){var t,n={};FE(ME(e.toLowerCase(),"+"),(function(e){e in IE?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=PE[e]||e.toUpperCase().charCodeAt(0))}));var r=[n.keyCode];for(t in IE)n[t]?r.push(t):n[t]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,_t.mac?n.ctrl=!0:n.shift=!0),n.meta&&(_t.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},LE=function(){function e(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",(function(e){!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(FE(t.shortcuts,(function(n){if(t.matchShortcut(e,n))return t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n),!0})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}return e.prototype.add=function(e,t,n,r){var o=this,i=o.normalizeCommandFunc(n);return FE(ME(kt.trim(e)),(function(e){var n=o.createShortcut(e,t,i,r);o.shortcuts[n.id]=n})),!0},e.prototype.remove=function(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)},e.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:kt.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n},e.prototype.createShortcut=function(e,t,n,r){var o=kt.map(ME(e,">"),RE);return o[o.length-1]=kt.extend(o[o.length-1],{func:n,scope:r||this.editor}),kt.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})},e.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},e.prototype.isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},e.prototype.matchShortcut=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},e.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null},e}(),zE=function(){var e,t,n,r,o,i,a,u,s=(t={},n={},r={},o={},i={},a={},{addButton:(u=function(e,t){return function(n,r){return e[n.toLowerCase()]=De(De({},r),{type:t})}})(e={},"button"),addGroupToolbarButton:u(e,"grouptoolbarbutton"),addToggleButton:u(e,"togglebutton"),addMenuButton:u(e,"menubutton"),addSplitButton:u(e,"splitbutton"),addMenuItem:u(t,"menuitem"),addNestedMenuItem:u(t,"nestedmenuitem"),addToggleMenuItem:u(t,"togglemenuitem"),addAutocompleter:u(n,"autocompleter"),addContextMenu:u(o,"contextmenu"),addContextToolbar:u(i,"contexttoolbar"),addContextForm:u(i,"contextform"),addSidebar:u(a,"sidebar"),addIcon:function(e,t){return r[e.toLowerCase()]=t},getAll:function(){return{buttons:e,menuItems:t,icons:r,popups:n,contextMenus:o,contextToolbars:i,sidebars:a}}});return{addAutocompleter:s.addAutocompleter,addButton:s.addButton,addContextForm:s.addContextForm,addContextMenu:s.addContextMenu,addContextToolbar:s.addContextToolbar,addIcon:s.addIcon,addMenuButton:s.addMenuButton,addMenuItem:s.addMenuItem,addNestedMenuItem:s.addNestedMenuItem,addSidebar:s.addSidebar,addSplitButton:s.addSplitButton,addToggleButton:s.addToggleButton,addGroupToolbarButton:s.addGroupToolbarButton,addToggleMenuItem:s.addToggleMenuItem,getAll:s.getAll}},VE=kt.each,HE=kt.trim,$E="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),jE={ftp:21,http:80,https:443,mailto:25},UE=function(){function e(t,n){t=HE(t),this.settings=n||{};var r=this.settings.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))o.source=t;else{var i=0===t.indexOf("//");if(0!==t.indexOf("/")||i||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){var a=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)t="//mce_host"+o.toAbsPath(a,t);else{var u=/([^#?]*)([#?]?.*)/.exec(t);t=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(a,u[1])+u[2]}}t=t.replace(/@@/g,"(mce_at)");var s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);VE($E,(function(e,t){var n=s[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[e]=n})),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),i&&(o.protocol="")}}return e.parseDataUri=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}},e.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},e.prototype.setPath=function(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);this.path=t[0],this.directory=t[1],this.file=t[2],this.source="",this.getURI()},e.prototype.toRelative=function(t){var n;if("./"===t)return t;var r=new e(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();var o=this.getURI(),i=r.getURI();return o===i||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===i?o:(n=this.toRelPath(this.path,r.path),r.query&&(n+="?"+r.query),r.anchor&&(n+="#"+r.anchor),n)},e.prototype.toAbsolute=function(t,n){var r=new e(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))},e.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=jE[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},e.prototype.toRelPath=function(e,t){var n,r,o=0,i="",a=e.substring(0,e.lastIndexOf("/")).split("/"),u=t.split("/");if(a.length>=u.length)for(n=0,r=a.length;n<r;n++)if(n>=u.length||a[n]!==u[n]){o=n+1;break}if(a.length<u.length)for(n=0,r=u.length;n<r;n++)if(n>=a.length||a[n]!==u[n]){o=n+1;break}if(1===o)return t;for(n=0,r=a.length-(o-1);n<r;n++)i+="../";for(n=o-1,r=u.length;n<r;n++)i+=n!==o-1?"/"+u[n]:u[n];return i},e.prototype.toAbsPath=function(e,t){var n,r,o=0,i=[],a=/\/$/.test(t)?"/":"",u=e.split("/"),s=t.split("/");for(VE(u,(function(e){e&&i.push(e)})),u=i,n=s.length-1,i=[];n>=0;n--)0!==s[n].length&&"."!==s[n]&&(".."!==s[n]?o>0?o--:i.push(s[n]):o++);return 0!==(r=(n=u.length-o)<=0?ee(i).join("/"):u.slice(0,n).join("/")+"/"+ee(i).join("/")).indexOf("/")&&(r="/"+r),a&&r.lastIndexOf("/")!==r.length-1&&(r+=a),r},e.prototype.getURI=function(e){var t;return void 0===e&&(e=!1),this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},e}(),WE=mu.DOM,qE=kt.extend,GE=kt.each,XE=kt.resolve,KE=_t.ie,YE=function(){function e(e,t,n){var r=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,qE(this,TE),this.settings=$y(this,e,this.documentBaseUrl,n.defaultSettings,t),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(bu.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),mu.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Eu.languageLoad=this.settings.language_load,Eu.baseURL=n.baseURL,this.id=e,this.setDirty(!1),this.documentBaseURI=new UE(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new LE(this),this.editorCommands=new dE(this),this.settings.cache_suffix&&(_t.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:zE(),styleSheetLoader:void 0,show:C,hide:C,enable:C,disable:C,isDisabled:N};var o=NE(this);this.mode=o,this.setMode=o.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=su.overrideDefaults((function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}}))}return e.prototype.render=function(){JS(this)},e.prototype.focus=function(e){wp(this,e)},e.prototype.hasFocus=function(){return bp(this)},e.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this,i=o.settings[e];if(i)return o.callbackLookup&&(r=o.callbackLookup[e])&&(i=r.func,r=r.scope),"string"==typeof i&&(r=(r=i.replace(/\.\w+$/,""))?XE(r):0,i=XE(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[e]={func:i,scope:r}),i.apply(r||o,t)},e.prototype.translate=function(e){return Su.translate(e)},e.prototype.getParam=function(e,t,n){return Uy(this,e,t,n)},e.prototype.hasPlugin=function(e,t){return!(!$(xc(this).split(/[ ,]/),e)||t&&void 0===tb.get(e))},e.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)},e.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)},e.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},e.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},e.prototype.addShortcut=function(e,t,n,r){this.shortcuts.add(e,t,n,r)},e.prototype.execCommand=function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},e.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)},e.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)},e.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)},e.prototype.show=function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(WE.show(e.getContainer()),WE.hide(e.id)),e.load(),e.fire("show"))},e.prototype.hide=function(){var e=this,t=e.getDoc();e.hidden||(KE&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(WE.hide(e.getContainer()),WE.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})},e.prototype.load=function(e){var t,n=this,r=n.getElement();if(n.removed)return"";if(r){(e=e||{}).load=!0;var o=zn(r)?r.value:r.innerHTML;return t=n.setContent(o,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t}},e.prototype.save=function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,zn(o)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=WE.getParent(r.id,"form"))&&GE(n.elements,(function(e){if(e.name===r.id)return e.value=t,!1}))),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},e.prototype.setContent=function(e,t){return Cy(this,e,t)},e.prototype.getContent=function(e){return by(this,e)},e.prototype.insertContent=function(e,t){t&&(e=qE({content:e},t)),this.execCommand("mceInsertContent",!1,e)},e.prototype.resetContent=function(e){void 0===e?Cy(this,this.startContent,{format:"raw"}):Cy(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},e.prototype.getContainer=function(){var e=this;return e.container||(e.container=WE.get(e.editorContainer||e.id+"_parent")),e.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=WE.get(this.id)),this.targetElm},e.prototype.getWin=function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},e.prototype.getDoc=function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},e.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},e.prototype.convertURL=function(e,t,n){var r=this,o=r.settings;return o.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,o.remove_script_host)},e.prototype.addVisual=function(e){QS(this,e)},e.prototype.remove=function(){_y(this)},e.prototype.destroy=function(e){Sy(this,e)},e.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),JE=mu.DOM,QE=kt.explode,ZE=kt.each,eA=kt.extend,tA=0,nA=!1,rA=[],oA=[],iA=function(e){var t=e.type;ZE(cA.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}}))},aA=function(e){e!==nA&&(e?su(window).on("resize scroll",iA):su(window).off("resize scroll",iA),nA=e)},uA=function(e){var t=oA;delete rA[e.id];for(var n=0;n<rA.length;n++)if(rA[n]===e){rA.splice(n,1);break}return oA=G(oA,(function(t){return e!==t})),cA.activeEditor===e&&(cA.activeEditor=oA.length>0?oA[0]:null),cA.focusedEditor===e&&(cA.focusedEditor=null),t.length!==oA.length},sA="CSS1Compat"!==document.compatMode,cA=De(De({},SE),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:su,majorVersion:"5",minorVersion:"8.2",releaseDate:"2021-06-23",editors:rA,i18n:Su,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t,n=this,r="";t=UE.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/"));var o,i=window.tinymce||window.tinyMCEPreInit;if(i)e=i.base||i.baseURL,r=i.suffix;else{for(var a=document.getElementsByTagName("script"),u=0;u<a.length;u++){var s;if(""!==(s=a[u].src||"")){var c=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==c.indexOf(".min")&&(r=".min"),e=s.substring(0,s.lastIndexOf("/"));break}}}!e&&document.currentScript&&(-1!==(s=document.currentScript.src).indexOf(".min")&&(r=".min"),e=s.substring(0,s.lastIndexOf("/")))}n.baseURL=new UE(t).toAbsolute(e),n.documentBaseURL=t,n.baseURI=new UE(n.baseURL),n.suffix=r,(o=n).on("AddEditor",S(pp,o)),o.on("RemoveEditor",S(hp,o))},overrideDefaults:function(e){var t=e.base_url;t&&this._setBaseUrl(t);var n=e.suffix;e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;void 0!==r&&se(r,(function(e,t){Eu.PluginManager.urls[t]=e}))},init:function(e){var t,n=this,r=kt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=function(e){var t=e.id;return t||(t=ge(e,"name").filter((function(e){return!JE.get(e)})).getOrThunk(JE.uniqueId),e.setAttribute("id",t)),t},i=function(e,t){return t.constructor===RegExp?t.test(e.className):JE.hasClass(e,t)},a=function(e){t=e},u=function(){var t,s=0,c=[],l=function(e,r,o){var i=new YE(e,r,n);c.push(i),i.on("init",(function(){++s===t.length&&a(c)})),i.targetElm=i.targetElm||o,i.render()};JE.unbind(window,"ready",u),function(t){var r=e[t];r&&r.apply(n,[])}("onpageload"),t=su.unique(function(e){var t=[];if(_t.browser.isIE()&&_t.browser.version.major<11)return cb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(sA)return cb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(e.types)return ZE(e.types,(function(e){t=t.concat(JE.select(e.selector))})),t;if(e.selector)return JE.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":var n=e.elements||"";n.length>0&&ZE(QE(n),(function(e){var n=JE.get(e);n?t.push(n):ZE(document.forms,(function(n){ZE(n.elements,(function(n){n.name===e&&(e="mce_editor_"+tA++,JE.setAttrib(n,"id",e),t.push(n))}))}))}));break;case"textareas":case"specific_textareas":ZE(JE.select("textarea"),(function(n){e.editor_deselector&&i(n,e.editor_deselector)||e.editor_selector&&!i(n,e.editor_selector)||t.push(n)}))}return t}(e)),e.types?ZE(e.types,(function(n){kt.each(t,(function(t){return!JE.is(t,n.selector)||(l(o(t),eA({},e,n),t),!1)}))})):(kt.each(t,(function(e){var t;(t=n.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(uA(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)})),0===(t=kt.grep(t,(function(e){return!n.get(e.id)}))).length?a([]):ZE(t,(function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in r}(e,t)?l(o(t),e,t):cb("Could not initialize inline editor on invalid inline target element",t)})))};return n.settings=e,JE.bind(window,"ready",u),new eo((function(e){t?e(t):a=function(t){e(t)}}))},get:function(e){return 0===arguments.length?oA.slice(0):l(e)?Y(oA,(function(t){return t.id===e})).getOr(null):b(e)&&oA[e]?oA[e]:null},add:function(e){var t=this;return rA[e.id]===e||(null===t.get(e.id)&&(function(e){return"length"!==e}(e.id)&&(rA[e.id]=e),rA.push(e),oA.push(e)),aA(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),bx||(bx=function(e){var n=t.fire("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",bx))),e},createEditor:function(e,t){return this.add(new YE(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!l(e))return n=e,p(r.get(n.id))?null:(uA(n)&&r.fire("RemoveEditor",{editor:n}),0===oA.length&&window.removeEventListener("beforeunload",bx),n.remove(),aA(oA.length>0),n);ZE(JE.select(e),(function(e){(n=r.get(e.id))&&r.remove(n)}))}else for(t=oA.length-1;t>=0;t--)r.remove(oA[t])},execCommand:function(e,t,n){var r=this,o=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new YE(n,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){ZE(oA,(function(e){e.save()}))},addI18n:function(e,t){Su.add(e,t)},translate:function(e){return Su.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new UE(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new UE(this.baseURL)}});cA.setup();var lA,fA,dA,pA,hA=Math.min,mA=Math.max,gA=Math.round,vA=function(e,t,n){var r=t.x,o=t.y,i=e.w,a=e.h,u=t.w,s=t.h,c=(n||"").split("");return"b"===c[0]&&(o+=s),"r"===c[1]&&(r+=u),"c"===c[0]&&(o+=gA(s/2)),"c"===c[1]&&(r+=gA(u/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=i),"c"===c[3]&&(o-=gA(a/2)),"c"===c[4]&&(r-=gA(i/2)),yA(r,o,i,a)},yA=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},bA={inflate:function(e,t,n){return yA(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:vA,findBestRelativePosition:function(e,t,n,r){var o,i;for(i=0;i<r.length;i++)if((o=vA(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n=mA(e.x,t.x),r=mA(e.y,t.y),o=hA(e.x+e.w,t.x+t.w),i=hA(e.y+e.h,t.y+t.h);return o-n<0||i-r<0?null:yA(n,r,o-n,i-r)},clamp:function(e,t,n){var r=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h,u=t.x+t.w,s=t.y+t.h,c=mA(0,t.x-r),l=mA(0,t.y-o),f=mA(0,i-u),d=mA(0,a-s);return r+=c,o+=l,n&&(i+=c,a+=l,r-=f,o-=d),yA(r,o,(i-=f)-r,(a-=d)-o)},create:yA,fromClientRect:function(e){return yA(e.left,e.top,e.width,e.height)}},CA=(lA={},fA={},{load:function(e,t){var n='Script at URL "'+t+'" failed to load',r='Script at URL "'+t+"\" did not call `tinymce.Resource.add('"+e+"', data)` within 1 second";if(void 0!==lA[e])return lA[e];var o=new eo((function(o,i){var a=function(e,t,n){void 0===n&&(n=1e3);var r=!1,o=null,i=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r||(r=!0,null!==o&&(clearTimeout(o),o=null),e.apply(null,t))}},a=i(e),u=i(t);return{start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||null!==o||(o=setTimeout((function(){return u.apply(null,e)}),n))},resolve:a,reject:u}}(o,i);fA[e]=a.resolve,bu.ScriptLoader.loadScript(t,(function(){return a.start(r)}),(function(){return a.reject(n)}))}));return lA[e]=o,o},add:function(e,t){void 0!==fA[e]&&(fA[e](t),delete fA[e]),lA[e]=eo.resolve(t)}}),xA=kt.each,wA=kt.extend,_A=function(){};_A.extend=dA=function(e){var t=this.prototype,n=function(){var e,t,n,r=this;if(!pA&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(r,arguments)},r=function(){return this};pA=!0;var o=new this;return pA=!1,e.Mixins&&(xA(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])})),t.Mixins&&(e.Mixins=t.Mixins.concat(e.Mixins))),e.Methods&&xA(e.Methods.split(","),(function(t){e[t]=r})),e.Properties&&xA(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}})),e.Statics&&xA(e.Statics,(function(e,t){n[t]=e})),e.Defaults&&t.Defaults&&(e.Defaults=wA({},t.Defaults,e.Defaults)),se(e,(function(e,n){"function"==typeof e&&t[n]?o[n]=function(e,n){return function(){var r=this,o=r._super;r._super=t[e];var i=n.apply(r,arguments);return r._super=o,i}}(n,e):o[n]=e})),n.prototype=o,n.constructor=n,n.extend=dA,n};var SA,EA,AA,DA,kA=Math.min,TA=Math.max,OA=Math.round,BA={serialize:function(e){var t=JSON.stringify(e);return l(t)?t.replace(/[\u0080-\uFFFF]/g,(function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(t.length)+t})):t},parse:function(e){try{return JSON.parse(e)}catch(t){}}},NA={callbacks:{},count:0,send:function(e){var t=this,n=mu.DOM,r=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+r;t.callbacks[r]=function(i){n.remove(o),delete t.callbacks[r],e.callback(i)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},FA=De(De({},SE),{send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):oo.setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",FA.fire("beforeInitialize",{settings:e}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&kt.each(e.requestheaders,(function(e){t.setRequestHeader(e.key,e.value)})),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=FA.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();oo.setTimeout(r,10)}}),MA=kt.extend,PA=function(){function e(e){this.settings=MA({},e),this.count=0}return e.sendRPC=function(t){return(new e).send(t)},e.prototype.send=function(e){var t=e.error,n=e.success,r=MA(this.settings,e);r.success=function(e,o){void 0===(e=BA.parse(e))&&(e={error:"JSON Parse error."}),e.error?t.call(r.error_scope||r.scope,e.error,o):n.call(r.success_scope||r.scope,e.result)},r.error=function(e,n){t&&t.call(r.error_scope||r.scope,e,n)},r.data=BA.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),r.content_type="application/json",FA.send(r)},e}();try{var IA="__storage_test__";(SA=window.localStorage).setItem(IA,IA),SA.removeItem(IA)}catch(VA){EA={},AA=[],DA={getItem:function(e){return EA[e]||null},setItem:function(e,t){AA.push(e),EA[e]=String(t)},key:function(e){return AA[e]},removeItem:function(e){AA=AA.filter((function(t){return t===e})),delete EA[e]},clear:function(){AA=[],EA={}},length:0},Object.defineProperty(DA,"length",{get:function(){return AA.length},configurable:!1,enumerable:!1}),SA=DA}var RA,LA={geom:{Rect:bA},util:{Promise:eo,Delay:oo,Tools:kt,VK:od,URI:UE,Class:_A,EventDispatcher:wE,Observable:SE,I18n:Su,XHR:FA,JSON:BA,JSONRequest:PA,JSONP:NA,LocalStorage:SA,Color:function(e){var t={},n=0,r=0,o=0,i=function(e){var i;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,o=e.b):"v"in e&&function(e,t,i){if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,i=parseInt(i,10)/100,t=TA(0,kA(t,1)),i=TA(0,kA(i,1)),0!==t){var a=e/60,u=i*t,s=u*(1-Math.abs(a%2-1)),c=i-u;switch(Math.floor(a)){case 0:n=u,r=s,o=0;break;case 1:n=s,r=u,o=0;break;case 2:n=0,r=u,o=s;break;case 3:n=0,r=s,o=u;break;case 4:n=s,r=0,o=u;break;case 5:n=u,r=0,o=s;break;default:n=r=o=0}n=OA(255*(n+c)),r=OA(255*(r+c)),o=OA(255*(o+c))}else n=r=o=OA(255*i)}(e.h,e.s,e.v):(i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(i[1],10),r=parseInt(i[2],10),o=parseInt(i[3],10)):(i=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16)):(i=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(i[1]+i[1],16),r=parseInt(i[2]+i[2],16),o=parseInt(i[3]+i[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,t};return e&&i(e),t.toRgb=function(){return{r:n,g:r,b:o}},t.toHsv=function(){return function(e,t,n){var r,o;o=0;var i=kA(e/=255,kA(t/=255,n/=255)),a=TA(e,TA(t,n));return i===a?{h:0,s:0,v:100*(o=i)}:(r=(a-i)/a,o=a,{h:OA(60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/(a-i))),s:OA(100*r),v:OA(100*o)})}(n,r,o)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(o)},t.parse=i,t},ImageUploader:function(e){var t=pb(),n=yb(e,t);return{upload:function(t,r){return void 0===r&&(r=!0),n.upload(t,r?vb(e):void 0)}}}},dom:{EventUtils:zi,Sizzle:wa,DomQuery:su,TreeWalker:uo,TextSeeker:Ju,DOMUtils:mu,ScriptLoader:bu,RangeUtils:xd,Serializer:yy,StyleSheetLoader:io,ControlSelection:ad,BookmarkManager:ed,Selection:Kv,Event:zi.Event},html:{Styles:Oi,Entities:yi,Node:Np,Schema:ki,SaxParser:Lp,DomParser:py,Writer:Wp,Serializer:qp},Env:_t,AddOnManager:Eu,Annotator:Zf,Formatter:Ab,UndoManager:Db,EditorCommands:dE,WindowManager:rb,NotificationManager:eb,EditorObservable:TE,Shortcuts:LE,Editor:YE,FocusManager:sp,EditorManager:cA,DOM:mu.DOM,ScriptLoader:bu.ScriptLoader,PluginManager:tb,ThemeManager:nb,IconManager:Wy,Resource:CA,trim:kt.trim,isArray:kt.isArray,is:kt.is,toArray:kt.toArray,makeMap:kt.makeMap,each:kt.each,map:kt.map,grep:kt.grep,inArray:kt.inArray,extend:kt.extend,create:kt.create,walk:kt.walk,createNS:kt.createNS,resolve:kt.resolve,explode:kt.explode,_addCacheSuffix:kt._addCacheSuffix,isOpera:_t.opera,isWebKit:_t.webkit,isIE:_t.ie,isGecko:_t.gecko,isMac:_t.mac},zA=kt.extend(cA,LA);RA=zA,window.tinymce=RA,window.tinyMCE=RA,function(e){try{module.exports=e}catch(t){}}(zA)}();var tinymce$1=tinymce$2.exports,eq,call,id,global,applyListFormat,global$1,noop,constant,never,always,none,NONE,some,Optional_from,isTableCellNode,isWithinList,addSplitButton,addControl;!function(){var e,t=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},n=function(e){return function(t){return typeof t===e}},r=t("string"),o=t("object"),i=t("array"),a=n("boolean"),u=(e=void 0,function(t){return e===t}),s=function(e){return!function(e){return null==e}(e)},c=n("function"),l=n("number"),f=function(e,t){if(i(e)){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},d=function(){},p=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},h=function(e){return function(){return e}},m=function(e){return e};function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var v=function(e){return function(t){return!e(t)}},y=function(e){return function(){throw new Error(e)}},b=h(!1),C=h(!0),x=tinymce.util.Tools.resolve("tinymce.ThemeManager"),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function _(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function S(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var E,A,D,k,T,O=function(){return B},B=(E=function(e){return e.isNone()},{fold:function(e,t){return e()},is:b,isSome:b,isNone:C,getOr:D=function(e){return e},getOrThunk:A=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:D,orThunk:A,map:O,each:d,bind:O,exists:b,forall:C,filter:O,equals:E,equals_:E,toArray:function(){return[]},toString:h("none()")}),N=function(e){var t=h(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:C,isNone:b,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return N(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:B},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(b,(function(t){return n(e,t)}))}};return o},F={some:N,none:O,from:function(e){return null==e?B:N(e)}},M=Array.prototype.slice,P=Array.prototype.indexOf,I=Array.prototype.push,R=function(e,t){return P.call(e,t)},L=function(e,t){return R(e,t)>-1},z=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},V=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},H=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=M.call(e,r,r+t);n.push(o)}return n},$=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},j=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},U=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}},W=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},q=function(e,t,n){return function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,(function(e){n=t(n,e)})),n},G=function(e,t,n){return j(e,(function(e){n=t(n,e)})),n},X=function(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return F.some(i);if(n(i,r))break}return F.none()}(e,t,b)},K=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return F.some(n)}return F.none()},Y=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);I.apply(t,e[n])}return t},J=function(e,t){return Y($(e,t))},Q=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},Z=function(e){var t=M.call(e,0);return t.reverse(),t},ee=function(e,t){return W(e,(function(e){return!L(t,e)}))},te=function(e,t){var n=M.call(e,0);return n.sort(t),n},ne=function(e,t){return t>=0&&t<e.length?F.some(e[t]):F.none()},re=function(e){return ne(e,0)},oe=function(e){return ne(e,e.length-1)},ie=c(Array.from)?Array.from:function(e){return M.call(e)},ae=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return F.none()},ue=function(e){return{is:function(t){return e===t},isValue:C,isError:b,getOr:h(e),getOrThunk:h(e),getOrDie:h(e),or:function(t){return ue(e)},orThunk:function(t){return ue(e)},fold:function(t,n){return n(e)},map:function(t){return ue(t(e))},mapError:function(t){return ue(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return F.some(e)}}},se=function(e){return{is:b,isValue:b,isError:C,getOr:m,getOrThunk:function(e){return e()},getOrDie:function(){return y(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return se(e)},mapError:function(t){return se(t(e))},each:d,bind:function(t){return se(e)},exists:b,forall:C,toOptional:F.none}},ce={value:ue,error:se,fromOption:function(e,t){return e.fold((function(){return se(t)}),ue)}};(T=k||(k={}))[T.Error=0]="Error",T[T.Value=1]="Value";var le=function(e,t,n){return e.stype===k.Error?t(e.serror):n(e.svalue)},fe=function(e){return{stype:k.Value,svalue:e}},de=function(e){return{stype:k.Error,serror:e}},pe=function(e){return e.fold(de,fe)},he=function(e){return le(e,ce.error,ce.value)},me=fe,ge=function(e){var t=[],n=[];return j(e,(function(e){le(e,(function(e){return n.push(e)}),(function(e){return t.push(e)}))})),{values:t,errors:n}},ve=de,ye=function(e,t){return e.stype===k.Value?t(e.svalue):e},be=function(e,t){return e.stype===k.Error?t(e.serror):e},Ce=function(e,t){return e.stype===k.Value?{stype:k.Value,svalue:t(e.svalue)}:e},xe=function(e,t){return e.stype===k.Error?{stype:k.Error,serror:t(e.serror)}:e},we=Object.keys,_e=Object.hasOwnProperty,Se=function(e,t){for(var n=we(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},Ee=function(e,t){return Ae(e,(function(e,n){return{k:n,v:t(e,n)}}))},Ae=function(e,t){var n={};return Se(e,(function(e,r){var o=t(e,r);n[o.k]=o.v})),n},De=function(e,t){var n,r={};return function(e,t,n,r){Se(e,(function(e,o){(t(e,o)?n:r)(e,o)}))}(e,t,(n=r,function(e,t){n[t]=e}),d),r},ke=function(e,t){var n=[];return Se(e,(function(e,r){n.push(t(e,r))})),n},Te=function(e,t){for(var n=we(e),r=0,o=n.length;r<o;r++){var i=n[r],a=e[i];if(t(a,i,e))return F.some(a)}return F.none()},Oe=function(e){return ke(e,(function(e){return e}))},Be=function(e,t){return Ne(e,t)?F.from(e[t]):F.none()},Ne=function(e,t){return _e.call(e,t)},Fe=function(e,t){return Ne(e,t)&&void 0!==e[t]&&null!==e[t]},Me=function(e){if(!i(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return j(e,(function(r,o){var a=we(r);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],s=r[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!i(s))throw new Error("case arguments must be an array");t.push(u),n[u]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+i);var a=function(e){var r=we(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!Q(t,(function(e){return L(r,e)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[u].apply(null,n)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);var i=t[o];return i.apply(null,n)},match:a,log:function(e){}}}})),n},Pe=Object.prototype.hasOwnProperty,Ie=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)Pe.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}},Re=Ie((function(e,t){return o(e)&&o(t)?Re(e,t):t})),Le=Ie((function(e,t){return t})),ze=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Ve=Me([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),He=function(e){return Ve.defaultedThunk(h(e))},$e=Ve.strict,je=Ve.asOption,Ue=Ve.defaultedThunk;Ve.asDefaultedOptionThunk;var We=Ve.mergeWithThunk;Me([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var qe,Ge,Xe=function(e,t){var n;return(n={})[e]=t,n},Ke=function(e,t){return function(e,t){var n={};return Se(e,(function(e,r){L(t,r)||(n[r]=e)})),n}(e,t)},Ye=function(e,t){return Xe(e,t)},Je=function(e){return function(e){var t={};return j(e,(function(e){t[e.key]=e.value})),t}(e)},Qe=function(e,t){var n,r,o=(n=[],r=[],j(e,(function(e){e.fold((function(e){n.push(e)}),(function(e){r.push(e)}))})),{errors:n,values:r});return o.errors.length>0?function(e){return ce.error(Y(e))}(o.errors):function(e,t){return 0===e.length?ce.value(t):ce.value(Re(t,Le.apply(void 0,e)))}(o.values,t)},Ze=function(e){return p(ve,Y)(e)},et=function(e,t){var n=ge(e);return n.errors.length>0?Ze(n.errors):function(e,t){return e.length>0?me(Re(t,Le.apply(void 0,e))):me(t)}(n.values,t)},tt=function(e){var t=ge(e);return t.errors.length>0?Ze(t.errors):me(t.values)},nt=function(e){return o(e)&&we(e).length>100?" removed due to size":JSON.stringify(e,null,2)},rt=function(e,t){return ve([{path:e,getErrorInfo:t}])},ot=Me([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),it=function(e,t,n){return Be(t,n).fold((function(){return function(e,t,n){return rt(e,(function(){return'Could not find valid *strict* value for "'+t+'" in '+nt(n)}))}(e,n,t)}),me)},at=function(e,t,n){var r=Be(e,t).fold((function(){return n(e)}),m);return me(r)},ut=function(e,t,n,r){return n.fold((function(n,o,i,a){var u=function(t){var i=a.extract(e.concat([n]),r,t);return Ce(i,(function(e){return Xe(o,r(e))}))},s=function(t){return t.fold((function(){var e=Xe(o,r(F.none()));return me(e)}),(function(t){var i=a.extract(e.concat([n]),r,t);return Ce(i,(function(e){return Xe(o,r(F.some(e)))}))}))};return i.fold((function(){return ye(it(e,t,n),u)}),(function(e){return ye(at(t,n,e),u)}),(function(){return ye(function(e,t){return me(Be(e,t))}(t,n),s)}),(function(e){return ye(function(e,t,n){var r=Be(e,t).map((function(t){return!0===t?n(e):t}));return me(r)}(t,n,e),s)}),(function(e){var r=e(t),o=Ce(at(t,n,h({})),(function(e){return Re(r,e)}));return ye(o,u)}))}),(function(e,n){var o=n(t);return me(Xe(e,r(o)))}))},st=function(e){return{extract:function(t,n,r){return be(e(r,n),(function(e){return function(e,t){return rt(e,(function(){return t}))}(t,e)}))},toString:function(){return"val"}}},ct=function(e){var t=lt(e),n=q(e,(function(e,t){return t.fold((function(t){return Re(e,Ye(t,!0))}),h(e))}),{});return{extract:function(e,r,o){var i=a(o)?[]:we(De(o,(function(e){return null!=e}))),u=W(i,(function(e){return!Fe(n,e)}));return 0===u.length?t.extract(e,r,o):function(e,t){return rt(e,(function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))}(e,u)},toString:t.toString}},lt=function(e){return{extract:function(t,n,r){return function(e,t,n,r){var o=$(n,(function(n){return ut(e,t,n,r)}));return et(o,{})}(t,r,e,n)},toString:function(){return"obj{\n"+$(e,(function(e){return e.fold((function(e,t,n,r){return e+" -> "+r.toString()}),(function(e,t){return"state("+e+")"}))})).join("\n")+"}"}}},ft=function(e){return{extract:function(t,n,r){var o=$(r,(function(r,o){return e.extract(t.concat(["["+o+"]"]),n,r)}));return tt(o)},toString:function(){return"array("+e.toString()+")"}}},dt=function(e){return{extract:function(t,n,r){for(var o=[],i=0,a=e;i<a.length;i++){var u=a[i].extract(t,n,r);if(u.stype===k.Value)return u;o.push(u)}return tt(o)},toString:function(){return"oneOf("+$(e,(function(e){return e.toString()})).join(", ")+")"}}},pt=function(e,t){return{extract:function(n,r,o){var i=we(o),a=function(t,n){return ft(st(e)).extract(t,m,n)}(n,i);return ye(a,(function(e){var i=$(e,(function(e){return ot.field(e,e,$e(),t)}));return lt(i).extract(n,r,o)}))},toString:function(){return"setOf("+t.toString()+")"}}},ht=h(st(me)),mt=p(ft,lt),gt=ot.state,vt=ot.field,yt=function(e,t,n,r,o){return Be(r,o).fold((function(){return function(e,t,n){return rt(e,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+nt(t)}))}(e,r,o)}),(function(r){return r.extract(e.concat(["branch: "+o]),t,n)}))},bt=function(e,t){return{extract:function(n,r,o){return Be(o,e).fold((function(){return function(e,t){return rt(e,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))}(n,e)}),(function(e){return yt(n,r,o,t,e)}))},toString:function(){return"chooseOn("+e+"). Possible values: "+we(t)}}},Ct=st(me),xt=function(e){return mt(e)},wt=function(e){return{extract:function(t,n,r){return e().extract(t,n,r)},toString:function(){return e().toString()}}},_t=function(e){return st((function(t){return e(t).fold(ve,me)}))},St=function(e,t){return pt((function(t){return pe(e(t))}),t)},Et=function(e,t,n){return he(function(e,t,n,r){var o=t.extract([e],n,r);return xe(o,(function(e){return{input:r,errors:e}}))}(e,t,m,n))},At=function(e){return e.fold((function(e){throw new Error(kt(e))}),m)},Dt=function(e,t,n){return At(Et(e,t,n))},kt=function(e){return"Errors: \n"+(t=e.errors,n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,$(n,(function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))).join("\n")+"\n\nInput object: "+nt(e.input);var t,n},Tt=function(e,t){return bt(e,t)},Ot=function(e,t){return bt(e,Ee(t,lt))},Bt=h(Ct),Nt=function(e,t){return st((function(n){var r=typeof n;return e(n)?me(n):ve("Expected type: "+t+" but got: "+r)}))},Ft=Nt(l,"number"),Mt=Nt(r,"string"),Pt=Nt(a,"boolean"),It=Nt(c,"function"),Rt=function(e){var t=function(e,t){for(var n=e.next();!n.done;){if(!t(n.value))return!1;n=e.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(t){return Rt(e[t])}));case"Map":return t(e.keys(),Rt)&&t(e.values(),Rt);case"Set":return t(e.keys(),Rt);default:return!1}},Lt=st((function(e){return Rt(e)?me(e):ve("Expected value to be acceptable for sending via postMessage")})),zt=function(e){return _t((function(t){return L(e,t)?ce.value(t):ce.error('Unsupported value: "'+t+'", choose one of "'+e.join(", ")+'".')}))},Vt=function(e){return vt(e,e,$e(),ht())},Ht=function(e,t){return vt(e,e,$e(),t)},$t=function(e){return Ht(e,Ft)},jt=function(e){return Ht(e,Mt)},Ut=function(e,t){return vt(e,e,$e(),zt(t))},Wt=function(e){return Ht(e,It)},qt=function(e,t){return vt(e,e,$e(),lt(t))},Gt=function(e,t){return vt(e,e,$e(),mt(t))},Xt=function(e,t){return vt(e,e,$e(),ft(t))},Kt=function(e){return vt(e,e,je(),ht())},Yt=function(e,t){return vt(e,e,je(),t)},Jt=function(e){return Yt(e,Ft)},Qt=function(e){return Yt(e,Mt)},Zt=function(e){return Yt(e,It)},en=function(e,t){return Yt(e,lt(t))},tn=function(e,t){return vt(e,e,He(t),ht())},nn=function(e,t,n){return vt(e,e,He(t),n)},rn=function(e,t){return nn(e,t,Ft)},on=function(e,t){return nn(e,t,Mt)},an=function(e,t,n){return nn(e,t,zt(n))},un=function(e,t){return nn(e,t,Pt)},sn=function(e,t){return nn(e,t,It)},cn=function(e,t,n){return nn(e,t,ft(n))},ln=function(e,t,n){return nn(e,t,lt(n))},fn=function(e,t){return gt(e,t)},dn=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},pn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},hn={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return pn(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return pn(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return pn(n)},fromDom:pn,fromPoint:function(e,t,n){return F.from(e.dom.elementFromPoint(t,n)).map(pn)}},mn=function(){return gn(0,0)},gn=function(e,t){return{major:e,minor:t}},vn={nu:gn,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?mn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return gn(r(1),r(2))}(e,n)},unknown:mn},yn=function(e,t){var n=String(t).toLowerCase();return X(e,(function(e){return e.search(n)}))},bn=function(e,t){return yn(e,t).map((function(e){var n=vn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Cn=function(e,t){return yn(e,t).map((function(e){var n=vn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},xn=function(e,t){return-1!==e.indexOf(t)},wn=function(e,t){return function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(e,t,e.length-t.length)},_n=(qe=/^\s+|\s+$/g,function(e){return e.replace(qe,"")}),Sn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,En=function(e){return function(t){return xn(t,e)}},An=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return xn(e,"edge/")&&xn(e,"chrome")&&xn(e,"safari")&&xn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Sn],search:function(e){return xn(e,"chrome")&&!xn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return xn(e,"msie")||xn(e,"trident")}},{name:"Opera",versionRegexes:[Sn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:En("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:En("firefox")},{name:"Safari",versionRegexes:[Sn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(xn(e,"safari")||xn(e,"mobile/"))&&xn(e,"applewebkit")}}],Dn=[{name:"Windows",search:En("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return xn(e,"iphone")||xn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:En("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:En("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:En("linux"),versionRegexes:[]},{name:"Solaris",search:En("sunos"),versionRegexes:[]},{name:"FreeBSD",search:En("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:En("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kn={browsers:h(An),oses:h(Dn)},Tn="Edge",On="Chrome",Bn="Opera",Nn="Firefox",Fn="Safari",Mn=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r(Tn),isChrome:r(On),isIE:r("IE"),isOpera:r(Bn),isFirefox:r(Nn),isSafari:r(Fn)}},Pn={unknown:function(){return Mn({current:void 0,version:vn.unknown()})},nu:Mn,edge:h(Tn),chrome:h(On),ie:h("IE"),opera:h(Bn),firefox:h(Nn),safari:h(Fn)},In="Windows",Rn="Android",Ln="Linux",zn="Solaris",Vn="FreeBSD",Hn="ChromeOS",$n=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r(In),isiOS:r("iOS"),isAndroid:r(Rn),isOSX:r("OSX"),isLinux:r(Ln),isSolaris:r(zn),isFreeBSD:r(Vn),isChromeOS:r(Hn)}},jn={unknown:function(){return $n({current:void 0,version:vn.unknown()})},nu:$n,windows:h(In),ios:h("iOS"),android:h(Rn),linux:h(Ln),osx:h("OSX"),solaris:h(zn),freebsd:h(Vn),chromeos:h(Hn)},Un=function(e,t){var n=kn.browsers(),r=kn.oses(),o=bn(n,e).fold(Pn.unknown,Pn.nu),i=Cn(r,e).fold(jn.unknown,jn.nu),a=function(e,t,n,r){var o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),c=i||a&&!s,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),f=!c&&!s&&!l;return{isiPad:h(o),isiPhone:h(i),isTablet:h(s),isPhone:h(c),isTouch:h(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:h(l),isDesktop:h(f)}}(i,o,e,t);return{browser:o,os:i,deviceType:a}},Wn=function(e){return window.matchMedia(e).matches},qn=ze((function(){return Un(navigator.userAgent,Wn)})),Gn=function(){return qn()},Xn=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Kn=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},Yn=function(e,t){return e.dom===t.dom},Jn=function(e,t){return n=e.dom,r=t.dom,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(n,r,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,r},Qn=function(e,t){return Gn().browser.isIE()?Jn(e,t):function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)}(e,t)},Zn=function(e){return c(e)?e:b},er=function(e,t,n){for(var r=e.dom,o=Zn(n);r.parentNode;){r=r.parentNode;var i=hn.fromDom(r),a=t(i);if(a.isSome())return a;if(o(i))break}return F.none()},tr=function(e,t,n){var r=t(e),o=Zn(n);return r.orThunk((function(){return o(e)?F.none():er(e,t,o)}))},nr=function(e,t){return Yn(e.element,t.event.target)},rr=function(e){if(!Fe(e,"can")&&!Fe(e,"abort")&&!Fe(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return Dt("Extracting event.handler",ct([tn("can",C),tn("abort",b),tn("run",d)]),e)},or=function(e){var t=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return G(e,(function(e,r){return e&&t(r).apply(void 0,n)}),!0)}}(e,(function(e){return e.can})),n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return G(e,(function(e,r){return e||t(r).apply(void 0,n)}),!1)}}(e,(function(e){return e.abort}));return rr({can:t,abort:n,run:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];j(e,(function(e){e.run.apply(void 0,t)}))}})},ir=h,ar=ir("touchstart"),ur=ir("touchmove"),sr=ir("touchend"),cr=ir("touchcancel"),lr=ir("mousedown"),fr=ir("mousemove"),dr=ir("mouseout"),pr=ir("mouseup"),hr=ir("mouseover"),mr=ir("focusin"),gr=ir("focusout"),vr=ir("keydown"),yr=ir("keyup"),br=ir("input"),Cr=ir("change"),xr=ir("click"),wr=ir("transitionend"),_r=ir("selectstart"),Sr=function(e){return h("alloy."+e)},Er={tap:Sr("tap")},Ar=Sr("focus"),Dr=Sr("blur.post"),kr=Sr("paste.post"),Tr=Sr("receive"),Or=Sr("execute"),Br=Sr("focus.item"),Nr=Er.tap,Fr=Sr("longpress"),Mr=Sr("sandbox.close"),Pr=Sr("typeahead.cancel"),Ir=Sr("system.init"),Rr=Sr("system.touchmove"),Lr=Sr("system.touchend"),zr=Sr("system.scroll"),Vr=Sr("system.resize"),Hr=Sr("system.attached"),$r=Sr("system.detached"),jr=Sr("system.dismissRequested"),Ur=Sr("system.repositionRequested"),Wr=Sr("focusmanager.shifted"),qr=Sr("slotcontainer.visibility"),Gr=Sr("change.tab"),Xr=Sr("dismiss.tab"),Kr=Sr("highlight"),Yr=Sr("dehighlight"),Jr=function(e,t){to(e,e.element,t,{})},Qr=function(e,t,n){to(e,e.element,t,n)},Zr=function(e){Jr(e,Or())},eo=function(e,t,n){to(e,t,n,{})},to=function(e,t,n,r){var o=w({target:t},r);e.getSystem().triggerEvent(n,t,o)},no=function(e,t,n,r){e.getSystem().triggerEvent(n,t,r.event)},ro=function(e){return Je(e)},oo=function(e,t){return{key:e,value:rr({abort:t})}},io=function(e){return{key:e,value:rr({run:function(e,t){t.event.prevent()}})}},ao=function(e,t){return{key:e,value:rr({run:t})}},uo=function(e,t,n){return{key:e,value:rr({run:function(e,r){t.apply(void 0,[e,r].concat(n))}})}},so=function(e){return function(t){return{key:e,value:rr({run:function(e,n){nr(e,n)&&t(e,n)}})}}},co=function(e,t,n){return function(e,t){return ao(e,(function(n,r){n.getSystem().getByUid(t).each((function(t){no(t,t.element,e,r)}))}))}(e,t.partUids[n])},lo=function(e,t){return ao(e,(function(e,n){var r=n.event,o=e.getSystem().getByDom(r.target).fold((function(){return tr(r.target,(function(t){return e.getSystem().getByDom(t).toOptional()}),b).getOr(e)}),(function(e){return e}));t(e,o,n)}))},fo=function(e){return ao(e,(function(e,t){t.cut()}))},po=function(e){return ao(e,(function(e,t){t.stop()}))},ho=function(e,t){return so(e)(t)},mo=so(Hr()),go=so($r()),vo=so(Ir()),yo=(Ge=Or(),function(e){return ao(Ge,e)});"undefined"!=typeof window?window:Function("return this;")();var bo=function(e){return e.dom.nodeName.toLowerCase()},Co=function(e){return function(t){return function(e){return e.dom.nodeType}(t)===e}},xo=Co(1),wo=Co(3),_o=Co(9),So=Co(11),Eo=function(e){return hn.fromDom(e.dom.ownerDocument)},Ao=function(e){return _o(e)?e:Eo(e)},Do=function(e){return hn.fromDom(Ao(e).dom.documentElement)},ko=function(e){return hn.fromDom(Ao(e).dom.defaultView)},To=function(e){return F.from(e.dom.parentNode).map(hn.fromDom)},Oo=function(e){return F.from(e.dom.offsetParent).map(hn.fromDom)},Bo=function(e){return $(e.dom.childNodes,hn.fromDom)},No=function(e,t){var n=e.dom.childNodes;return F.from(n[t]).map(hn.fromDom)},Fo=function(e){return So(e)&&s(e.dom.host)},Mo=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode),Po=h(Mo),Io=Mo?function(e){return hn.fromDom(e.dom.getRootNode())}:Ao,Ro=function(e){return Fo(e)?e:hn.fromDom(Ao(e).dom.body)},Lo=function(e){var t=Io(e);return Fo(t)?F.some(t):F.none()},zo=function(e){return hn.fromDom(e.dom.host)},Vo=function(e){return s(e.dom.shadowRoot)},Ho=function(e,t){To(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},$o=function(e,t){(function(e){return F.from(e.dom.nextSibling).map(hn.fromDom)})(e).fold((function(){To(e).each((function(e){Uo(e,t)}))}),(function(e){Ho(e,t)}))},jo=function(e,t){(function(e){return No(e,0)})(e).fold((function(){Uo(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},Uo=function(e,t){e.dom.appendChild(t.dom)},Wo=function(e,t){j(t,(function(t){Uo(e,t)}))},qo=function(e){e.dom.textContent="",j(Bo(e),(function(e){Go(e)}))},Go=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Xo=function(e){var t,n=Bo(e);n.length>0&&(t=e,j(n,(function(e){Ho(t,e)}))),Go(e)},Ko=function(e){return e.dom.innerHTML},Yo=function(e,t){var n,r,o=Eo(e).dom,i=hn.fromDom(o.createDocumentFragment()),a=(n=t,(r=(o||document).createElement("div")).innerHTML=n,Bo(hn.fromDom(r)));Wo(i,a),qo(e),Uo(e,i)},Jo=function(e,t,n){if(!(r(n)||a(n)||l(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Qo=function(e,t,n){Jo(e.dom,t,n)},Zo=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},ei=function(e,t){return F.from(Zo(e,t))},ti=function(e,t){var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},ni=function(e,t){e.dom.removeAttribute(t)},ri=function(e){return function(e,t){return hn.fromDom(e.dom.cloneNode(t))}(e,!1)},oi=function(e){return Fo(e)?"#shadow-root":function(e){var t=hn.fromTag("div"),n=hn.fromDom(e.dom.cloneNode(!0));return Uo(t,n),Ko(t)}(ri(e))},ii=function(e){return oi(e)},ai=ro([function(e,t){return{key:e,value:rr({can:t})}}(Ar(),(function(e,t){var n=t.event;return!function(e,t,n){return Yn(t,e.element)&&!Yn(t,n)}(e,n.originator,n.target)}))]),ui=Object.freeze({__proto__:null,events:ai}),si=0,ci=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++si+String(t)},li=h("alloy-id-"),fi=h("data-alloy-id"),di=li(),pi=fi(),hi=function(e,t){Object.defineProperty(e.dom,pi,{value:t,writable:!0})},mi=function(e){var t=xo(e)?e.dom[pi]:null;return F.from(t)},gi=function(e){return ci(e)},vi=m,yi=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+(e?"\n"+ii(e().element)+" is not in context.":""))}};return{debugInfo:h("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:b}},bi=yi(),Ci=function(e){return $(e,(function(e){return wn(e,"/*")?e.substring(0,e.length-"/*".length):e}))},xi=function(e,t){var n=e.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:Ci(i)}},e},wi=ci("alloy-premade"),_i=function(e){return Ye(wi,e)},Si=function(e){return function(e,t){var n=t.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Ci(i.slice(1))}},e}((function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return e.apply(void 0,S([t.getApis(),t],n))}),e)},Ei={init:function(){return Ai({readState:function(){return"No State required"}})}},Ai=function(e){return e},Di=function(e,t){var n={};return Se(e,(function(e,r){Se(e,(function(e,o){var i=Be(n,o).getOr([]);n[o]=i.concat([t(r,e)])}))})),n},ki=function(e){return{classes:void 0!==e.classes?e.classes:[],attributes:void 0!==e.attributes?e.attributes:{},styles:void 0!==e.styles?e.styles:{}}},Ti=function(e){return e.cHandler},Oi=function(e,t){return{name:e,handler:t}},Bi=function(e,t,n){var r=w(w({},n),function(e,t){var n={};return j(e,(function(e){n[e.name()]=e.handlers(t)})),n}(t,e));return Di(r,Oi)},Ni=function(e){var t=function(e){return c(e)?{can:C,abort:b,run:e}:e}(e);return function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=[e,n].concat(r);t.abort.apply(void 0,i)?n.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}},Fi=function(e,t,n){var r=t[n];return r?function(e,t,n,r){try{var o=te(n,(function(n,o){var i=n[t],a=o[t],u=r.indexOf(i),s=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+e+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===s)throw new Error("The ordering for "+e+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return u<s?-1:s<u?1:0}));return ce.value(o)}catch(i){return ce.error([i])}}("Event: "+n,"name",e,r).map((function(e){var t=$(e,(function(e){return e.handler}));return or(t)})):function(e,t){return ce.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify($(t,(function(e){return e.name})),null,2)])}(n,e)},Mi=function(e,t){var n=ke(e,(function(e,n){return(1===e.length?ce.value(e[0].handler):Fi(e,t,n)).map((function(r){var o=Ni(r),i=e.length>1?W(t[n],(function(t){return z(e,(function(e){return e.name===t}))})).join(" > "):e[0].name;return Ye(n,function(e,t){return{handler:e,purpose:t}}(o,i))}))}));return Qe(n,{})},Pi="alloy.base.behaviour",Ii=function(e){return e.events},Ri=function(e,t){var n=Zo(e,t);return void 0===n||""===n?[]:n.split(" ")},Li=function(e){return void 0!==e.dom.classList},zi=function(e,t){return function(e,t,n){var r=Ri(e,t).concat([n]);return Qo(e,t,r.join(" ")),!0}(e,"class",t)},Vi=function(e,t){return function(e,t,n){var r=W(Ri(e,t),(function(e){return e!==n}));return r.length>0?Qo(e,t,r.join(" ")):ni(e,t),!1}(e,"class",t)},Hi=function(e,t){Li(e)?e.dom.classList.add(t):zi(e,t)},$i=function(e){0===(Li(e)?e.dom.classList:function(e){return Ri(e,"class")}(e)).length&&ni(e,"class")},ji=function(e,t){Li(e)?e.dom.classList.remove(t):Vi(e,t);$i(e)},Ui=function(e,t){return Li(e)&&e.dom.classList.contains(t)},Wi=function(e,t){j(t,(function(t){Hi(e,t)}))},qi=function(e,t){j(t,(function(t){ji(e,t)}))},Gi=function(e){return void 0!==e.style&&c(e.style.getPropertyValue)},Xi=function(e){var t=wo(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r,o=t.ownerDocument;return Lo(hn.fromDom(t)).fold((function(){return o.body.contains(t)}),(n=Xi,r=zo,function(e){return n(r(e))}))},Ki=function(){return Yi(hn.fromDom(document))},Yi=function(e){var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return hn.fromDom(t)},Ji=function(e,t,n){if(!r(n))throw new Error("CSS value must be a string: "+n);Gi(e)&&e.style.setProperty(t,n)},Qi=function(e,t){Gi(e)&&e.style.removeProperty(t)},Zi=function(e,t,n){var r=e.dom;Ji(r,t,n)},ea=function(e,t){var n=e.dom;Se(t,(function(e,t){Ji(n,t,e)}))},ta=function(e,t){var n=e.dom;Se(t,(function(e,t){e.fold((function(){Qi(n,t)}),(function(e){Ji(n,t,e)}))}))},na=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Xi(e)?r:ra(n,t)},ra=function(e,t){return Gi(e)?e.style.getPropertyValue(t):""},oa=function(e,t){var n=e.dom,r=ra(n,t);return F.from(r).filter((function(e){return e.length>0}))},ia=function(e){var t={},n=e.dom;if(Gi(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},aa=function(e,t,n){var r=hn.fromTag(e);return Zi(r,t,n),oa(r,t).isSome()},ua=function(e,t){var n=e.dom;Qi(n,t),ei(e,"style").map(_n).is("")&&ni(e,"style")},sa=function(e){return e.dom.offsetWidth},ca=function(e){return e.dom.value},la=function(e,t){if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},fa=function(e){var t,n,r,o=hn.fromTag(e.tag);t=o,n=e.attributes,r=t.dom,Se(n,(function(e,t){Jo(r,t,e)})),Wi(o,e.classes),ea(o,e.styles),e.innerHtml.each((function(e){return Yo(o,e)}));var i=e.domChildren;return Wo(o,i),e.value.each((function(e){la(o,e)})),e.uid,hi(o,e.uid),o},da=function(e,t){return function(e,t){var n=$(t,(function(e){return en(e.name(),[Vt("config"),tn("state",Ei)])})),r=Et("component.behaviours",lt(n),e.behaviours).fold((function(t){throw new Error(kt(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),(function(e){return e}));return{list:t,data:Ee(r,(function(e){var t=e.map((function(e){return{config:e.config,state:e.state.init(e.config)}}));return function(){return t}}))}}(e,t)},pa=function(e){var t=function(e){var t=Be(e,"behaviours").getOr({}),n=W(we(t),(function(e){return void 0!==t[e]}));return $(n,(function(e){return t[e].me}))}(e);return da(e,t)},ha=function(e,t,n){var r,o,i,a=w(w({},(r=e).dom),{uid:r.uid,domChildren:$(r.components,(function(e){return e.element}))}),u=function(e){return e.domModification.fold((function(){return ki({})}),ki)}(e),s={"alloy.base.modification":u},c=t.length>0?function(e,t,n,r){var o=w({},t);j(n,(function(t){o[t.name()]=t.exhibit(e,r)}));var i=Di(o,(function(e,t){return{name:e,modification:t}})),a=function(e){return q(e,(function(e,t){return w(w({},t.modification),e)}),{})},u=q(i.classes,(function(e,t){return t.modification.concat(e)}),[]),s=a(i.attributes),c=a(i.styles);return ki({classes:u,attributes:s,styles:c})}(n,s,t,a):u;return i=c,w(w({},o=a),{attributes:w(w({},o.attributes),i.attributes),styles:w(w({},o.styles),i.styles),classes:o.classes.concat(i.classes)})},ma=function(e,t,n){var r={"alloy.base.behaviour":Ii(e)};return function(e,t,n,r){var o=Bi(e,n,r);return Mi(o,t)}(n,e.eventOrder,t,r).getOrDie()},ga=function(e){var t=function(){return d},n=dn(bi),r=At(function(e){var t,n;return Et("custom.definition",lt([vt("dom","dom",$e(),lt([Vt("tag"),tn("styles",{}),tn("classes",[]),tn("attributes",{}),Kt("value"),Kt("innerHtml")])),Vt("components"),Vt("uid"),tn("events",{}),tn("apis",{}),vt("eventOrder","eventOrder",(t={},t[Or()]=["disabling",Pi,"toggling","typeaheadevents"],t[Ar()]=[Pi,"focusing","keying"],t[Ir()]=[Pi,"disabling","toggling","representing"],t[br()]=[Pi,"representing","streaming","invalidating"],t[$r()]=[Pi,"representing","item-events","tooltipping"],t[lr()]=["focusing",Pi,"item-type-events"],t[ar()]=["focusing",Pi,"item-type-events"],t[hr()]=["item-type-events","tooltipping"],t[Tr()]=["receiving","reflecting","tooltipping"],n=t,Ve.mergeWithThunk(h(n))),Bt()),Kt("domModification")]),e)}(e)),o=pa(e),i=function(e){return e.list}(o),a=function(e){return e.data}(o),u=ha(r,i,a),s=fa(u),l=ma(r,i,a),f=dn(r.components),d={getSystem:n.get,config:function(t){var n=a;return(c(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(e){return c(a[e.name()])},spec:e,readState:function(e){return a[e]().map((function(e){return e.state.readState()})).getOr("not enabled")},getApis:function(){return r.apis},connect:function(e){n.set(e)},disconnect:function(){n.set(yi(t))},element:s,syncComponents:function(){var e=Bo(s),t=J(e,(function(e){return n.get().getByDom(e).fold((function(){return[]}),(function(e){return[e]}))}));f.set(t)},components:f.get,events:l};return d},va=function(e){var t=vi(e),n=t.events,r=_(t,["events"]),o=function(e){var t=Be(e,"components").getOr([]);return $(t,xa)}(r),i=w(w({},r),{events:w(w({},ui),n),components:o});return ce.value(ga(i))},ya=function(e){var t=hn.fromText(e);return ba({element:t})},ba=function(e){var t=Dt("external.component",ct([Vt("element"),Kt("uid")]),e),n=dn(yi());t.uid.each((function(e){hi(t.element,e)}));var r={getSystem:n.get,config:F.none,hasConfigured:b,connect:function(e){n.set(e)},disconnect:function(){n.set(yi((function(){return r})))},getApis:function(){return{}},element:t.element,spec:e,readState:h("No state"),syncComponents:d,components:h([]),events:{}};return _i(r)},Ca=gi,xa=function(e){return function(e){return Be(e,wi)}(e).fold((function(){var t=e.hasOwnProperty("uid")?e:w({uid:Ca("")},e);return va(t).getOrDie()}),(function(e){return e}))},wa=_i,_a=function(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var o=na(n,e);return parseFloat(o)||0}return r},r=function(e,t){return G(t,(function(t,n){var r=na(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,n){if(!l(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;Gi(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var o=r(e,n);return t>o?t-o:0}}},Sa=_a("height",(function(e){var t=e.dom;return Xi(e)?t.getBoundingClientRect().height:t.offsetHeight})),Ea=function(e){return Sa.get(e)},Aa=function(e){return Sa.getOuter(e)},Da=function(e,t){return{left:e,top:t,translate:function(n,r){return Da(e+n,t+r)}}},ka=Da,Ta=function(e,t){return void 0!==e?e:void 0!==t?t:0},Oa=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom)return ka(n.offsetLeft,n.offsetTop);var i=Ta(null==r?void 0:r.pageYOffset,o.scrollTop),a=Ta(null==r?void 0:r.pageXOffset,o.scrollLeft),u=Ta(o.clientTop,n.clientTop),s=Ta(o.clientLeft,n.clientLeft);return Ba(e).translate(a-s,i-u)},Ba=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?ka(n.offsetLeft,n.offsetTop):Xi(e)?function(e){var t=e.getBoundingClientRect();return ka(t.left,t.top)}(t):ka(0,0)},Na=_a("width",(function(e){return e.dom.offsetWidth})),Fa=function(e){return Na.get(e)},Ma=function(e){return Na.getOuter(e)},Pa=function(e){var t=hn.fromDom(function(e){if(Po()&&s(e.target)){var t=hn.fromDom(e.target);if(xo(t)&&Vo(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return re(n)}}return F.from(e.target)}(e).getOr(e.target)),n=function(){return e.stopPropagation()},r=function(){return e.preventDefault()},o=p(r,n);return function(e,t,n,r,o,i,a){return{target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:a}}(t,e.clientX,e.clientY,n,r,o,e)},Ia=function(e,t,n,r,o){var i=function(e,t){return function(n){e(n)&&t(Pa(n))}}(n,r);return e.dom.addEventListener(t,i,o),{unbind:g(Ra,e,t,i,o)}},Ra=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},La=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return ka(n,r)},za=function(e,t,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Va=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Ha=function(e){var t=void 0===e?window:e,n=t.document,r=La(hn.fromDom(n));return function(e){var t=void 0===e?window:e;return F.from(t.visualViewport)}(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,o=e.clientHeight;return Va(r.left,r.top,n,o)}),(function(e){return Va(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)}))},$a=function(e,t){return e.view(t).fold(h([]),(function(t){var n=e.owner(t),r=$a(e,n);return[t].concat(r)}))},ja=Object.freeze({__proto__:null,view:function(e){var t;return(e.dom===document?F.none():F.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(hn.fromDom)},owner:function(e){return Eo(e)}}),Ua=function(e){var t=hn.fromDom(document),n=La(t);return function(e,t){var n=t.owner(e),r=$a(t,n);return F.some(r)}(e,ja).fold(g(Oa,e),(function(t){var r=Ba(e),o=q(t,(function(e,t){var n=Ba(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return ka(o.left+r.left+n.left,o.top+r.top+n.top)}))},Wa=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},qa=function(e){var t=Oa(e),n=Ma(e),r=Aa(e);return Wa(t.left,t.top,n,r)},Ga=function(e){var t=Ua(e),n=Ma(e),r=Aa(e);return Wa(t.left,t.top,n,r)},Xa=function(){return Ha(window)};function Ka(e,t,n,r,o){return e(n,r)?F.some(n):c(o)&&o(n)?F.none():t(n,r,o)}var Ya,Ja,Qa=function(e,t,n){for(var r=e.dom,o=c(n)?n:b;r.parentNode;){r=r.parentNode;var i=hn.fromDom(r);if(t(i))return F.some(i);if(o(i))break}return F.none()},Za=function(e,t,n){return Ka((function(e,t){return t(e)}),Qa,e,t,n)},eu=function(e,t,n){return Za(e,t,n).isSome()},tu=function(e,t,n){return Qa(e,(function(e){return Xn(e,t)}),n)},nu=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Kn(n)?F.none():F.from(n.querySelector(e)).map(hn.fromDom)}(t,e)},ru=function(e,t,n){return Ka((function(e,t){return Xn(e,t)}),tu,e,t,n)},ou=function(){var e=ci("aria-owns");return{id:e,link:function(t){Qo(t,"aria-owns",e)},unlink:function(e){ni(e,"aria-owns")}}},iu=function(e,t){return function(e){return Za(e,(function(e){if(!xo(e))return!1;var t=Zo(e,"id");return void 0!==t&&t.indexOf("aria-owns")>-1})).bind((function(e){var t=Zo(e,"id"),n=Io(e);return nu(n,'[aria-owns="'+t+'"]')}))}(t).exists((function(t){return au(e,t)}))},au=function(e,t){return eu(t,(function(t){return Yn(t,e.element)}),b)||iu(e,t)},uu="unknown";(Ja=Ya||(Ya={}))[Ja.STOP=0]="STOP",Ja[Ja.NORMAL=1]="NORMAL",Ja[Ja.LOGGING=2]="LOGGING";var su=dn({}),cu=function(e,t,n){switch(Be(su.get(),e).orThunk((function(){var t=we(su.get());return ae(t,(function(t){return e.indexOf(t)>-1?F.some(su.get()[t]):F.none()}))})).getOr(Ya.NORMAL)){case Ya.NORMAL:return n(du());case Ya.LOGGING:var r=function(e,t){var n=[];return(new Date).getTime(),{logEventCut:function(e,t,r){n.push({outcome:"cut",target:t,purpose:r})},logEventStopped:function(e,t,r){n.push({outcome:"stopped",target:t,purpose:r})},logNoParent:function(e,t,r){n.push({outcome:"no-parent",target:t,purpose:r})},logEventNoHandlers:function(e,t){n.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,r){n.push({outcome:"response",purpose:r,target:t})},write:function(){(new Date).getTime(),L(["mousemove","mouseover","mouseout",Ir()],e)}}}(e),o=n(r);return r.write(),o;case Ya.STOP:return!0}},lu=["alloy/data/Fields","alloy/debugging/Debugging"],fu=function(e,t,n){return cu(e,0,n)},du=h({logEventCut:d,logEventStopped:d,logNoParent:d,logEventNoHandlers:d,logEventResponse:d,write:d}),pu=h([Vt("menu"),Vt("selectedMenu")]),hu=h([Vt("item"),Vt("selectedItem")]);h(lt(hu().concat(pu())));var mu=h(lt(hu())),gu=qt("initSize",[Vt("numColumns"),Vt("numRows")]),vu=function(){return qt("markers",[Vt("backgroundMenu")].concat(pu()).concat(hu()))},yu=function(e){return qt("markers",$(e,Vt))},bu=function(e,t,n){return function(){var e=new Error;if(void 0!==e.stack){var t=e.stack.split("\n");return X(t,(function(e){return e.indexOf("alloy")>0&&!z(lu,(function(t){return e.indexOf(t)>-1}))})).getOr(uu)}}(),vt(t,t,n,_t((function(e){return ce.value((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)}))})))},Cu=function(e){return bu(0,e,He(d))},xu=function(e){return bu(0,e,He(F.none))},wu=function(e){return bu(0,e,$e())},_u=function(e){return bu(0,e,$e())},Su=function(e,t){return fn(e,h(t))},Eu=function(e){return fn(e,m)},Au=h(gu),Du=function(e,t,n,r,o,i){return{x:e,y:t,bubble:n,direction:r,boundsRestriction:o,label:i}},ku=Me([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Tu=ku.southeast,Ou=ku.southwest,Bu=ku.northeast,Nu=ku.northwest,Fu=ku.south,Mu=ku.north,Pu=ku.east,Iu=ku.west,Ru=function(e,t){return function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}(["left","right","top","bottom"],(function(n){return Be(t,n).map((function(t){return function(e,t){switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}}(e,t)}))}))},Lu=function(e){return e.x},zu=function(e,t){return e.x+e.width/2-t.width/2},Vu=function(e,t){return e.x+e.width-t.width},Hu=function(e,t){return e.y-t.height},$u=function(e){return e.y+e.height},ju=function(e,t){return e.y+e.height/2-t.height/2},Uu=function(e,t,n){return Du(Lu(e),$u(e),n.southeast(),Tu(),Ru(e,{left:1,top:3}),"layout-se")},Wu=function(e,t,n){return Du(Vu(e,t),$u(e),n.southwest(),Ou(),Ru(e,{right:0,top:3}),"layout-sw")},qu=function(e,t,n){return Du(Lu(e),Hu(e,t),n.northeast(),Bu(),Ru(e,{left:1,bottom:2}),"layout-ne")},Gu=function(e,t,n){return Du(Vu(e,t),Hu(e,t),n.northwest(),Nu(),Ru(e,{right:0,bottom:2}),"layout-nw")},Xu=function(e,t,n){return Du(zu(e,t),Hu(e,t),n.north(),Mu(),Ru(e,{bottom:2}),"layout-n")},Ku=function(e,t,n){return Du(zu(e,t),$u(e),n.south(),Fu(),Ru(e,{top:3}),"layout-s")},Yu=function(e,t,n){return Du(function(e){return e.x+e.width}(e),ju(e,t),n.east(),Pu(),Ru(e,{left:0}),"layout-e")},Ju=function(e,t,n){return Du(function(e,t){return e.x-t.width}(e,t),ju(e,t),n.west(),Iu(),Ru(e,{right:1}),"layout-w")},Qu=function(){return[Uu,Wu,qu,Gu,Ku,Xu,Yu,Ju]},Zu=function(){return[Wu,Uu,Gu,qu,Ku,Xu,Yu,Ju]},es=function(){return[qu,Gu,Uu,Wu,Xu,Ku]},ts=function(){return[Gu,qu,Wu,Uu,Xu,Ku]},ns=function(){return[Uu,Wu,qu,Gu,Ku,Xu]},rs=function(){return[Wu,Uu,Gu,qu,Ku,Xu]},os=Object.freeze({__proto__:null,events:function(e){return ro([ao(Tr(),(function(t,n){var r=e.channels,o=we(r),i=n,a=function(e,t){return t.universal?e:W(e,(function(e){return L(t.channels,e)}))}(o,i);j(a,(function(e){var n=r[e],o=n.schema,a=Dt("channel["+e+"] data\nReceiver: "+ii(t.element),o,i.data);n.onReceive(t,a)}))}))])}}),is=[Ht("channels",St(ce.value,ct([wu("onReceive"),tn("schema",Bt())])))],as=function(e,t,n){return vo((function(r,o){n(r,e,t)}))},us=function(e,t,n){return function(e,t,n){var r=n.toString(),o=r.indexOf(")")+1,i=r.indexOf("("),a=r.substring(i+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:Ci(a.slice(0,1).concat(a.slice(3)))}},e}((function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=[r].concat(o);return r.config({name:h(e)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)}),(function(e){var n=Array.prototype.slice.call(a,1);return t.apply(void 0,[r,e.config,e.state].concat(n))}))}),n,t)},ss=function(e){return{key:e,value:void 0}},cs=function(e,t,n,r,o,i,a){var u=function(e){return Fe(e,n)?e[n]():F.none()},s=Ee(o,(function(e,t){return us(n,e,t)})),c=Ee(i,(function(e,t){return xi(e,t)})),l=w(w(w({},c),s),{revoke:g(ss,n),config:function(t){var r=Dt(n+"-config",e,t);return{key:n,value:{config:r,me:l,configAsRaw:ze((function(){return Dt(n+"-config",e,t)})),initialConfig:t,state:a}}},schema:h(t),exhibit:function(e,t){return u(e).bind((function(e){return Be(r,"exhibit").map((function(n){return n(t,e.config,e.state)}))})).getOr(ki({}))},name:h(n),handlers:function(e){return u(e).map((function(e){return Be(r,"events").getOr((function(){return{}}))(e.config,e.state)})).getOr({})}});return l},ls=function(e){return Je(e)},fs=ct([Vt("fields"),Vt("name"),tn("active",{}),tn("apis",{}),tn("state",Ei),tn("extra",{})]),ds=function(e){var t=Dt("Creating behaviour: "+e.name,fs,e);return function(e,t,n,r,o,i){var a,u,s=ct(e),c=en(t,[(a="config",u=e,Yt(a,ct(u)))]);return cs(s,c,t,n,r,o,i)}(t.fields,t.name,t.active,t.apis,t.extra,t.state)},ps=ct([Vt("branchKey"),Vt("branches"),Vt("name"),tn("active",{}),tn("apis",{}),tn("state",Ei),tn("extra",{})]),hs=function(e){var t=Dt("Creating behaviour: "+e.name,ps,e);return function(e,t,n,r,o,i){var a=e,u=en(t,[Yt("config",e)]);return cs(a,u,t,n,r,o,i)}(Ot(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},ms=h(void 0),gs=ds({fields:is,name:"receiving",active:os}),vs=Object.freeze({__proto__:null,exhibit:function(e,t){return ki({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),ys=function(e){return e.dom.focus()},bs=function(e){return void 0===e&&(e=hn.fromDom(document)),F.from(e.dom.activeElement).map(hn.fromDom)},Cs=function(e){return bs(Io(e)).filter((function(t){return e.dom.contains(t.dom)}))},xs=function(e,t){var n=Io(t),r=bs(n).bind((function(e){var n,r,o=function(t){return Yn(e,t)};return o(t)?F.some(t):(n=o,(r=function(e){for(var t=0;t<e.childNodes.length;t++){var o=hn.fromDom(e.childNodes[t]);if(n(o))return F.some(o);var i=r(e.childNodes[t]);if(i.isSome())return i}return F.none()})(t.dom))})),o=e(t);return r.each((function(e){bs(n).filter((function(t){return Yn(t,e)})).fold((function(){ys(e)}),d)})),o},ws=function(e,t,n,r,o){return{position:e,left:t,top:n,right:r,bottom:o}},_s=function(e,t){var n=function(e){return e+"px"};ta(e,{position:F.some(t.position),left:t.left.map(n),top:t.top.map(n),right:t.right.map(n),bottom:t.bottom.map(n)})},Ss=Me([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Es=function(e,t,n,r,o,i){var a,u,s,c,l,f,d,p,h,m=t.x-n,g=t.y-r,v=o-(m+t.width),y=i-(g+t.height),b=F.some(m),C=F.some(g),x=F.some(v),w=F.some(y),_=F.none();return a=t.direction,u=function(){return ws(e,b,C,_,_)},s=function(){return ws(e,_,C,x,_)},c=function(){return ws(e,b,_,_,w)},l=function(){return ws(e,_,_,x,w)},f=function(){return ws(e,b,C,_,_)},d=function(){return ws(e,b,_,_,w)},p=function(){return ws(e,b,C,_,_)},h=function(){return ws(e,_,C,x,_)},a.fold(u,s,c,l,f,d,p,h)},As=function(e,t){var n=g(Ua,t),r=e.fold(n,n,(function(){var e=La();return Ua(t).translate(-e.left,-e.top)})),o=Ma(t),i=Aa(t);return Wa(r.left,r.top,o,i)},Ds=function(e,t){return t.fold((function(){return e.fold(Xa,Xa,Wa)}),(function(t){return e.fold(t,t,(function(){var n=t(),r=ks(e,n.x,n.y);return Wa(r.left,r.top,n.width,n.height)}))}))},ks=function(e,t,n){var r=ka(t,n);return e.fold(h(r),h(r),(function(){var e=La();return r.translate(-e.left,-e.top)}))};Ss.none;var Ts,Os,Bs=Ss.relative,Ns=Ss.fixed,Fs=function(e,t,n,r){var o=e+t;return o>r?n:o<n?r:o},Ms=function(e,t,n){return Math.min(Math.max(e,t),n)},Ps=Me([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Is=function(e,t,n,r){var o,i,a,u,s=e.x,c=e.y,l=e.bubble.offset,f=l.left,d=l.top,p=function(e,t,n){var r=function(e,r){var o="top"===e||"bottom"===e?n.top:n.left;return Be(t,e).bind(m).bind((function(t){return"left"===e||"top"===e?t>=r?F.some(t):F.none():t<=r?F.some(t):F.none()})).map((function(e){return e+o})).getOr(r)},o=r("left",e.x),i=r("top",e.y),a=r("right",e.right),u=r("bottom",e.bottom);return Wa(o,i,a-o,u-i)}(r,e.boundsRestriction,l),g=p.y,v=p.bottom,y=p.x,b=p.right,C=c+d,x=function(e,t,n,r,o){var i=o.x,a=o.y,u=o.width,s=o.height,c=e>=i,l=t>=a,f=c&&l,d=e+n<=i+u&&t+r<=a+s,p=Math.abs(Math.min(n,c?i+u-e:i-(e+n))),h=Math.abs(Math.min(r,l?a+s-t:a-(t+r))),m=Math.max(o.x,o.right-n),g=Math.max(o.y,o.bottom-r);return{originInBounds:f,sizeInBounds:d,limitX:Ms(e,o.x,m),limitY:Ms(t,o.y,g),deltaW:p,deltaH:h}}(s+f,C,t,n,p),w=x.originInBounds,_=x.sizeInBounds,S=x.limitX,E=x.limitY,A=x.deltaW,D=x.deltaH,k=h(E+D-g),T=h(v-E),O=(o=e.direction,i=T,a=T,u=k,o.fold(i,i,u,u,i,u,a,a)),B=h(S+A-y),N=h(b-S),M={x:S,y:E,width:A,height:D,maxHeight:O,maxWidth:function(e,t,n,r){return e.fold(t,r,t,r,n,n,t,r)}(e.direction,N,N,B),direction:e.direction,classes:{on:e.bubble.classesOn,off:e.bubble.classesOff},label:e.label,candidateYforTest:C};return w&&_?Ps.fit(M):Ps.nofit(M,A,D)},Rs=function(e,t,n,r){ua(t,"max-height"),ua(t,"max-width");var o,i={width:Ma(o=t),height:Aa(o)};return function(e,t,n,r,o){var i=n.width,a=n.height,u=function(e,u,s,c){var l=e(t,n,r);return Is(l,i,a,o).fold(Ps.fit,(function(e,t,n){return n>c||t>s?Ps.nofit(e,t,n):Ps.nofit(u,s,c)}))};return G(e,(function(e,t){var n=g(u,t);return e.fold(Ps.fit,n)}),Ps.nofit({x:t.x,y:t.y,width:n.width,height:n.height,maxHeight:n.height,maxWidth:n.width,direction:Tu(),classes:{on:[],off:[]},label:"none",candidateYforTest:t.y},-1,-1)).fold(m,m)}(r.preference,e,i,n,r.bounds)},Ls=function(e,t,n){_s(e,function(e,t){return e.fold((function(){return ws("absolute",F.some(t.x),F.some(t.y),F.none(),F.none())}),(function(e,n,r,o){return Es("absolute",t,e,n,r,o)}),(function(e,n,r,o){return Es("fixed",t,e,n,r,o)}))}(n.origin,t))},zs=function(e,t){!function(e,t){var n=Sa.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Zi(e,"max-height",n+"px")}(e,Math.floor(t))},Vs=h((function(e,t){zs(e,t),ea(e,{"overflow-x":"hidden","overflow-y":"auto"})})),Hs=h((function(e,t){zs(e,t)})),$s=function(e,t,n){return void 0===e[t]?n:e[t]},js=function(e,t,n,r){var o=Rs(e,t,n,r);Ls(t,o,r),function(e,t){var n=t.classes;qi(e,n.off),Wi(e,n.on)}(t,o),function(e,t,n){(0,n.maxHeightFunction)(e,t.maxHeight)}(t,o,r),function(e,t,n){(0,n.maxWidthFunction)(e,t.maxWidth)}(t,o,r)},Us=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Ws=function(e,t,n){var r=function(e){return Be(n,e).getOr([])},o=function(e,t,n){var o=ee(Us,n);return{offset:ka(e,t),classesOn:J(n,r),classesOff:J(o,r)}};return{southeast:function(){return o(-e,t,["top","alignLeft"])},southwest:function(){return o(e,t,["top","alignRight"])},south:function(){return o(-e/2,t,["top","alignCentre"])},northeast:function(){return o(-e,-t,["bottom","alignLeft"])},northwest:function(){return o(e,-t,["bottom","alignRight"])},north:function(){return o(-e/2,-t,["bottom","alignCentre"])},east:function(){return o(e,-t/2,["valignCentre","left"])},west:function(){return o(-e,-t/2,["valignCentre","right"])},innerNorthwest:function(){return o(-e,t,["top","alignRight"])},innerNortheast:function(){return o(e,t,["top","alignLeft"])},innerNorth:function(){return o(-e/2,t,["top","alignCentre"])},innerSouthwest:function(){return o(-e,-t,["bottom","alignRight"])},innerSoutheast:function(){return o(e,-t,["bottom","alignLeft"])},innerSouth:function(){return o(-e/2,-t,["bottom","alignCentre"])},innerWest:function(){return o(e,-t/2,["valignCentre","right"])},innerEast:function(){return o(-e,-t/2,["valignCentre","left"])}}},qs=function(){return Ws(0,0,{})},Gs=function(e,t){return function(n){return"rtl"===Xs(n)?t:e}},Xs=function(e){return"rtl"===na(e,"direction")?"rtl":"ltr"};(Os=Ts||(Ts={})).TopToBottom="toptobottom",Os.BottomToTop="bottomtotop";var Ks="data-alloy-vertical-dir",Ys=function(e){return eu(e,(function(e){return xo(e)&&Zo(e,"data-alloy-vertical-dir")===Ts.BottomToTop}))},Js=function(){return en("layouts",[Vt("onLtr"),Vt("onRtl"),Kt("onBottomLtr"),Kt("onBottomRtl")])},Qs=function(e,t,n,r,o,i,a){var u=a.map(Ys).getOr(!1),s=t.layouts.map((function(t){return t.onLtr(e)})),c=t.layouts.map((function(t){return t.onRtl(e)})),l=u?t.layouts.bind((function(t){return t.onBottomLtr.map((function(t){return t(e)}))})).or(s).getOr(o):s.getOr(n),f=u?t.layouts.bind((function(t){return t.onBottomRtl.map((function(t){return t(e)}))})).or(c).getOr(i):c.getOr(r);return Gs(l,f)(e)},Zs=[Vt("hotspot"),Kt("bubble"),tn("overrides",{}),Js(),Su("placement",(function(e,t,n){var r=t.hotspot,o=As(n,r.element),i=Qs(e.element,t,ns(),rs(),es(),ts(),F.some(t.hotspot.element));return F.some({anchorBox:o,bubble:t.bubble.getOr(qs()),overrides:t.overrides,layouts:i,placer:F.none()})}))],ec=[Vt("x"),Vt("y"),tn("height",0),tn("width",0),tn("bubble",qs()),tn("overrides",{}),Js(),Su("placement",(function(e,t,n){var r=ks(n,t.x,t.y),o=Wa(r.left,r.top,t.width,t.height),i=Qs(e.element,t,Qu(),Zu(),Qu(),Zu(),F.none());return F.some({anchorBox:o,bubble:t.bubble,overrides:t.overrides,layouts:i,placer:F.none()})}))],tc=Me([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),nc=function(e){return e.fold(m,(function(e,t,n){return e.translate(-t,-n)}))},rc=function(e){return e.fold(m,m)},oc=function(e){return G(e,(function(e,t){return e.translate(t.left,t.top)}),ka(0,0))},ic=function(e){var t=$(e,rc);return oc(t)},ac=tc.screen,uc=tc.absolute,sc=function(e,t,n){var r=Eo(e.element),o=La(r),i=function(e,t,n){var r=ko(n.root).dom;return F.from(r.frameElement).map(hn.fromDom).filter((function(t){var n=Eo(t),r=Eo(e.element);return Yn(n,r)})).map(Oa)}(e,0,n).getOr(o);return uc(i,o.left,o.top)},cc=function(e,t,n,r){var o=e,i=t,a=n,u=r;e<0&&(o=0,a=n+e),t<0&&(i=0,u=r+t);var s=ac(ka(o,i));return F.some(function(e,t,n){return{point:e,width:t,height:n}}(s,a,u))},lc=function(e,t,n,r,o){return e.map((function(e){var i,a,u,s,c,l,f,d=[t,e.point],p=(i=function(){return ic(d)},a=function(){return ic(d)},u=function(){return function(e){var t=$(e,nc);return oc(t)}(d)},r.fold(i,a,u)),h=(s=p.left,c=p.top,l=e.width,f=e.height,{x:s,y:c,width:l,height:f}),m=n.showAbove?es():ns(),g=n.showAbove?ts():rs(),v=Qs(o,n,m,g,m,g,F.none());return{anchorBox:h,bubble:n.bubble.getOr(qs()),overrides:n.overrides,layouts:v,placer:F.none()}}))},fc=[Vt("node"),Vt("root"),Kt("bubble"),Js(),tn("overrides",{}),tn("showAbove",!1),Su("placement",(function(e,t,n){var r=sc(e,0,t);return t.node.filter(Xi).bind((function(o){var i=o.dom.getBoundingClientRect(),a=cc(i.left,i.top,i.width,i.height),u=t.node.getOr(e.element);return lc(a,r,t,n,u)}))}))],dc=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},pc=Me([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hc=(pc.before,pc.on,pc.after,function(e){return e.fold(m,m,m)}),mc=Me([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gc={domRange:mc.domRange,relative:mc.relative,exact:mc.exact,exactFromRange:function(e){return mc.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t=function(e){return e.match({domRange:function(e){return hn.fromDom(e.startContainer)},relative:function(e,t){return hc(e)},exact:function(e,t,n,r){return e}})}(e);return ko(t)},range:dc},vc=function(e,t,n){var r,o=e.document.createRange();return r=o,t.fold((function(e){r.setStartBefore(e.dom)}),(function(e,t){r.setStart(e.dom,t)}),(function(e){r.setStartAfter(e.dom)})),function(e,t){t.fold((function(t){e.setEndBefore(t.dom)}),(function(t,n){e.setEnd(t.dom,n)}),(function(t){e.setEndAfter(t.dom)}))}(o,n),o},yc=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,o),i},bc=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},Cc=Me([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xc=function(e,t,n){return t(hn.fromDom(n.startContainer),n.startOffset,hn.fromDom(n.endContainer),n.endOffset)},wc=function(e,t){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Cc.rtl(hn.fromDom(e.endContainer),e.endOffset,hn.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return xc(0,Cc.ltr,n)})):xc(0,Cc.ltr,n)}(0,function(e,t){return t.match({domRange:function(e){return{ltr:h(e),rtl:F.none}},relative:function(t,n){return{ltr:ze((function(){return vc(e,t,n)})),rtl:ze((function(){return F.some(vc(e,n,t))}))}},exact:function(t,n,r,o){return{ltr:ze((function(){return yc(e,t,n,r,o)})),rtl:ze((function(){return F.some(yc(e,r,o,t,n))}))}}})}(e,t))};Cc.ltr,Cc.rtl;var _c,Sc,Ec=function(e,t){var n=function(t){return e(t)?F.from(t.dom.nodeValue):F.none()};return{get:function(r){if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}}(wo,"text"),Ac=function(e){return Ec.getOption(e)},Dc=["img","br"],kc=function(e){return Ac(e).filter((function(e){return 0!==e.trim().length||e.indexOf("")>-1})).isSome()||L(Dc,bo(e))},Tc=function(e,t){var n=function(e){for(var r=Bo(e),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return F.some(i);var a=n(i);if(a.isSome())return a}return F.none()};return n(e)},Oc=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Kn(n)?[]:$(n.querySelectorAll(e),hn.fromDom)}(t,e)},Bc=function(e,t,n,r){var o=function(e,t,n,r){var o=Eo(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o}(e,t,n,r),i=Yn(e,n)&&t===r;return o.collapsed&&!i},Nc=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return F.some(dc(hn.fromDom(t.startContainer),t.startOffset,hn.fromDom(n.endContainer),n.endOffset))}return F.none()},Fc=function(e){if(null===e.anchorNode||null===e.focusNode)return Nc(e);var t=hn.fromDom(e.anchorNode),n=hn.fromDom(e.focusNode);return Bc(t,e.anchorOffset,n,e.focusOffset)?F.some(dc(t,e.anchorOffset,n,e.focusOffset)):Nc(e)},Mc=function(e){return function(e){return F.from(e.getSelection())}(e).filter((function(e){return e.rangeCount>0})).bind(Fc)},Pc=function(e,t){return function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?F.some(n).map(bc):F.none()}(function(e,t){return wc(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom,o),i.setEnd(t.dom,n),i}})}(e,t))},Ic=function(e,t){return{element:e,offset:t}},Rc=function(e,t){var n=Bo(e);if(0===n.length)return Ic(e,t);if(t<n.length)return Ic(n[t],0);var r=n[n.length-1],o=wo(r)?function(e){return Ec.get(e)}(r).length:Bo(r).length;return Ic(r,o)},Lc=function(e,t){return wo(e)?Ic(e,t):Rc(e,t)},zc=function(e,t){return t.getSelection.getOrThunk((function(){return function(){return Mc(e)}}))().map((function(e){var t=Lc(e.start,e.soffset),n=Lc(e.finish,e.foffset);return gc.range(t.element,t.offset,n.element,n.offset)}))},Vc=[Kt("getSelection"),Vt("root"),Kt("bubble"),Js(),tn("overrides",{}),tn("showAbove",!1),Su("placement",(function(e,t,n){var r=ko(t.root).dom,o=sc(e,0,t),i=zc(r,t).bind((function(e){return Pc(r,gc.exactFromRange(e)).orThunk((function(){var t=hn.fromText("\ufeff");return Ho(e.start,t),Pc(r,gc.exact(t,0,t,1)).map((function(e){return Go(t),e}))})).bind((function(e){return cc(e.left,e.top,e.width,e.height)}))})),a=zc(r,t).bind((function(e){return xo(e.start)?F.some(e.start):(t=e.start,To(t));var t})).getOr(e.element);return lc(i,o,t,n,a)}))],Hc=function(e){return e.x+e.width},$c=function(e,t){return e.x-t.width},jc=function(e,t){return e.y-t.height+e.height},Uc=function(e){return e.y},Wc=function(e,t,n){return Du(Hc(e),Uc(e),n.southeast(),Tu(),Ru(e,{left:0,top:2}),"link-layout-se")},qc=function(e,t,n){return Du($c(e,t),Uc(e),n.southwest(),Ou(),Ru(e,{right:1,top:2}),"link-layout-sw")},Gc=function(e,t,n){return Du(Hc(e),jc(e,t),n.northeast(),Bu(),Ru(e,{left:0,bottom:3}),"link-layout-ne")},Xc=function(e,t,n){return Du($c(e,t),jc(e,t),n.northwest(),Nu(),Ru(e,{right:1,bottom:3}),"link-layout-nw")},Kc=function(){return[Wc,qc,Gc,Xc]},Yc=function(){return[qc,Wc,Xc,Gc]},Jc=[Vt("item"),Js(),tn("overrides",{}),Su("placement",(function(e,t,n){var r=As(n,t.item.element),o=Qs(e.element,t,Kc(),Yc(),Kc(),Yc(),F.none());return F.some({anchorBox:r,bubble:qs(),overrides:t.overrides,layouts:o,placer:F.none()})}))],Qc=Ot("anchor",{selection:Vc,node:fc,hotspot:Zs,submenu:Jc,makeshift:ec}),Zc=function(e,t,n,r,o){!function(e,t,n,r,o,i){var a=$s(i,"maxHeightFunction",Vs()),u=$s(i,"maxWidthFunction",d),s=e.anchorBox,c=e.origin,l={bounds:Ds(c,o),origin:c,preference:r,maxHeightFunction:a,maxWidthFunction:u};js(s,t,n,l)}(function(e,t){return function(e,t){return{anchorBox:e,origin:t}}(e,t)}(n.anchorBox,t),o.element,n.bubble,n.layouts,r,n.overrides)},el=function(e,t,n,r,o,i){var a=i.map(qa);return tl(e,t,n,r,o,a)},tl=function(e,t,n,r,o,i){var a=Dt("positioning anchor.info",Qc,r);xs((function(){Zi(o.element,"position","fixed");var n=oa(o.element,"visibility");Zi(o.element,"visibility","hidden");var r,u=t.useFixed()?(r=document.documentElement,Ns(0,0,r.clientWidth,r.clientHeight)):function(e){var t=Oa(e.element),n=e.element.dom.getBoundingClientRect();return Bs(t.left,t.top,n.width,n.height)}(e),s=a.placement,c=i.map(h).or(t.getBounds);s(e,a,u).each((function(t){t.placer.getOr(Zc)(e,u,t,c,o)})),n.fold((function(){ua(o.element,"visibility")}),(function(e){Zi(o.element,"visibility",e)})),oa(o.element,"left").isNone()&&oa(o.element,"top").isNone()&&oa(o.element,"right").isNone()&&oa(o.element,"bottom").isNone()&&oa(o.element,"position").is("fixed")&&ua(o.element,"position")}),o.element)},nl=Object.freeze({__proto__:null,position:function(e,t,n,r,o){el(e,t,n,r,o,F.none())},positionWithin:el,positionWithinBounds:tl,getMode:function(e,t,n){return t.useFixed()?"fixed":"absolute"}}),rl=[tn("useFixed",b),Kt("getBounds")],ol=ds({fields:rl,name:"positioning",active:vs,apis:nl}),il=function(e){Jr(e,$r());var t=e.components();j(t,il)},al=function(e){var t=e.components();j(t,al),Jr(e,Hr())},ul=function(e,t){Uo(e.element,t.element)},sl=function(e,t){var n=e.components();!function(e){j(e.components(),(function(e){return Go(e.element)})),qo(e.element),e.syncComponents()}(e);var r=ee(n,t);j(r,(function(t){il(t),e.getSystem().removeFromWorld(t)})),j(t,(function(t){t.getSystem().isConnected()?ul(e,t):(e.getSystem().addToWorld(t),ul(e,t),Xi(e.element)&&al(t)),e.syncComponents()}))},cl=function(e,t){ll(e,t,Uo)},ll=function(e,t,n){e.getSystem().addToWorld(t),n(e.element,t.element),Xi(e.element)&&al(t),e.syncComponents()},fl=function(e){il(e),Go(e.element),e.getSystem().removeFromWorld(e)},dl=function(e){var t=To(e.element).bind((function(t){return e.getSystem().getByDom(t).toOptional()}));fl(e),t.each((function(e){e.syncComponents()}))},pl=function(e){var t=e.components();j(t,fl),qo(e.element),e.syncComponents()},hl=function(e,t){ml(e,t,Uo)},ml=function(e,t,n){n(e,t.element);var r=Bo(t.element);j(r,(function(e){t.getByDom(e).each(al)}))},gl=function(e){var t=Bo(e.element);j(t,(function(t){e.getByDom(t).each(il)})),Go(e.element)},vl=function(e,t,n,r){n.get().each((function(t){pl(e)}));var o=t.getAttachPoint(e);cl(o,e);var i=e.getSystem().build(r);return cl(e,i),n.set(i),i},yl=function(e,t,n,r){var o=vl(e,t,n,r);return t.onOpen(e,o),o},bl=function(e,t,n){n.get().each((function(r){pl(e),dl(e),t.onClose(e,r),n.clear()}))},Cl=function(e,t,n){return n.isOpen()},xl=function(e,t,n){var r=t.getAttachPoint(e);Zi(e.element,"position",ol.getMode(r)),function(e,t,n,r){oa(e.element,t).fold((function(){ni(e.element,n)}),(function(t){Qo(e.element,n,t)})),Zi(e.element,t,r)}(e,"visibility",t.cloakVisibilityAttr,"hidden")},wl=function(e,t,n){var r;r=e.element,z(["top","left","right","bottom"],(function(e){return oa(r,e).isSome()}))||ua(e.element,"position"),function(e,t,n){ei(e.element,n).fold((function(){return ua(e.element,t)}),(function(n){return Zi(e.element,t,n)}))}(e,"visibility",t.cloakVisibilityAttr)},_l=Object.freeze({__proto__:null,cloak:xl,decloak:wl,open:yl,openWhileCloaked:function(e,t,n,r,o){xl(e,t),yl(e,t,n,r),o(),wl(e,t)},close:bl,isOpen:Cl,isPartOf:function(e,t,n,r){return Cl(0,0,n)&&n.get().exists((function(n){return t.isPartOf(e,n,r)}))},getState:function(e,t,n){return n.get()},setContent:function(e,t,n,r){return n.get().map((function(){return vl(e,t,n,r)}))}}),Sl=Object.freeze({__proto__:null,events:function(e,t){return ro([ao(Mr(),(function(n,r){bl(n,e,t)}))])}}),El=[Cu("onOpen"),Cu("onClose"),Vt("isPartOf"),Vt("getAttachPoint"),tn("cloakVisibilityAttr","data-precloak-visibility")],Al=ds({fields:El,name:"sandboxing",active:Sl,apis:_l,state:Object.freeze({__proto__:null,init:function(){var e=dn(F.none()),t=h("not-implemented");return Ai({readState:t,isOpen:function(){return e.get().isSome()},clear:function(){e.set(F.none())},set:function(t){e.set(F.some(t))},get:function(){return e.get()}})}})}),Dl=h("dismiss.popups"),kl=h("reposition.popups"),Tl=h("mouse.released"),Ol=ct([tn("isExtraPart",b),en("fireEventInstead",[tn("event",jr())])]),Bl=function(e){var t,n=Dt("Dismissal",Ol,e);return(t={})[Dl()]={schema:ct([Vt("target")]),onReceive:function(e,t){Al.isOpen(e)&&(Al.isPartOf(e,t.target)||n.isExtraPart(e,t.target)||n.fireEventInstead.fold((function(){return Al.close(e)}),(function(t){return Jr(e,t.event)})))}},t},Nl=ct([en("fireEventInstead",[tn("event",Ur())]),Wt("doReposition")]),Fl=function(e){var t,n=Dt("Reposition",Nl,e);return(t={})[kl()]={onReceive:function(e){Al.isOpen(e)&&n.fireEventInstead.fold((function(){return n.doReposition(e)}),(function(t){return Jr(e,t.event)}))}},t},Ml=function(e,t,n){t.store.manager.onLoad(e,t,n)},Pl=function(e,t,n){t.store.manager.onUnload(e,t,n)},Il=Object.freeze({__proto__:null,onLoad:Ml,onUnload:Pl,setValue:function(e,t,n,r){t.store.manager.setValue(e,t,n,r)},getValue:function(e,t,n){return t.store.manager.getValue(e,t,n)},getState:function(e,t,n){return n}}),Rl=Object.freeze({__proto__:null,events:function(e,t){var n=e.resetOnDom?[mo((function(n,r){Ml(n,e,t)})),go((function(n,r){Pl(n,e,t)}))]:[as(e,t,Ml)];return ro(n)}}),Ll=function(){var e=dn(null);return Ai({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})},zl=function(){var e=dn({}),t=dn({});return Ai({readState:function(){return{mode:"dataset",dataByValue:e.get(),dataByText:t.get()}},lookup:function(n){return Be(e.get(),n).orThunk((function(){return Be(t.get(),n)}))},update:function(n){var r=e.get(),o=t.get(),i={},a={};j(n,(function(e){i[e.value]=e,Be(e,"meta").each((function(t){Be(t,"text").each((function(t){a[t]=e}))}))})),e.set(w(w({},r),i)),t.set(w(w({},o),a))},clear:function(){e.set({}),t.set({})}})},Vl=Object.freeze({__proto__:null,memory:Ll,dataset:zl,manual:function(){return Ai({readState:d})},init:function(e){return e.store.manager.state(e)}}),Hl=function(e,t,n,r){var o=t.store;n.update([r]),o.setValue(e,r),t.onSetValue(e,r)},$l=[Kt("initialValue"),Vt("getFallbackEntry"),Vt("getDataKey"),Vt("setValue"),Su("manager",{setValue:Hl,getValue:function(e,t,n){var r=t.store,o=r.getDataKey(e);return n.lookup(o).fold((function(){return r.getFallbackEntry(o)}),(function(e){return e}))},onLoad:function(e,t,n){t.store.initialValue.each((function(r){Hl(e,t,n,r)}))},onUnload:function(e,t,n){n.clear()},state:zl})],jl=[Vt("getValue"),tn("setValue",d),Kt("initialValue"),Su("manager",{setValue:function(e,t,n,r){t.store.setValue(e,r),t.onSetValue(e,r)},getValue:function(e,t,n){return t.store.getValue(e)},onLoad:function(e,t,n){t.store.initialValue.each((function(n){t.store.setValue(e,n)}))},onUnload:d,state:Ei.init})],Ul=[Kt("initialValue"),Su("manager",{setValue:function(e,t,n,r){n.set(r),t.onSetValue(e,r)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store.initialValue.each((function(e){n.isNotSet()&&n.set(e)}))},onUnload:function(e,t,n){n.clear()},state:Ll})],Wl=[nn("store",{mode:"memory"},Ot("mode",{memory:Ul,manual:jl,dataset:$l})),Cu("onSetValue"),tn("resetOnDom",!1)],ql=ds({fields:Wl,name:"representing",active:Rl,apis:Il,extra:{setValueFrom:function(e,t){var n=ql.getValue(t);ql.setValue(e,n)}},state:Vl}),Gl=function(e,t){return ln(e,{},$(t,(function(t){return n=t.name(),r="Cannot configure "+t.name()+" for "+e,vt(n,n,je(),st((function(e){return ve("The field: "+n+" is forbidden. "+r)})));var n,r})).concat([fn("dump",m)]))},Xl=function(e){return e.dump},Kl=function(e,t){return w(w({},e.dump),ls(t))},Yl=Gl,Jl=Kl,Ql="placeholder",Zl=Me([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ef=function(e){return Ne(e,"uiType")},tf=function(e,t,n,r){return ef(n)&&n.uiType===Ql?function(e,t,n,r){return e.exists((function(e){return e!==n.owner}))?Zl.single(!0,h(n)):Be(r,n.name).fold((function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+we(r)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(function(e){return e.replace()}))}(e,0,n,r):Zl.single(!1,h(n))},nf=function(e,t,n,r){return tf(e,0,n,r).fold((function(o,i){var a=ef(n)?i(t,n.config,n.validated):i(t),u=Be(a,"components").getOr([]),s=J(u,(function(n){return nf(e,t,n,r)}));return[w(w({},a),{components:s})]}),(function(e,r){if(ef(n)){var o=r(t,n.config,n.validated);return n.validated.preprocess.getOr(m)(o)}return r(t)}))},rf=function(e,t,n,r){var o=Ee(r,(function(e,t){return r=e,o=!1,{name:h(n=t),required:function(){return r.fold((function(e,t){return e}),(function(e,t){return e}))},used:function(){return o},replace:function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+n);return o=!0,r}};var n,r,o})),i=function(e,t,n,r){return J(n,(function(n){return nf(e,t,n,r)}))}(e,t,n,o);return Se(o,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),i},of=Zl.single,af=Zl.multiple,uf=h(Ql),sf=Me([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),cf=tn("factory",{sketch:m}),lf=tn("schema",[]),ff=Vt("name"),df=vt("pname","pname",Ue((function(e){return"<alloy."+ci(e.name)+">"})),Bt()),pf=fn("schema",(function(){return[Kt("preprocess")]})),hf=tn("defaults",h({})),mf=tn("overrides",h({})),gf=lt([cf,lf,ff,df,hf,mf]),vf=lt([cf,lf,ff,hf,mf]),yf=lt([cf,lf,ff,df,hf,mf]),bf=lt([cf,pf,ff,Vt("unit"),df,hf,mf]),Cf=function(e){return e.fold(F.some,F.none,F.some,F.some)},xf=function(e){var t=function(e){return e.name};return e.fold(t,t,t,t)},wf=function(e,t){return function(n){var r=Dt("Converting part type",t,n);return e(r)}},_f=wf(sf.required,gf),Sf=wf(sf.external,vf),Ef=wf(sf.optional,yf),Af=wf(sf.group,bf),Df=h("entirety"),kf=Object.freeze({__proto__:null,required:_f,external:Sf,optional:Ef,group:Af,asNamedPart:Cf,name:xf,asCommon:function(e){return e.fold(m,m,m,m)},original:Df}),Tf=function(e,t,n,r){return Re(t.defaults(e,n,r),n,{uid:e.partUids[t.name]},t.overrides(e,n,r))},Of=function(e,t){var n={};return j(t,(function(t){Cf(t).each((function(t){var r=Bf(e,t.pname);n[t.name]=function(n){var o=Dt("Part: "+t.name+" in "+e,lt(t.schema),n);return w(w({},r),{config:n,validated:o})}}))})),n},Bf=function(e,t){return{uiType:uf(),owner:e,name:t}},Nf=function(e,t,n){return{uiType:uf(),owner:e,name:t,config:n,validated:{}}},Ff=function(e){return J(e,(function(e){return e.fold(F.none,F.some,F.none,F.none).map((function(e){return qt(e.name,e.schema.concat([Eu(Df())]))})).toArray()}))},Mf=function(e){return $(e,xf)},Pf=function(e,t,n){return function(e,t,n){var r={},o={};return j(n,(function(e){e.fold((function(e){r[e.pname]=of(!0,(function(t,n,r){return e.factory.sketch(Tf(t,e,n,r))}))}),(function(e){var n=t.parts[e.name];o[e.name]=h(e.factory.sketch(Tf(t,e,n[Df()]),n))}),(function(e){r[e.pname]=of(!1,(function(t,n,r){return e.factory.sketch(Tf(t,e,n,r))}))}),(function(e){r[e.pname]=af(!0,(function(t,n,r){var o=t[e.name];return $(o,(function(n){return e.factory.sketch(Re(e.defaults(t,n,r),n,e.overrides(t,n)))}))}))}))})),{internals:h(r),externals:h(o)}}(0,t,n)},If=function(e,t,n){return rf(F.some(e),t,t.components,n)},Rf=function(e,t,n){var r=t.partUids[n];return e.getSystem().getByUid(r).toOptional()},Lf=function(e,t,n){return Rf(e,t,n).getOrDie("Could not find part: "+n)},zf=function(e,t,n){var r={},o=t.partUids,i=e.getSystem();return j(n,(function(e){r[e]=h(i.getByUid(o[e]))})),r},Vf=function(e,t){var n=e.getSystem();return Ee(t.partUids,(function(e,t){return h(n.getByUid(e))}))},Hf=function(e){return we(e.partUids)},$f=function(e,t,n){var r={},o=t.partUids,i=e.getSystem();return j(n,(function(e){r[e]=h(i.getByUid(o[e]).getOrDie())})),r},jf=function(e,t){var n=Mf(t);return Je($(n,(function(t){return{key:t,value:e+"-"+t}})))},Uf=function(e){return vt("partUids","partUids",We((function(t){return jf(t.uid,e)})),Bt())},Wf=Object.freeze({__proto__:null,generate:Of,generateOne:Nf,schemas:Ff,names:Mf,substitutes:Pf,components:If,defaultUids:jf,defaultUidsSchema:Uf,getAllParts:Vf,getAllPartNames:Hf,getPart:Rf,getPartOrDie:Lf,getParts:zf,getPartsOrDie:$f}),qf=function(e,t,n,r,o){var i=function(e,t){return(e.length>0?[qt("parts",e)]:[]).concat([Vt("uid"),tn("dom",{}),tn("components",[]),Eu("originalSpec"),tn("debug.sketcher",{})]).concat(t)}(r,o);return Dt(e+" [SpecSchema]",ct(i.concat(t)),n)},Gf=function(e,t,n,r,o){var i=Xf(o),a=Ff(n),u=Uf(n),s=qf(e,t,i,a,[u]),c=Pf(0,s,n);return r(s,If(e,s,c.internals()),i,c.externals())},Xf=function(e){return function(e){return Ne(e,"uid")}(e)?e:w(w({},e),{uid:gi("uid")})},Kf=ct([Vt("name"),Vt("factory"),Vt("configFields"),tn("apis",{}),tn("extraApis",{})]),Yf=ct([Vt("name"),Vt("factory"),Vt("configFields"),Vt("partFields"),tn("apis",{}),tn("extraApis",{})]),Jf=function(e){var t=Dt("Sketcher for "+e.name,Kf,e),n=Ee(t.apis,Si),r=Ee(t.extraApis,(function(e,t){return xi(e,t)}));return w(w({name:t.name,configFields:t.configFields,sketch:function(e){return function(e,t,n,r){var o=Xf(r);return n(qf(e,t,o,[],[]),o)}(t.name,t.configFields,t.factory,e)}},n),r)},Qf=function(e){var t=Dt("Sketcher for "+e.name,Yf,e),n=Of(t.name,t.partFields),r=Ee(t.apis,Si),o=Ee(t.extraApis,(function(e,t){return xi(e,t)}));return w(w({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:function(e){return Gf(t.name,t.configFields,t.partFields,t.factory,e)},parts:n},r),o)},Zf=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},ed=function(e,t){return e?F.some(t):F.none()},td=function(e){return"input"===bo(e)&&"radio"!==Zo(e,"type")||"textarea"===bo(e)},nd=Object.freeze({__proto__:null,getCurrent:function(e,t,n){return t.find(e)}}),rd=[Vt("find")],od=ds({fields:rd,name:"composing",apis:nd}),id=function(e,t,n,r){var o=Oc(e.element,"."+t.highlightClass);j(o,(function(n){z(r,(function(e){return e.element===n}))||(ji(n,t.highlightClass),e.getSystem().getByDom(n).each((function(n){t.onDehighlight(e,n),Jr(n,Yr())})))}))},ad=function(e,t,n,r){id(e,t,0,[r]),ud(e,t,n,r)||(Hi(r.element,t.highlightClass),t.onHighlight(e,r),Jr(r,Kr()))},ud=function(e,t,n,r){return Ui(r.element,t.highlightClass)},sd=function(e,t,n,r){var o=Oc(e.element,"."+t.itemClass);return F.from(o[r]).fold((function(){return ce.error(new Error("No element found with index "+r))}),e.getSystem().getByDom)},cd=function(e,t,n){return nu(e.element,"."+t.itemClass).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},ld=function(e,t,n){var r=Oc(e.element,"."+t.itemClass);return(r.length>0?F.some(r[r.length-1]):F.none()).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},fd=function(e,t,n,r){var o=Oc(e.element,"."+t.itemClass);return K(o,(function(e){return Ui(e,t.highlightClass)})).bind((function(t){var n=Fs(t,r,0,o.length-1);return e.getSystem().getByDom(o[n]).toOptional()}))},dd=function(e,t,n){var r=Oc(e.element,"."+t.itemClass);return Zf($(r,(function(t){return e.getSystem().getByDom(t).toOptional()})))},pd=Object.freeze({__proto__:null,dehighlightAll:function(e,t,n){return id(e,t,0,[])},dehighlight:function(e,t,n,r){ud(e,t,n,r)&&(ji(r.element,t.highlightClass),t.onDehighlight(e,r),Jr(r,Yr()))},highlight:ad,highlightFirst:function(e,t,n){cd(e,t).each((function(r){ad(e,t,n,r)}))},highlightLast:function(e,t,n){ld(e,t).each((function(r){ad(e,t,n,r)}))},highlightAt:function(e,t,n,r){sd(e,t,n,r).fold((function(e){throw e}),(function(r){ad(e,t,n,r)}))},highlightBy:function(e,t,n,r){var o=dd(e,t);X(o,r).each((function(r){ad(e,t,n,r)}))},isHighlighted:ud,getHighlighted:function(e,t,n){return nu(e.element,"."+t.highlightClass).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},getFirst:cd,getLast:ld,getPrevious:function(e,t,n){return fd(e,t,0,-1)},getNext:function(e,t,n){return fd(e,t,0,1)},getCandidates:dd}),hd=[Vt("highlightClass"),Vt("itemClass"),Cu("onHighlight"),Cu("onDehighlight")],md=ds({fields:hd,name:"highlighting",apis:pd}),gd=[8],vd=[9],yd=[13],bd=[27],Cd=[32],xd=[37],wd=[38],_d=[39],Sd=[40],Ed=function(e,t,n){var r=Z(e.slice(0,t)),o=Z(e.slice(t+1));return X(r.concat(o),n)},Ad=function(e,t,n){var r=Z(e.slice(0,t));return X(r,n)},Dd=function(e,t,n){var r=e.slice(0,t),o=e.slice(t+1);return X(o.concat(r),n)},kd=function(e,t,n){var r=e.slice(t+1);return X(r,n)},Td=function(e){return function(t){var n=t.raw;return L(e,n.which)}},Od=function(e){return function(t){return Q(e,(function(e){return e(t)}))}},Bd=function(e){return!0===e.raw.shiftKey},Nd=function(e){return!0===e.raw.ctrlKey},Fd=v(Bd),Md=function(e,t){return{matches:e,classification:t}},Pd=function(e,t,n){t.exists((function(e){return n.exists((function(t){return Yn(t,e)}))}))||Qr(e,Wr(),{prevFocus:t,newFocus:n})},Id=function(){var e=function(e){return Cs(e.element)};return{get:e,set:function(t,n){var r=e(t);t.getSystem().triggerFocus(n,t.element);var o=e(t);Pd(t,r,o)}}},Rd=function(){var e=function(e){return md.getHighlighted(e).map((function(e){return e.element}))};return{get:e,set:function(t,n){var r=e(t);t.getSystem().getByDom(n).fold(d,(function(e){md.highlight(t,e)}));var o=e(t);Pd(t,r,o)}}};(Sc=_c||(_c={})).OnFocusMode="onFocus",Sc.OnEnterOrSpaceMode="onEnterOrSpace",Sc.OnApiMode="onApi";var Ld,zd=function(e,t,n,r,o){var i=function(e,t,n,r,o){var i,a,u=n(e,t,r,o);return(i=u,a=t.event,X(i,(function(e){return e.matches(a)})).map((function(e){return e.classification}))).bind((function(n){return n(e,t,r,o)}))},a={schema:function(){return e.concat([tn("focusManager",Id()),nn("focusInside","onFocus",_t((function(e){return L(["onFocus","onEnterOrSpace","onApi"],e)?ce.value(e):ce.error("Invalid value for focusInside")}))),Su("handler",a),Su("state",t),Su("sendFocusIn",o)])},processKey:i,toEvents:function(e,t){var a=e.focusInside!==_c.OnFocusMode?F.none():o(e).map((function(n){return ao(Ar(),(function(r,o){n(r,e,t),o.stop()}))})),u=[ao(vr(),(function(r,a){i(r,a,n,e,t).fold((function(){!function(n,r){var i=Td(Cd.concat(yd))(r.event);e.focusInside===_c.OnEnterOrSpaceMode&&i&&nr(n,r)&&o(e).each((function(o){o(n,e,t),r.stop()}))}(r,a)}),(function(e){a.stop()}))})),ao(yr(),(function(n,o){i(n,o,r,e,t).each((function(e){o.stop()}))}))];return ro(a.toArray().concat(u))}};return a},Vd=function(e){var t=[Kt("onEscape"),Kt("onEnter"),tn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),tn("firstTabstop",0),tn("useTabstopAt",C),Kt("visibilitySelector")].concat([e]),n=function(e,t){var n=e.visibilitySelector.bind((function(e){return ru(t,e)})).getOr(t);return Ea(n)>0},r=function(e,t,r){(function(e,t){var r=Oc(e.element,t.selector),o=W(r,(function(e){return n(t,e)}));return F.from(o[t.firstTabstop])})(e,t).each((function(n){t.focusManager.set(e,n)}))},o=function(e,t,r,o,i){return i(t,r,(function(e){return function(e,t){return n(e,t)&&e.useTabstopAt(t)}(o,e)})).fold((function(){return o.cyclic?F.some(!0):F.none()}),(function(t){return o.focusManager.set(e,t),F.some(!0)}))},i=function(e,t,n,r){var i=Oc(e.element,n.selector);return function(e,t){return t.focusManager.get(e).bind((function(e){return ru(e,t.selector)}))}(e,n).bind((function(t){return K(i,g(Yn,t)).bind((function(t){return o(e,i,t,n,r)}))}))},a=h([Md(Od([Bd,Td(vd)]),(function(e,t,n){var r=n.cyclic?Ed:Ad;return i(e,0,n,r)})),Md(Td(vd),(function(e,t,n){var r=n.cyclic?Dd:kd;return i(e,0,n,r)})),Md(Td(bd),(function(e,t,n){return n.onEscape.bind((function(n){return n(e,t)}))})),Md(Od([Fd,Td(yd)]),(function(e,t,n){return n.onEnter.bind((function(n){return n(e,t)}))}))]),u=h([]);return zd(t,Ei.init,a,u,(function(){return F.some(r)}))},Hd=Vd(fn("cyclic",b)),$d=Vd(fn("cyclic",C)),jd=function(e,t,n){return td(n)&&Td(Cd)(t.event)?F.none():function(e,t,n){return eo(e,n,Or()),F.some(!0)}(e,0,n)},Ud=function(e,t){return F.some(!0)},Wd=[tn("execute",jd),tn("useSpace",!1),tn("useEnter",!0),tn("useControlEnter",!1),tn("useDown",!1)],qd=function(e,t,n){return n.execute(e,t,e.element)},Gd=zd(Wd,Ei.init,(function(e,t,n,r){var o=n.useSpace&&!td(e.element)?Cd:[],i=n.useEnter?yd:[],a=n.useDown?Sd:[],u=o.concat(i).concat(a);return[Md(Td(u),qd)].concat(n.useControlEnter?[Md(Od([Nd,Td(yd)]),qd)]:[])}),(function(e,t,n,r){return n.useSpace&&!td(e.element)?[Md(Td(Cd),Ud)]:[]}),(function(){return F.none()})),Xd=function(){var e=dn(F.none());return Ai({readState:function(){return e.get().map((function(e){return{numRows:String(e.numRows),numColumns:String(e.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,n){e.set(F.some({numRows:t,numColumns:n}))},getNumRows:function(){return e.get().map((function(e){return e.numRows}))},getNumColumns:function(){return e.get().map((function(e){return e.numColumns}))}})},Kd=Object.freeze({__proto__:null,flatgrid:Xd,init:function(e){return e.state(e)}}),Yd=function(e){return function(t,n,r,o){var i=e(t.element);return ep(i,t,n,r,o)}},Jd=function(e,t){var n=Gs(e,t);return Yd(n)},Qd=function(e,t){var n=Gs(t,e);return Yd(n)},Zd=function(e){return function(t,n,r,o){return ep(e,t,n,r,o)}},ep=function(e,t,n,r,o){return r.focusManager.get(t).bind((function(n){return e(t.element,n,r,o)})).map((function(e){return r.focusManager.set(t,e),!0}))},tp=Zd,np=Zd,rp=Zd,op=function(e){return!((t=e.dom).offsetWidth<=0&&t.offsetHeight<=0);var t},ip=function(e,t,n){var r=Oc(e,n);return function(e,t){return K(e,t).map((function(t){return{index:t,candidates:e}}))}(W(r,op),(function(e){return Yn(e,t)}))},ap=function(e,t){return K(e,(function(e){return Yn(t,e)}))},up=function(e,t,n,r){return r(Math.floor(t/n),t%n).bind((function(t){var r=t.row*n+t.column;return r>=0&&r<e.length?F.some(e[r]):F.none()}))},sp=function(e,t,n,r,o){return up(e,t,r,(function(t,i){var a=t===n-1?e.length-t*r:r,u=Fs(i,o,0,a-1);return F.some({row:t,column:u})}))},cp=function(e,t,n,r,o){return up(e,t,r,(function(t,i){var a=Fs(t,o,0,n-1),u=a===n-1?e.length-a*r:r,s=Ms(i,0,u-1);return F.some({row:a,column:s})}))},lp=[Vt("selector"),tn("execute",jd),xu("onEscape"),tn("captureTab",!1),Au()],fp=function(e,t,n){nu(e.element,t.selector).each((function(n){t.focusManager.set(e,n)}))},dp=function(e){return function(t,n,r,o){return ip(t,n,r.selector).bind((function(t){return e(t.candidates,t.index,o.getNumRows().getOr(r.initSize.numRows),o.getNumColumns().getOr(r.initSize.numColumns))}))}},pp=function(e,t,n){return n.captureTab?F.some(!0):F.none()},hp=dp((function(e,t,n,r){return sp(e,t,n,r,-1)})),mp=dp((function(e,t,n,r){return sp(e,t,n,r,1)})),gp=dp((function(e,t,n,r){return cp(e,t,n,r,-1)})),vp=dp((function(e,t,n,r){return cp(e,t,n,r,1)})),yp=h([Md(Td(xd),Jd(hp,mp)),Md(Td(_d),Qd(hp,mp)),Md(Td(wd),tp(gp)),Md(Td(Sd),np(vp)),Md(Od([Bd,Td(vd)]),pp),Md(Od([Fd,Td(vd)]),pp),Md(Td(bd),(function(e,t,n){return n.onEscape(e,t)})),Md(Td(Cd.concat(yd)),(function(e,t,n,r){return function(e,t){return t.focusManager.get(e).bind((function(e){return ru(e,t.selector)}))}(e,n).bind((function(r){return n.execute(e,t,r)}))}))]),bp=h([Md(Td(Cd),Ud)]),Cp=zd(lp,Xd,yp,bp,(function(){return F.some(fp)})),xp=function(e,t,n,r){var o=function(e,t,n){var i,a=Fs(t,r,0,n.length-1);return a===e?F.none():(i=n[a],"button"===bo(i)&&"disabled"===Zo(i,"disabled")?o(e,a,n):F.from(n[a]))};return ip(e,n,t).bind((function(e){var t=e.index,n=e.candidates;return o(t,t,n)}))},wp=[Vt("selector"),tn("getInitial",F.none),tn("execute",jd),xu("onEscape"),tn("executeOnMove",!1),tn("allowVertical",!0)],_p=function(e,t,n){return function(e,t){return t.focusManager.get(e).bind((function(e){return ru(e,t.selector)}))}(e,n).bind((function(r){return n.execute(e,t,r)}))},Sp=function(e,t,n){t.getInitial(e).orThunk((function(){return nu(e.element,t.selector)})).each((function(n){t.focusManager.set(e,n)}))},Ep=function(e,t,n){return xp(e,n.selector,t,-1)},Ap=function(e,t,n){return xp(e,n.selector,t,1)},Dp=function(e){return function(t,n,r,o){return e(t,n,r,o).bind((function(){return r.executeOnMove?_p(t,n,r):F.some(!0)}))}},kp=function(e,t,n){return n.onEscape(e,t)},Tp=h([Md(Td(Cd),Ud)]),Op=zd(wp,Ei.init,(function(e,t,n,r){var o=xd.concat(n.allowVertical?wd:[]),i=_d.concat(n.allowVertical?Sd:[]);return[Md(Td(o),Dp(Jd(Ep,Ap))),Md(Td(i),Dp(Qd(Ep,Ap))),Md(Td(yd),_p),Md(Td(Cd),_p),Md(Td(bd),kp)]}),Tp,(function(){return F.some(Sp)})),Bp=function(e,t,n){return F.from(e[t]).bind((function(e){return F.from(e[n]).map((function(e){return{rowIndex:t,columnIndex:n,cell:e}}))}))},Np=function(e,t,n,r){var o=e[t].length,i=Fs(n,r,0,o-1);return Bp(e,t,i)},Fp=function(e,t,n,r){var o=Fs(n,r,0,e.length-1),i=e[o].length,a=Ms(t,0,i-1);return Bp(e,o,a)},Mp=function(e,t,n,r){var o=e[t].length,i=Ms(n+r,0,o-1);return Bp(e,t,i)},Pp=function(e,t,n,r){var o=Ms(n+r,0,e.length-1),i=e[o].length,a=Ms(t,0,i-1);return Bp(e,o,a)},Ip=[qt("selectors",[Vt("row"),Vt("cell")]),tn("cycles",!0),tn("previousSelector",F.none),tn("execute",jd)],Rp=function(e,t,n){t.previousSelector(e).orThunk((function(){var n=t.selectors;return nu(e.element,n.cell)})).each((function(n){t.focusManager.set(e,n)}))},Lp=function(e,t){return function(n,r,o){var i=o.cycles?e:t;return ru(r,o.selectors.row).bind((function(e){var t=Oc(e,o.selectors.cell);return ap(t,r).bind((function(t){var r=Oc(n,o.selectors.row);return ap(r,e).bind((function(e){var n=function(e,t){return $(e,(function(e){return Oc(e,t.selectors.cell)}))}(r,o);return i(n,e,t).map((function(e){return e.cell}))}))}))}))}},zp=Lp((function(e,t,n){return Np(e,t,n,-1)}),(function(e,t,n){return Mp(e,t,n,-1)})),Vp=Lp((function(e,t,n){return Np(e,t,n,1)}),(function(e,t,n){return Mp(e,t,n,1)})),Hp=Lp((function(e,t,n){return Fp(e,n,t,-1)}),(function(e,t,n){return Pp(e,n,t,-1)})),$p=Lp((function(e,t,n){return Fp(e,n,t,1)}),(function(e,t,n){return Pp(e,n,t,1)})),jp=h([Md(Td(xd),Jd(zp,Vp)),Md(Td(_d),Qd(zp,Vp)),Md(Td(wd),tp(Hp)),Md(Td(Sd),np($p)),Md(Td(Cd.concat(yd)),(function(e,t,n){return Cs(e.element).bind((function(r){return n.execute(e,t,r)}))}))]),Up=h([Md(Td(Cd),Ud)]),Wp=zd(Ip,Ei.init,jp,Up,(function(){return F.some(Rp)})),qp=[Vt("selector"),tn("execute",jd),tn("moveOnTab",!1)],Gp=function(e,t,n){return n.focusManager.get(e).bind((function(r){return n.execute(e,t,r)}))},Xp=function(e,t,n){nu(e.element,t.selector).each((function(n){t.focusManager.set(e,n)}))},Kp=function(e,t,n){return xp(e,n.selector,t,-1)},Yp=function(e,t,n){return xp(e,n.selector,t,1)},Jp=h([Md(Td(wd),rp(Kp)),Md(Td(Sd),rp(Yp)),Md(Od([Bd,Td(vd)]),(function(e,t,n,r){return n.moveOnTab?rp(Kp)(e,t,n,r):F.none()})),Md(Od([Fd,Td(vd)]),(function(e,t,n,r){return n.moveOnTab?rp(Yp)(e,t,n,r):F.none()})),Md(Td(yd),Gp),Md(Td(Cd),Gp)]),Qp=h([Md(Td(Cd),Ud)]),Zp=zd(qp,Ei.init,Jp,Qp,(function(){return F.some(Xp)})),eh=[xu("onSpace"),xu("onEnter"),xu("onShiftEnter"),xu("onLeft"),xu("onRight"),xu("onTab"),xu("onShiftTab"),xu("onUp"),xu("onDown"),xu("onEscape"),tn("stopSpaceKeyup",!1),Kt("focusIn")],th=zd(eh,Ei.init,(function(e,t,n){return[Md(Td(Cd),n.onSpace),Md(Od([Fd,Td(yd)]),n.onEnter),Md(Od([Bd,Td(yd)]),n.onShiftEnter),Md(Od([Bd,Td(vd)]),n.onShiftTab),Md(Od([Fd,Td(vd)]),n.onTab),Md(Td(wd),n.onUp),Md(Td(Sd),n.onDown),Md(Td(xd),n.onLeft),Md(Td(_d),n.onRight),Md(Td(Cd),n.onSpace),Md(Td(bd),n.onEscape)]}),(function(e,t,n){return n.stopSpaceKeyup?[Md(Td(Cd),Ud)]:[]}),(function(e){return e.focusIn})),nh=Hd.schema(),rh=$d.schema(),oh=Op.schema(),ih=Cp.schema(),ah=Wp.schema(),uh=Gd.schema(),sh=Zp.schema(),ch=th.schema(),lh=hs({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:nh,cyclic:rh,flow:oh,flatgrid:ih,matrix:ah,execution:uh,menu:sh,special:ch}),name:"keying",active:{events:function(e,t){return e.handler.toEvents(e,t)}},apis:{focusIn:function(e,t,n){t.sendFocusIn(t).fold((function(){e.getSystem().triggerFocus(e.element,e.element)}),(function(r){r(e,t,n)}))},setGridSize:function(e,t,n,r,o){(function(e){return Fe(e,"setGridSize")})(n)&&n.setGridSize(r,o)}},state:Kd}),fh=function(e,t,n,r){var o=e.getSystem().build(r);ll(e,o,n)},dh=function(e,t,n,r){var o=ph(e);X(o,(function(e){return Yn(r.element,e.element)})).each(dl)},ph=function(e,t){return e.components()},hh=function(e,t,n,r,o){var i=ph(e);return F.from(i[r]).map((function(t){return dh(e,0,0,t),o.each((function(t){fh(e,0,(function(e,t){var n,o;o=t,No(n=e,r).fold((function(){Uo(n,o)}),(function(e){Ho(e,o)}))}),t)})),t}))},mh=ds({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(e,t,n,r){fh(e,0,Uo,r)},prepend:function(e,t,n,r){fh(e,0,jo,r)},remove:dh,replaceAt:hh,replaceBy:function(e,t,n,r,o){var i=ph(e);return K(i,r).bind((function(t){return hh(e,0,0,t,o)}))},set:function(e,t,n,r){xs((function(){var t=$(r,e.getSystem().build);sl(e,t)}),e.element)},contents:ph})}),gh=function(e,t){return{key:e,value:{config:{},me:function(e,t){var n=ro(t);return ds({fields:[Vt("enabled")],name:e,active:{events:h(n)}})}(e,t),configAsRaw:h({}),initialConfig:{},state:Ei}}},vh=function(e,t){t.ignore||(ys(e.element),t.onFocus(e))},yh=Object.freeze({__proto__:null,focus:vh,blur:function(e,t){t.ignore||e.element.dom.blur()},isFocused:function(e){return t=e.element,n=Io(t).dom,t.dom===n.activeElement;var t,n}}),bh=Object.freeze({__proto__:null,exhibit:function(e,t){var n=t.ignore?{}:{attributes:{tabindex:"-1"}};return ki(n)},events:function(e){return ro([ao(Ar(),(function(t,n){vh(t,e),n.stop()}))].concat(e.stopMousedown?[ao(lr(),(function(e,t){t.event.prevent()}))]:[]))}}),Ch=[Cu("onFocus"),tn("stopMousedown",!1),tn("ignore",!1)],xh=ds({fields:Ch,name:"focusing",active:bh,apis:yh}),wh=function(e,t,n){var r=t.aria;r.update(e,r,n.get())},_h=function(e,t,n){t.toggleClass.each((function(t){n.get()?Hi(e.element,t):ji(e.element,t)}))},Sh=function(e,t,n){Dh(e,t,n,!n.get())},Eh=function(e,t,n){n.set(!0),_h(e,t,n),wh(e,t,n)},Ah=function(e,t,n){n.set(!1),_h(e,t,n),wh(e,t,n)},Dh=function(e,t,n,r){(r?Eh:Ah)(e,t,n)},kh=function(e,t,n){Dh(e,t,n,t.selected)},Th=Object.freeze({__proto__:null,onLoad:kh,toggle:Sh,isOn:function(e,t,n){return n.get()},on:Eh,off:Ah,set:Dh}),Oh=Object.freeze({__proto__:null,exhibit:function(){return ki({})},events:function(e,t){var n,r,o,i=(n=e,r=t,o=Sh,yo((function(e){o(e,n,r)}))),a=as(e,t,kh);return ro(Y([e.toggleOnExecute?[i]:[],[a]]))}}),Bh=function(e,t,n){Qo(e.element,"aria-expanded",n)},Nh=[tn("selected",!1),Kt("toggleClass"),tn("toggleOnExecute",!0),nn("aria",{mode:"none"},Ot("mode",{pressed:[tn("syncWithExpanded",!1),Su("update",(function(e,t,n){Qo(e.element,"aria-pressed",n),t.syncWithExpanded&&Bh(e,t,n)}))],checked:[Su("update",(function(e,t,n){Qo(e.element,"aria-checked",n)}))],expanded:[Su("update",Bh)],selected:[Su("update",(function(e,t,n){Qo(e.element,"aria-selected",n)}))],none:[Su("update",d)]}))],Fh=ds({fields:Nh,name:"toggling",active:Oh,apis:Th,state:(Ld=!1,{init:function(){var e=dn(Ld);return{get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(Ld)},readState:function(){return e.get()}}}})}),Mh=function(){var e=function(e,t){t.stop(),Zr(e)};return[ao(xr(),e),ao(Nr(),e),fo(ar()),fo(lr())]},Ph=function(e){return ro(Y([e.map((function(e){return yo((function(t,n){e(t),n.stop()}))})).toArray(),Mh()]))},Ih="alloy.item-hover",Rh="alloy.item-focus",Lh=function(e){(Cs(e.element).isNone()||xh.isFocused(e))&&(xh.isFocused(e)||xh.focus(e),Qr(e,Ih,{item:e}))},zh=function(e){Qr(e,Rh,{item:e})},Vh=h(Ih),Hh=h(Rh),$h=[Vt("data"),Vt("components"),Vt("dom"),tn("hasSubmenu",!1),Kt("toggling"),Yl("itemBehaviours",[Fh,xh,lh,ql]),tn("ignoreFocus",!1),tn("domModification",{}),Su("builder",(function(e){return{dom:e.dom,domModification:w(w({},e.domModification),{attributes:w(w(w({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Jl(e.itemBehaviours,[e.toggling.fold(Fh.revoke,(function(e){return Fh.config(w({aria:{mode:"checked"}},e))})),xh.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(e){zh(e)}}),lh.config({mode:"execution"}),ql.config({store:{mode:"memory",initialValue:e.data}}),gh("item-type-events",S(Mh(),[ao(hr(),Lh),ao(Br(),xh.focus)]))]),components:e.components,eventOrder:e.eventOrder}})),tn("eventOrder",{})],jh=[Vt("dom"),Vt("components"),Su("builder",(function(e){return{dom:e.dom,components:e.components,events:ro([po(Br())])}}))],Uh=h("item-widget"),Wh=h([_f({name:"widget",overrides:function(e){return{behaviours:ls([ql.config({store:{mode:"manual",getValue:function(t){return e.data},setValue:d}})])}}})]),qh=[Vt("uid"),Vt("data"),Vt("components"),Vt("dom"),tn("autofocus",!1),tn("ignoreFocus",!1),Yl("widgetBehaviours",[ql,xh,lh]),tn("domModification",{}),Uf(Wh()),Su("builder",(function(e){var t=Pf(Uh(),e,Wh()),n=If(Uh(),e,t.internals()),r=function(t){return Rf(t,e,"widget").map((function(e){return lh.focusIn(e),e}))},o=function(t,n){return td(n.event.target)?F.none():e.autofocus?(n.setSource(t.element),F.none()):F.none()};return{dom:e.dom,components:n,domModification:e.domModification,events:ro([yo((function(e,t){r(e).each((function(e){t.stop()}))})),ao(hr(),Lh),ao(Br(),(function(t,n){e.autofocus?r(t):xh.focus(t)}))]),behaviours:Jl(e.widgetBehaviours,[ql.config({store:{mode:"memory",initialValue:e.data}}),xh.config({ignore:e.ignoreFocus,onFocus:function(e){zh(e)}}),lh.config({mode:"special",focusIn:e.autofocus?function(e){r(e)}:ms(),onLeft:o,onRight:o,onEscape:function(t,n){return xh.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),F.none()):F.none():(xh.focus(t),F.some(!0))}})])}}))],Gh=Ot("type",{widget:qh,item:$h,separator:jh}),Xh=h([Af({factory:{sketch:function(e){var t=Dt("menu.spec item",Gh,e);return t.builder(t)}},name:"items",unit:"item",defaults:function(e,t){return t.hasOwnProperty("uid")?t:w(w({},t),{uid:gi("item")})},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),Kh=h([Vt("value"),Vt("items"),Vt("dom"),Vt("components"),tn("eventOrder",{}),Gl("menuBehaviours",[md,ql,od,lh]),nn("movement",{mode:"menu",moveOnTab:!0},Ot("mode",{grid:[Au(),Su("config",(function(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}}))],matrix:[Su("config",(function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}})),Vt("rowSelector")],menu:[tn("moveOnTab",!0),Su("config",(function(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}}))]})),Ht("markers",mu()),tn("fakeFocus",!1),tn("focusManager",Id()),Cu("onHighlight")]),Yh=h("alloy.menu-focus"),Jh=Qf({name:"Menu",configFields:Kh(),partFields:Xh(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Kl(e.menuBehaviours,[md.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),ql.config({store:{mode:"memory",initialValue:e.value}}),od.config({find:F.some}),lh.config(e.movement.config(e,e.movement))]),events:ro([ao(Hh(),(function(e,t){var n=t.event;e.getSystem().getByDom(n.target).each((function(n){md.highlight(e,n),t.stop(),Qr(e,Yh(),{menu:e,item:n})}))})),ao(Vh(),(function(e,t){var n=t.event.item;md.highlight(e,n)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Qh=function(e,t,n,r){return Be(n,r).bind((function(r){return Be(e,r).bind((function(r){var o=Qh(e,t,n,r);return F.some([r].concat(o))}))})).getOr([])},Zh=function(e,t){var n={};Se(e,(function(e,t){j(e,(function(e){n[e]=t}))}));var r=t,o=Ae(t,(function(e,t){return{k:e,v:t}})),i=Ee(o,(function(e,t){return[t].concat(Qh(n,r,o,t))}));return Ee(n,(function(e){return Be(i,e).getOr([e])}))},em=function(e){return"prepared"===e.type?F.some(e.menu):F.none()},tm={init:function(){var e=dn({}),t=dn({}),n=dn({}),r=dn(F.none()),o=dn({}),i=function(t,n,r){return a(t).bind((function(o){return function(t){return Te(e.get(),(function(e,n){return e===t}))}(t).bind((function(e){return n(e).map((function(e){return{triggeredMenu:o,triggeringItem:e,triggeringPath:r}}))}))}))},a=function(e){return u(e).bind(em)},u=function(e){return Be(t.get(),e)},s=function(t){return Be(e.get(),t)};return{setMenuBuilt:function(e,n){var r;t.set(w(w({},t.get()),((r={})[e]={type:"prepared",menu:n},r)))},setContents:function(i,a,u,s){r.set(F.some(i)),e.set(u),t.set(a),o.set(s);var c=Zh(s,u);n.set(c)},expand:function(t){return Be(e.get(),t).map((function(e){var r=Be(n.get(),t).getOr([]);return[e].concat(r)}))},refresh:function(e){return Be(n.get(),e)},collapse:function(e){return Be(n.get(),e).bind((function(e){return e.length>1?F.some(e.slice(1)):F.none()}))},lookupMenu:u,lookupItem:s,otherMenus:function(e){var t=o.get();return ee(we(t),e)},getPrimary:function(){return r.get().bind(a)},getMenus:function(){return t.get()},clear:function(){e.set({}),t.set({}),n.set({}),r.set(F.none())},isClear:function(){return r.get().isNone()},getTriggeringPath:function(e,t){var o=W(s(e).toArray(),(function(e){return a(e).isSome()}));return Be(n.get(),e).bind((function(e){var n=Z(o.concat(e));return function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.isSome())return F.none();t.push(r.getOrDie())}return F.some(t)}(J(n,(function(e,o){return i(e,t,n.slice(0,o+1)).fold((function(){return r.get().is(e)?[]:[F.none()]}),(function(e){return[F.some(e)]}))})))}))}}},extractPreparedMenu:em},nm=h("collapse-item"),rm=Jf({name:"TieredMenu",configFields:[_u("onExecute"),_u("onEscape"),wu("onOpenMenu"),wu("onOpenSubmenu"),Cu("onRepositionMenu"),Cu("onCollapseMenu"),tn("highlightImmediately",!0),qt("data",[Vt("primary"),Vt("menus"),Vt("expansions")]),tn("fakeFocus",!1),Cu("onHighlight"),Cu("onHover"),vu(),Vt("dom"),tn("navigateOnHover",!0),tn("stayInDom",!1),Gl("tmenuBehaviours",[lh,md,od,mh]),tn("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)},repositionMenus:function(e,t){e.repositionMenus(t)}},factory:function(e,t){var n,r,o=dn(F.none()),i=tm.init(),a=function(t){var n=function(t,n,r){return Ee(r,(function(r,o){var i=function(){return Jh.sketch(w(w({},r),{value:o,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?Rd():Id()}))};return o===n?{type:"prepared",menu:t.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))}(t,e.data.primary,e.data.menus),r=s();return i.setContents(e.data.primary,n,e.data.expansions,r),i.getPrimary()},u=function(e){return ql.getValue(e).value},s=function(t){return Ee(e.data.menus,(function(e,t){return J(e.items,(function(e){return"separator"===e.type?[]:[e.data.value]}))}))},c=function(e,t){md.highlight(e,t),md.getHighlighted(t).orThunk((function(){return md.getFirst(t)})).each((function(t){eo(e,t.element,Br())}))},l=function(e,t){return Zf($(t,(function(t){return e.lookupMenu(t).bind((function(e){return"prepared"===e.type?F.some(e.menu):F.none()}))})))},f=function(t,n,r){var o=l(n,n.otherMenus(r));j(o,(function(n){qi(n.element,[e.markers.backgroundMenu]),e.stayInDom||mh.remove(t,n)}))},p=function(t,n){var r=function(t){return o.get().getOrThunk((function(){var n={},r=Oc(t.element,"."+e.markers.item),i=W(r,(function(e){return"true"===Zo(e,"aria-haspopup")}));return j(i,(function(e){t.getSystem().getByDom(e).each((function(e){var t=u(e);n[t]=e}))})),o.set(F.some(n)),n}))}(t);Se(r,(function(e,t){var r=L(n,t);Qo(e.element,"aria-expanded",r)}))},h=function(t,n,r){return F.from(r[0]).bind((function(o){return n.lookupMenu(o).bind((function(o){if("notbuilt"===o.type)return F.none();var i=o.menu,a=l(n,r.slice(1));return j(a,(function(t){Hi(t.element,e.markers.backgroundMenu)})),Xi(i.element)||mh.append(t,wa(i)),qi(i.element,[e.markers.backgroundMenu]),c(t,i),f(t,n,r),F.some(i)}))}))};(r=n||(n={}))[r.HighlightSubmenu=0]="HighlightSubmenu",r[r.HighlightParent=1]="HighlightParent";var m=function(t,r,o){void 0===o&&(o=n.HighlightSubmenu);var a=u(r);return i.expand(a).bind((function(a){return p(t,a),F.from(a[0]).bind((function(u){return i.lookupMenu(u).bind((function(s){var c=function(e,t,n){if("notbuilt"===n.type){var r=e.getSystem().build(n.nbMenu());return i.setMenuBuilt(t,r),r}return n.menu}(t,u,s);return Xi(c.element)||mh.append(t,wa(c)),e.onOpenSubmenu(t,r,c,Z(a)),o===n.HighlightSubmenu?(md.highlightFirst(c),h(t,i,a)):(md.dehighlightAll(c),F.some(r))}))}))}))},g=function(t,n){var r=u(n);return i.collapse(r).bind((function(r){return p(t,r),h(t,i,r).map((function(r){return e.onCollapseMenu(t,n,r),r}))}))},v=function(t){return function(n,r){return ru(r.getSource(),"."+e.markers.item).bind((function(e){return n.getSystem().getByDom(e).toOptional().bind((function(e){return t(n,e).map(C)}))}))}},y=ro([ao(Yh(),(function(e,t){var n=t.event.item;i.lookupItem(u(n)).each((function(){var n=t.event.menu;md.highlight(e,n);var r=u(t.event.item);i.refresh(r).each((function(t){return f(e,i,t)}))}))})),yo((function(t,r){var o=r.event.target;t.getSystem().getByDom(o).each((function(r){0===u(r).indexOf("collapse-item")&&g(t,r),m(t,r,n.HighlightSubmenu).fold((function(){e.onExecute(t,r)}),d)}))})),mo((function(t,n){a(t).each((function(n){mh.append(t,wa(n)),e.onOpenMenu(t,n),e.highlightImmediately&&c(t,n)}))}))].concat(e.navigateOnHover?[ao(Vh(),(function(t,r){var o=r.event.item;!function(e,t){var n=u(t);i.refresh(n).bind((function(t){return p(e,t),h(e,i,t)}))}(t,o),m(t,o,n.HighlightParent),e.onHover(t,o)}))]:[])),b=function(e){return md.getHighlighted(e).bind(md.getHighlighted)},x={collapseMenu:function(e){b(e).each((function(t){g(e,t)}))},highlightPrimary:function(e){i.getPrimary().each((function(t){c(e,t)}))},repositionMenus:function(t){i.getPrimary().bind((function(e){return b(t).bind((function(e){var t=u(e),n=Oe(i.getMenus()),r=Zf($(n,tm.extractPreparedMenu));return i.getTriggeringPath(t,(function(e){return function(e,t,n){return ae(t,(function(e){if(!e.getSystem().isConnected())return F.none();var t=md.getCandidates(e);return X(t,(function(e){return u(e)===n}))}))}(0,r,e)}))})).map((function(t){return{primary:e,triggeringPath:t}}))})).fold((function(){(function(e){return F.from(e.components()[0]).filter((function(e){return"menu"===Zo(e.element,"role")}))})(t).each((function(n){e.onRepositionMenu(t,n,[])}))}),(function(n){var r=n.primary,o=n.triggeringPath;e.onRepositionMenu(t,r,o)}))}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Kl(e.tmenuBehaviours,[lh.config({mode:"special",onRight:v((function(e,t){return td(t.element)?F.none():m(e,t,n.HighlightSubmenu)})),onLeft:v((function(e,t){return td(t.element)?F.none():g(e,t)})),onEscape:v((function(t,n){return g(t,n).orThunk((function(){return e.onEscape(t,n).map((function(){return t}))}))})),focusIn:function(e,t){i.getPrimary().each((function(t){eo(e,t.element,Br())}))}}),md.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),od.config({find:function(e){return md.getHighlighted(e)}}),mh.config({})]),eventOrder:e.eventOrder,apis:x,events:y}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:Ye(e,t),expansions:{}}},collapseItem:function(e){return{value:ci(nm()),meta:{text:e}}}}}),om=Jf({name:"InlineView",configFields:[Vt("lazySink"),Cu("onShow"),Cu("onHide"),Zt("onEscape"),Gl("inlineBehaviours",[Al,ql,gs]),en("fireDismissalEventInstead",[tn("event",jr())]),en("fireRepositionEventInstead",[tn("event",Ur())]),tn("getRelated",F.none),tn("isExtraPart",b),tn("eventOrder",F.none)],factory:function(e,t){var n=function(e,t,n,o){r(e,t,n,(function(){return o.map((function(e){return qa(e)}))}))},r=function(t,n,r,o){var i=e.lazySink(t).getOrDie();Al.openWhileCloaked(t,r,(function(){return ol.positionWithinBounds(i,n,t,o())})),ql.setValue(t,F.some({mode:"position",anchor:n,getBounds:o}))},o=function(t,n,r,o){var i=function(e,t,n,r,o){var i=function(){return e.lazySink(t)},a="horizontal"===r.type?{layouts:{onLtr:function(){return ns()},onRtl:function(){return rs()}}}:{},u=function(e){return function(e){return 2===e.length}(e)?a:{}};return rm.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,highlightImmediately:r.menu.highlightImmediately,onEscape:function(){return Al.close(t),e.onEscape.map((function(e){return e(t)})),F.some(!0)},onExecute:function(){return F.some(!0)},onOpenMenu:function(e,t){ol.positionWithinBounds(i().getOrDie(),n,t,o())},onOpenSubmenu:function(e,t,n,r){var o=i().getOrDie();ol.position(o,w({anchor:"submenu",item:t},u(r)),n)},onRepositionMenu:function(e,t,r){var a=i().getOrDie();ol.positionWithinBounds(a,n,t,o()),j(r,(function(e){var t=u(e.triggeringPath);ol.position(a,w({anchor:"submenu",item:e.triggeringItem},t),e.triggeredMenu)}))}})}(e,t,n,r,o);Al.open(t,i),ql.setValue(t,F.some({mode:"menu",menu:i}))},i=function(t){Al.isOpen(t)&&ql.getValue(t).each((function(n){switch(n.mode){case"menu":Al.getState(t).each((function(e){rm.repositionMenus(e)}));break;case"position":var r=e.lazySink(t).getOrDie();ol.positionWithinBounds(r,n.anchor,t,n.getBounds())}}))},a={setContent:function(e,t){Al.setContent(e,t)},showAt:function(e,t,r){n(e,t,r,F.none())},showWithin:n,showWithinBounds:r,showMenuAt:function(e,t,n){o(e,t,n,(function(){return F.none()}))},showMenuWithinBounds:o,hide:function(e){Al.isOpen(e)&&(ql.setValue(e,F.none()),Al.close(e))},getContent:function(e){return Al.getState(e)},reposition:i,isOpen:Al.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Kl(e.inlineBehaviours,[Al.config({isPartOf:function(t,n,r){return au(n,r)||function(t,n){return e.getRelated(t).exists((function(e){return au(e,n)}))}(t,r)},getAttachPoint:function(t){return e.lazySink(t).getOrDie()},onOpen:function(t){e.onShow(t)},onClose:function(t){e.onHide(t)}}),ql.config({store:{mode:"memory",initialValue:F.none()}}),gs.config({channels:w(w({},Bl(w({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map((function(e){return{fireEventInstead:{event:e.event}}})).getOr({})))),Fl(w(w({},e.fireRepositionEventInstead.map((function(e){return{fireEventInstead:{event:e.event}}})).getOr({})),{doReposition:i})))})]),eventOrder:e.eventOrder,apis:a}},apis:{showAt:function(e,t,n,r){e.showAt(t,n,r)},showWithin:function(e,t,n,r,o){e.showWithin(t,n,r,o)},showWithinBounds:function(e,t,n,r,o){e.showWithinBounds(t,n,r,o)},showMenuAt:function(e,t,n,r){e.showMenuAt(t,n,r)},showMenuWithinBounds:function(e,t,n,r,o){e.showMenuWithinBounds(t,n,r,o)},hide:function(e,t){e.hide(t)},isOpen:function(e,t){return e.isOpen(t)},getContent:function(e,t){return e.getContent(t)},setContent:function(e,t,n){e.setContent(t,n)},reposition:function(e,t){e.reposition(t)}}}),im=function(e){return e.x},am=function(e,t){return e.x+e.width/2-t.width/2},um=function(e,t){return e.x+e.width-t.width},sm=function(e){return e.y},cm=function(e,t){return e.y+e.height-t.height},lm=function(e,t,n){return Du(um(e,t),cm(e,t),n.innerSoutheast(),Nu(),Ru(e,{right:0,bottom:3}),"layout-inner-se")},fm=function(e,t,n){return Du(im(e),cm(e,t),n.innerSouthwest(),Bu(),Ru(e,{left:1,bottom:3}),"layout-inner-sw")},dm=function(e,t,n){return Du(um(e,t),sm(e),n.innerNortheast(),Ou(),Ru(e,{right:0,top:2}),"layout-inner-ne")},pm=function(e,t,n){return Du(im(e),sm(e),n.innerNorthwest(),Tu(),Ru(e,{left:1,top:2}),"layout-inner-nw")},hm=function(e,t,n){return Du(am(e,t),sm(e),n.innerNorth(),Fu(),Ru(e,{top:2}),"layout-inner-n")},mm=function(e,t,n){return Du(am(e,t),cm(e,t),n.innerSouth(),Mu(),Ru(e,{bottom:3}),"layout-inner-s")},gm=tinymce.util.Tools.resolve("tinymce.util.Delay"),vm=Jf({name:"Button",factory:function(e){var t=Ph(e.action),n=e.dom.tag,r=function(t){return Be(e.dom,"attributes").bind((function(e){return Be(e,t)}))};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Jl(e.buttonBehaviours,[xh.config({}),lh.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===n){var e=r("type").getOr("button"),t=r("role").map((function(e){return{role:e}})).getOr({});return w({type:e},t)}return{role:r("role").getOr("button")}}()},eventOrder:e.eventOrder}},configFields:[tn("uid",void 0),Vt("dom"),tn("components",[]),Yl("buttonBehaviours",[xh,lh]),Kt("action"),Kt("role"),tn("eventOrder",{})]}),ym=function(e){var t=function(e){return void 0!==e.uid}(e)&&Fe(e,"uid")?e.uid:gi("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).toOptional()},asSpec:function(){return w(w({},e),{uid:t})}}},bm=function(e){return F.from(e()["temporary-placeholder"]).getOr("!not found!")},Cm=function(e,t){return F.from(t()[e.toLowerCase()]).getOrThunk((function(){return bm(t)}))},xm={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},wm=Jf({name:"Notification",factory:function(e){var t,n,r=ym({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:ls([mh.config({})])}),o=function(e){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+e+"%"}}}},i=function(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}},a=ym({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},i(0)],behaviours:ls([mh.config({})])}),u={updateProgress:function(e,t){e.getSystem().isConnected()&&a.getOpt(e).each((function(e){mh.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(t)]},i(t)])}))},updateText:function(e,t){if(e.getSystem().isConnected()){var n=r.get(e);mh.set(n,[ya(t)])}}},s=Y([e.icon.toArray(),e.level.toArray(),e.level.bind((function(e){return F.from(xm[e])})).toArray()]),c=ym(vm.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:Cm("close",e.iconProvider),attributes:{"aria-label":e.translationProvider("Close")}}}],action:function(t){e.onAction(t)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=s,n=e.iconProvider,ae(t,(function(e){return F.from(n()[e.toLowerCase()])})).getOrThunk((function(){return bm(n)})))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:ls([mh.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((function(e){return["tox-notification","tox-notification--in","tox-notification--"+e]})).getOr(["tox-notification","tox-notification--in"])},behaviours:ls([xh.config({}),gh("notification-events",[ao(mr(),(function(e){c.getOpt(e).each(xh.focus)}))])]),components:l.concat(e.progress?[a.asSpec()]:[]).concat(e.closeButton?[c.asSpec()]:[]),apis:u}},configFields:[Kt("level"),Vt("progress"),Vt("icon"),Vt("onAction"),Vt("text"),Vt("iconProvider"),Vt("translationProvider"),un("closeButton",!0)],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,n){e.updateText(t,n)}}});function _m(e,t,n){var r=t.backstage;return{open:function(e,o){var i=!e.closeButton&&e.timeout&&(e.timeout>0||e.timeout<0),a=function(){o(),om.hide(s)},u=xa(wm.sketch({text:e.text,level:L(["success","error","warning","warn","info"],e.type)?e.type:void 0,progress:!0===e.progressBar,icon:F.from(e.icon),closeButton:!i,onAction:a,iconProvider:r.shared.providers.icons,translationProvider:r.shared.providers.translate})),s=xa(om.sketch(w({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:t.backstage.shared.getSink,fireDismissalEventInstead:{}},r.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(s),e.timeout>0&&gm.setTimeout((function(){a()}),e.timeout),{close:a,moveTo:function(e,t){om.showAt(s,{anchor:"makeshift",x:e,y:t},wa(u))},moveRel:function(e,n){if("banner"!==n){var r=function(e){switch(e){case"bc-bc":return mm;case"tc-tc":return hm;case"tc-bc":return Xu;case"bc-tc":default:return Ku}}(n),o={anchor:"node",root:Ki(),node:F.some(hn.fromDom(e)),layouts:{onRtl:function(){return[r]},onLtr:function(){return[r]}}};om.showAt(s,o,wa(u))}else om.showAt(s,t.backstage.shared.anchors.banner(),wa(u))},text:function(e){wm.updateText(u,e)},settings:e,getEl:function(){return u.element.dom},progressBar:{value:function(e){wm.updateProgress(u,e)}}}},close:function(e){e.close()},reposition:function(e){!function(e){j(e,(function(e){return e.moveTo(0,0)}))}(e),function(e){e.length>0&&(re(e).each((function(e){return e.moveRel(null,"banner")})),j(e,(function(t,n){n>0&&t.moveRel(e[n-1].getEl(),"bc-tc")})))}(e)},getArgs:function(e){return e.settings}}}var Sm,Em,Am=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout((function(){e.apply(null,r),n=null}),t)}}},Dm=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),km=function(e,t,n,r,o){var i=Dm(e,(function(t){return function(e,t){return e.isBlock(t)||L(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t)}(e,t)}));return F.from(i.backwards(t,n,r,o))},Tm=function(e,t){return Om(hn.fromDom(e.selection.getNode())).getOrThunk((function(){var n,r=hn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());return Uo(r,hn.fromDom(t.extractContents())),t.insertNode(r.dom),To(r).each((function(e){return e.dom.normalize()})),(n=r,Tc(n,kc)).map((function(t){e.selection.setCursorLocation(t.dom,function(e){return"img"===bo(e)?1:Ac(e).fold((function(){return Bo(e).length}),(function(e){return e.length}))}(t))})),r}))},Om=function(e){return ru(e,"[data-mce-autocompleter]")},Bm=function(e){return e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Nm=function(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},Fm=function(e,t){return e.substring(t.length)},Mm=function(e,t,n,r){if(void 0===r&&(r=0),!(o=t).collapsed||3!==o.startContainer.nodeType)return F.none();var o,i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return km(e,t.startContainer,t.startOffset,(function(e,t,r){return function(e,t,n){var r;for(r=t-1;r>=0;r--){var o=e.charAt(r);if(Nm(o))return F.none();if(o===n)break}return F.some(r)}(r,t,n).getOr(t)}),i).bind((function(e){var o=t.cloneRange();if(o.setStart(e.container,e.offset),o.setEnd(t.endContainer,t.endOffset),o.collapsed)return F.none();var i=Bm(o);return 0!==i.lastIndexOf(n)||Fm(i,n).length<r?F.none():F.some({text:Fm(i,n),range:o,triggerChar:n})}))},Pm=function(e,t,n,r){return void 0===r&&(r=0),Om(hn.fromDom(t.startContainer)).fold((function(){return Mm(e,t,n,r)}),(function(t){var r=e.createRng();r.selectNode(t.dom);var o=Bm(r);return F.some({range:r,text:Fm(o,n),triggerChar:n})}))},Im=function(e,t){t.on("keypress compositionend",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel);var n=function(e,t){Qr(e,vr(),{raw:t})};t.on("keydown",(function(t){var r=function(){return e.getView().bind(md.getHighlighted)};8===t.which&&e.onKeypress.throttle(t),e.isActive()&&(27===t.which&&e.cancelIfNecessary(),e.isMenuOpen()?13===t.which?(r().each(Zr),t.preventDefault()):40===t.which?(r().fold((function(){e.getView().each(md.highlightFirst)}),(function(e){n(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||r().each((function(e){n(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==t.which&&38!==t.which&&40!==t.which||e.cancelIfNecessary())})),t.on("NodeChange",(function(t){e.isActive()&&!e.isProcessingAction()&&Om(hn.fromDom(t.element)).isNone()&&e.cancelIfNecessary()}))},Rm=tinymce.util.Tools.resolve("tinymce.util.Promise"),Lm=function(e,t){return{container:e,offset:t}},zm=function(e){if(function(e){return 3===e.nodeType}(e))return Lm(e,e.data.length);var t=e.childNodes;return t.length>0?zm(t[t.length-1]):Lm(e,t.length)},Vm=function(e,t){var n=e.childNodes;return n.length>0&&t<n.length?Vm(n[t],0):n.length>0&&function(e){return 1===e.nodeType}(e)&&n.length===t?zm(n[n.length-1]):Lm(e,t)},Hm=function(e){return function(t){var n=Vm(t.startContainer,t.startOffset);return!function(e,t){return km(e,t.container,t.offset,(function(e,t){return 0===t?-1:t}),e.getRoot()).filter((function(e){var t=e.container.data.charAt(e.offset-1);return!Nm(t)})).isSome()}(e,n)}},$m=function(e,t){var n=t(),r=e.selection.getRng();return function(e,t,n){return ae(n.triggerChars,(function(n){return Pm(e,t,n)}))}(e.dom,r,n).bind((function(n){return jm(e,t,n)}))},jm=function(e,t,n,r){void 0===r&&(r={});var o=t(),i=e.selection.getRng().startContainer.nodeValue,a=W(o.lookupByChar(n.triggerChar),(function(t){return n.text.length>=t.minChars&&t.matches.getOrThunk((function(){return Hm(e.dom)}))(n.range,i,n.text)}));if(0===a.length)return F.none();var u=Rm.all($(a,(function(e){return e.fetch(n.text,e.maxResults,r).then((function(t){return{matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}}))})));return F.some({lookupData:u,context:n})},Um=lt([jt("type"),Qt("text")]),Wm=lt([tn("type","autocompleteitem"),tn("active",!1),tn("disabled",!1),tn("meta",{}),jt("value"),Qt("text"),Qt("icon")]),qm=lt([jt("type"),jt("ch"),rn("minChars",1),tn("columns",1),rn("maxResults",10),Zt("matches"),Wt("fetch"),Wt("onAction"),cn("highlightOn",[],Mt)]),Gm=[un("disabled",!1),Qt("tooltip"),Qt("icon"),Qt("text"),sn("onSetup",(function(){return d}))],Xm=lt([jt("type"),Wt("onAction")].concat(Gm)),Km=function(e){return Et("toolbarbutton",Xm,e)},Ym=[un("active",!1)].concat(Gm),Jm=lt(Ym.concat([jt("type"),Wt("onAction")])),Qm=function(e){return Et("ToggleButton",Jm,e)},Zm=[sn("predicate",b),an("scope","node",["node","editor"]),an("position","selection",["node","selection","line"])],eg=Gm.concat([tn("type","contextformbutton"),tn("primary",!1),Wt("onAction"),fn("original",m)]),tg=Ym.concat([tn("type","contextformbutton"),tn("primary",!1),Wt("onAction"),fn("original",m)]),ng=Gm.concat([tn("type","contextformbutton")]),rg=Ym.concat([tn("type","contextformtogglebutton")]),og=Ot("type",{contextformbutton:eg,contextformtogglebutton:tg}),ig=lt([tn("type","contextform"),sn("initValue",(function(){return""})),Qt("label"),Xt("commands",og),Yt("launch",Ot("type",{contextformbutton:ng,contextformtogglebutton:rg}))].concat(Zm)),ag=lt([tn("type","contexttoolbar"),jt("items")].concat(Zm)),ug=function(e){var t,n,r=e.ui.registry.getAll().popups,o=Ee(r,(function(e){return(t=e,Et("Autocompleter",qm,t)).fold((function(e){throw new Error(kt(e))}),(function(e){return e}));var t})),i=(t=ke(o,(function(e){return e.ch})),n={},j(t,(function(e){n[e]={}})),we(n)),a=Oe(o);return{dataset:o,triggerChars:i,lookupByChar:function(e){return W(a,(function(t){return t.ch===e}))}}};(Em=Sm||(Sm={}))[Em.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Em[Em.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var sg,cg,lg=Sm,fg="tox-menu-nav__js",dg="tox-collection__item",pg="tox-swatch",hg={normal:fg,color:pg},mg="tox-collection__item--enabled",gg="tox-collection__item-label",vg="tox-collection__item-caret",yg="tox-collection__item--active",bg="tox-collection__item-container",Cg="tox-collection__item-container--row",xg=function(e){return Be(hg,e).getOr(fg)},wg=function(e){return"color"===e?"tox-swatches":"tox-menu"},_g=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:wg(e),tieredMenu:"tox-tiered-menu"}},Sg=function(e){var t=_g(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:xg(e)}},Eg=function(e,t,n){var r=_g(n);return{tag:"div",classes:Y([[r.menu,"tox-menu-"+t+"-column"],e?[r.hasIcons]:[]])}},Ag=[Jh.parts.items({})],Dg=function(e,t,n){var r=_g(n);return{dom:{tag:"div",classes:Y([[r.tieredMenu]])},markers:Sg(n)}},kg=function(e,t){return function(n){var r=H(n,t);return $(r,(function(t){return{dom:e,components:t}}))}},Tg=function(e,t){var n=[],r=[];return j(e,(function(e,o){t(e,o)?(r.length>0&&n.push(r),r=[],Ne(e.dom,"innerHtml")&&r.push(e)):r.push(e)})),r.length>0&&n.push(r),$(n,(function(e){return{dom:{tag:"div",classes:["tox-collection__group"]},components:e}}))},Og=function(e,t,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Jh.parts.items({preprocess:function(n){return"auto"!==e&&e>1?kg({tag:"div",classes:["tox-collection__group"]},e)(n):Tg(n,(function(e,n){return"separator"===t[n].type}))}})]}},Bg=function(e){return z(e,(function(e){return"icon"in e&&void 0!==e.icon}))},Ng=function(e){return F.none()},Fg=function(e,t,n,r,o){var i,a=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Jh.parts.items({preprocess:function(e){return Tg(e,(function(e,t){return"separator"===i[t].type}))}})]});return{value:e,dom:a.dom,components:a.components,items:n}},Mg=function(e,t,n,r,o){var i;return"color"===o?{value:e,dom:(i=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Jh.parts.items({preprocess:"auto"!==e?kg({tag:"div",classes:["tox-swatches__row"]},e):m})]}]}}(r)).dom,components:i.components,items:n}:"normal"===o&&"auto"===r?{value:e,dom:(i=Og(r,n)).dom,components:i.components,items:n}:"normal"===o&&1===r?{value:e,dom:(i=Og(1,n)).dom,components:i.components,items:n}:"normal"===o?{value:e,dom:(i=Og(r,n)).dom,components:i.components,items:n}:"listpreview"===o&&"auto"!==r?{value:e,dom:(i=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Jh.parts.items({preprocess:kg({tag:"div",classes:["tox-collection__group"]},e)})]}}(r)).dom,components:i.components,items:n}:{value:e,dom:Eg(t,r,o),components:Ag,items:n}},Pg=[jt("type"),jt("src"),Qt("alt"),cn("classes",[],Mt)],Ig=lt(Pg),Rg=[jt("type"),jt("text"),Qt("name"),cn("classes",["tox-collection__item-label"],Mt)],Lg=lt(Rg),zg=wt((function(){return Tt("type",{cardimage:Ig,cardtext:Lg,cardcontainer:Vg})})),Vg=lt([jt("type"),on("direction","horizontal"),on("align","left"),on("valign","middle"),Xt("items",zg)]),Hg=[un("disabled",!1),Qt("text"),Qt("shortcut"),vt("value","value",Ue((function(){return ci("menuitem-value")})),Bt()),tn("meta",{})],$g=lt([jt("type"),Qt("label"),Xt("items",zg),sn("onSetup",(function(){return d})),sn("onAction",d)].concat(Hg)),jg=lt([jt("type"),un("active",!1),Qt("icon")].concat(Hg)),Ug=lt([jt("type"),Ut("fancytype",["inserttable","colorswatch"]),sn("onAction",d)]),Wg=lt([jt("type"),sn("onSetup",(function(){return d})),sn("onAction",d),Qt("icon")].concat(Hg)),qg=lt([jt("type"),Wt("getSubmenuItems"),sn("onSetup",(function(){return d})),Qt("icon")].concat(Hg)),Gg=lt([jt("type"),Qt("icon"),un("active",!1),sn("onSetup",(function(){return d})),Wt("onAction")].concat(Hg)),Xg=function(e,t,n){var r=Oc(e.element,"."+n);if(r.length>0){var o=K(r,(function(e){var n=e.dom.getBoundingClientRect().top,o=r[0].dom.getBoundingClientRect().top;return Math.abs(n-o)>t})).getOr(r.length);return F.some({numColumns:o,numRows:Math.ceil(r.length/o)})}return F.none()},Kg=function(e,t){return ls([gh(e,t)])},Yg=function(e){return Kg(ci("unnamed-events"),e)},Jg=ci("tooltip.exclusive"),Qg=ci("tooltip.show"),Zg=ci("tooltip.hide"),ev=function(e,t,n){e.getSystem().broadcastOn([Jg],{})},tv=Object.freeze({__proto__:null,hideAllExclusive:ev,setComponents:function(e,t,n,r){n.getTooltip().each((function(e){e.getSystem().isConnected()&&mh.set(e,r)}))}}),nv=Object.freeze({__proto__:null,events:function(e,t){var n=function(n){t.getTooltip().each((function(r){dl(r),e.onHide(n,r),t.clearTooltip()})),t.clearTimer()};return ro(Y([[ao(Qg,(function(n){t.resetTimer((function(){!function(n){if(!t.isShowing()){ev(n);var r=e.lazySink(n).getOrDie(),o=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:ro("normal"===e.mode?[ao(hr(),(function(e){Jr(n,Qg)})),ao(dr(),(function(e){Jr(n,Zg)}))]:[]),behaviours:ls([mh.config({})])});t.setTooltip(o),cl(r,o),e.onShow(n,o),ol.position(r,e.anchor(n),o)}}(n)}),e.delay)})),ao(Zg,(function(r){t.resetTimer((function(){n(r)}),e.delay)})),ao(Tr(),(function(e,t){var r=t;r.universal||L(r.channels,Jg)&&n(e)})),go((function(e){n(e)}))],"normal"===e.mode?[ao(mr(),(function(e){Jr(e,Qg)})),ao(Dr(),(function(e){Jr(e,Zg)})),ao(hr(),(function(e){Jr(e,Qg)})),ao(dr(),(function(e){Jr(e,Zg)}))]:[ao(Kr(),(function(e,t){Jr(e,Qg)})),ao(Yr(),(function(e){Jr(e,Zg)}))]]))}}),rv=[Vt("lazySink"),Vt("tooltipDom"),tn("exclusive",!0),tn("tooltipComponents",[]),tn("delay",300),an("mode","normal",["normal","follow-highlight"]),tn("anchor",(function(e){return{anchor:"hotspot",hotspot:e,layouts:{onLtr:h([Ku,Xu,Uu,qu,Wu,Gu]),onRtl:h([Ku,Xu,Uu,qu,Wu,Gu])}}})),Cu("onHide"),Cu("onShow")],ov=ds({fields:rv,name:"tooltipping",active:nv,state:Object.freeze({__proto__:null,init:function(){var e=dn(F.none()),t=dn(F.none()),n=function(){e.get().each((function(e){clearTimeout(e)}))},r=h("not-implemented");return Ai({getTooltip:function(){return t.get()},isShowing:function(){return t.get().isSome()},setTooltip:function(e){t.set(F.some(e))},clearTooltip:function(){t.set(F.none())},clearTimer:n,resetTimer:function(t,r){n(),e.set(F.some(setTimeout((function(){t()}),r)))},readState:r})}}),apis:tv}),iv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),av=tinymce.util.Tools.resolve("tinymce.util.I18n"),uv=["input","button","textarea","select"],sv=function(e,t,n){(t.disabled()?hv:mv)(e,t)},cv=function(e,t){return!0===t.useNative&&L(uv,bo(e.element))},lv=function(e){Qo(e.element,"disabled","disabled")},fv=function(e){ni(e.element,"disabled")},dv=function(e){Qo(e.element,"aria-disabled","true")},pv=function(e){Qo(e.element,"aria-disabled","false")},hv=function(e,t,n){t.disableClass.each((function(t){Hi(e.element,t)})),(cv(e,t)?lv:dv)(e),t.onDisabled(e)},mv=function(e,t,n){t.disableClass.each((function(t){ji(e.element,t)})),(cv(e,t)?fv:pv)(e),t.onEnabled(e)},gv=function(e,t){return cv(e,t)?function(e){return ti(e.element,"disabled")}(e):function(e){return"true"===Zo(e.element,"aria-disabled")}(e)},vv=Object.freeze({__proto__:null,enable:mv,disable:hv,isDisabled:gv,onLoad:sv,set:function(e,t,n,r){(r?hv:mv)(e,t)}}),yv=Object.freeze({__proto__:null,exhibit:function(e,t){return ki({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(e,t){return ro([oo(Or(),(function(t,n){return gv(t,e)})),as(e,t,sv)])}}),bv=[sn("disabled",b),tn("useNative",!0),Kt("disableClass"),Cu("onDisabled"),Cu("onEnabled")],Cv=ds({fields:bv,name:"disabling",active:yv,apis:vv}),xv=tinymce.util.Tools.resolve("tinymce.EditorManager"),wv=function(e){return e.getParam("height",Math.max(e.getElement().offsetHeight,200))},_v=function(e){return e.getParam("width",iv.DOM.getStyle(e.getElement(),"width"))},Sv=function(e){return F.from(e.getParam("min_width")).filter(l)},Ev=function(e){return F.from(e.getParam("min_height")).filter(l)},Av=function(e){return F.from(e.getParam("max_width")).filter(l)},Dv=function(e){return F.from(e.getParam("max_height")).filter(l)},kv=function(e){return!1!==e.getParam("menubar",!0,"boolean")},Tv=function(e){var t=e.getParam("toolbar",!0),n=!0===t,o=r(t),a=i(t)&&t.length>0;return!Bv(e)&&(a||o||n)},Ov=function(e){var t=V(9,(function(t){return e.getParam("toolbar"+(t+1),!1,"string")})),n=W(t,(function(e){return"string"==typeof e}));return n.length>0?F.some(n):F.none()},Bv=function(e){return Ov(e).fold((function(){return e.getParam("toolbar",[],"string[]").length>0}),C)};(cg=sg||(sg={})).default="wrap",cg.floating="floating",cg.sliding="sliding",cg.scrolling="scrolling";var Nv,Fv,Mv=function(e){return e.getParam("toolbar_mode","","string")};(Fv=Nv||(Nv={})).auto="auto",Fv.top="top",Fv.bottom="bottom";var Pv,Iv,Rv=function(e){return e.getParam("toolbar_location",Nv.auto,"string")},Lv=function(e){return Rv(e)===Nv.bottom},zv=function(e){if(!e.inline)return F.none();var t=function(e){return e.getParam("fixed_toolbar_container","","string")}(e);if(t.length>0)return nu(Ki(),t);var n=function(e){return e.getParam("fixed_toolbar_container_target")}(e);return s(n)?F.some(hn.fromDom(n)):F.none()},Vv=function(e){return e.inline&&zv(e).isSome()},Hv=function(e){return zv(e).getOrThunk((function(){return Ro(Io(hn.fromDom(e.getElement())))}))},$v=function(e){return e.inline&&!kv(e)&&!Tv(e)&&!Bv(e)},jv=function(e){return(e.getParam("toolbar_sticky",!1,"boolean")||e.inline)&&!Vv(e)&&!$v(e)},Uv=function(e){var t=e.getParam("menu");return t?Ee(t,(function(e){return w(w({},e),{items:e.items})})):{}},Wv=function(e){return e.getParam("menubar")},qv=function(e){return e.getParam("anchor_top","#top")},Gv=function(e){return e.getParam("anchor_bottom","#bottom")},Xv="silver.readonly",Kv=lt([(Pv="readonly",Ht(Pv,Pt))]),Yv=function(e,t){var n=e.outerContainer.element;t&&(e.mothership.broadcastOn([Dl()],{target:n}),e.uiMothership.broadcastOn([Dl()],{target:n})),e.mothership.broadcastOn([Xv],{readonly:t}),e.uiMothership.broadcastOn([Xv],{readonly:t})},Jv=function(e,t){e.on("init",(function(){e.mode.isReadOnly()&&Yv(t,!0)})),e.on("SwitchMode",(function(){return Yv(t,e.mode.isReadOnly())})),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly")},Qv=function(){var e;return gs.config({channels:(e={},e[Xv]={schema:Kv,onReceive:function(e,t){Cv.set(e,t.readonly)}},e)})},Zv=function(e){return Cv.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},ey=function(e){return Cv.config({disabled:e})},ty=function(e){return Cv.config({disabled:e,disableClass:"tox-tbtn--disabled"})},ny=function(e){return Cv.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})},ry=function(e,t){var n=e.getApi(t);return function(e){e(n)}},oy=function(e,t){return mo((function(n){ry(e,n)((function(n){var r=e.onSetup(n);c(r)&&t.set(r)}))}))},iy=function(e,t){return go((function(n){return ry(e,n)(t.get())}))},ay=function(e,t){return yo((function(n,r){ry(e,n)(e.onAction),e.triggersSubmenu||t!==lg.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&Jr(n,Mr()),r.stop())}))},uy=((Iv={})[Or()]=["disabling","alloy.base.behaviour","toggling","item-events"],Iv),sy=function(e){return J(e,(function(e){return e.toArray()}))},cy=function(e,t,n,r){var o=dn(d);return{type:"item",dom:t.dom,components:sy(t.optComponents),data:e.data,eventOrder:uy,hasSubmenu:e.triggersSubmenu,itemBehaviours:ls([gh("item-events",[ay(e,n),oy(e,o),iy(e,o)]),Zv((function(){return e.disabled||r.isDisabled()})),Qv(),mh.config({})].concat(e.itemBehaviours))}},ly=function(e){return{value:e.value,meta:w({text:e.text.getOr("")},e.meta)}},fy=tinymce.util.Tools.resolve("tinymce.Env"),dy=function(e){var t=fy.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=e.split("+"),r=$(n,(function(e){var n=e.toLowerCase().trim();return Ne(t,n)?t[n]:e}));return fy.mac?r.join(""):r.join("+")},py=function(e){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:e}}},hy=function(e){return{dom:{tag:"div",classes:[gg]},components:[ya(av.translate(e))]}},my=function(e,t){return{dom:{tag:"div",classes:t,innerHtml:e}}},gy=function(e,t){return{dom:{tag:"div",classes:[gg]},components:[{dom:{tag:e.tag,styles:e.styles},components:[ya(av.translate(t))]}]}},vy=function(e){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:dy(e)}}},yy=function(e){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:Cm("checkmark",e)}}},by=function(e,t){var n=t.map((function(e){return{attributes:{title:av.translate(e)}}})).getOr({});return w({tag:"div",classes:[fg,dg].concat(e?["tox-collection__item-icon-rtl"]:[])},n)},Cy=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],xy=["list-bull-circle","list-bull-default","list-bull-square"],wy=function(e,t,n,r){void 0===r&&(r=F.none());var o,i=av.isRtl()&&e.iconContent.exists((function(e){return L(xy,e)})),a=(o=e.iconContent,o.map((function(e){return av.isRtl()&&L(Cy,e)?e+"-rtl":e}))).map((function(e){return function(e,t,n){return F.from(t()[e.toLowerCase()]).or(n).getOrThunk((function(){return bm(t)}))}(e,t.icons,r)})),u=F.from(e.meta).fold((function(){return hy}),(function(e){return Ne(e,"style")?g(gy,e.style):hy}));return"color"===e.presets?function(e,t,n,r){var o,i;return{dom:(o=n.getOr(""),i={tag:"div",attributes:e.map((function(e){return{title:r.translate(e)}})).getOr({}),classes:["tox-swatch"]},w(w({},i),"custom"===t?{tag:"button",classes:S(i.classes,["tox-swatches__picker-btn"]),innerHtml:o}:"remove"===t?{classes:S(i.classes,["tox-swatch--remove"]),innerHtml:o}:{attributes:w(w({},i.attributes),{"data-mce-color":t}),styles:{"background-color":t}})),optComponents:[]}}(e.ariaLabel,e.value,a,t):function(e,t,n,r,o){var i=n?t.or(F.some("")).map(py):F.none(),a=e.checkMark,u=e.htmlContent.fold((function(){return e.textContent.map(r)}),(function(e){return F.some(my(e,[gg]))}));return{dom:by(o,e.ariaLabel),optComponents:[i,u,e.shortcutContent.map(vy),a,e.caret]}}(e,a,n,u,i)},_y=function(e,t){return Be(e,"tooltipWorker").map((function(e){return[ov.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(e){return{anchor:"submenu",item:e,overrides:{maxHeightFunction:Hs}}},mode:"follow-highlight",onShow:function(t,n){e((function(e){ov.setComponents(t,[ba({element:hn.fromDom(e)})])}))}})]})).getOr([])},Sy=function(e,t){var n=function(e){return iv.DOM.encode(e)}(av.translate(e));if(t.length>0){var r=new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"gi");return n.replace(r,(function(e){return'<span class="tox-autocompleter-highlight">'+e+"</span>"}))}return n},Ey=function(e,t){return $(e,(function(e){switch(e.type){case"cardcontainer":return a=e,u=Ey(e.items,t),s="vertical"===a.direction?"tox-collection__item-container--column":Cg,c="left"===a.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[bg,s,c,function(){switch(a.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:u};case"cardimage":return r=e.src,o=e.classes,i=e.alt,{dom:{tag:"img",classes:o,attributes:{src:r,alt:i.getOr("")}}};case"cardtext":var n=e.name.exists((function(e){return L(t.cardText.highlightOn,e)}))?F.from(t.cardText.matchText).getOr(""):"";return my(Sy(e.text,n),e.classes)}var r,o,i,a,u,s,c}))},Ay=Of(Uh(),Wh()),Dy=function(e){return{value:e}},ky=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ty=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Oy=function(e){return ky.test(e)||Ty.test(e)},By=function(e){var t=function(e){return{value:e.value.replace(ky,(function(e,t,n,r){return t+t+n+n+r+r}))}}(e),n=Ty.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Ny=function(e){var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Fy=function(e){var t=Ny(e.red)+Ny(e.green)+Ny(e.blue);return Dy(t)},My=Math.min,Py=Math.max,Iy=Math.round,Ry=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Ly=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,zy=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},Vy=function(e){var t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},Hy=function(e){var t,n,r,o=(e.hue||0)%360,i=e.saturation/100,a=e.value/100;if(i=Py(0,My(i,1)),a=Py(0,My(a,1)),0===i)return t=n=r=Iy(255*a),zy(t,n,r,1);var u=o/60,s=a*i,c=s*(1-Math.abs(u%2-1)),l=a-s;switch(Math.floor(u)){case 0:t=s,n=c,r=0;break;case 1:t=c,n=s,r=0;break;case 2:t=0,n=s,r=c;break;case 3:t=0,n=c,r=s;break;case 4:t=c,n=0,r=s;break;case 5:t=s,n=0,r=c;break;default:t=n=r=0}return t=Iy(255*(t+l)),n=Iy(255*(n+l)),r=Iy(255*(r+l)),zy(t,n,r,1)},$y=function(e){var t=By(e),n=parseInt(t[1],16),r=parseInt(t[2],16),o=parseInt(t[3],16);return zy(n,r,o,1)},jy=function(e,t,n,r){var o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),u=parseFloat(r);return zy(o,i,a,u)},Uy=function(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"},Wy=zy(255,0,0,1),qy=function(e,t){return e.fire("ResizeContent",t)},Gy=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Xy="tinymce-custom-colors";var Ky,Yy,Jy="choiceitem",Qy=[{type:Jy,text:"Light Green",value:"#BFEDD2"},{type:Jy,text:"Light Yellow",value:"#FBEEB8"},{type:Jy,text:"Light Red",value:"#F8CAC6"},{type:Jy,text:"Light Purple",value:"#ECCAFA"},{type:Jy,text:"Light Blue",value:"#C2E0F4"},{type:Jy,text:"Green",value:"#2DC26B"},{type:Jy,text:"Yellow",value:"#F1C40F"},{type:Jy,text:"Red",value:"#E03E2D"},{type:Jy,text:"Purple",value:"#B96AD9"},{type:Jy,text:"Blue",value:"#3598DB"},{type:Jy,text:"Dark Turquoise",value:"#169179"},{type:Jy,text:"Orange",value:"#E67E23"},{type:Jy,text:"Dark Red",value:"#BA372A"},{type:Jy,text:"Dark Purple",value:"#843FA1"},{type:Jy,text:"Dark Blue",value:"#236FA1"},{type:Jy,text:"Light Gray",value:"#ECF0F1"},{type:Jy,text:"Medium Gray",value:"#CED4D9"},{type:Jy,text:"Gray",value:"#95A5A6"},{type:Jy,text:"Dark Gray",value:"#7E8C8D"},{type:Jy,text:"Navy Blue",value:"#34495E"},{type:Jy,text:"Black",value:"#000000"},{type:Jy,text:"White",value:"#ffffff"}],Zy=function(e){void 0===e&&(e=10);var t,n=Gy.getItem(Xy),o=r(n)?JSON.parse(n):[],i=e-(t=o).length<0?t.slice(0,e):t,a=function(e){i.splice(e,1)};return{add:function(t){(function(e,t){var n=R(e,t);return-1===n?F.none():F.some(n)})(i,t).each(a),i.unshift(t),i.length>e&&i.pop(),Gy.setItem(Xy,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),eb=function(e){return!1!==e.getParam("custom_colors")},tb=function(e){var t=function(e){return e.getParam("color_map")}(e);return void 0!==t?function(e){var t=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var r=n.getContext("2d"),o=function(e,t){var n=t/255;return("0"+Math.round(e*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},i=function(e){if(/^[0-9A-Fa-f]{6}$/.test(e))return"#"+e.toUpperCase();r.clearRect(0,0,n.width,n.height),r.fillStyle="#FFFFFF",r.fillStyle=e,r.fillRect(0,0,1,1);var t=r.getImageData(0,0,1,1).data,i=t[0],a=t[1],u=t[2],s=t[3];return"#"+o(i,s)+o(a,s)+o(u,s)},a=0;a<e.length;a+=2)t.push({text:e[a+1],value:i(e[a]),type:"choiceitem"});return t}(t):Qy},nb=function(e){Zy.add(e)},rb=function(e){return function(e,t){return e.getParam("color_cols",t,"number")}(e,function(e){return Math.max(5,Math.ceil(Math.sqrt(e)))}(tb(e).length))},ob=function(e,t,n,r){"custom"===n?lb(e)((function(n){n.each((function(n){nb(n),e.execCommand("mceApplyTextcolor",t,n),r(n)}))}),"#000000"):"remove"===n?(r(""),e.execCommand("mceRemoveTextcolor",t)):(r(n),e.execCommand("mceApplyTextcolor",t,n))},ib=function(e,t){return e.concat($(Zy.state(),(function(e){return{type:Jy,text:e,value:e}})).concat(function(e){var t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]}(t)))},ab=function(e,t){return function(n){n(ib(e,t))}},ub=function(e,t,n){var r="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(r,n)},sb=function(e,t,n,r,o){e.ui.registry.addSplitButton(t,{tooltip:r,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:function(t){return F.from(function(e,t){var n;return e.dom.getParents(e.selection.getStart(),(function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)})),n}(e,n)).bind((function(e){return function(e){if("transparent"===e)return F.some(zy(0,0,0,0));var t=Ry.exec(e);if(null!==t)return F.some(jy(t[1],t[2],t[3],"1"));var n=Ly.exec(e);return null!==n?F.some(jy(n[1],n[2],n[3],n[4])):F.none()}(e).map((function(e){var n=Fy(e).value;return xn(t.toLowerCase(),n)}))})).getOr(!1)},columns:rb(e),fetch:ab(tb(e),eb(e)),onAction:function(t){null!==o.get()&&ob(e,n,o.get(),d)},onItemAction:function(r,i){ob(e,n,i,(function(n){o.set(n),function(e,t){e.fire("TextColorChange",t)}(e,{name:t,color:n})}))},onSetup:function(n){null!==o.get()&&ub(n,t,o.get());var r=function(e){e.name===t&&ub(n,e.name,e.color)};return e.on("TextColorChange",r),function(){e.off("TextColorChange",r)}}})},cb=function(e,t,n,r){e.ui.registry.addNestedMenuItem(t,{text:r,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(t){ob(e,n,t.value,d)}}]}})},lb=function(e){return function(t,n){var r=!1,o={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onAction:function(e,t){"hex-valid"===t.name&&(r=t.value)},onSubmit:function(n){var o=n.getData().colorpicker;r?(t(F.from(o)),n.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",o]))},onClose:d,onCancel:function(){t(F.none())}})}},fb=function(e,t,n,r,o,i,a,u){var s=Bg(t),c=db(t,n,r,"color"!==o?"normal":"color",i,a,u);return Mg(e,s,c,r,o)},db=function(e,t,n,r,o,i,a){return Zf($(e,(function(u){return"choiceitem"===u.type?(s=u,Et("choicemenuitem",jg,s)).fold(Ng,(function(s){return F.some(function(e,t,n,r,o,i,a,u){void 0===u&&(u=!0);var s=wy({presets:n,textContent:t?e.text:F.none(),htmlContent:F.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:F.none(),checkMark:t?F.some(yy(a.icons)):F.none(),caret:F.none(),value:e.value},a,u);return Re(cy({data:ly(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){Fh.set(e,t)},isActive:function(){return Fh.isOn(e)},isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)}}},onAction:function(t){return r(e.value)},onSetup:function(e){return e.setActive(o),d},triggersSubmenu:!1,itemBehaviours:[]},s,i,a),{toggling:{toggleClass:mg,toggleOnExecute:!1,selected:e.active}})}(s,1===n,r,t,i(u.value),o,a,Bg(e)))})):F.none();var s})))},pb=function(e,t){var n=Sg(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},hb=ci("cell-over"),mb=ci("cell-execute"),gb=function(e,t,n){var r,o=function(n){return Qr(n,mb,{row:e,col:t})},i=function(e,t){t.stop(),o(e)};return xa({dom:{tag:"div",attributes:(r={role:"button"},r["aria-labelledby"]=n,r)},behaviours:ls([gh("insert-table-picker-cell",[ao(hr(),xh.focus),ao(Or(),o),ao(xr(),i),ao(Nr(),i)]),Fh.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),xh.config({onFocus:function(n){return Qr(n,hb,{row:e,col:t})}})])})},vb=function(e){return J(e,(function(e){return $(e,wa)}))},yb=function(e,t){return ya(t+1+"x"+(e+1))},bb={inserttable:function(e){var t=ci("size-label"),n=function(e,t,n){for(var r=[],o=0;o<t;o++){for(var i=[],a=0;a<n;a++)i.push(gb(o,a,e));r.push(i)}return r}(t,10,10),r=ym({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[ya("0x0")],behaviours:ls([mh.config({})])});return{type:"widget",data:{value:ci("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Ay.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:vb(n).concat(r.asSpec()),behaviours:ls([gh("insert-table-picker",[lo(hb,(function(e,t,o){var i=o.event.row,a=o.event.col;!function(e,t,n,r,o){for(var i=0;i<r;i++)for(var a=0;a<o;a++)Fh.set(e[i][a],i<=t&&a<=n)}(n,i,a,10,10),mh.set(r.get(e),[yb(i,a)])})),lo(mb,(function(t,n,r){e.onAction({numRows:r.event.row+1,numColumns:r.event.col+1}),Jr(t,Mr())}))]),lh.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(e,t){var n=ib(t.colorinput.getColors(),t.colorinput.hasCustomColors()),r=t.colorinput.getColorCols(),o="color",i=fb(ci("menu-value"),n,(function(t){e.onAction({value:t})}),r,o,lg.CLOSE_ON_EXECUTE,b,t.shared.providers),a=w(w({},i),{markers:Sg(o),movement:pb(r,o)});return{type:"widget",data:{value:ci("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Ay.widget(Jh.sketch(a))]}}},Cb=function(e,t,n,r,o,i,a,u){void 0===u&&(u=!0);var s=wy({presets:r,textContent:F.none(),htmlContent:n?e.text.map((function(e){return Sy(e,t)})):F.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:F.none(),checkMark:F.none(),caret:F.none(),value:e.value},a.providers,u,e.icon);return cy({data:ly(e),disabled:e.disabled,getApi:h({}),onAction:function(t){return o(e.value,e.meta)},onSetup:h(d),triggersSubmenu:!1,itemBehaviours:_y(e.meta,a)},s,i,a.providers)},xb=function(e){var t=e.text.fold((function(){return{}}),(function(e){return{innerHtml:e}}));return{type:"separator",dom:w({tag:"div",classes:[dg,"tox-collection__group-heading"]},t),components:[]}},wb=function(e,t,n,r){void 0===r&&(r=!0);var o=wy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:F.none(),ariaLabel:e.text,caret:F.none(),checkMark:F.none(),shortcutContent:e.shortcut},n,r);return cy({data:ly(e),getApi:function(e){return{isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)}}},disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t,n)},_b=function(e,t,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!1);var i,a=o?(i=n.icons,{dom:{tag:"div",classes:[vg],innerHtml:Cm("chevron-down",i)}}):function(e){return{dom:{tag:"div",classes:[vg],innerHtml:Cm("chevron-right",e)}}}(n.icons),u=wy({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:F.none(),ariaLabel:e.text,caret:F.some(a),checkMark:F.none(),shortcutContent:e.shortcut},n,r);return cy({data:ly(e),getApi:function(e){return{isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)}}},disabled:e.disabled,onAction:d,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},u,t,n)},Sb=function(e,t,n,r){void 0===r&&(r=!0);var o=wy({iconContent:e.icon,textContent:e.text,htmlContent:F.none(),ariaLabel:e.text,checkMark:F.some(yy(n.icons)),caret:F.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,r);return Re(cy({data:ly(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){Fh.set(e,t)},isActive:function(){return Fh.isOn(e)},isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t,n),{toggling:{toggleClass:mg,toggleOnExecute:!1,selected:e.active}})},Eb=function(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?F.some(e[t]):F.none()}(bb,e.fancytype).map((function(n){return n(e,t)}))},Ab=function(e,t,n,r){var o={dom:by(!1,e.label),optComponents:[F.some({dom:{tag:"div",classes:[bg,Cg]},components:Ey(e.items,r)})]};return cy({data:ly(w({text:F.none()},e)),disabled:e.disabled,getApi:function(e){return{isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){Cv.set(e,t),j(Oc(e.element,"*"),(function(n){e.getSystem().getByDom(n).each((function(e){e.hasConfigured(Cv)&&Cv.set(e,t)}))}))}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:F.from(r.itemBehaviours).getOr([])},o,t,n.providers)};(Yy=Ky||(Ky={}))[Yy.ContentFocus=0]="ContentFocus",Yy[Yy.UiFocus=1]="UiFocus";var Db,kb,Tb=function(e,t,n,r,o){var i,a=n.shared.providers,u=function(e){return o?w(w({},e),{shortcut:F.none(),icon:e.text.isSome()?F.none():e.icon}):e};switch(e.type){case"menuitem":return(i=e,Et("menuitem",Wg,i)).fold(Ng,(function(e){return F.some(wb(u(e),t,a,r))}));case"nestedmenuitem":return function(e){return Et("nestedmenuitem",qg,e)}(e).fold(Ng,(function(e){return F.some(_b(u(e),t,a,r,o))}));case"togglemenuitem":return function(e){return Et("togglemenuitem",Gg,e)}(e).fold(Ng,(function(e){return F.some(Sb(u(e),t,a,r))}));case"separator":return function(e){return Et("separatormenuitem",Um,e)}(e).fold(Ng,(function(e){return F.some(xb(e))}));case"fancymenuitem":return function(e){return Et("fancymenuitem",Ug,e)}(e).fold(Ng,(function(e){return Eb(u(e),n)}));default:return F.none()}},Ob=function(e,t,n,r,o,i,a){var u=1===r,s=!u||Bg(e);return Zf($(e,(function(e){switch(e.type){case"separator":return(r=e,Et("Autocompleter.Separator",Um,r)).fold(Ng,(function(e){return F.some(xb(e))}));case"cardmenuitem":return function(e){return Et("cardmenuitem",$g,e)}(e).fold(Ng,(function(e){return F.some(Ab(w(w({},e),{onAction:function(t){e.onAction(t),n(e.value,e.meta)}}),o,i,{itemBehaviours:_y(e.meta,i),cardText:{matchText:t,highlightOn:a}}))}));case"autocompleteitem":default:return function(e){return Et("Autocompleter.Item",Wm,e)}(e).fold(Ng,(function(e){return F.some(Cb(e,t,u,"normal",n,o,i,s))}))}var r})))},Bb=function(e,t,n,r,o){var i=Bg(t),a=Zf($(t,(function(e){var t=function(e){return Tb(e,n,r,function(e){return o?!e.hasOwnProperty("text"):i}(e),o)};return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(w(w({},e),{disabled:!0})):t(e)})));return(o?Fg:Mg)(e,i,a,1,"normal")},Nb=function(e){return rm.singleData(e.value,e)},Fb=function(e,t){var n=dn(F.none()),r=dn(!1),o=xa(om.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ls([gh("dismissAutocompleter",[ao(jr(),(function(){return u()}))])]),lazySink:t.getSink})),i=function(){return n.get().isSome()},a=function(){i()&&om.hide(o)},u=function(){if(i()){var t=n.get().map((function(e){return e.element}));Om(t.getOr(hn.fromDom(e.selection.getNode()))).each(Xo),a(),n.set(F.none()),r.set(!1)}},s=ze((function(){return ug(e)})),c=function(t,n,r,i){t.matchLength=n.text.length;var a=ae(r,(function(e){return F.from(e.columns)})).getOr(1);om.showAt(o,{anchor:"node",root:hn.fromDom(e.getBody()),node:F.from(t.element)},Jh.sketch(function(e,t,n,r){var o=n===Ky.ContentFocus?Rd():Id(),i=pb(t,r),a=Sg(r);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:i,fakeFocus:n===Ky.ContentFocus,focusManager:o,menuBehaviours:Yg("auto"!==t?[]:[mo((function(e,t){Xg(e,4,a.item).each((function(t){var n=t.numColumns,r=t.numRows;lh.setGridSize(e,r,n)}))}))])}}(Mg("autocompleter-value",!0,i,a,"normal"),a,Ky.ContentFocus,"normal"))),om.getContent(o).each(md.highlightFirst)},l=function(o){(function(t){return n.get().map((function(n){return Pm(e.dom,e.selection.getRng(),n.triggerChar).bind((function(n){return jm(e,s,n,t)}))})).getOrThunk((function(){return $m(e,s)}))})(o).fold(u,(function(o){!function(t){if(!i()){var o=Tm(e,t.range);n.set(F.some({triggerChar:t.triggerChar,element:o,matchLength:t.text.length})),r.set(!1)}}(o.context),o.lookupData.then((function(i){n.get().map((function(n){var s,f,d,p=o.context;if(n.triggerChar===p.triggerChar){var h=(s=p.triggerChar,d=ae(f=i,(function(e){return F.from(e.columns)})).getOr(1),J(f,(function(n){var o=n.items;return Ob(o,n.matchText,(function(t,o){var i=e.selection.getRng();Pm(e.dom,i,s).fold((function(){}),(function(e){var i=e.range,s={hide:function(){u()},reload:function(e){a(),l(e)}};r.set(!0),n.onAction(s,i,t,o),r.set(!1)}))}),d,lg.BUBBLE_TO_SANDBOX,t,n.highlightOn)})));h.length>0?c(n,p,i,h):p.text.length-n.matchLength>=10?u():a()}}))}))}))},f={onKeypress:Am((function(e){27!==e.which&&l()}),50),cancelIfNecessary:u,isMenuOpen:function(){return om.isOpen(o)},isActive:i,isProcessingAction:r.get,getView:function(){return om.getContent(o)}};!1===e.hasPlugin("rtc")&&Im(f,e)},Mb=C,Pb=function(e,t,n){return function(e,t,n,r){return Ia(e,t,n,r,!1)}(e,t,Mb,n)},Ib=function(e,t,n){return function(e,t,n,r){return Ia(e,t,n,r,!0)}(e,t,Mb,n)},Rb=Pa,Lb=function(e,t,n){return ru(e,t,n).isSome()},zb=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n=setTimeout((function(){e.apply(null,r),n=null}),t)}}},Vb=function(e){var t=e.raw;return void 0===t.touches||1!==t.touches.length?F.none():F.some(t.touches[0])},Hb=function(e){var t=dn(F.none()),n=dn(!1),r=zb((function(t){e.triggerEvent(Fr(),t),n.set(!0)}),400),o=Je([{key:ar(),value:function(e){return Vb(e).each((function(o){r.cancel();var i={x:o.clientX,y:o.clientY,target:e.target};r.schedule(e),n.set(!1),t.set(F.some(i))})),F.none()}},{key:ur(),value:function(e){return r.cancel(),Vb(e).each((function(e){t.get().each((function(n){(function(e,t){var n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(e,n)&&t.set(F.none())}))})),F.none()}},{key:sr(),value:function(o){r.cancel();return t.get().filter((function(e){return Yn(e.target,o.target)})).map((function(t){return n.get()?(o.prevent(),!1):e.triggerEvent(Nr(),o)}))}}]);return{fireIfReady:function(e,t){return Be(o,t).bind((function(t){return t(e)}))}}},$b=function(){return Gn().browser.isFirefox()},jb=ct([Wt("triggerEvent"),tn("stopBackspace",!0)]),Ub=function(e,t){var n=Dt("Getting GUI events settings",jb,t),r=Hb(n),o=$(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(t){return Pb(e,t,(function(e){r.fireIfReady(e,t).each((function(t){t&&e.kill()})),n.triggerEvent(t,e)&&e.kill()}))})),i=dn(F.none()),a=Pb(e,"paste",(function(e){r.fireIfReady(e,"paste").each((function(t){t&&e.kill()})),n.triggerEvent("paste",e)&&e.kill(),i.set(F.some(setTimeout((function(){n.triggerEvent(kr(),e)}),0)))})),u=Pb(e,"keydown",(function(e){n.triggerEvent("keydown",e)?e.kill():!0===n.stopBackspace&&function(e){return e.raw.which===gd[0]&&!L(["input","textarea"],bo(e.target))&&!Lb(e.target,'[contenteditable="true"]')}(e)&&e.prevent()})),s=function(e,t){return $b()?Ib(e,"focus",t):Pb(e,"focusin",t)}(e,(function(e){n.triggerEvent("focusin",e)&&e.kill()})),c=dn(F.none()),l=function(e,t){return $b()?Ib(e,"blur",t):Pb(e,"focusout",t)}(e,(function(e){n.triggerEvent("focusout",e)&&e.kill(),c.set(F.some(setTimeout((function(){n.triggerEvent(Dr(),e)}),0)))}));return{unbind:function(){j(o,(function(e){e.unbind()})),u.unbind(),s.unbind(),l.unbind(),a.unbind(),i.get().each(clearTimeout),c.get().each(clearTimeout)}}},Wb=function(e,t){var n=Be(e,"target").getOr(t);return dn(n)},qb=Me([{stopped:[]},{resume:["element"]},{complete:[]}]),Gb=function(e,t,n,r,o,i){var a=e(t,r),u=function(e,t){var n=dn(!1),r=dn(!1);return{stop:function(){n.set(!0)},cut:function(){r.set(!0)},isStopped:n.get,isCut:r.get,event:e,setSource:t.set,getSource:t.get}}(n,o);return a.fold((function(){return i.logEventNoHandlers(t,r),qb.complete()}),(function(e){var n=e.descHandler;return Ti(n)(u),u.isStopped()?(i.logEventStopped(t,e.element,n.purpose),qb.stopped()):u.isCut()?(i.logEventCut(t,e.element,n.purpose),qb.complete()):To(e.element).fold((function(){return i.logNoParent(t,e.element,n.purpose),qb.complete()}),(function(r){return i.logEventResponse(t,e.element,n.purpose),qb.resume(r)}))}))},Xb=function(e,t,n,r,o,i){return Gb(e,t,n,r,o,i).fold(C,(function(r){return Xb(e,t,n,r,o,i)}),b)},Kb=function(e,t,n){var r,o,i=(r=t,o=dn(!1),{stop:function(){o.set(!0)},cut:d,isStopped:o.get,isCut:b,event:r,setSource:y("Cannot set source of a broadcasted event"),getSource:y("Cannot get source of a broadcasted event")});return j(e,(function(e){var t=e.descHandler;Ti(t)(i)})),i.isStopped()},Yb=function(e,t,n,r,o){var i=Wb(n,r);return Xb(e,t,n,r,i,o)},Jb=function(){var e={};return{registerId:function(t,n,r){Se(r,(function(r,o){var i=void 0!==e[o]?e[o]:{};i[n]=function(e,t){return n=g.apply(void 0,[e.handler].concat(t)),r=e.purpose,{cHandler:n,purpose:r};var n,r}(r,t),e[o]=i}))},unregisterId:function(t){Se(e,(function(e,n){e.hasOwnProperty(t)&&delete e[t]}))},filterByType:function(t){return Be(e,t).map((function(e){return ke(e,(function(e,t){return function(e,t){return{id:e,descHandler:t}}(t,e)}))})).getOr([])},find:function(t,n,r){var o=Be(e,n);return tr(r,(function(e){return function(e,t){return mi(t).fold((function(){return F.none()}),(function(n){return e.bind((function(e){return Be(e,n)})).map((function(e){return function(e,t){return{element:e,descHandler:t}}(t,e)}))}))}(o,e)}),t)}}},Qb=function(){var e=Jb(),t={},n=function(e){var t=e.element;return mi(t).fold((function(){return function(e,t){var n=ci(di+e);return hi(t,n),n}("uid-",e.element)}),(function(e){return e}))},r=function(n){mi(n.element).each((function(n){delete t[n],e.unregisterId(n)}))};return{find:function(t,n,r){return e.find(t,n,r)},filter:function(t){return e.filterByType(t)},register:function(o){var i=n(o);Fe(t,i)&&function(e,n){var o=t[n];if(o!==e)throw new Error('The tagId "'+n+'" is already used by: '+ii(o.element)+"\nCannot use it for: "+ii(e.element)+"\nThe conflicting element is"+(Xi(o.element)?" ":" not ")+"already in the DOM");r(e)}(o,i);var a=[o];e.registerId(a,i,o.events),t[i]=o},unregister:r,getById:function(e){return Be(t,e)}}},Zb=Jf({name:"Container",factory:function(e){var t=e.dom,n=t.attributes,r=_(t,["attributes"]);return{uid:e.uid,dom:w({tag:"div",attributes:w({role:"presentation"},n)},r),components:e.components,behaviours:Xl(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[tn("components",[]),Gl("containerBehaviours",[]),tn("events",{}),tn("domModification",{}),tn("eventOrder",{})]}),eC=function(e){var t=function(t){return To(e.element).fold(C,(function(e){return Yn(t,e)}))},n=Qb(),r=function(e,r){return n.find(t,e,r)},o=Ub(e.element,{triggerEvent:function(e,t){return fu(e,t.target,(function(n){return function(e,t,n,r){return Yb(e,t,n,n.target,r)}(r,e,t,n)}))}}),i={debugInfo:h("real"),triggerEvent:function(e,t,n){fu(e,0,(function(o){return Yb(r,e,n,t,o)}))},triggerFocus:function(e,t){mi(e).fold((function(){ys(e)}),(function(n){fu(Ar(),0,(function(n){return function(e,t,n,r,o){var i=Wb(n,r);Gb(e,t,n,r,i,o)}(r,Ar(),{originator:t,kill:d,prevent:d,target:e},e,n),!1}))}))},triggerEscape:function(e,t){i.triggerEvent("keydown",e.element,t.event)},getByUid:function(e){return g(e)},getByDom:function(e){return v(e)},build:xa,addToGui:function(e){s(e)},removeFromGui:function(e){c(e)},addToWorld:function(e){a(e)},removeFromWorld:function(e){u(e)},broadcast:function(e){f(e)},broadcastOn:function(e,t){p(e,t)},broadcastEvent:function(e,t){m(e,t)},isConnected:C},a=function(e){e.connect(i),wo(e.element)||(n.register(e),j(e.components(),a),i.triggerEvent(Ir(),e.element,{target:e.element}))},u=function(e){wo(e.element)||(j(e.components(),u),n.unregister(e)),e.disconnect()},s=function(t){cl(e,t)},c=function(e){dl(e)},l=function(e){var t=n.filter(Tr());j(t,(function(t){var n=t.descHandler;Ti(n)(e)}))},f=function(e){l({universal:!0,data:e})},p=function(e,t){l({universal:!1,channels:e,data:t})},m=function(e,t){var r=n.filter(e);return Kb(r,t)},g=function(e){return n.getById(e).fold((function(){return ce.error(new Error('Could not find component with uid: "'+e+'" in system.'))}),ce.value)},v=function(e){var t=mi(e).getOr("not found");return g(t)};return a(e),{root:e,element:e.element,destroy:function(){o.unbind(),Go(e.element)},add:s,remove:c,getByUid:g,getByDom:v,addToWorld:a,removeFromWorld:u,broadcast:f,broadcastOn:p,broadcastEvent:m}},tC=h([tn("prefix","form-field"),Gl("fieldBehaviours",[od,ql])]),nC=h([Ef({schema:[Vt("dom")],name:"label"}),Ef({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[Vt("text")],name:"aria-descriptor"}),_f({factory:{sketch:function(e){var t=Ke(e,["factory"]);return e.factory.sketch(t)}},schema:[Vt("factory")],name:"field"})]),rC=Qf({name:"FormField",configFields:tC(),partFields:nC(),factory:function(e,t,n,r){var o=Kl(e.fieldBehaviours,[od.config({find:function(t){return Rf(t,e,"field")}}),ql.config({store:{mode:"manual",getValue:function(e){return od.getCurrent(e).bind(ql.getValue)},setValue:function(e,t){od.getCurrent(e).each((function(e){ql.setValue(e,t)}))}}})]),i=ro([mo((function(t,n){var r=zf(t,e,["label","field","aria-descriptor"]);r.field().each((function(t){var n=ci(e.prefix);r.label().each((function(e){Qo(e.element,"for",n),Qo(t.element,"id",n)})),r["aria-descriptor"]().each((function(n){var r=ci(e.prefix);Qo(n.element,"id",r),Qo(t.element,"aria-describedby",r)}))}))}))]),a={getField:function(t){return Rf(t,e,"field")},getLabel:function(t){return Rf(t,e,"label")}};return{uid:e.uid,dom:e.dom,components:t,behaviours:o,events:i,apis:a}},apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),oC=Object.freeze({__proto__:null,exhibit:function(e,t){return ki({attributes:Je([{key:t.tabAttr,value:"true"}])})}}),iC=[tn("tabAttr","data-alloy-tabstop")],aC=ds({fields:iC,name:"tabstopping",active:oC}),uC=tinymce.util.Tools.resolve("tinymce.html.Entities"),sC=function(e,t,n,r){var o=cC(e,t,n,r);return rC.sketch(o)},cC=function(e,t,n,r){return{dom:lC(n),components:e.toArray().concat([t]),fieldBehaviours:ls(r)}},lC=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},fC=function(e,t){return rC.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}})},dC=ci("form-component-change"),pC=ci("form-close"),hC=ci("form-cancel"),mC=ci("form-action"),gC=ci("form-submit"),vC=ci("form-block"),yC=ci("form-unblock"),bC=ci("form-tabchange"),CC=ci("form-resize"),xC=function(e,t){var n,r,o,i=e.label.map((function(e){return fC(e,t)})),a=function(e){return function(t,n){ru(n.event.target,"[data-collection-item-value]").each((function(r){e(t,n,r,Zo(r,"data-collection-item-value"))}))}},u=a((function(n,r,o,i){r.stop(),t.isDisabled()||Qr(n,mC,{name:e.name,value:i})})),s=[ao(hr(),a((function(e,t,n){ys(n)}))),ao(xr(),u),ao(Nr(),u),ao(mr(),a((function(e,t,n){nu(e.element,"."+yg).each((function(e){ji(e,yg)})),Hi(n,yg)}))),ao(gr(),a((function(e){nu(e.element,"."+yg).each((function(e){ji(e,yg)}))}))),yo(a((function(t,n,r,o){Qr(t,mC,{name:e.name,value:o})})))],c=function(e,t){return $(Oc(e.element,".tox-collection__item"),t)},l=rC.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:m},behaviours:ls([Cv.config({disabled:t.isDisabled,onDisabled:function(e){c(e,(function(e){Hi(e,"tox-collection__item--state-disabled"),Qo(e,"aria-disabled",!0)}))},onEnabled:function(e){c(e,(function(e){ji(e,"tox-collection__item--state-disabled"),ni(e,"aria-disabled")}))}}),Qv(),mh.config({}),ql.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,r){!function(n,r){var o=$(r,(function(n){var r=av.translate(n.text),o=1===e.columns?'<div class="tox-collection__item-label">'+r+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=r.replace(/\_| \- |\-/g,(function(e){return a[e]}));return'<div class="tox-collection__item'+(t.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+uC.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+o+"</div>"})),i="auto"!==e.columns&&e.columns>1?H(o,e.columns):[o],a=$(i,(function(e){return'<div class="tox-collection__group">'+e.join("")+"</div>"}));Yo(n.element,a.join(""))}(n,r),"auto"===e.columns&&Xg(n,5,"tox-collection__item").each((function(e){var t=e.numRows,r=e.numColumns;lh.setGridSize(n,t,r)})),Jr(n,CC)}}),aC.config({}),lh.config((r=e.columns,o="normal",1===r?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===r?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===o?".tox-swatches__row":".tox-collection__group",cell:"color"===o?".tox-swatch":"."+dg}})),gh("collection-events",s)]),eventOrder:(n={},n[Or()]=["disabling","alloy.base.behaviour","collection-events"],n)});return sC(i,l,["tox-form__group--collection"],[])},wC=h([Kt("data"),tn("inputAttributes",{}),tn("inputStyles",{}),tn("tag","input"),tn("inputClasses",[]),Cu("onSetValue"),tn("styles",{}),tn("eventOrder",{}),Gl("inputBehaviours",[ql,xh]),tn("selectOnFocus",!0)]),_C=function(e){return ls([xh.config({onFocus:e.selectOnFocus?function(e){var t=e.element,n=ca(t);t.dom.setSelectionRange(0,n.length)}:d})])},SC=function(e){return w(w({},_C(e)),Kl(e.inputBehaviours,[ql.config({store:w(w({mode:"manual"},e.data.map((function(e){return{initialValue:e}})).getOr({})),{getValue:function(e){return ca(e.element)},setValue:function(e,t){ca(e.element)!==t&&la(e.element,t)}}),onSetValue:e.onSetValue})]))},EC=function(e){return{tag:e.tag,attributes:w({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}},AC=Jf({name:"Input",configFields:wC(),factory:function(e,t){return{uid:e.uid,dom:EC(e),components:[],behaviours:SC(e),eventOrder:e.eventOrder}}}),DC={},kC={exports:DC};Db=DC,kb=kC,function(e){"object"==typeof Db&&void 0!==kb?kb.exports=e():("undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s=!1;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();var c,l=[],f=!1,d=-1;function p(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!f){var e=s(p);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||f||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(o){return void s(t.promise,o)}u(t.promise,r)}else(1===e._state?u:s)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(a){s(e,a)}var r,o}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(r){if(n)return;n=!0,s(t,r)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new l(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),n)}t[i]=a,0==--r&&e(t)}catch(s){n(s)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},i._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[t]=!0,o((function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}));var TC,OC,BC=kC.exports.boltExport,NC=function(e){var t=F.none(),n=[],r=function(e){o()?a(e):n.push(e)},o=function(){return t.isSome()},i=function(e){j(e,a)},a=function(e){t.each((function(t){setTimeout((function(){e(t)}),0)}))};return e((function(e){o()||(t=F.some(e),i(n),n=[])})),{get:r,map:function(e){return NC((function(t){r((function(n){t(e(n))}))}))},isReady:o}},FC={nu:NC,pure:function(e){return NC((function(t){t(e)}))}},MC=function(e){setTimeout((function(){throw e}),0)},PC=function(e){var t=function(t){e().then(t,MC)};return{map:function(t){return PC((function(){return e().then(t)}))},bind:function(t){return PC((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return PC((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return FC.nu(t)},toCached:function(){var t=null;return PC((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},IC=function(e){return PC((function(){return new BC(e)}))},RC=function(e){return PC((function(){return BC.resolve(e)}))},LC=["input","textarea"],zC=function(e){var t=bo(e);return L(LC,t)},VC=function(e,t){var n=t.getRoot(e).getOr(e.element);ji(n,t.invalidClass),t.notify.each((function(t){zC(e.element)&&Qo(e.element,"aria-invalid",!1),t.getContainer(e).each((function(e){Yo(e,t.validHtml)})),t.onValid(e)}))},HC=function(e,t,n,r){var o=t.getRoot(e).getOr(e.element);Hi(o,t.invalidClass),t.notify.each((function(t){zC(e.element)&&Qo(e.element,"aria-invalid",!0),t.getContainer(e).each((function(e){Yo(e,r)})),t.onInvalid(e,r)}))},$C=function(e,t,n){return t.validator.fold((function(){return RC(ce.value(!0))}),(function(t){return t.validate(e)}))},jC=function(e,t,n){return t.notify.each((function(t){t.onValidate(e)})),$C(e,t).map((function(n){return e.getSystem().isConnected()?n.fold((function(n){return HC(e,t,0,n),ce.error(n)}),(function(n){return VC(e,t),ce.value(n)})):ce.error("No longer in system")}))},UC=Object.freeze({__proto__:null,markValid:VC,markInvalid:HC,query:$C,run:jC,isInvalid:function(e,t){var n=t.getRoot(e).getOr(e.element);return Ui(n,t.invalidClass)}}),WC=Object.freeze({__proto__:null,events:function(e,t){return e.validator.map((function(t){return ro([ao(t.onEvent,(function(t){jC(t,e).get(m)}))].concat(t.validateOnLoad?[mo((function(t){jC(t,e).get(d)}))]:[]))})).getOr({})}}),qC=[Vt("invalidClass"),tn("getRoot",F.none),en("notify",[tn("aria","alert"),tn("getContainer",F.none),tn("validHtml",""),Cu("onValid"),Cu("onInvalid"),Cu("onValidate")]),en("validator",[Vt("validate"),tn("onEvent","input"),tn("validateOnLoad",!0)])],GC=ds({fields:qC,name:"invalidating",active:WC,apis:UC,extra:{validation:function(e){return function(t){var n=ql.getValue(t);return RC(e(n))}}}}),XC=Object.freeze({__proto__:null,getCoupled:function(e,t,n,r){return n.getOrCreate(e,t,r)}}),KC=[Ht("others",St(ce.value,Bt()))],YC=ds({fields:KC,name:"coupling",apis:XC,state:Object.freeze({__proto__:null,init:function(){var e={},t=h({});return Ai({readState:t,getOrCreate:function(t,n,r){var o=we(n.others);if(o)return Be(e,r).getOrThunk((function(){var o=Be(n.others,r).getOrDie("No information found for coupled component: "+r)(t),i=t.getSystem().build(o);return e[r]=i,i}));throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(o,null,2))}})}})}),JC=h("sink"),QC=h(Ef({name:JC(),overrides:h({dom:{tag:"div"},behaviours:ls([ol.config({useFixed:C})]),events:ro([fo(vr()),fo(lr()),fo(xr())])})}));(OC=TC||(TC={}))[OC.HighlightFirst=0]="HighlightFirst",OC[OC.HighlightNone=1]="HighlightNone";var ZC,ex,tx,nx,rx=function(e,t){var n=e.getHotspot(t).getOr(t),r="hotspot",o=e.getAnchorOverrides();return e.layouts.fold((function(){return{anchor:r,hotspot:n,overrides:o}}),(function(e){return{anchor:r,hotspot:n,overrides:o,layouts:e}}))},ox=function(e,t,n,r,o,i,a){return function(e,t,n,r,o,i,a){var u=function(e,t,n){return(0,e.fetch)(n).map(t)}(e,t,r),s=sx(r,e);return u.map((function(e){return e.bind((function(e){return F.from(rm.sketch(w(w({},i.menu()),{uid:gi(""),data:e,highlightImmediately:a===TC.HighlightFirst,onOpenMenu:function(e,t){var r=s().getOrDie();ol.position(r,n,t),Al.decloak(o)},onOpenSubmenu:function(e,t,n){var r=s().getOrDie();ol.position(r,{anchor:"submenu",item:t},n),Al.decloak(o)},onRepositionMenu:function(e,t,r){var o=s().getOrDie();ol.position(o,n,t),j(r,(function(e){ol.position(o,{anchor:"submenu",item:e.triggeringItem},e.triggeredMenu)}))},onEscape:function(){return xh.focus(r),Al.close(o),F.some(!0)}})))}))}))}(e,t,rx(e,n),n,r,o,a).map((function(e){return e.fold((function(){Al.isOpen(r)&&Al.close(r)}),(function(e){Al.cloak(r),Al.open(r,e),i(r)})),r}))},ix=function(e,t,n,r,o,i,a){return Al.close(r),RC(r)},ax=function(e,t,n,r,o,i){var a=YC.getCoupled(n,"sandbox");return(Al.isOpen(a)?ix:ox)(e,t,n,a,r,o,i)},ux=function(e,t,n){var r,o,i=od.getCurrent(t).getOr(t),a=Fa(e.element);n?Zi(i.element,"min-width",a+"px"):(r=i.element,o=a,Na.set(r,o))},sx=function(e,t){return e.getSystem().getByUid(t.uid+"-"+JC()).map((function(e){return function(){return ce.value(e)}})).getOrThunk((function(){return t.lazySink.fold((function(){return function(){return ce.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(t){return function(){return t(e)}}))}))},cx=function(e){Al.getState(e).each((function(e){rm.repositionMenus(e)}))},lx=function(e,t,n){var r=ou(),o=sx(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:r.id,role:"listbox"}},behaviours:Jl(e.sandboxBehaviours,[ql.config({store:{mode:"memory",initialValue:t}}),Al.config({onOpen:function(o,i){var a=rx(e,t);r.link(t.element),e.matchWidth&&ux(a.hotspot,i,e.useMinWidth),e.onOpen(a,o,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(o,i)},onClose:function(e,o){r.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,o)},isPartOf:function(e,n,r){return au(n,r)||au(t,r)},getAttachPoint:function(){return o().getOrDie()}}),od.config({find:function(e){return Al.getState(e).bind((function(e){return od.getCurrent(e)}))}}),gs.config({channels:w(w({},Bl({isExtraPart:b})),Fl({doReposition:cx}))})])}},fx=function(e){var t=YC.getCoupled(e,"sandbox");cx(t)},dx=function(){return[tn("sandboxClasses",[]),Yl("sandboxBehaviours",[od,gs,Al,ql])]},px=h([Vt("dom"),Vt("fetch"),Cu("onOpen"),xu("onExecute"),tn("getHotspot",F.some),tn("getAnchorOverrides",h({})),Js(),Gl("dropdownBehaviours",[Fh,YC,lh,xh]),Vt("toggleClass"),tn("eventOrder",{}),Kt("lazySink"),tn("matchWidth",!1),tn("useMinWidth",!1),Kt("role")].concat(dx())),hx=h([Sf({schema:[vu()],name:"menu",defaults:function(e){return{onExecute:e.onExecute}}}),QC()]),mx=Qf({name:"Dropdown",configFields:px(),partFields:hx(),factory:function(e,t,n,r){var o,i,a=function(e){Al.getState(e).each((function(e){rm.highlightPrimary(e)}))},u={expand:function(t){Fh.isOn(t)||ax(e,(function(e){return e}),t,r,d,TC.HighlightNone).get(d)},open:function(t){Fh.isOn(t)||ax(e,(function(e){return e}),t,r,d,TC.HighlightFirst).get(d)},isOpen:Fh.isOn,close:function(t){Fh.isOn(t)&&ax(e,(function(e){return e}),t,r,d,TC.HighlightFirst).get(d)},repositionMenus:function(e){Fh.isOn(e)&&fx(e)}},s=function(e,t){return Zr(e),F.some(!0)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Kl(e.dropdownBehaviours,[Fh.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),YC.config({others:{sandbox:function(t){return lx(e,t,{onOpen:function(){return Fh.on(t)},onClose:function(){return Fh.off(t)}})}}}),lh.config({mode:"special",onSpace:s,onEnter:s,onDown:function(e,t){if(mx.isOpen(e)){var n=YC.getCoupled(e,"sandbox");a(n)}else mx.open(e);return F.some(!0)},onEscape:function(e,t){return mx.isOpen(e)?(mx.close(e),F.some(!0)):F.none()}}),xh.config({})]),events:Ph(F.some((function(t){ax(e,(function(e){return e}),t,r,a,TC.HighlightFirst).get(d)}))),eventOrder:w(w({},e.eventOrder),(o={},o[Or()]=["disabling","toggling","alloy.base.behaviour"],o)),apis:u,domModification:{attributes:w(w({"aria-haspopup":"true"},e.role.fold((function(){return{}}),(function(e){return{role:e}}))),"button"===e.dom.tag?{type:(i="type",Be(e.dom,"attributes").bind((function(e){return Be(e,i)}))).getOr("button")}:{})}}},apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)},repositionMenus:function(e,t){return e.repositionMenus(t)}}}),gx=Object.freeze({__proto__:null,events:function(){return ro([oo(_r(),C)])},exhibit:function(){return ki({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),vx=ds({fields:[],name:"unselecting",active:gx}),yx=ci("color-input-change"),bx=ci("color-swatch-change"),Cx=ci("color-picker-cancel"),xx=function(e,t,n){var r=rC.parts.field({factory:AC,inputClasses:["tox-textfield"],onSetValue:function(e){return GC.run(e).get(d)},inputBehaviours:ls([Cv.config({disabled:t.providers.isDisabled}),Qv(),aC.config({}),GC.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(e){return To(e.element)},notify:{onValid:function(e){var t=ql.getValue(e);Qr(e,yx,{color:t})}},validator:{validateOnLoad:!1,validate:function(e){var t=ql.getValue(e);if(0===t.length)return RC(ce.value(!0));var n=hn.fromTag("span");Zi(n,"background-color",t);var r=oa(n,"background-color").fold((function(){return ce.error("blah")}),(function(e){return ce.value(t)}));return RC(r)}}})]),selectOnFocus:!1}),o=e.label.map((function(e){return fC(e,t.providers)})),i=function(e,t){Qr(e,bx,{value:t})},a=ym(function(e,t){return mx.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:ls([ey(t.providers.isDisabled),Qv(),vx.config({}),aC.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:function(n){return IC((function(t){return e.fetch(t)})).map((function(r){return F.from(Nb(Re(fb(ci("menu-value"),r,(function(t){e.onItemAction(n,t)}),e.columns,e.presets,lg.CLOSE_ON_EXECUTE,b,t.providers),{movement:pb(e.columns,e.presets)})))}))},parts:{menu:Dg(0,0,e.presets)}})}({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Wu,Uu,Ku]},onLtr:function(){return[Uu,Wu,Ku]}},components:[],fetch:ab(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:function(e,t){a.getOpt(e).each((function(e){"custom"===t?n.colorPicker((function(t){t.fold((function(){return Jr(e,Cx)}),(function(t){i(e,t),nb(t)}))}),"#ffffff"):i(e,"remove"===t?"":t)}))}},t));return rC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:o.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,a.asSpec()]}]),fieldBehaviours:ls([gh("form-field-events",[ao(yx,(function(t,n){a.getOpt(t).each((function(e){Zi(e.element,"background-color",n.event.color)})),Qr(t,dC,{name:e.name})})),ao(bx,(function(e,t){rC.getField(e).each((function(n){ql.setValue(n,t.event.value),od.getCurrent(e).each(xh.focus)}))})),ao(Cx,(function(e,t){rC.getField(e).each((function(t){od.getCurrent(e).each(xh.focus)}))}))])])})},wx=Ef({schema:[Vt("dom")],name:"label"}),_x=function(e){return Ef({name:e+"-edge",overrides:function(t){return t.model.manager.edgeActions[e].fold((function(){return{}}),(function(e){return{events:ro([uo(ar(),(function(t,n,r){return e(t,r)}),[t]),uo(lr(),(function(t,n,r){return e(t,r)}),[t]),uo(fr(),(function(t,n,r){r.mouseIsDown.get()&&e(t,r)}),[t])])}}))}})},Sx=_x("top-left"),Ex=_x("top"),Ax=_x("top-right"),Dx=_x("right"),kx=_x("bottom-right"),Tx=_x("bottom"),Ox=_x("bottom-left"),Bx=_x("left"),Nx=_f({name:"thumb",defaults:h({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:ro([co(ar(),e,"spectrum"),co(ur(),e,"spectrum"),co(sr(),e,"spectrum"),co(lr(),e,"spectrum"),co(fr(),e,"spectrum"),co(pr(),e,"spectrum")])}}}),Fx=_f({schema:[fn("mouseIsDown",(function(){return dn(!1)}))],name:"spectrum",overrides:function(e){var t=e.model.manager,n=function(n,r){return t.getValueFromEvent(r).map((function(r){return t.setValueFrom(n,e,r)}))};return{behaviours:ls([lh.config({mode:"special",onLeft:function(n){return t.onLeft(n,e)},onRight:function(n){return t.onRight(n,e)},onUp:function(n){return t.onUp(n,e)},onDown:function(n){return t.onDown(n,e)}}),xh.config({})]),events:ro([ao(ar(),n),ao(ur(),n),ao(lr(),n),ao(fr(),(function(t,r){e.mouseIsDown.get()&&n(t,r)}))])}}}),Mx=[wx,Bx,Dx,Ex,Tx,Sx,Ax,Ox,kx,Nx,Fx],Px=h("slider.change.value"),Ix=function(e){var t=e.event.raw;if(function(e){return-1!==e.type.indexOf("touch")}(t)){var n=t;return void 0!==n.touches&&1===n.touches.length?F.some(n.touches[0]).map((function(e){return ka(e.clientX,e.clientY)})):F.none()}var r=t;return void 0!==r.clientX?F.some(r).map((function(e){return ka(e.clientX,e.clientY)})):F.none()},Rx=function(e){return e.model.minX},Lx=function(e){return e.model.minY},zx=function(e){return e.model.minX-1},Vx=function(e){return e.model.minY-1},Hx=function(e){return e.model.maxX},$x=function(e){return e.model.maxY},jx=function(e){return e.model.maxX+1},Ux=function(e){return e.model.maxY+1},Wx=function(e,t,n){return t(e)-n(e)},qx=function(e){return Wx(e,Hx,Rx)},Gx=function(e){return Wx(e,$x,Lx)},Xx=function(e){return qx(e)/2},Kx=function(e){return Gx(e)/2},Yx=function(e){return e.stepSize},Jx=function(e){return e.snapToGrid},Qx=function(e){return e.snapStart},Zx=function(e){return e.rounded},ew=function(e,t){return void 0!==e[t+"-edge"]},tw=function(e){return ew(e,"left")},nw=function(e){return ew(e,"right")},rw=function(e){return ew(e,"top")},ow=function(e){return ew(e,"bottom")},iw=function(e){return e.model.value.get()},aw=function(e){return{x:e}},uw=function(e){return{y:e}},sw=function(e,t){return{x:e,y:t}},cw=function(e,t){Qr(e,Px(),{value:t})},lw=function(e,t,n,r){return e<t?e:e>n?n:e===t?t-1:Math.max(t,e-r)},fw=function(e,t,n,r){return e>n?e:e<t?t:e===n?n+1:Math.min(n,e+r)},dw=function(e,t,n){return Math.max(t,Math.min(n,e))},pw=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,i=e.step,a=e.snap,u=e.snapStart,s=e.rounded,c=e.hasMinEdge,l=e.hasMaxEdge,f=e.minBound,d=e.maxBound,p=e.screenRange,h=c?t-1:t,m=l?n+1:n;if(o<f)return h;if(o>d)return m;var g=function(e,t,n){return Math.min(n,Math.max(e,t))-t}(o,f,d),v=dw(g/p*r+t,h,m);return a&&v>=t&&v<=n?function(e,t,n,r,o){return o.fold((function(){var o=e-t,i=Math.round(o/r)*r;return dw(t+i,t-1,n+1)}),(function(t){var o=(e-t)%r,i=Math.round(o/r),a=Math.floor((e-t)/r),u=Math.floor((n-t)/r),s=t+Math.min(u,a+i)*r;return Math.max(t,s)}))}(v,t,n,i,u):s?Math.round(v):v},hw=function(e){var t=e.min,n=e.max,r=e.range,o=e.value,i=e.hasMinEdge,a=e.hasMaxEdge,u=e.maxBound,s=e.maxOffset,c=e.centerMinEdge,l=e.centerMaxEdge;return o<t?i?0:c:o>n?a?u:l:(o-t)/r*s},mw="top",gw="right",vw="bottom",yw="left",bw=function(e){return e.element.dom.getBoundingClientRect()},Cw=function(e,t){return e[t]},xw=function(e){var t=bw(e);return Cw(t,yw)},ww=function(e){var t=bw(e);return Cw(t,gw)},_w=function(e){var t=bw(e);return Cw(t,mw)},Sw=function(e){var t=bw(e);return Cw(t,vw)},Ew=function(e){var t=bw(e);return Cw(t,"width")},Aw=function(e){var t=bw(e);return Cw(t,"height")},Dw=function(e,t,n){return(e+t)/2-n},kw=function(e,t){var n=bw(e),r=bw(t),o=Cw(n,yw),i=Cw(n,gw),a=Cw(r,yw);return Dw(o,i,a)},Tw=function(e,t){var n=bw(e),r=bw(t),o=Cw(n,mw),i=Cw(n,vw),a=Cw(r,mw);return Dw(o,i,a)},Ow=function(e,t){Qr(e,Px(),{value:t})},Bw=function(e){return{x:e}},Nw=function(e,t,n){var r={min:Rx(t),max:Hx(t),range:qx(t),value:n,step:Yx(t),snap:Jx(t),snapStart:Qx(t),rounded:Zx(t),hasMinEdge:tw(t),hasMaxEdge:nw(t),minBound:xw(e),maxBound:ww(e),screenRange:Ew(e)};return pw(r)},Fw=function(e){return function(t,n){return function(e,t,n){var r=(e>0?fw:lw)(iw(n).x,Rx(n),Hx(n),Yx(n));return Ow(t,Bw(r)),F.some(r)}(e,t,n).map(C)}},Mw=function(e,t,n,r,o,i){var a=function(e,t,n,r,o){var i=Ew(e),a=r.bind((function(t){return F.some(kw(t,e))})).getOr(0),u=o.bind((function(t){return F.some(kw(t,e))})).getOr(i),s={min:Rx(t),max:Hx(t),range:qx(t),value:n,hasMinEdge:tw(t),hasMaxEdge:nw(t),minBound:xw(e),minOffset:0,maxBound:ww(e),maxOffset:i,centerMinEdge:a,centerMaxEdge:u};return hw(s)}(t,i,n,r,o);return xw(t)-xw(e)+a},Pw=Fw(-1),Iw=Fw(1),Rw=F.none,Lw=F.none,zw={"top-left":F.none(),top:F.none(),"top-right":F.none(),right:F.some((function(e,t){cw(e,aw(jx(t)))})),"bottom-right":F.none(),bottom:F.none(),"bottom-left":F.none(),left:F.some((function(e,t){cw(e,aw(zx(t)))}))},Vw=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=Nw(e,t,n),o=Bw(r);return Ow(e,o),r},setToMin:function(e,t){var n=Rx(t);Ow(e,Bw(n))},setToMax:function(e,t){var n=Hx(t);Ow(e,Bw(n))},findValueOfOffset:Nw,getValueFromEvent:function(e){return Ix(e).map((function(e){return e.left}))},findPositionOfValue:Mw,setPositionFromValue:function(e,t,n,r){var o=iw(n),i=Mw(e,r.getSpectrum(e),o.x,r.getLeftEdge(e),r.getRightEdge(e),n),a=Fa(t.element)/2;Zi(t.element,"left",i-a+"px")},onLeft:Pw,onRight:Iw,onUp:Rw,onDown:Lw,edgeActions:zw}),Hw=function(e,t){Qr(e,Px(),{value:t})},$w=function(e){return{y:e}},jw=function(e,t,n){var r={min:Lx(t),max:$x(t),range:Gx(t),value:n,step:Yx(t),snap:Jx(t),snapStart:Qx(t),rounded:Zx(t),hasMinEdge:rw(t),hasMaxEdge:ow(t),minBound:_w(e),maxBound:Sw(e),screenRange:Aw(e)};return pw(r)},Uw=function(e){return function(t,n){return function(e,t,n){var r=(e>0?fw:lw)(iw(n).y,Lx(n),$x(n),Yx(n));return Hw(t,$w(r)),F.some(r)}(e,t,n).map(C)}},Ww=function(e,t,n,r,o,i){var a=function(e,t,n,r,o){var i=Aw(e),a=r.bind((function(t){return F.some(Tw(t,e))})).getOr(0),u=o.bind((function(t){return F.some(Tw(t,e))})).getOr(i),s={min:Lx(t),max:$x(t),range:Gx(t),value:n,hasMinEdge:rw(t),hasMaxEdge:ow(t),minBound:_w(e),minOffset:0,maxBound:Sw(e),maxOffset:i,centerMinEdge:a,centerMaxEdge:u};return hw(s)}(t,i,n,r,o);return _w(t)-_w(e)+a},qw=F.none,Gw=F.none,Xw=Uw(-1),Kw=Uw(1),Yw={"top-left":F.none(),top:F.some((function(e,t){cw(e,uw(Vx(t)))})),"top-right":F.none(),right:F.none(),"bottom-right":F.none(),bottom:F.some((function(e,t){cw(e,uw(Ux(t)))})),"bottom-left":F.none(),left:F.none()},Jw=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=jw(e,t,n),o=$w(r);return Hw(e,o),r},setToMin:function(e,t){var n=Lx(t);Hw(e,$w(n))},setToMax:function(e,t){var n=$x(t);Hw(e,$w(n))},findValueOfOffset:jw,getValueFromEvent:function(e){return Ix(e).map((function(e){return e.top}))},findPositionOfValue:Ww,setPositionFromValue:function(e,t,n,r){var o=iw(n),i=Ww(e,r.getSpectrum(e),o.y,r.getTopEdge(e),r.getBottomEdge(e),n),a=Ea(t.element)/2;Zi(t.element,"top",i-a+"px")},onLeft:qw,onRight:Gw,onUp:Xw,onDown:Kw,edgeActions:Yw}),Qw=function(e,t){Qr(e,Px(),{value:t})},Zw=function(e,t){return{x:e,y:t}},e_=function(e,t){return function(n,r){return function(e,t,n,r){var o=e>0?fw:lw,i=t?iw(r).x:o(iw(r).x,Rx(r),Hx(r),Yx(r)),a=t?o(iw(r).y,Lx(r),$x(r),Yx(r)):iw(r).y;return Qw(n,Zw(i,a)),F.some(i)}(e,t,n,r).map(C)}},t_=e_(-1,!1),n_=e_(1,!1),r_=e_(-1,!0),o_=e_(1,!0),i_={"top-left":F.some((function(e,t){cw(e,sw(zx(t),Vx(t)))})),top:F.some((function(e,t){cw(e,sw(Xx(t),Vx(t)))})),"top-right":F.some((function(e,t){cw(e,sw(jx(t),Vx(t)))})),right:F.some((function(e,t){cw(e,sw(jx(t),Kx(t)))})),"bottom-right":F.some((function(e,t){cw(e,sw(jx(t),Ux(t)))})),bottom:F.some((function(e,t){cw(e,sw(Xx(t),Ux(t)))})),"bottom-left":F.some((function(e,t){cw(e,sw(zx(t),Ux(t)))})),left:F.some((function(e,t){cw(e,sw(zx(t),Kx(t)))}))},a_=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=Nw(e,t,n.left),o=jw(e,t,n.top),i=Zw(r,o);return Qw(e,i),i},setToMin:function(e,t){var n=Rx(t),r=Lx(t);Qw(e,Zw(n,r))},setToMax:function(e,t){var n=Hx(t),r=$x(t);Qw(e,Zw(n,r))},getValueFromEvent:function(e){return Ix(e)},setPositionFromValue:function(e,t,n,r){var o=iw(n),i=Mw(e,r.getSpectrum(e),o.x,r.getLeftEdge(e),r.getRightEdge(e),n),a=Ww(e,r.getSpectrum(e),o.y,r.getTopEdge(e),r.getBottomEdge(e),n),u=Fa(t.element)/2,s=Ea(t.element)/2;Zi(t.element,"left",i-u+"px"),Zi(t.element,"top",a-s+"px")},onLeft:t_,onRight:n_,onUp:r_,onDown:o_,edgeActions:i_}),u_=Qf({name:"Slider",configFields:[tn("stepSize",1),tn("onChange",d),tn("onChoose",d),tn("onInit",d),tn("onDragStart",d),tn("onDragEnd",d),tn("snapToGrid",!1),tn("rounded",!0),Kt("snapStart"),Ht("model",Ot("mode",{x:[tn("minX",0),tn("maxX",100),fn("value",(function(e){return dn(e.mode.minX)})),Vt("getInitialValue"),Su("manager",Vw)],y:[tn("minY",0),tn("maxY",100),fn("value",(function(e){return dn(e.mode.minY)})),Vt("getInitialValue"),Su("manager",Jw)],xy:[tn("minX",0),tn("maxX",100),tn("minY",0),tn("maxY",100),fn("value",(function(e){return dn({x:e.mode.minX,y:e.mode.minY})})),Vt("getInitialValue"),Su("manager",a_)]})),Gl("sliderBehaviours",[lh,ql]),fn("mouseIsDown",(function(){return dn(!1)}))],partFields:Mx,factory:function(e,t,n,r){var o,i=function(t){return Lf(t,e,"thumb")},a=function(t){return Lf(t,e,"spectrum")},u=function(t){return Rf(t,e,"left-edge")},s=function(t){return Rf(t,e,"right-edge")},c=function(t){return Rf(t,e,"top-edge")},l=function(t){return Rf(t,e,"bottom-edge")},f=e.model,d=f.manager,p=function(t,n){d.setPositionFromValue(t,n,e,{getLeftEdge:u,getRightEdge:s,getTopEdge:c,getBottomEdge:l,getSpectrum:a})},h=function(e,t){f.value.set(t);var n=i(e);p(e,n)},m=function(t){var n=e.mouseIsDown.get();e.mouseIsDown.set(!1),n&&Rf(t,e,"thumb").each((function(n){var r=f.value.get();e.onChoose(t,n,r)}))},g=function(t,n){n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,i(t))},v=function(t,n){n.stop(),e.onDragEnd(t,i(t)),m(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Kl(e.sliderBehaviours,[lh.config({mode:"special",focusIn:function(t){return Rf(t,e,"spectrum").map(lh.focusIn).map(C)}}),ql.config({store:{mode:"manual",getValue:function(e){return f.value.get()}}}),gs.config({channels:(o={},o[Tl()]={onReceive:m},o)})]),events:ro([ao(Px(),(function(t,n){!function(t,n){h(t,n);var r=i(t);e.onChange(t,r,n),F.some(!0)}(t,n.event.value)})),mo((function(t,n){var r=f.getInitialValue();f.value.set(r);var o=i(t);p(t,o);var u=a(t);e.onInit(t,o,u,f.value.get())})),ao(ar(),g),ao(sr(),v),ao(lr(),g),ao(pr(),v)]),apis:{resetToMin:function(t){d.setToMin(t,e)},resetToMax:function(t){d.setToMax(t,e)},setValue:h,refresh:p},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(e,t,n){e.setValue(t,n)},resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),s_=function(e,t,n){return{hue:e,saturation:t,value:n}},c_=function(e){var t,n=0,r=0,o=e.red/255,i=e.green/255,a=e.blue/255,u=Math.min(o,Math.min(i,a)),s=Math.max(o,Math.max(i,a));return u===s?s_(0,0,100*(r=u)):(n=60*((n=o===u?3:a===u?1:5)-(o===u?i-a:a===u?o-i:a-o)/(s-u)),t=(s-u)/s,r=s,s_(Math.round(n),Math.round(100*t),Math.round(100*r)))},l_=function(e){return Fy(Hy(e))},f_=ci("rgb-hex-update"),d_=ci("slider-update"),p_=ci("palette-update"),h_="form",m_=[Gl("formBehaviours",[ql])],g_=function(e){return"<alloy.field."+e+">"},v_=function(e,t){return{uid:e.uid,dom:e.dom,components:t,behaviours:Kl(e.formBehaviours,[ql.config({store:{mode:"manual",getValue:function(t){var n=Vf(t,e);return Ee(n,(function(e,t){return e().bind((function(e){var n,r,o=od.getCurrent(e);return n=o,r=new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+ii(e.element)),n.fold((function(){return ce.error(r)}),ce.value)})).map(ql.getValue)}))},setValue:function(t,n){Se(n,(function(n,r){Rf(t,e,r).each((function(e){od.getCurrent(e).each((function(e){ql.setValue(e,n)}))}))}))}}})]),apis:{getField:function(t,n){return Rf(t,e,n).bind(od.getCurrent)}}}},y_={getField:Si((function(e,t,n){return e.getField(t,n)})),sketch:function(e){var t,n=(t=[],{field:function(e,n){return t.push(e),Nf(h_,g_(e),n)},record:function(){return t}}),r=e(n),o=n.record(),i=$(o,(function(e){return _f({name:e,pname:g_(e)})}));return Gf(h_,m_,i,v_,r)}},b_=ci("valid-input"),C_=ci("invalid-input"),x_=ci("validating-input"),w_="colorcustom.rgb.",__=function(e,t,n,r){var o=function(n,r){return GC.config({invalidClass:t("invalid"),notify:{onValidate:function(e){Qr(e,x_,{type:n})},onValid:function(e){Qr(e,b_,{type:n,value:ql.getValue(e)})},onInvalid:function(e){Qr(e,C_,{type:n,value:ql.getValue(e)})}},validator:{validate:function(t){var n=ql.getValue(t),o=r(n)?ce.value(!0):ce.error(e("aria.input.invalid"));return RC(o)},validateOnLoad:!1}})},i=function(n,r,i,a,u){var s=e("colorcustom.rgb.range"),c=[rC.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),rC.parts.field({data:u,factory:AC,inputAttributes:w({type:"text"},"hex"===r?{"aria-live":"polite"}:{}),inputClasses:[t("textfield")],inputBehaviours:ls([o(r,n),aC.config({})]),onSetValue:function(e){GC.isInvalid(e)&&GC.run(e).get(d)}})],l="hex"!==r?[rC.parts["aria-descriptor"]({text:s})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(l)}},a=function(e,t){var n=t.red,r=t.green,o=t.blue;ql.setValue(e,{red:n,green:r,blue:o})},u=ym({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),s=function(e,t){u.getOpt(e).each((function(e){Zi(e.element,"background-color","#"+t.value)}))};return Jf({factory:function(){var o={red:dn(F.some(255)),green:dn(F.some(255)),blue:dn(F.some(255)),hex:dn(F.some("ffffff"))},c=function(e){return o[e].get()},l=function(e,t){o[e].set(t)},f=function(e){var t=e.red,n=e.green,r=e.blue;l("red",F.some(t)),l("green",F.some(n)),l("blue",F.some(r))},d=function(e,t){var n=t.event;"hex"!==n.type?l(n.type,F.none()):r(e)},p=function(e,t,n){var r=parseInt(n,10);l(t,F.some(r)),c("red").bind((function(e){return c("green").bind((function(t){return c("blue").map((function(n){return zy(e,t,n,1)}))}))})).each((function(t){var n=function(e,t){var n=Fy(t);return y_.getField(e,"hex").each((function(t){xh.isFocused(t)||ql.setValue(e,{hex:n.value})})),n}(e,t);Qr(e,f_,{hex:n}),s(e,n)}))},h=function(e,t){var r=t.event;!function(e){return"hex"===e.type}(r)?p(e,r.type,r.value):function(e,t){n(e);var r=Dy(t);l("hex",F.some(t));var o=$y(r);a(e,o),f(o),Qr(e,f_,{hex:r}),s(e,r)}(e,r.value)},m=function(t){return{label:e(w_+t+".label"),description:e(w_+t+".description")}},g=m("red"),v=m("green"),y=m("blue"),b=m("hex");return Re(y_.sketch((function(n){return{dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[n.field("red",rC.sketch(i(Vy,"red",g.label,g.description,255))),n.field("green",rC.sketch(i(Vy,"green",v.label,v.description,255))),n.field("blue",rC.sketch(i(Vy,"blue",y.label,y.description,255))),n.field("hex",rC.sketch(i(Oy,"hex",b.label,b.description,"ffffff"))),u.asSpec()],formBehaviours:ls([GC.config({invalidClass:t("form-invalid")}),gh("rgb-form-events",[ao(b_,h),ao(C_,d),ao(x_,d)])])}})),{apis:{updateHex:function(e,t){ql.setValue(e,{hex:t.value}),function(e,t){var n=$y(t);a(e,n),f(n)}(e,t),s(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(e,t,n){e.updateHex(t,n)}},extraApis:{}})},S_=function(e,t){var n=u_.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),r=u_.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class="+t("sv-palette-inner-thumb")+' role="presentation"></div>'}}),o=function(e,t){var n=e.width,r=e.height,o=e.getContext("2d");if(null!==o){o.fillStyle=t,o.fillRect(0,0,n,r);var i=o.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=i,o.fillRect(0,0,n,r);var a=o.createLinearGradient(0,0,0,r);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=a,o.fillRect(0,0,n,r)}};return Jf({factory:function(e){var i=h({x:0,y:0}),a=ls([od.config({find:F.some}),xh.config({})]);return u_.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:i},rounded:!1,components:[n,r],onChange:function(e,t,n){Qr(e,p_,{value:n})},onInit:function(e,t,n,r){o(n.element.dom,Uy(Wy))},sliderBehaviours:a})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(e,t,n){!function(e,t){var n=e.components()[0].element.dom,r=s_(t,100,100),i=Hy(r);o(n,Uy(i))}(t,n)},setThumb:function(e,t,n){!function(e,t){var n=c_($y(t));u_.setValue(e,{x:n.saturation,y:100-n.value})}(t,n)}},extraApis:{}})},E_=function(e,t){return Jf({name:"ColourPicker",configFields:[Vt("dom"),tn("onValidHex",d),tn("onInvalidHex",d)],factory:function(n){var r,o=__(e,t,n.onValidHex,n.onInvalidHex),i=S_(0,t),a=function(e){return 100-e/360*100},u={paletteRgba:dn(Wy),paletteHue:dn(0)},s=ym(function(e,t){var n=u_.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),r=u_.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return u_.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:h({y:0})},components:[n,r],sliderBehaviours:ls([xh.config({})]),onChange:function(e,t,n){Qr(e,d_,{value:n})}})}(0,t)),c=ym(i.sketch({})),l=ym(o.sketch({})),f=function(e,t,n){c.getOpt(e).each((function(e){i.setHue(e,n)}))},d=function(e,t){l.getOpt(e).each((function(e){o.updateHex(e,t)}))},p=function(e,t,n){s.getOpt(e).each((function(e){u_.setValue(e,{y:a(n)})}))},m=function(e,t){c.getOpt(e).each((function(e){i.setThumb(e,t)}))},g=function(e,t,n,r){!function(e,t){var n=$y(e);u.paletteRgba.set(n),u.paletteHue.set(t)}(t,n),j(r,(function(r){r(e,t,n)}))};return{uid:n.uid,dom:n.dom,components:[c.asSpec(),s.asSpec(),l.asSpec()],behaviours:ls([gh("colour-picker-events",[ao(f_,(r=[f,p,m],function(e,t){var n=t.event.hex,o=function(e){return c_($y(e))}(n);g(e,n,o.hue,r)})),ao(p_,function(){var e=[d];return function(t,n){var r=n.event.value,o=u.paletteHue.get(),i=s_(o,r.x,100-r.y),a=l_(i);g(t,a,o,e)}}()),ao(d_,function(){var e=[f,d];return function(t,n){var r=function(e){return(100-e)/100*360}(n.event.value.y),o=u.paletteRgba.get(),i=c_(o),a=s_(r,i.saturation,i.value),s=l_(a);g(t,s,r,e)}}())]),od.config({find:function(e){return l.getOpt(e)}}),lh.config({mode:"acyclic"})])}}})},A_=function(){return od.config({find:F.some})},D_=function(e){return od.config({find:e.getOpt})},k_=function(e){return od.config({find:function(t){return No(t.element,e).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}})},T_={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},O_=function(e){return function(e){return T_[e]}(e)},B_=tinymce.util.Tools.resolve("tinymce.Resource"),N_=tinymce.util.Tools.resolve("tinymce.util.Tools"),F_=lt([tn("preprocess",m),tn("postprocess",m)]),M_=function(e,t,n){return ql.config(Re({store:{mode:"manual",getValue:t,setValue:n}},e.map((function(e){return{store:{initialValue:e}}})).getOr({})))},P_=function(e,t,n){return M_(e,(function(e){return t(e.element)}),(function(e,t){return n(e.element,t)}))},I_=function(e,t){var n=Dt("RepresentingConfigs.memento processors",F_,t);return ql.config({store:{mode:"manual",getValue:function(t){var r=e.get(t),o=ql.getValue(r);return n.postprocess(o)},setValue:function(t,r){var o=n.preprocess(r),i=e.get(t);ql.setValue(i,o)}}})},R_=M_,L_=function(e){return P_(e,Ko,Yo)},z_=function(e){return ql.config({store:{mode:"memory",initialValue:e}})},V_=function(e,t){var n=function(e,t){t.stop()},r=function(e){return function(t,n){j(e,(function(e){e(t,n)}))}},o=function(e,t){if(!Cv.isDisabled(e)){var n=t.event.raw;a(e,n.dataTransfer.files)}},i=function(e,t){var n=t.event.raw.target;a(e,n.files)},a=function(n,r){ql.setValue(n,function(e,t){var n=N_.explode(t.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"));return W(ie(e),(function(e){return z(n,(function(t){return wn(e.name.toLowerCase(),"."+t.toLowerCase())}))}))}(r,t)),Qr(n,dC,{name:e.name})},u=ym({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ls([gh("input-file-events",[fo(xr()),fo(Nr())])])}),s=e.label.map((function(e){return fC(e,t)})),c=rC.parts.field({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ls([z_([]),A_(),Cv.config({}),Fh.config({toggleClass:"dragenter",toggleOnExecute:!1}),gh("dropzone-events",[ao("dragenter",r([n,Fh.toggle])),ao("dragleave",r([n,Fh.toggle])),ao("dragover",n),ao("drop",r([n,o])),ao(Cr(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:t.translate("Drop an image here")}},vm.sketch({dom:{tag:"button",innerHtml:t.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(e){u.get(e).element.dom.click()},buttonBehaviours:ls([aC.config({}),ey(t.isDisabled),Qv()])})]}]}}}});return sC(s,c,["tox-form__group--stretched"],[])},H_=ci("alloy-fake-before-tabstop"),$_=ci("alloy-fake-after-tabstop"),j_=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:ls([xh.config({ignore:!0}),aC.config({})])}},U_=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[j_([H_]),e,j_([$_])],behaviours:ls([k_(1)])}},W_=function(e,t){Qr(e,vr(),{raw:{which:9,shiftKey:t}})},q_=function(e,t){var n=t.element;Ui(n,H_)?W_(e,!0):Ui(n,$_)&&W_(e,!1)},G_=function(e){return Lb(e,["."+H_,"."+$_].join(","),b)},X_=!(Gn().browser.isIE()||Gn().browser.isEdge()),K_=function(e,t){var n=X_&&e.sandboxed,r=w(w({},e.label.map((function(e){return{title:e}})).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),o=function(e){var t=dn("");return{getValue:function(e){return t.get()},setValue:function(n,r){if(e)Qo(n.element,"srcdoc",r);else{Qo(n.element,"src","javascript:''");var o=n.element.dom.contentWindow.document;o.open(),o.write(r),o.close()}t.set(r)}}}(n),i=e.label.map((function(e){return fC(e,t)})),a=rC.parts.field({factory:{sketch:function(e){return U_({uid:e.uid,dom:{tag:"iframe",attributes:r},behaviours:ls([aC.config({}),xh.config({}),R_(F.none(),o.getValue,o.setValue)])})}}});return sC(i,a,["tox-form__group--stretched"],[])},Y_=function(e,t){return Z_(document.createElement("canvas"),e,t)},J_=function(e){var t=Y_(e.width,e.height);return Q_(t).drawImage(e,0,0),t},Q_=function(e){return e.getContext("2d")},Z_=function(e,t,n){return e.width=t,e.height=n,e},eS=function(e){return e.naturalWidth||e.width},tS=function(e){return e.naturalHeight||e.height},nS=window.Promise?window.Promise:function(){var e=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,r(a,this),r(u,this))},t=window,n=e.immediateFn||"function"==typeof t.setImmediate&&t.setImmediate||function(e){return setTimeout(e,1)},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.apply(t,n)}},o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){var t=this;null!==this._state?n((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void e.reject(o)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(r(t,e),r(a,this),r(u,this))}this._state=!0,this._value=e,s.call(this)}catch(n){u.call(this,n)}}function u(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];i.call(this,n)}this._deferreds=[]}function c(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}var l=function(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(o){if(r)return;r=!0,n(o)}};return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.then=function(t,n){var r=this;return new e((function(e,o){i.call(r,new c(t,n,e,o))}))},e.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Array.prototype.slice.call(1===t.length&&o(t[0])?t[0]:t);return new e((function(e,t){if(0===r.length)return e([]);for(var n=r.length,o=function(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),t)}r[i]=a,0==--n&&e(r)}catch(s){t(s)}},i=0;i<r.length;i++)o(i,r[i])}))},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=0,o=t;r<o.length;r++){o[r].then(e,n)}}))},e}(),rS=function(e){return new nS((function(t,n){(function(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return F.none();for(var r=n[1],o=t[1],i=1024,a=atob(o),u=a.length,s=Math.ceil(u/i),c=new Array(s),l=0;l<s;++l){for(var f=l*i,d=Math.min(f+i,u),p=new Array(d-f),h=f,m=0;h<d;++m,++h)p[m]=a[h].charCodeAt(0);c[l]=new Uint8Array(p)}return F.some(new Blob(c,{type:r}))})(e).fold((function(){n("uri is not base64: "+e)}),t)}))},oS=function(e,t,n){return t=t||"image/png",c(HTMLCanvasElement.prototype.toBlob)?new nS((function(r,o){e.toBlob((function(e){e?r(e):o()}),t,n)})):rS(e.toDataURL(t,n))},iS=function(e){return function(e){return new nS((function(t,n){var r=URL.createObjectURL(e),o=new Image,i=function(){o.removeEventListener("load",a),o.removeEventListener("error",u)},a=function(){i(),t(o)},u=function(){i(),n("Unable to load data of type "+e.type+": "+r)};o.addEventListener("load",a),o.addEventListener("error",u),o.src=r,o.complete&&setTimeout(a,0)}))}(e).then((function(e){aS(e);var t=Y_(eS(e),tS(e));return Q_(t).drawImage(e,0,0),t}))},aS=function(e){URL.revokeObjectURL(e.src)},uS=function(e,t,n){var r=t.type,o=h(r),i=h(n),a=function(t,n){return e.then((function(e){return function(e,t,n){return t=t||"image/png",e.toDataURL(t,n)}(e,t,n)}))};return{getType:o,toBlob:function(){return nS.resolve(t)},toDataURL:i,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then((function(e){return oS(e,t,n)}))},toAdjustedDataURL:a,toAdjustedBase64:function(e,t){return a(e,t).then((function(e){return e.split(",")[1]}))},toCanvas:function(){return e.then(J_)}}},sS=function(e){return function(e){return new nS((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))}(e).then((function(t){return uS(iS(e),e,t)}))},cS=function(e,t){return oS(e,t).then((function(t){return uS(nS.resolve(e),t,e.toDataURL())}))},lS=function(e,t,n){var r="string"==typeof e?parseFloat(e):e;return r>n?r=n:r<t&&(r=t),r},fS=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],dS=function(e,t){for(var n,r=[],o=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)r[a]=t[a+5*i];for(a=0;a<5;a++){n=0;for(var u=0;u<5;u++)n+=e[a+5*u]*r[u];o[a+5*i]=n}}return o},pS=function(e,t){return e.toCanvas().then((function(n){return hS(n,e.getType(),t)}))},hS=function(e,t,n){var r=Q_(e),o=function(e,t){for(var n,r,o,i,a=e.data,u=t[0],s=t[1],c=t[2],l=t[3],f=t[4],d=t[5],p=t[6],h=t[7],m=t[8],g=t[9],v=t[10],y=t[11],b=t[12],C=t[13],x=t[14],w=t[15],_=t[16],S=t[17],E=t[18],A=t[19],D=0;D<a.length;D+=4)n=a[D],r=a[D+1],o=a[D+2],i=a[D+3],a[D]=n*u+r*s+o*c+i*l+f,a[D+1]=n*d+r*p+o*h+i*m+g,a[D+2]=n*v+r*y+o*b+i*C+x,a[D+3]=n*w+r*_+o*S+i*E+A;return e}(r.getImageData(0,0,e.width,e.height),n);return r.putImageData(o,0,0),cS(e,t)},mS=function(e,t,n){var r=Q_(e),o=r.getImageData(0,0,e.width,e.height),i=r.getImageData(0,0,e.width,e.height);return i=function(e,t,n){for(var r=function(e,t,n){return e>n?e=n:e<t&&(e=t),e},o=Math.round(Math.sqrt(n.length)),i=Math.floor(o/2),a=e.data,u=t.data,s=e.width,c=e.height,l=0;l<c;l++)for(var f=0;f<s;f++){for(var d=0,p=0,h=0,m=0;m<o;m++)for(var g=0;g<o;g++){var v=r(f+g-i,0,s-1),y=4*(r(l+m-i,0,c-1)*s+v),b=n[m*o+g];d+=a[y]*b,p+=a[y+1]*b,h+=a[y+2]*b}var C=4*(l*s+f);u[C]=r(d,0,255),u[C+1]=r(p,0,255),u[C+2]=r(h,0,255)}return t}(o,i,n),r.putImageData(i,0,0),cS(e,t)},gS=function(e){return function(t,n){return pS(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}},vS=(ZC=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(e){return pS(e,ZC)}),yS=gS((function(e,t){return t=lS(255*t,-255,255),dS(e,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])})),bS=gS((function(e,t){var n;return t=lS(t,-1,1),n=(t*=100)<0?127+t/100*127:127*(n=0===(n=t%1)?fS[t]:fS[Math.floor(t)]*(1-n)+fS[Math.floor(t)+1]*n)+127,dS(e,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),CS=function(e,t,n,r){return pS(e,function(e,t,n,r){return t=lS(t,0,2),n=lS(n,0,2),r=lS(r,0,2),dS(e,[t,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t,n,r))},xS=(ex=[0,-1,0,-1,5,-1,0,-1,0],function(e){return function(e,t){return e.toCanvas().then((function(n){return mS(n,e.getType(),t)}))}(e,ex)}),wS=(tx=function(e,t){return 255*Math.pow(e/255,1-t)},function(e,t){return e.toCanvas().then((function(n){return function(e,t,n){for(var r=Q_(e),o=new Array(256),i=0;i<o.length;i++)o[i]=tx(i,n);var a=function(e,t){for(var n=e.data,r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}(r.getImageData(0,0,e.width,e.height),o);return r.putImageData(a,0,0),cS(e,t)}(n,e.getType(),t)}))}),_S=function(e,t,n){var r=eS(e),o=tS(e),i=t/r,a=n/o,u=!1;(i<.5||i>2)&&(i=i<.5?.5:2,u=!0),(a<.5||a>2)&&(a=a<.5?.5:2,u=!0);var s=SS(e,i,a);return u?s.then((function(e){return _S(e,t,n)})):s},SS=function(e,t,n){return new nS((function(r){var o=eS(e),i=tS(e),a=Math.floor(o*t),u=Math.floor(i*n),s=Y_(a,u);Q_(s).drawImage(e,0,0,o,i,0,0,a,u),r(s)}))},ES=function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t),r=Math.round(e*n);return Math.ceil(r/n)},AS=function(e,t,n){var r=(n<0?360+n:n)*Math.PI/180,o=e.width,i=e.height,a=Math.sin(r),u=Math.cos(r),s=ES(Math.abs(o*u)+Math.abs(i*a)),c=ES(Math.abs(o*a)+Math.abs(i*u)),l=Y_(s,c),f=Q_(l);return f.translate(s/2,c/2),f.rotate(r),f.drawImage(e,-o/2,-i/2),cS(l,t)},DS=function(e,t,n){var r=Y_(e.width,e.height),o=Q_(r);return"v"===n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),cS(r,t)},kS=function(e,t,n,r,o,i){var a=Y_(o,i);return Q_(a).drawImage(e,-n,-r),cS(a,t)},TS=function(e){return vS(e)},OS=function(e){return xS(e)},BS=function(e,t){return wS(e,t)},NS=function(e,t){return yS(e,t)},FS=function(e,t){return bS(e,t)},MS=function(e,t){return function(e,t){return e.toCanvas().then((function(n){return DS(n,e.getType(),t)}))}(e,t)},PS=function(e,t,n,r,o){return function(e,t,n,r,o){return e.toCanvas().then((function(i){return kS(i,e.getType(),t,n,r,o)}))}(e,t,n,r,o)},IS=function(e,t,n){return function(e,t,n){return e.toCanvas().then((function(r){return _S(r,t,n).then((function(t){return cS(t,e.getType())}))}))}(e,t,n)},RS=function(e,t){return function(e,t){return e.toCanvas().then((function(n){return AS(n,e.getType(),t)}))}(e,t)},LS=function(e,t){return w({dom:{tag:"span",innerHtml:e,classes:["tox-icon","tox-tbtn__icon-wrap"]}},t)},zS=function(e,t){return LS(Cm(e,t),{})},VS=function(e,t){return LS(Cm(e,t),{behaviours:ls([mh.config({})])})},HS=function(e,t,n){return{dom:{tag:"span",innerHtml:n.translate(e),classes:[t+"__select-label"]},behaviours:ls([mh.config({})])}},$S=ci("toolbar.button.execute"),jS=((nx={})[Or()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],nx),US=ci("update-menu-text"),WS=ci("update-menu-icon"),qS=function(e,t,n){var r=dn(d),o=e.text.map((function(e){return ym(HS(e,t,n.providers))})),i=e.icon.map((function(e){return ym(VS(e,n.providers.icons))})),a=function(e,t){var n=ql.getValue(e);return xh.focus(n),Qr(n,"keydown",{raw:t.event.raw}),mx.close(n),F.some(!0)},u=e.role.fold((function(){return{}}),(function(e){return{role:e}})),s=e.tooltip.fold((function(){return{}}),(function(e){var t=n.providers.translate(e);return{title:t,"aria-label":t}}));return ym(mx.sketch(w(w(w({},e.uid?{uid:e.uid}:{}),u),{dom:{tag:"button",classes:[t,t+"--select"].concat($(e.classes,(function(e){return t+"--"+e}))),attributes:w({},s)},components:sy([i.map((function(e){return e.asSpec()})),o.map((function(e){return e.asSpec()})),F.some({dom:{tag:"div",classes:[t+"__select-chevron"],innerHtml:Cm("chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:ls(S(e.dropdownBehaviours,[ey((function(){return e.disabled||n.providers.isDisabled()})),Qv(),vx.config({}),mh.config({}),gh("dropdown-events",[oy(e,r),iy(e,r)]),gh("menubutton-update-display-text",[ao(US,(function(e,t){o.bind((function(t){return t.getOpt(e)})).each((function(e){mh.set(e,[ya(n.providers.translate(t.event.text))])}))})),ao(WS,(function(e,t){i.bind((function(t){return t.getOpt(e)})).each((function(e){mh.set(e,[VS(t.event.icon,n.providers.icons)])}))}))])])),eventOrder:Re(jS,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:ls([lh.config({mode:"special",onLeft:a,onRight:a})]),lazySink:n.getSink,toggleClass:t+"--active",parts:{menu:Dg(0,e.columns,e.presets)},fetch:function(t){return IC(g(e.fetch,t))}}))).asSpec()},GS=function(e){return"separator"===e.type},XS={type:"separator"},KS=function(e,t){var n=G(e,(function(e,n){return function(e){return r(e)}(n)?""===n?e:"|"===n?e.length>0&&!GS(e[e.length-1])?e.concat([XS]):e:Ne(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])}),[]);return n.length>0&&GS(n[n.length-1])&&n.pop(),n},YS=function(e,t){return function(e){return Ne(e,"getSubmenuItems")}(e)?function(e,t){var n=e.getSubmenuItems(),r=JS(n,t);return{item:e,menus:Re(r.menus,Ye(e.value,r.items)),expansions:Re(r.expansions,Ye(e.value,e.value))}}(e,t):{item:e,menus:{},expansions:{}}},JS=function(e,t){var n=KS(r(e)?e.split(" "):e,t);return q(n,(function(e,n){var r=function(e){if(GS(e))return e;var t=Be(e,"value").getOrThunk((function(){return ci("generated-menu-item")}));return Re({value:t},e)}(n),o=YS(r,t);return{menus:Re(e.menus,o.menus),items:[o.item].concat(e.items),expansions:Re(e.expansions,o.expansions)}}),{menus:{},expansions:{},items:[]})},QS=function(e,t,n,r){var o=ci("primary-menu"),i=JS(e,n.shared.providers.menuItems());if(0===i.items.length)return F.none();var a=Bb(o,i.items,t,n,r),u=Ee(i.menus,(function(e,r){return Bb(r,e,t,n,!1)})),s=Re(u,Ye(o,a));return F.from(rm.tieredData(o,s,i.expansions))},ZS=function(e){return{isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)},setActive:function(t){var n=e.element;t?(Hi(n,"tox-tbtn--enabled"),Qo(n,"aria-pressed",!0)):(ji(n,"tox-tbtn--enabled"),ni(n,"aria-pressed"))},isActive:function(){return Ui(e.element,"tox-tbtn--enabled")}}},eE=function(e,t,n,r){return qS({text:e.text,icon:e.icon,tooltip:e.tooltip,role:r,fetch:function(t,r){e.fetch((function(e){r(QS(e,lg.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:e.onSetup,getApi:ZS,columns:1,presets:"normal",classes:[],dropdownBehaviours:[aC.config({})]},t,n.shared)},tE=function(e,t,n){var r=function(e){return function(r){var o=!r.isActive();r.setActive(o),e.storage.set(o),n.shared.getSink().each((function(n){t().getOpt(n).each((function(t){ys(t.element),Qr(t,mC,{name:e.name,value:e.storage.get()})}))}))}},o=function(e){return function(t){t.setActive(e.storage.get())}};return function(t){t($(e,(function(e){var t=e.text.fold((function(){return{}}),(function(e){return{text:e}}));return w(w({type:e.type,active:!1},t),{onAction:r(e),onSetup:o(e)})})))}},nE=function(e,t,n,r,o,i){void 0===n&&(n=[]);var a=t.fold((function(){return{}}),(function(e){return{action:e}})),u=w({buttonBehaviours:ls([ey((function(){return e.disabled||i.isDisabled()})),Qv(),aC.config({}),gh("button press",[io("click"),io("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),s=Re(u,{dom:r});return Re(s,{components:o})},rE=function(e,t,n,r){void 0===r&&(r=[]);var o={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map((function(e){return{"aria-label":n.translate(e),title:n.translate(e)}})).getOr({})},i=e.icon.map((function(e){return zS(e,n.icons)})),a=sy([i]);return nE(e,t,r,o,a,n)},oE=function(e,t,n,r){void 0===r&&(r=[]);var o=rE(e,F.some(t),n,r);return vm.sketch(o)},iE=function(e,t,n,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=n.translate(e.text),a=e.icon?e.icon.map((function(e){return zS(e,n.icons)})):F.none(),u=a.isSome()?sy([a]):[],s=a.isSome()?{}:{innerHtml:i},c=S(e.primary||e.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],e.borderless?["tox-button--naked"]:[],o),l=w(w({tag:"button",classes:c},s),{attributes:{title:i}});return nE(e,t,r,l,u,n)},aE=function(e,t,n,r,o){void 0===r&&(r=[]),void 0===o&&(o=[]);var i=iE(e,F.some(t),n,r,o);return vm.sketch(i)},uE=function(e,t){return function(n){"custom"===t?Qr(n,mC,{name:e,value:{}}):"submit"===t?Jr(n,gC):"cancel"===t&&Jr(n,hC)}},sE=function(e,t,n){if(function(e,t){return"menu"===t}(0,t)){var r=e,o=w(w({},e),{onSetup:function(t){return t.setDisabled(e.disabled),d},fetch:tE(r.items,(function(){return i}),n)}),i=ym(eE(o,"tox-tbtn",n,F.none()));return i.asSpec()}if(function(e,t){return"custom"===t||"cancel"===t||"submit"===t}(0,t)){var a=uE(e.name,t),u=w(w({},e),{borderless:!1});return aE(u,a,n.shared.providers,[])}},cE=function(e,t){var n,r,o=uE(e.name,"custom");return n=F.none(),r=rC.parts.field(w({factory:vm},iE(e,F.some(o),t,[z_(""),A_()]))),sC(n,r,[],[])},lE=h([tn("field1Name","field1"),tn("field2Name","field2"),wu("onLockedChange"),yu(["lockClass"]),tn("locked",!1),Yl("coupledFieldBehaviours",[od,ql])]),fE=function(e,t){return _f({factory:rC,name:e,overrides:function(e){return{fieldBehaviours:ls([gh("coupled-input-behaviour",[ao(br(),(function(n){(function(e,t,n){return Rf(e,t,n).bind(od.getCurrent)})(n,e,t).each((function(t){Rf(n,e,"lock").each((function(r){Fh.isOn(r)&&e.onLockedChange(n,t,r)}))}))}))])])}}})},dE=h([fE("field1","field2"),fE("field2","field1"),_f({factory:vm,schema:[Vt("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:ls([Fh.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])}}})]),pE=Qf({name:"FormCoupledInputs",configFields:lE(),partFields:dE(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Jl(e.coupledFieldBehaviours,[od.config({find:F.some}),ql.config({store:{mode:"manual",getValue:function(t){var n,r=$f(t,e,["field1","field2"]);return(n={})[e.field1Name]=ql.getValue(r.field1()),n[e.field2Name]=ql.getValue(r.field2()),n},setValue:function(t,n){var r=$f(t,e,["field1","field2"]);Fe(n,e.field1Name)&&ql.setValue(r.field1(),n[e.field1Name]),Fe(n,e.field2Name)&&ql.setValue(r.field2(),n[e.field2Name])}}})]),apis:{getField1:function(t){return Rf(t,e,"field1")},getField2:function(t){return Rf(t,e,"field2")},getLock:function(t){return Rf(t,e,"lock")}}}},apis:{getField1:function(e,t){return e.getField1(t)},getField2:function(e,t){return e.getField2(t)},getLock:function(e,t){return e.getLock(t)}}}),hE=function(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){var n=parseFloat(t[1]),r=t[2];return ce.value({value:n,unit:r})}return ce.error(e)},mE=function(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=function(e){return Object.prototype.hasOwnProperty.call(n,e)};return e.unit===t?F.some(e.value):r(e.unit)&&r(t)?n[e.unit]===n[t]?F.some(e.value):F.some(e.value/n[e.unit]*n[t]):F.none()},gE=function(e){return F.none()},vE=function(e,t){var n,r,o,i=hE(e).toOptional(),a=hE(t).toOptional();return(n=i,r=a,o=function(e,t){return mE(e,t.unit).map((function(e){return t.value/e})).map((function(e){return n=e,r=t.unit,function(e){return mE(e,r).map((function(e){return{value:e*n,unit:r}}))};var n,r})).getOr(gE)},n.isSome()&&r.isSome()?F.some(o(n.getOrDie(),r.getOrDie())):F.none()).getOr(gE)},yE=function(e,t){var n=gE,r=ci("ratio-event"),o=pE.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:Cm("lock",t.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:Cm("unlock",t.icons)}}],buttonBehaviours:ls([Cv.config({disabled:function(){return e.disabled||t.isDisabled()}}),Qv(),aC.config({})])}),i=function(e){return{dom:{tag:"div",classes:["tox-form__group"]},components:e}},a=function(n){return rC.parts.field({factory:AC,inputClasses:["tox-textfield"],inputBehaviours:ls([Cv.config({disabled:function(){return e.disabled||t.isDisabled()}}),Qv(),aC.config({}),gh("size-input-events",[ao(mr(),(function(e,t){Qr(e,r,{isField1:n})})),ao(Cr(),(function(t,n){Qr(t,dC,{name:e.name})}))])]),selectOnFocus:!1})},u=function(e){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}}},s=pE.parts.field1(i([rC.parts.label(u("Width")),a(!0)])),c=pE.parts.field2(i([rC.parts.label(u("Height")),a(!1)]));return pE.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,c,i([u("&nbsp;"),o])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(e,t,r){hE(ql.getValue(e)).each((function(e){n(e).each((function(e){ql.setValue(t,function(e){var t,n={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},r=e.value.toFixed((t=e.unit)in n?n[t]:1);return-1!==r.indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+e.unit}(e))}))}))},coupledFieldBehaviours:ls([Cv.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(e){pE.getField1(e).bind(rC.getField).each(Cv.disable),pE.getField2(e).bind(rC.getField).each(Cv.disable),pE.getLock(e).each(Cv.disable)},onEnabled:function(e){pE.getField1(e).bind(rC.getField).each(Cv.enable),pE.getField2(e).bind(rC.getField).each(Cv.enable),pE.getLock(e).each(Cv.enable)}}),Qv(),gh("size-input-events2",[ao(r,(function(e,t){var r=t.event.isField1,o=r?pE.getField1(e):pE.getField2(e),i=r?pE.getField2(e):pE.getField1(e),a=o.map(ql.getValue).getOr(""),u=i.map(ql.getValue).getOr("");n=vE(a,u)}))])])})},bE={undo:h(ci("undo")),redo:h(ci("redo")),zoom:h(ci("zoom")),back:h(ci("back")),apply:h(ci("apply")),swap:h(ci("swap")),transform:h(ci("transform")),tempTransform:h(ci("temp-transform")),transformApply:h(ci("transform-apply"))},CE=h("save-state"),xE=h("disable"),wE=h("enable"),_E={formActionEvent:mC,saveState:CE,disable:xE,enable:wE},SE=function(e,t){var n=function(e,n,r,o){return ym(aE({name:e,text:e,disabled:r,primary:o,icon:F.none(),borderless:!1},n,t))},r=function(e,n,r,o){return ym(oE({name:e,icon:F.some(e),tooltip:F.some(n),disabled:o,primary:!1,borderless:!1},r,t))},o=function(e,t){e.map((function(e){var n=e.get(t);n.hasConfigured(Cv)&&Cv.disable(n)}))},i=function(e,t){e.map((function(e){var n=e.get(t);n.hasConfigured(Cv)&&Cv.enable(n)}))},a={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},u=d,s=function(e,t,n){Qr(e,t,n)},c=function(e){return Jr(e,_E.disable())},l=function(e){return Jr(e,_E.enable())},f=function(e,t){c(e),s(e,bE.transform(),{transform:t}),l(e)},p=function(e){return function(){ee.getOpt(e).each((function(e){mh.set(e,[Q])}))}},m=function(e,t){c(e),s(e,bE.transformApply(),{transform:t,swap:p(e)}),l(e)},g=function(){return n("Back",(function(e){return s(e,bE.back(),{swap:p(e)})}),!1,!1)},v=function(){return ym({dom:{tag:"div",classes:["tox-spacer"]},behaviours:ls([Cv.config({})])})},y=function(){return n("Apply",(function(e){return s(e,bE.apply(),{swap:p(e)})}),!0,!0)},b=[g(),v(),n("Apply",(function(t){m(t,(function(t){var n=e.getRect();return PS(t,n.x,n.y,n.w,n.h)})),e.hideCrop()}),!1,!0)],C=Zb.sketch({dom:a,components:b.map((function(e){return e.asSpec()})),containerBehaviours:ls([gh("image-tools-crop-buttons-events",[ao(_E.disable(),(function(e,t){o(b,e)})),ao(_E.enable(),(function(e,t){i(b,e)}))])])}),x=ym(yE({name:"size",label:F.none(),constrain:!0,disabled:!1},t)),w=[g(),v(),x,v(),n("Apply",(function(e){x.getOpt(e).each((function(t){var n=ql.getValue(t),r=function(e,t){return function(n){return IS(n,e,t)}}(parseInt(n.width,10),parseInt(n.height,10));m(e,r)}))}),!1,!0)],_=Zb.sketch({dom:a,components:w.map((function(e){return e.asSpec()})),containerBehaviours:ls([gh("image-tools-resize-buttons-events",[ao(_E.disable(),(function(e,t){o(w,e)})),ao(_E.enable(),(function(e,t){i(w,e)}))])])}),S=function(e,t){return function(n){return e(n,t)}},E=S(MS,"h"),A=S(MS,"v"),D=S(RS,-90),k=S(RS,90),T=function(e,t){!function(e,t){c(e),s(e,bE.tempTransform(),{transform:t}),l(e)}(e,t)},O=[g(),v(),r("flip-horizontally","Flip horizontally",(function(e){T(e,E)}),!1),r("flip-vertically","Flip vertically",(function(e){T(e,A)}),!1),r("rotate-left","Rotate counterclockwise",(function(e){T(e,D)}),!1),r("rotate-right","Rotate clockwise",(function(e){T(e,k)}),!1),v(),y()],B=Zb.sketch({dom:a,components:O.map((function(e){return e.asSpec()})),containerBehaviours:ls([gh("image-tools-fliprotate-buttons-events",[ao(_E.disable(),(function(e,t){o(O,e)})),ao(_E.enable(),(function(e,t){i(O,e)}))])])}),N=function(e,n,r,o,i){var a=u_.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}}),u=u_.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=u_.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ym(u_.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:r,maxX:i,getInitialValue:h({x:o})},components:[a,u,s],sliderBehaviours:ls([xh.config({})]),onChoose:n}))},M=function(e,t,n,r,o){return N(e,(function(e,n,r){var o=S(t,r.x/100);f(e,o)}),n,r,o)},P=function(e,t,n,r,u){var s=function(e,t,n,r,o){return[g(),M(e,t,n,r,o),y()]}(e,t,n,r,u);return Zb.sketch({dom:a,components:s.map((function(e){return e.asSpec()})),containerBehaviours:ls([gh("image-tools-filter-panel-buttons-events",[ao(_E.disable(),(function(e,t){o(s,e)})),ao(_E.enable(),(function(e,t){i(s,e)}))])])})},I=[g(),v(),y()],R=Zb.sketch({dom:a,components:I.map((function(e){return e.asSpec()}))}),L=P("Brightness",NS,-100,0,100),z=P("Contrast",FS,-100,0,100),V=P("Gamma",BS,-100,0,100),H=function(e,t,n){return function(r){return function(e,t,n,r){return CS(e,t,n,r)}(r,e,t,n)}},$=function(e){return N(e,(function(e,t,n){var r=j.getOpt(e),o=W.getOpt(e),i=U.getOpt(e);r.each((function(t){o.each((function(n){i.each((function(r){var o=ql.getValue(t).x/100,i=ql.getValue(r).x/100,a=ql.getValue(n).x/100,u=H(o,i,a);f(e,u)}))}))}))}),0,100,200)},j=$("R"),U=$("G"),W=$("B"),q=[g(),j,U,W,y()],G=Zb.sketch({dom:a,components:q.map((function(e){return e.asSpec()}))}),X=function(e,t,n){return function(r){s(r,bE.swap(),{transform:t,swap:function(){ee.getOpt(r).each((function(t){mh.set(t,[e]),n(t)}))}})}},K=F.some(OS),Y=F.some(TS),J=[r("crop","Crop",X(C,F.none(),(function(t){e.showCrop()})),!1),r("resize","Resize",X(_,F.none(),(function(t){x.getOpt(t).each((function(t){var n=e.getMeasurements(),r=n.width,o=n.height;ql.setValue(t,{width:r,height:o})}))})),!1),r("orientation","Orientation",X(B,F.none(),u),!1),r("brightness","Brightness",X(L,F.none(),u),!1),r("sharpen","Sharpen",X(R,K,u),!1),r("contrast","Contrast",X(z,F.none(),u),!1),r("color-levels","Color levels",X(G,F.none(),u),!1),r("gamma","Gamma",X(V,F.none(),u),!1),r("invert","Invert",X(R,Y,u),!1)],Q=Zb.sketch({dom:a,components:J.map((function(e){return e.asSpec()}))}),Z=Zb.sketch({dom:{tag:"div"},components:[Q],containerBehaviours:ls([mh.config({})])}),ee=ym(Z);return{memContainer:ee,getApplyButton:function(e){return ee.getOpt(e).map((function(e){var t=e.components()[0];return t.components()[t.components().length-1]}))}}},EE=tinymce.util.Tools.resolve("tinymce.geom.Rect"),AE=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),DE=tinymce.util.Tools.resolve("tinymce.util.Observable"),kE=tinymce.util.Tools.resolve("tinymce.util.VK"),TE=function(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]};function OE(e,t){var n,r,o,i,a=t.document||document,u=a.getElementById(t.handle||e),s=function(e){if(TE(e),e.button!==r)return c(e);e.deltaX=e.screenX-o,e.deltaY=e.screenY-i,e.preventDefault(),t.drag(e)},c=function(e){TE(e),AE(a).off("mousemove touchmove",s).off("mouseup touchend",c),n.remove(),t.stop&&t.stop(e)};return AE(u).on("mousedown touchstart",(function(e){var l,f=function(e){var t=Math.max,n=e.documentElement,r=e.body,o=t(n.scrollWidth,r.scrollWidth),i=t(n.clientWidth,r.clientWidth),a=t(n.offsetWidth,r.offsetWidth),u=t(n.scrollHeight,r.scrollHeight),s=t(n.clientHeight,r.clientHeight);return{width:o<a?i:o,height:u<t(n.offsetHeight,r.offsetHeight)?s:u}}(a);TE(e),e.preventDefault(),r=e.button;var d=u;o=e.screenX,i=e.screenY,l=window.getComputedStyle?window.getComputedStyle(d,null).getPropertyValue("cursor"):d.runtimeStyle.cursor,n=AE("<div></div>").css({position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:l}).appendTo(a.body),AE(a).on("mousemove touchmove",s).on("mouseup touchend",c),t.start(e)})),{destroy:function(){AE(u).off()}}}var BE=0,NE=function(e,t,n,r,o){var i,a="tox-crid-"+BE++,u=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],s=["top","right","bottom","left"],c=function(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}},l=function(t,r,o,i){var a,u,s,l,f;a=r.x,u=r.y,s=r.w,l=r.h,a+=o*t.deltaX,u+=i*t.deltaY,(s+=o*t.deltaW)<20&&(s=20),(l+=i*t.deltaH)<20&&(l=20),f=e=EE.clamp({x:a,y:u,w:s,h:l},n,"move"===t.name),f=c(n,f),h.fire("updateRect",{rect:f}),p(f)},f=function(e){var n=function(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),AE("#"+a+"-"+e,r).css({left:t.x,top:t.y,width:t.w,height:t.h})};N_.each(u,(function(t){AE("#"+a+"-"+t.name,r).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})})),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)},d=function(t){f(e=t)},p=function(e){var t,r;d((t=n,{x:(r=e).x+t.x,y:r.y+t.y,w:r.w,h:r.h}))};AE('<div id="'+a+'" class="tox-croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),N_.each(s,(function(e){AE("#"+a,r).append('<div id="'+a+"-"+e+'"class="tox-croprect-block" style="display: none" data-mce-bogus="all">')})),N_.each(u,(function(e){AE("#"+a,r).append('<div id="'+a+"-"+e.name+'" class="tox-croprect-handle tox-croprect-handle-'+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false" title="'+e.label+'">')})),i=N_.map(u,(function(t){var n;return OE(a,{document:r.ownerDocument,handle:a+"-"+t.name,start:function(){n=e},drag:function(e){l(t,n,e.deltaX,e.deltaY)}})})),f(e),AE(r).on("focusin focusout",(function(e){AE(e.target).attr("aria-grabbed","focus"===e.type?"true":"false")})),AE(r).on("keydown",(function(t){var n;N_.each(u,(function(e){if(t.target.id===a+"-"+e.name)return n=e,!1}));var r=function(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),l(n,r,o,i)};switch(t.keyCode){case kE.LEFT:r(t,0,e,-10,0);break;case kE.RIGHT:r(t,0,e,10,0);break;case kE.UP:r(t,0,e,0,-10);break;case kE.DOWN:r(t,0,e,0,10);break;case kE.ENTER:case kE.SPACEBAR:t.preventDefault(),o()}}));var h=N_.extend({toggleVisibility:function(e){var t=N_.map(u,(function(e){return"#"+a+"-"+e.name})).concat(N_.map(s,(function(e){return"#"+a+"-"+e}))).join(",");e?AE(t,r).show():AE(t,r).hide()},setClampRect:function(t){n=t,f(e)},setRect:d,getInnerRect:function(){return c(n,e)},setInnerRect:p,setViewPortRect:function(n){t=n,f(e)},destroy:function(){N_.each(i,(function(e){e.destroy()})),i=[]}},DE);return h},FE=function(e){var t=ym({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=dn(1),r=dn(F.none()),o=dn({x:0,y:0,w:1,h:1}),i=dn({x:0,y:0,w:1,h:1}),a=function(e,i){c.getOpt(e).each((function(e){var a=n.get(),u=Fa(e.element),s=Ea(e.element),c=i.dom.naturalWidth*a,l=i.dom.naturalHeight*a,f=Math.max(0,u/2-c/2),d=Math.max(0,s/2-l/2),p={left:f.toString()+"px",top:d.toString()+"px",width:c.toString()+"px",height:l.toString()+"px",position:"absolute"};ea(i,p),t.getOpt(e).each((function(e){ea(e.element,p)})),r.get().each((function(e){var t=o.get();e.setRect({x:t.x*a+f,y:t.y*a+d,w:t.w*a,h:t.h*a}),e.setClampRect({x:f,y:d,w:c,h:l}),e.setViewPortRect({x:0,y:0,w:u,h:s})}))}))},u=function(e,t){var r,u=hn.fromTag("img");return Qo(u,"src",t),(r=u.dom,new Rm((function(e){var t=function(){r.removeEventListener("load",t),e(r)};r.complete?e(r):r.addEventListener("load",t)}))).then((function(){return c.getOpt(e).map((function(e){var t=ba({element:u});mh.replaceAt(e,1,F.some(t));var r=i.get(),s={x:0,y:0,w:u.dom.naturalWidth,h:u.dom.naturalHeight};i.set(s);var l=EE.inflate(s,-20,-20);return o.set(l),r.w===s.w&&r.h===s.h||function(e,t){c.getOpt(e).each((function(e){var r=Fa(e.element),o=Ea(e.element),i=t.dom.naturalWidth,a=t.dom.naturalHeight,u=Math.min(r/i,o/a);u>=1?n.set(1):n.set(u)}))}(e,u),a(e,u),u}))}))},s=Zb.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[t.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:ls([gh("image-panel-crop-events",[mo((function(e){c.getOpt(e).each((function(e){var t=e.element.dom,i=NE({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},t,d);i.toggleVisibility(!1),i.on("updateRect",(function(e){var t=e.rect,r=n.get(),i={x:Math.round(t.x/r),y:Math.round(t.y/r),w:Math.round(t.w/r),h:Math.round(t.h/r)};o.set(i)})),r.set(F.some(i))}))}))])])}],containerBehaviours:ls([mh.config({}),gh("image-panel-events",[mo((function(t){u(t,e)}))])])}),c=ym(s);return{memContainer:c,updateSrc:u,zoom:function(e,t){var r=n.get(),o=t>0?Math.min(2,r+.1):Math.max(.1,r-.1);n.set(o),c.getOpt(e).each((function(e){var t=e.components()[1].element;a(e,t)}))},showCrop:function(){r.get().each((function(e){e.toggleVisibility(!0)}))},hideCrop:function(){r.get().each((function(e){e.toggleVisibility(!1)}))},getRect:function(){return o.get()},getMeasurements:function(){var e=i.get();return{width:e.w,height:e.h}}}},ME=function(e,t,n,r,o){return oE({name:e,icon:F.some(t),disabled:n,tooltip:F.some(e),primary:!1,borderless:!1},r,o)},PE=function(e,t){t?Cv.enable(e):Cv.disable(e)};var IE,RE,LE,zE=function(e){var t,n,r,o,i=dn(e),a=dn(F.none()),u=(n=-1,{data:t=[],add:function(e){var r=t.splice(++n);return t.push(e),{state:e,removed:r}},undo:function(){if(r())return t[--n]},redo:function(){if(o())return t[++n]},canUndo:r=function(){return n>0},canRedo:o=function(){return-1!==n&&n<t.length-1}});u.add(e);var s=function(e){i.set(e)},c=function(e){return{blob:e,url:URL.createObjectURL(e)}},l=function(e){URL.revokeObjectURL(e.url)},f=function(){a.get().each(l),a.set(F.none())},p=function(e){var t=c(e);s(t);var n,r=u.add(t).removed;return n=r,N_.each(n,l),t.url};return{getBlobState:function(){return i.get()},setBlobState:s,addBlobState:p,getTempState:function(){return a.get().fold((function(){return i.get()}),(function(e){return e}))},updateTempState:function(e){var t=c(e);return f(),a.set(F.some(t)),t.url},addTempState:function(e){var t=c(e);return a.set(F.some(t)),t.url},applyTempState:function(e){return a.get().fold(d,(function(t){p(t.blob),e()}))},destroyTempState:f,undo:function(){var e=u.undo();return s(e),e.url},redo:function(){var e=u.redo();return s(e),e.url},getHistoryStates:function(){return{undoEnabled:u.canUndo(),redoEnabled:u.canRedo()}}}},VE=function(e,t){var n=zE(e.currentState),r=function(e){var t=n.getHistoryStates();p.updateButtonUndoStates(e,t.undoEnabled,t.redoEnabled),Qr(e,_E.formActionEvent,{name:_E.saveState(),value:t.undoEnabled})},o=function(e){return e.toBlob()},i=function(e){Qr(e,_E.formActionEvent,{name:_E.disable(),value:{}})},a=function(e){h.getApplyButton(e).each((function(e){Cv.enable(e)})),Qr(e,_E.formActionEvent,{name:_E.enable(),value:{}})},u=function(e,t){return i(e),f.updateSrc(e,t)},s=function(e,t,n,s,c){return i(e),function(e){return sS(e)}(t).then(n).then(o).then(s).then((function(t){return u(e,t).then((function(t){return r(e),c(),a(e),t}))})).catch((function(t){return a(e),t}))},c=function(e,t,r){var o=n.getBlobState().blob;s(e,o,t,(function(e){return n.updateTempState(e)}),r)},l=function(e){var t=n.getBlobState().url;return n.destroyTempState(),r(e),t},f=FE(e.currentState.url),p=function(e){var t=ym(ME("Undo","undo",!0,(function(e){Qr(e,bE.undo(),{direction:1})}),e)),n=ym(ME("Redo","redo",!0,(function(e){Qr(e,bE.redo(),{direction:1})}),e));return{container:Zb.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[t.asSpec(),n.asSpec(),ME("Zoom in","zoom-in",!1,(function(e){Qr(e,bE.zoom(),{direction:1})}),e),ME("Zoom out","zoom-out",!1,(function(e){Qr(e,bE.zoom(),{direction:-1})}),e)]}),updateButtonUndoStates:function(e,r,o){t.getOpt(e).each((function(e){PE(e,r)})),n.getOpt(e).each((function(e){PE(e,o)}))}}}(t),h=SE(f,t);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[h.memContainer.asSpec(),f.memContainer.asSpec(),p.container],behaviours:ls([ql.config({store:{mode:"manual",getValue:function(){return n.getBlobState()}}}),gh("image-tools-events",[ao(bE.undo(),(function(e,t){var o=n.undo();u(e,o).then((function(t){a(e),r(e)}))})),ao(bE.redo(),(function(e,t){var o=n.redo();u(e,o).then((function(t){a(e),r(e)}))})),ao(bE.zoom(),(function(e,t){var n=t.event.direction;f.zoom(e,n)})),ao(bE.back(),(function(e,t){!function(e){var t=l(e);u(e,t).then((function(t){a(e)}))}(e),(0,t.event.swap)(),f.hideCrop()})),ao(bE.apply(),(function(e,t){n.applyTempState((function(){l(e),(0,t.event.swap)()}))})),ao(bE.transform(),(function(e,t){return c(e,t.event.transform,d)})),ao(bE.tempTransform(),(function(e,t){return function(e,t){var r=n.getTempState().blob;s(e,r,t,(function(e){return n.addTempState(e)}),d)}(e,t.event.transform)})),ao(bE.transformApply(),(function(e,t){return function(e,t,r){var o=n.getBlobState().blob;s(e,o,t,(function(t){var r=n.addBlobState(t);return l(e),r}),r)}(e,t.event.transform,t.event.swap)})),ao(bE.swap(),(function(e,t){!function(e){p.updateButtonUndoStates(e,!1,!1)}(e);var n=t.event.transform,r=t.event.swap;n.fold((function(){r()}),(function(t){c(e,t,r)}))}))]),A_()])}},HE=function(e){return!Ne(e,"items")},$E="data-value",jE=function(e,t,n,r){return $(n,(function(n){return HE(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===r,onAction:function(){ql.setValue(e,n.value),Qr(e,dC,{name:t}),xh.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:function(){return jE(e,t,n.items,r)}}}))},UE=function(e,t){return ae(e,(function(e){return HE(e)?ed(e.value===t,e):UE(e.items,t)}))},WE=Jf({name:"HtmlSelect",configFields:[Vt("options"),Gl("selectBehaviours",[xh,ql]),tn("selectClasses",[]),tn("selectAttributes",{}),Kt("data")],factory:function(e,t){var n=$(e.options,(function(e){return{dom:{tag:"option",value:e.value,innerHtml:e.text}}})),r=e.data.map((function(e){return Ye("initialValue",e)})).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Kl(e.selectBehaviours,[xh.config({}),ql.config({store:w({mode:"manual",getValue:function(e){return ca(e.element)},setValue:function(t,n){X(e.options,(function(e){return e.value===n})).isSome()&&la(t.element,n)}},r)})])}}}),qE=function(e,t){var n=e.label.map((function(e){return fC(e,t)})),r=[Cv.config({disabled:function(){return e.disabled||t.isDisabled()}}),Qv(),lh.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:function(e){return Jr(e,gC),F.some(!0)}}),gh("textfield-change",[ao(br(),(function(t,n){Qr(t,dC,{name:e.name})})),ao(kr(),(function(t,n){Qr(t,dC,{name:e.name})}))]),aC.config({})],o=e.validation.map((function(e){return GC.config({getRoot:function(e){return To(e.element)},invalidClass:"tox-invalid",validator:{validate:function(t){var n=ql.getValue(t),r=e.validator(n);return RC(!0===r?ce.value(n):ce.error(r))},validateOnLoad:e.validateOnLoad}})})).toArray(),i=e.placeholder.fold(h({}),(function(e){return{placeholder:t.translate(e)}})),a=e.inputMode.fold(h({}),(function(e){return{inputmode:e}})),u=w(w({},i),a),s=rC.parts.field({tag:!0===e.multiline?"textarea":"input",inputAttributes:u,inputClasses:[e.classname],inputBehaviours:ls(Y([r,o])),selectOnFocus:!1,factory:AC}),c=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),l=[Cv.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(e){rC.getField(e).each(Cv.disable)},onEnabled:function(e){rC.getField(e).each(Cv.enable)}}),Qv()];return sC(n,s,c,l)},GE=Object.freeze({__proto__:null,events:function(e,t){var n=e.stream.streams.setup(e,t);return ro([ao(e.event,n),go((function(){return t.cancel()}))].concat(e.cancelEvent.map((function(e){return[ao(e,(function(){return t.cancel()}))]})).getOr([])))}}),XE=function(e){var t=dn(null);return Ai({readState:function(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function(e){t.set(e)},cancel:function(){var e=t.get();null!==e&&e.cancel()}})},KE=Object.freeze({__proto__:null,throttle:XE,init:function(e){return e.stream.streams.state(e)}}),YE=[Ht("stream",Ot("mode",{throttle:[Vt("delay"),tn("stopEvent",!0),Su("streams",{setup:function(e,t){var n=e.stream,r=Am(e.onStream,n.delay);return t.setTimer(r),function(e,t){r.throttle(e,t),n.stopEvent&&t.stop()}},state:XE})]})),tn("event","input"),Kt("cancelEvent"),wu("onStream")],JE=ds({fields:YE,name:"streaming",active:GE,state:KE}),QE=function(e,t,n){var r=ql.getValue(n);ql.setValue(t,r),eA(t)},ZE=function(e,t){var n=e.element,r=ca(n),o=n.dom;"number"!==Zo(n,"type")&&t(o,r)},eA=function(e){ZE(e,(function(e,t){return e.setSelectionRange(t.length,t.length)}))},tA=function(e,t,n){if(e.selectsOver){var r=ql.getValue(t),o=e.getDisplayText(r),i=ql.getValue(n);return 0===e.getDisplayText(i).indexOf(o)?F.some((function(){QE(0,t,n),function(e,t){ZE(e,(function(e,n){return e.setSelectionRange(t,n.length)}))}(t,o.length)})):F.none()}return F.none()},nA=h("alloy.typeahead.itemexecute"),rA=h([Kt("lazySink"),Vt("fetch"),tn("minChars",5),tn("responseTime",1e3),Cu("onOpen"),tn("getHotspot",F.some),tn("getAnchorOverrides",h({})),tn("layouts",F.none()),tn("eventOrder",{}),ln("model",{},[tn("getDisplayText",(function(e){return void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value})),tn("selectsOver",!0),tn("populateFromBrowse",!0)]),Cu("onSetValue"),xu("onExecute"),Cu("onItemExecute"),tn("inputClasses",[]),tn("inputAttributes",{}),tn("inputStyles",{}),tn("matchWidth",!0),tn("useMinWidth",!1),tn("dismissOnBlur",!0),yu(["openClass"]),Kt("initialData"),Gl("typeaheadBehaviours",[xh,ql,JE,lh,Fh,YC]),fn("previewing",(function(){return dn(!0)}))].concat(wC()).concat(dx())),oA=h([Sf({schema:[vu()],name:"menu",overrides:function(e){return{fakeFocus:!0,onHighlight:function(t,n){e.previewing.get()?t.getSystem().getByUid(e.uid).each((function(r){tA(e.model,r,n).fold((function(){return md.dehighlight(t,n)}),(function(e){return e()}))})):t.getSystem().getByUid(e.uid).each((function(t){e.model.populateFromBrowse&&QE(e.model,t,n)})),e.previewing.set(!1)},onExecute:function(t,n){return t.getSystem().getByUid(e.uid).toOptional().map((function(e){return Qr(e,nA(),{item:n}),!0}))},onHover:function(t,n){e.previewing.set(!1),t.getSystem().getByUid(e.uid).each((function(t){e.model.populateFromBrowse&&QE(e.model,t,n)}))}}}})]),iA=Qf({name:"Typeahead",configFields:rA(),partFields:oA(),factory:function(e,t,n,r){var o=function(t,n,o){e.previewing.set(!1);var i=YC.getCoupled(t,"sandbox");if(Al.isOpen(i))od.getCurrent(i).each((function(e){md.getHighlighted(e).fold((function(){o(e)}),(function(){no(i,e.element,"keydown",n)}))}));else{ox(e,a(t),t,i,r,(function(e){od.getCurrent(e).each(o)}),TC.HighlightFirst).get(d)}},i=_C(e),a=function(e){return function(t){return t.map((function(t){var n=Oe(t.menus),r=J(n,(function(e){return W(e.items,(function(e){return"item"===e.type}))}));return ql.getState(e).update($(r,(function(e){return e.data}))),t}))}},u=[xh.config({}),ql.config({onSetValue:e.onSetValue,store:w({mode:"dataset",getDataKey:function(e){return ca(e.element)},getFallbackEntry:function(e){return{value:e,meta:{}}},setValue:function(t,n){la(t.element,e.model.getDisplayText(n))}},e.initialData.map((function(e){return Ye("initialValue",e)})).getOr({}))}),JE.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:function(t,n){var o=YC.getCoupled(t,"sandbox");if(xh.isFocused(t)&&ca(t.element).length>=e.minChars){var i=od.getCurrent(o).bind((function(e){return md.getHighlighted(e).map(ql.getValue)}));e.previewing.set(!0);ox(e,a(t),t,o,r,(function(t){od.getCurrent(o).each((function(t){i.fold((function(){e.model.selectsOver&&md.highlightFirst(t)}),(function(e){md.highlightBy(t,(function(t){return ql.getValue(t).value===e.value})),md.getHighlighted(t).orThunk((function(){return md.highlightFirst(t),F.none()}))}))}))}),TC.HighlightFirst).get(d)}},cancelEvent:Pr()}),lh.config({mode:"special",onDown:function(e,t){return o(e,t,md.highlightFirst),F.some(!0)},onEscape:function(e){var t=YC.getCoupled(e,"sandbox");return Al.isOpen(t)?(Al.close(t),F.some(!0)):F.none()},onUp:function(e,t){return o(e,t,md.highlightLast),F.some(!0)},onEnter:function(t){var n=YC.getCoupled(t,"sandbox"),r=Al.isOpen(n);if(r&&!e.previewing.get())return od.getCurrent(n).bind((function(e){return md.getHighlighted(e)})).map((function(e){return Qr(t,nA(),{item:e}),!0}));var o=ql.getValue(t);return Jr(t,Pr()),e.onExecute(n,t,o),r&&Al.close(n),F.some(!0)}}),Fh.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),YC.config({others:{sandbox:function(t){return lx(e,t,{onOpen:function(){return Fh.on(t)},onClose:function(){return Fh.off(t)}})}}}),gh("typeaheadevents",[yo((function(t){var n=d;ax(e,a(t),t,r,n,TC.HighlightFirst).get(d)})),ao(nA(),(function(t,n){var r=YC.getCoupled(t,"sandbox");QE(e.model,t,n.event.item),Jr(t,Pr()),e.onItemExecute(t,r,n.event.item,ql.getValue(t)),Al.close(r),eA(t)}))].concat(e.dismissOnBlur?[ao(Dr(),(function(e){var t=YC.getCoupled(e,"sandbox");Cs(t.element).isNone()&&Al.close(t)}))]:[]))];return{uid:e.uid,dom:EC(Re(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:w(w({},i),Kl(e.typeaheadBehaviours,u)),eventOrder:e.eventOrder}}}),aA=function(e){return w(w({},e),{toCached:function(){return aA(e.toCached())},bindFuture:function(t){return aA(e.bind((function(e){return e.fold((function(e){return RC(ce.error(e))}),(function(e){return t(e)}))})))},bindResult:function(t){return aA(e.map((function(e){return e.bind(t)})))},mapResult:function(t){return aA(e.map((function(e){return e.map(t)})))},mapError:function(t){return aA(e.map((function(e){return e.mapError(t)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(t,n){return aA(IC((function(r){var o=!1,i=setTimeout((function(){o=!0,r(ce.error(n()))}),t);e.get((function(e){o||(clearTimeout(i),r(e))}))})))}})},uA=function(e){return aA(IC(e))},sA=uA,cA={type:"separator"},lA=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:d}},fA=function(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:d}},dA=function(e,t){return function(e){return $(e,lA)}(function(e,t){return W(t,(function(t){return t.type===e}))}(e,t))},pA=function(e){return dA("header",e.targets)},hA=function(e){return dA("anchor",e.targets)},mA=function(e){return F.from(e.anchorTop).map((function(e){return fA("<top>",e)})).toArray()},gA=function(e){return F.from(e.anchorBottom).map((function(e){return fA("<bottom>",e)})).toArray()},vA=function(e,t){var n=e.toLowerCase();return W(t,(function(e){var t=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text;return xn(t.toLowerCase(),n)||xn(e.value.toLowerCase(),n)}))},yA=function(e,t,n){var r=ql.getValue(t),o=void 0!==r.meta.text?r.meta.text:r.value;return n.getLinkInformation().fold((function(){return[]}),(function(t){var r,i=vA(o,function(e){return $(e,(function(e){return fA(e,e)}))}(n.getHistory(e)));return"file"===e?(r=[i,vA(o,pA(t)),vA(o,Y([mA(t),hA(t),gA(t)]))],G(r,(function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(cA,t)}),[])):i}))},bA=ci("aria-invalid"),CA=function(e){return function(t,n,r){return Be(n,"name").fold((function(){return e(n,r)}),(function(o){return t.field(o,e(n,r))}))}},xA={bar:CA((function(e,t){return function(e,t){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$(e.items,t.interpreter)}}(e,t.shared)})),collection:CA((function(e,t){return xC(e,t.shared.providers)})),alertbanner:CA((function(e,t){return function(e,t){return Zb.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[vm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Cm(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:function(t){Qr(t,mC,{name:"alert-banner",value:e.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})}(e,t.shared.providers)})),input:CA((function(e,t){return function(e,t){return qE({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:F.none(),maximized:e.maximized},t)}(e,t.shared.providers)})),textarea:CA((function(e,t){return function(e,t){return qE({name:e.name,multiline:!0,label:e.label,inputMode:F.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:F.none(),maximized:e.maximized},t)}(e,t.shared.providers)})),label:CA((function(e,t){return function(e,t){var n={dom:{tag:"label",innerHtml:t.providers.translate(e.label),classes:["tox-label"]}},r=$(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(r),behaviours:ls([A_(),mh.config({}),L_(F.none()),lh.config({mode:"acyclic"})])}}(e,t.shared)})),iframe:(IE=function(e,t){return K_(e,t.shared.providers)},function(e,t,n){var r=Re(t,{source:"dynamic"});return CA(IE)(e,r,n)}),button:CA((function(e,t){return cE(e,t.shared.providers)})),checkbox:CA((function(e,t){return function(e,t){var n=ql.config({store:{mode:"manual",getValue:function(e){return e.element.dom.checked},setValue:function(e,t){e.element.dom.checked=t}}}),r=function(e){return e.element.dom.click(),F.some(!0)},o=rC.parts.field({factory:{sketch:m},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ls([A_(),Cv.config({disabled:function(){return e.disabled||t.isDisabled()}}),aC.config({}),xh.config({}),n,lh.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),gh("checkbox-events",[ao(Cr(),(function(t,n){Qr(t,dC,{name:e.name})}))])])}),i=rC.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:t.translate(e.label)},behaviours:ls([vx.config({})])}),a=function(e){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e],innerHtml:Cm("checked"===e?"selected":"unselected",t.icons)}}},u=ym({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[a("checked"),a("unchecked")]});return rC.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[o,u.asSpec(),i],fieldBehaviours:ls([Cv.config({disabled:function(){return e.disabled||t.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(e){rC.getField(e).each(Cv.disable)},onEnabled:function(e){rC.getField(e).each(Cv.enable)}}),Qv()])})}(e,t.shared.providers)})),colorinput:CA((function(e,t){return xx(e,t.shared,t.colorinput)})),colorpicker:CA((function(e){var t=function(e){return"tox-"+e},n=E_(O_,t),r=ym(n.sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(e){Qr(e,mC,{name:"hex-valid",value:!0})},onInvalidHex:function(e){Qr(e,mC,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:ls([ql.config({store:{mode:"manual",getValue:function(e){var t=r.get(e);return od.getCurrent(t).bind((function(e){return ql.getValue(e).hex})).map((function(e){return"#"+e})).getOr("")},setValue:function(e,t){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),o=r.get(e);od.getCurrent(o).fold((function(){}),(function(e){ql.setValue(e,{hex:F.from(n[1]).getOr("")}),y_.getField(e,"hex").each((function(e){Jr(e,br())}))}))}}}),A_()])}})),dropzone:CA((function(e,t){return V_(e,t.shared.providers)})),grid:CA((function(e,t){return function(e,t){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:$(e.items,t.interpreter)}}(e,t.shared)})),listbox:CA((function(e,t){return function(e,t){var n=t.shared.providers,r=re(e.items).filter(HE),o=e.label.map((function(e){return fC(e,n)})),i={dom:{tag:"div",classes:["tox-listboxfield"]},components:[rC.parts.field({dom:{},factory:{sketch:function(n){return qS({uid:n.uid,text:r.map((function(e){return e.text})),icon:F.none(),tooltip:e.label,role:F.none(),fetch:function(n,r){var o=jE(n,e.name,e.items,ql.getValue(n));r(QS(o,lg.CLOSE_ON_EXECUTE,t,!1))},onSetup:h(d),getApi:h({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[aC.config({}),ql.config({store:{mode:"manual",initialValue:r.map((function(e){return e.value})).getOr(""),getValue:function(e){return Zo(e.element,$E)},setValue:function(t,n){UE(e.items,n).each((function(e){Qo(t.element,$E,e.value),Qr(t,US,{text:e.text})}))}}})]},"tox-listbox",t.shared)}}})]};return rC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Y([o.toArray(),[i]]),fieldBehaviours:ls([Cv.config({disabled:h(e.disabled),onDisabled:function(e){rC.getField(e).each(Cv.disable)},onEnabled:function(e){rC.getField(e).each(Cv.enable)}})])})}(e,t)})),selectbox:CA((function(e,t){return function(e,t){var n=$(e.items,(function(e){return{text:t.translate(e.text),value:e.value}})),r=e.label.map((function(e){return fC(e,t)})),o=rC.parts.field({dom:{},selectAttributes:{size:e.size},options:n,factory:WE,selectBehaviours:ls([Cv.config({disabled:function(){return e.disabled||t.isDisabled()}}),aC.config({}),gh("selectbox-change",[ao(Cr(),(function(t,n){Qr(t,dC,{name:e.name})}))])])}),i=e.size>1?F.none():F.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:Cm("chevron-down",t.icons)}}),a={dom:{tag:"div",classes:["tox-selectfield"]},components:Y([[o],i.toArray()])};return rC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Y([r.toArray(),[a]]),fieldBehaviours:ls([Cv.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(e){rC.getField(e).each(Cv.disable)},onEnabled:function(e){rC.getField(e).each(Cv.enable)}}),Qv()])})}(e,t.shared.providers)})),sizeinput:CA((function(e,t){return yE(e,t.shared.providers)})),urlinput:CA((function(e,t){return function(e,t,n){var r,o=t.shared.providers,i=function(t){var r=ql.getValue(t);n.addToHistory(r.value,e.filetype)},a=rC.parts.field({factory:iA,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":bA,type:"url"},minChars:0,responseTime:0,fetch:function(r){var o=yA(e.filetype,r,n),i=QS(o,lg.BUBBLE_TO_SANDBOX,t,!1);return RC(i)},getHotspot:function(e){return p.getOpt(e)},onSetValue:function(e,t){e.hasConfigured(GC)&&GC.run(e).get(d)},typeaheadBehaviours:ls(Y([n.getValidationHandler().map((function(t){return GC.config({getRoot:function(e){return To(e.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(e,t){s.getOpt(e).each((function(e){Qo(e.element,"title",o.translate(t))}))}},validator:{validate:function(n){var r=ql.getValue(n);return sA((function(n){t({type:e.filetype,url:r.value},(function(e){if("invalid"===e.status){var t=ce.error(e.message);n(t)}else{var r=ce.value(e.message);n(r)}}))}))},validateOnLoad:!1}})})).toArray(),[Cv.config({disabled:function(){return e.disabled||o.isDisabled()}}),aC.config({}),gh("urlinput-events",Y(["file"===e.filetype?[ao(br(),(function(t){Qr(t,dC,{name:e.name})}))]:[],[ao(Cr(),(function(t){Qr(t,dC,{name:e.name}),i(t)})),ao(kr(),(function(t){Qr(t,dC,{name:e.name}),i(t)}))]]))]])),eventOrder:(r={},r[br()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:Dg(0,0,"normal")},onExecute:function(e,t,n){Qr(t,gC,{})},onItemExecute:function(t,n,r,o){i(t),Qr(t,dC,{name:e.name})}}),u=e.label.map((function(e){return fC(e,o)})),s=ym(function(e,t,n,r){return void 0===n&&(n=e),void 0===r&&(r=e),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],innerHtml:Cm(n,o.icons),attributes:w({title:o.translate(r),"aria-live":"polite"},t.fold((function(){return{}}),(function(e){return{id:e}})))}}}("invalid",F.some(bA),"warning")),c=ym({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[s.asSpec()]}),l=n.getUrlPicker(e.filetype),f=ci("browser.url.event"),p=ym({dom:{tag:"div",classes:["tox-control-wrap"]},components:[a,c.asSpec()],behaviours:ls([Cv.config({disabled:function(){return e.disabled||o.isDisabled()}})])}),h=ym(aE({name:e.name,icon:F.some("browse"),text:e.label.getOr(""),disabled:e.disabled,primary:!1,borderless:!0},(function(e){return Jr(e,f)}),o,[],["tox-browse-url"]));return rC.sketch({dom:lC([]),components:u.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Y([[p.asSpec()],l.map((function(){return h.asSpec()})).toArray()])}]),fieldBehaviours:ls([Cv.config({disabled:function(){return e.disabled||o.isDisabled()},onDisabled:function(e){rC.getField(e).each(Cv.disable),h.getOpt(e).each(Cv.disable)},onEnabled:function(e){rC.getField(e).each(Cv.enable),h.getOpt(e).each(Cv.enable)}}),Qv(),gh("url-input-events",[ao(f,(function(t){od.getCurrent(t).each((function(n){var r=ql.getValue(n),o=w({fieldname:e.name},r);l.each((function(r){r(o).get((function(r){ql.setValue(n,r),Qr(t,dC,{name:e.name})}))}))}))}))])])})}(e,t,t.urlinput)})),customeditor:CA((function(e){var t=dn(F.none()),n=ym({dom:{tag:e.tag}}),r=dn(F.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ls([gh("custom-editor-events",[mo((function(o){n.getOpt(o).each((function(n){(!function(e){return Object.prototype.hasOwnProperty.call(e,"init")}(e)?B_.load(e.scriptId,e.scriptUrl).then((function(t){return t(n.element.dom,e.settings)})):e.init(n.element.dom)).then((function(e){r.get().each((function(t){e.setValue(t)})),r.set(F.none()),t.set(F.some(e))}))}))}))]),ql.config({store:{mode:"manual",getValue:function(){return t.get().fold((function(){return r.get().getOr("")}),(function(e){return e.getValue()}))},setValue:function(e,n){t.get().fold((function(){r.set(F.some(n))}),(function(e){return e.setValue(n)}))}}}),A_()]),components:[n.asSpec()]}})),htmlpanel:CA((function(e){return"presentation"===e.presets?Zb.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):Zb.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:ls([aC.config({}),xh.config({})])})})),imagetools:CA((function(e,t){return VE(e,t.shared.providers)})),table:CA((function(e,t){return function(e,t){var n,r,o=function(e){return{dom:{tag:"th",innerHtml:t.translate(e)}}},i=function(e){return{dom:{tag:"td",innerHtml:t.translate(e)}}},a=function(e){return{dom:{tag:"tr"},components:$(e,i)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(r=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$(r,o)}]}),(n=e.cells,{dom:{tag:"tbody"},components:$(n,a)})],behaviours:ls([aC.config({}),xh.config({})])}}(e,t.shared.providers)})),panel:CA((function(e,t){return function(e,t){return{dom:{tag:"div",classes:e.classes},components:$(e.items,t.shared.interpreter)}}(e,t)}))},wA={field:function(e,t){return t}},_A=function(e,t,n){var r=Re(n,{shared:{interpreter:function(t){return SA(e,t,r)}}});return SA(e,t,r)},SA=function(e,t,n){return Be(xA,t.type).fold((function(){return t}),(function(r){return r(e,t,n)}))},EA={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},AA=function(e,t,n){var r=Ws(-12,12,EA),o={maxHeightFunction:Hs()};return function(){return n()?{anchor:"node",root:Ro(e()),node:F.from(e()),bubble:r,layouts:{onRtl:function(){return[pm]},onLtr:function(){return[dm]}},overrides:o}:{anchor:"hotspot",hotspot:t(),bubble:r,layouts:{onRtl:function(){return[Uu]},onLtr:function(){return[Wu]}},overrides:o}}},DA=function(e,t,n){return function(){return n()?{anchor:"node",root:Ro(e()),node:F.from(e()),layouts:{onRtl:function(){return[hm]},onLtr:function(){return[hm]}}}:{anchor:"hotspot",hotspot:t(),layouts:{onRtl:function(){return[Ku]},onLtr:function(){return[Ku]}}}}},kA=function(e,t){return function(){return{anchor:"selection",root:t(),getSelection:function(){var t=e.selection.getRng();return F.some(gc.range(hn.fromDom(t.startContainer),t.startOffset,hn.fromDom(t.endContainer),t.endOffset))}}}},TA=function(e){return function(t){return{anchor:"node",root:e(),node:t}}},OA=function(e,t,n){var r=Vv(e),o=function(){return hn.fromDom(e.getBody())},i=function(){return hn.fromDom(e.getContentAreaContainer())},a=function(){return r||!n()};return{inlineDialog:AA(i,t,a),banner:DA(i,t,a),cursor:kA(e,o),node:TA(o)}},BA=function(e){return function(t,n){lb(e)(t,n)}},NA=function(e){return function(){return eb(e)}},FA=function(e){return function(){return tb(e)}},MA=function(e){return function(){return rb(e)}},PA=function(e){return{colorPicker:BA(e),hasCustomColors:NA(e),getColors:FA(e),getColorCols:MA(e)}},IA=function(e){return function(){return function(e){return e.getParam("draggable_modal",!1,"boolean")}(e)}},RA=function(e){return{isDraggableModal:IA(e)}},LA=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],zA=function(e){return G(e,(function(e,t){if(Ne(t,"items")){var n=zA(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if(function(e){return Ne(e,"inline")}(t)||function(e){return Ne(e,"block")}(t)||function(e){return Ne(e,"selector")}(t)){var o="custom-"+(r(t.name)?t.name:t.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:o,format:t}]),formats:e.formats.concat([{title:t.title,format:o,icon:t.icon}])}}return w(w({},e),{formats:e.formats.concat(t)})}),{customFormats:[],formats:[]})},VA=function(e){return function(e){return F.from(e.getParam("style_formats")).filter(i)}(e).map((function(t){var n=function(e,t){var n=zA(t),r=function(t){j(t,(function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?r(n.customFormats):e.on("init",(function(){r(n.customFormats)})),n.formats}(e,t);return function(e){return e.getParam("style_formats_merge",!1,"boolean")}(e)?LA.concat(n):n})).getOr(LA)},HA=function(e,t,n){var r={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return Re(e,r)},$A=function(e,t,n,o){var i=function(t){return $(t,(function(t){var a=we(t);if(Fe(t,"items")){var u=i(t.items);return Re(function(e){return Re(e,{type:"submenu"})}(t),{getStyleItems:function(){return u}})}return Fe(t,"format")?function(e){return HA(e,n,o)}(t):1===a.length&&L(a,"title")?Re(t,{type:"separator"}):function(t){var i=r(t.name)?t.name:ci(t.title),a="custom-"+i,u={type:"formatter",format:a,isSelected:n(a),getStylePreview:o(a)},s=Re(t,u);return e.formatter.register(i,s),s}(t)}))};return i(t)},jA=function(e){var t=function(t){return function(){return e.formatter.match(t)}},n=function(t){return function(){var n=e.formatter.get(t);return void 0!==n?F.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):F.none()}},r=function(e){var t=e.items;return void 0!==t&&t.length>0?J(t,r):[e.format]},o=dn([]),i=dn([]),a=dn([]),u=dn([]),s=dn(!1);e.on("PreInit",(function(a){var u=VA(e),s=$A(e,u,t,n);o.set(s),i.set(J(s,r))})),e.on("addStyleModifications",(function(o){var i=$A(e,o.items,t,n);a.set(i),s.set(o.replace),u.set(J(i,r))}));return{getData:function(){var e=s.get()?[]:o.get(),t=a.get();return e.concat(t)},getFlattenedKeys:function(){var e=s.get()?[]:i.get(),t=u.get();return e.concat(t)}}},UA=N_.trim,WA=function(e){return function(t){if(function(e){return s(e)&&1===e.nodeType}(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},qA=WA("true"),GA=WA("false"),XA=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},KA=function(e){return e.innerText||e.textContent},YA=function(e){return function(e){return e&&"A"===e.nodeName&&void 0!==(e.id||e.name)}(e)&&QA(e)},JA=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},QA=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return qA(e)}return!1}(e)&&!GA(e)},ZA=function(e){return JA(e)&&QA(e)},eD=function(e){var t=function(e){return e.id?e.id:ci("h")}(e);return XA("header",KA(e),"#"+t,function(e){return JA(e)?parseInt(e.nodeName.substr(1),10):0}(e),(function(){e.id=t}))},tD=function(e){var t=e.id||e.name,n=KA(e);return XA("anchor",n||"#"+t,"#"+t,0,d)},nD=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,$(Oc(hn.fromDom(n),t),(function(e){return e.dom}))},rD=function(e){return UA(e.title).length>0},oD=function(e){var t=nD(e);return W(function(e){return $(W(e,ZA),eD)}(t).concat(function(e){return $(W(e,YA),tD)}(t)),rD)},iD="tinymce-url-history",aD=function(e){return r(e)&&/^https?/.test(e)},uD=function(e){return o(e)&&Te(e,(function(e){return!(i(t=e)&&t.length<=5&&Q(t,aD));var t})).isNone()},sD=function(){var e,t=Gy.getItem(iD);if(null===t)return{};try{e=JSON.parse(t)}catch(n){if(n instanceof SyntaxError)return{};throw n}return uD(e)?e:{}},cD=function(e){var t=sD();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:[]},lD=function(e,t){if(aD(e)){var n=sD(),r=Object.prototype.hasOwnProperty.call(n,t)?n[t]:[],o=W(r,(function(t){return t!==e}));n[t]=[e].concat(o).slice(0,5),function(e){if(!uD(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Gy.setItem(iD,JSON.stringify(e))}(n)}},fD=function(e){return!!e},dD=function(e){return Ee(N_.makeMap(e,/[, ]/),fD)},pD=function(e){return F.from(function(e){return e.getParam("file_picker_callback")}(e)).filter(c)},hD=function(e,t){var n=function(e){var t=F.some(function(e){return e.getParam("file_picker_types")}(e)).filter(fD),n=F.some(function(e){return e.getParam("file_browser_callback_types")}(e)).filter(fD),r=t.or(n).map(dD);return pD(e).fold(b,(function(e){return r.fold(C,(function(e){return we(e).length>0&&e}))}))}(e);return a(n)?n?pD(e):F.none():n[t]?pD(e):F.none()},mD=function(e){return F.from(e).filter(r).getOrUndefined()},gD=function(e){return{getHistory:cD,addToHistory:lD,getLinkInformation:function(){return function(e){return function(e){return!1===e.getParam("typeahead_urls")}(e)?F.none():F.some({targets:oD(e.getBody()),anchorTop:mD(qv(e)),anchorBottom:mD(Gv(e))})}(e)},getValidationHandler:function(){return function(e){return F.from(function(e){var t=e.getParam("file_picker_validator_handler",void 0,"function");return void 0===t?e.getParam("filepicker_validator_handler",void 0,"function"):t}(e))}(e)},getUrlPicker:function(t){return function(e,t){return hD(e,t).map((function(n){return function(i){return IC((function(a){var u=w({filetype:t,fieldname:i.fieldname},F.from(i.meta).getOr({}));n.call(e,(function(e,t){if(!r(e))throw new Error("Expected value to be string");if(void 0!==t&&!o(t))throw new Error("Expected meta to be a object");a({value:e,meta:t})}),i.value,u)}))}}))}(e,t)}}},vD=function(e,t,n){var r=dn(!1),o=function(e){var t=dn(Lv(e)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===t.get()},getDockingMode:t.get,setDockingMode:t.set}}(t),i={shared:{providers:{icons:function(){return t.ui.registry.getAll().icons},menuItems:function(){return t.ui.registry.getAll().menuItems},translate:av.translate,isDisabled:function(){return t.mode.isReadOnly()||t.ui.isDisabled()},getSetting:t.getParam.bind(t)},interpreter:function(e){return function(e,t){return SA(wA,e,t)}(e,i)},anchors:OA(t,n,o.isPositionedAtTop),header:o,getSink:function(){return ce.value(e)}},urlinput:gD(t),styleselect:jA(t),colorinput:PA(t),dialog:RA(t),isContextMenuOpen:function(){return r.get()},setContextMenuState:function(e){return r.set(e)}};return i},yD=h((function(e,t){!function(e,t){var n=Na.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Zi(e,"max-width",n+"px")}(e,Math.floor(t))})),bD="contexttoolbar-hide",CD=h([Vt("dom"),tn("shell",!0),Gl("toolbarBehaviours",[mh])]),xD=h([Ef({name:"groups",overrides:function(){return{behaviours:ls([mh.config({})])}}})]),wD=Qf({name:"Toolbar",configFields:CD(),partFields:xD(),factory:function(e,t,n,r){var o=function(t){return e.shell?F.some(t):Rf(t,e,"groups")},i=e.shell?{behaviours:[mh.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:Kl(e.toolbarBehaviours,i.behaviours),apis:{setGroups:function(e,t){o(e).fold((function(){throw new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(e){mh.set(e,t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),_D=function(e,t,n){return{within:e,extra:t,withinWidth:n}},SD=function(e,t,n){var r,o=(r=function(e,t){var r=n(e);return F.some({element:e,start:t,finish:t+r,width:r})},G(e,(function(e,t){return r(t,e.len).fold(h(e),(function(t){return{len:t.finish,list:e.list.concat([t])}}))}),{len:0,list:[]}).list),i=W(o,(function(e){return e.finish<=t})),a=q(i,(function(e,t){return e+t.width}),0);return{within:i,extra:o.slice(i.length),withinWidth:a}},ED=function(e){return $(e,(function(e){return e.element}))},AD=function(e,t,n,r){var o=function(e,t,n){var r=SD(t,e,n);return 0===r.extra.length?F.some(r):F.none()}(e,t,n).getOrThunk((function(){return SD(t,e-n(r),n)})),i=o.within,a=o.extra,u=o.withinWidth;return 1===a.length&&a[0].width<=n(r)?function(e,t,n){var r=ED(e.concat(t));return _D(r,[],n)}(i,a,u):a.length>=1?function(e,t,n,r){var o=ED(e).concat([n]);return _D(o,ED(t),r)}(i,a,r,u):function(e,t,n){return _D(ED(e),[],n)}(i,0,u)},DD=function(e,t){var n=$(t,(function(e){return wa(e)}));wD.setGroups(e,n)},kD=function(e,t,n){var r=Lf(e,t,"primary"),o=YC.getCoupled(e,"overflowGroup");Zi(r.element,"visibility","hidden");var i=t.builtGroups.get().concat([o]),a=ae(i,(function(e){return Cs(e.element).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}));n([]),DD(r,i);var u=Fa(r.element),s=AD(u,t.builtGroups.get(),(function(e){return Fa(e.element)}),o);0===s.extra.length?(mh.remove(r,o),n([])):(DD(r,s.within),n(s.extra)),ua(r.element,"visibility"),sa(r.element),a.each(xh.focus)},TD=h([Gl("splitToolbarBehaviours",[YC]),fn("builtGroups",(function(){return dn([])}))]),OD=h([yu(["overflowToggledClass"]),Zt("getOverflowBounds"),Vt("lazySink"),fn("overflowGroups",(function(){return dn([])}))].concat(TD())),BD=h([_f({factory:wD,schema:CD(),name:"primary"}),Sf({schema:CD(),name:"overflow"}),Sf({name:"overflow-button"}),Sf({name:"overflow-group"})]),ND=h([yu(["toggledClass"]),Vt("lazySink"),Wt("fetch"),Zt("getBounds"),en("fireDismissalEventInstead",[tn("event",jr())]),Js()]),FD=h([Sf({name:"button",overrides:function(e){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ls([Fh.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Sf({factory:wD,schema:CD(),name:"toolbar",overrides:function(e){return{toolbarBehaviours:ls([lh.config({mode:"cyclic",onEscape:function(t){return Rf(t,e,"button").each(xh.focus),F.none()}})])}}})]),MD=function(e,t){var n=YC.getCoupled(e,"toolbarSandbox");Al.isOpen(n)?Al.close(n):Al.open(n,t.toolbar())},PD=function(e,t,n,r){var o=n.getBounds.map((function(e){return e()})),i=n.lazySink(e).getOrDie();ol.positionWithinBounds(i,{anchor:"hotspot",hotspot:e,layouts:r,overrides:{maxWidthFunction:yD()}},t,o)},ID=function(e,t,n,r,o){wD.setGroups(t,o),PD(e,t,n,r),Fh.on(e)},RD=Qf({name:"FloatingToolbarButton",factory:function(e,t,n,r){return w(w({},vm.sketch(w(w({},r.button()),{action:function(e){MD(e,r)},buttonBehaviours:Jl({dump:r.button().buttonBehaviours},[YC.config({others:{toolbarSandbox:function(t){return function(e,t,n){var r=ou();return{dom:{tag:"div",attributes:{id:r.id}},behaviours:ls([lh.config({mode:"special",onEscape:function(e){return Al.close(e),F.some(!0)}}),Al.config({onOpen:function(o,i){n.fetch().get((function(o){ID(e,i,n,t.layouts,o),r.link(e.element),lh.focusIn(i)}))},onClose:function(){Fh.off(e),xh.focus(e),r.unlink(e.element)},isPartOf:function(t,n,r){return au(n,r)||au(e,r)},getAttachPoint:function(){return n.lazySink(e).getOrDie()}}),gs.config({channels:w(w({},Bl(w({isExtraPart:b},n.fireDismissalEventInstead.map((function(e){return{fireEventInstead:{event:e.event}}})).getOr({})))),Fl({doReposition:function(){Al.getState(YC.getCoupled(e,"toolbarSandbox")).each((function(r){PD(e,r,n,t.layouts)}))}}))})])}}(t,n,e)}}})])}))),{apis:{setGroups:function(t,r){Al.getState(YC.getCoupled(t,"toolbarSandbox")).each((function(o){ID(t,o,e,n.layouts,r)}))},reposition:function(t){Al.getState(YC.getCoupled(t,"toolbarSandbox")).each((function(r){PD(t,r,e,n.layouts)}))},toggle:function(e){MD(e,r)},getToolbar:function(e){return Al.getState(YC.getCoupled(e,"toolbarSandbox"))},isOpen:function(e){return Al.isOpen(YC.getCoupled(e,"toolbarSandbox"))}}})},configFields:ND(),partFields:FD(),apis:{setGroups:function(e,t,n){e.setGroups(t,n)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},getToolbar:function(e,t){return e.getToolbar(t)},isOpen:function(e,t){return e.isOpen(t)}}}),LD=h([Vt("items"),yu(["itemSelector"]),Gl("tgroupBehaviours",[lh])]),zD=h([Af({name:"items",unit:"item"})]),VD=Qf({name:"ToolbarGroup",configFields:LD(),partFields:zD(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Kl(e.tgroupBehaviours,[lh.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),HD=function(e){return $(e,(function(e){return wa(e)}))},$D=function(e,t,n){kD(e,n,(function(r){n.overflowGroups.set(r),t.getOpt(e).each((function(e){RD.setGroups(e,HD(r))}))}))},jD=Qf({name:"SplitFloatingToolbar",configFields:OD(),partFields:BD(),factory:function(e,t,n,r){var o=ym(RD.sketch({fetch:function(){return IC((function(t){t(HD(e.overflowGroups.get()))}))},layouts:{onLtr:function(){return[Wu,Uu]},onRtl:function(){return[Uu,Wu]},onBottomLtr:function(){return[Gu,qu]},onBottomRtl:function(){return[qu,Gu]}},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:r["overflow-button"](),toolbar:r.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Kl(e.splitToolbarBehaviours,[YC.config({others:{overflowGroup:function(){return VD.sketch(w(w({},r["overflow-group"]()),{items:[o.asSpec()]}))}}})]),apis:{setGroups:function(t,n){e.builtGroups.set($(n,t.getSystem().build)),$D(t,o,e)},refresh:function(t){return $D(t,o,e)},toggle:function(e){o.getOpt(e).each((function(e){RD.toggle(e)}))},isOpen:function(e){return o.getOpt(e).map(RD.isOpen).getOr(!1)},reposition:function(e){o.getOpt(e).each((function(e){RD.reposition(e)}))},getOverflow:function(e){return o.getOpt(e).bind(RD.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)},getOverflow:function(e,t){return e.getOverflow(t)}}}),UD=function(e,t){return t.getAnimationRoot.fold((function(){return e.element}),(function(t){return t(e)}))},WD=function(e){return e.dimension.property},qD=function(e,t){return e.dimension.getDimension(t)},GD=function(e,t){var n=UD(e,t);qi(n,[t.shrinkingClass,t.growingClass])},XD=function(e,t){ji(e.element,t.openClass),Hi(e.element,t.closedClass),Zi(e.element,WD(t),"0px"),sa(e.element)},KD=function(e,t){ji(e.element,t.closedClass),Hi(e.element,t.openClass),ua(e.element,WD(t))},YD=function(e,t,n,r){n.setCollapsed(),Zi(e.element,WD(t),qD(t,e.element)),sa(e.element),GD(e,t),XD(e,t),t.onStartShrink(e),t.onShrunk(e)},JD=function(e,t,n,r){var o=r.getOrThunk((function(){return qD(t,e.element)}));n.setCollapsed(),Zi(e.element,WD(t),o),sa(e.element);var i=UD(e,t);ji(i,t.growingClass),Hi(i,t.shrinkingClass),XD(e,t),t.onStartShrink(e)},QD=function(e,t,n){var r=qD(t,e.element);("0px"===r?YD:JD)(e,t,n,F.some(r))},ZD=function(e,t,n){var r=UD(e,t),o=Ui(r,t.shrinkingClass),i=qD(t,e.element);KD(e,t);var a=qD(t,e.element);(o?function(){Zi(e.element,WD(t),i),sa(e.element)}:function(){XD(e,t)})(),ji(r,t.shrinkingClass),Hi(r,t.growingClass),KD(e,t),Zi(e.element,WD(t),a),n.setExpanded(),t.onStartGrow(e)},ek=function(e,t,n){var r=UD(e,t);return!0===Ui(r,t.growingClass)},tk=function(e,t,n){var r=UD(e,t);return!0===Ui(r,t.shrinkingClass)},nk=Object.freeze({__proto__:null,refresh:function(e,t,n){if(n.isExpanded()){ua(e.element,WD(t));var r=qD(t,e.element);Zi(e.element,WD(t),r)}},grow:function(e,t,n){n.isExpanded()||ZD(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&QD(e,t,n)},immediateShrink:function(e,t,n){n.isExpanded()&&YD(e,t,n)},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:ek,isShrinking:tk,isTransitioning:function(e,t,n){return ek(e,t)||tk(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?QD:ZD)(e,t,n)},disableTransitions:GD}),rk=Object.freeze({__proto__:null,exhibit:function(e,t,n){var r=t.expanded;return ki(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Ye(t.dimension.property,"0px")})},events:function(e,t){return ro([ho(wr(),(function(n,r){r.event.raw.propertyName===e.dimension.property&&(GD(n,e),t.isExpanded()&&ua(n.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(n))}))])}}),ok=[Vt("closedClass"),Vt("openClass"),Vt("shrinkingClass"),Vt("growingClass"),Kt("getAnimationRoot"),Cu("onShrunk"),Cu("onStartShrink"),Cu("onGrown"),Cu("onStartGrow"),tn("expanded",!1),Ht("dimension",Ot("property",{width:[Su("property","width"),Su("getDimension",(function(e){return Fa(e)+"px"}))],height:[Su("property","height"),Su("getDimension",(function(e){return Ea(e)+"px"}))]}))],ik=ds({fields:ok,name:"sliding",active:rk,apis:nk,state:Object.freeze({__proto__:null,init:function(e){var t=dn(e.expanded);return Ai({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:g(t.set,!1),setExpanded:g(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),ak=h([yu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Cu("onOpened"),Cu("onClosed")].concat(TD())),uk=h([_f({factory:wD,schema:CD(),name:"primary"}),_f({factory:wD,schema:CD(),name:"overflow",overrides:function(e){return{toolbarBehaviours:ls([ik.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:function(t){Rf(t,e,"overflow-button").each((function(e){Fh.off(e),xh.focus(e)})),e.onClosed(t)},onGrown:function(t){lh.focusIn(t),e.onOpened(t)},onStartGrow:function(t){Rf(t,e,"overflow-button").each(Fh.on)}}),lh.config({mode:"acyclic",onEscape:function(t){return Rf(t,e,"overflow-button").each(xh.focus),F.some(!0)}})])}}}),Sf({name:"overflow-button",overrides:function(e){return{buttonBehaviours:ls([Fh.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Sf({name:"overflow-group"})]),sk=function(e,t){Rf(e,t,"overflow-button").bind((function(){return Rf(e,t,"overflow")})).each((function(n){ck(e,t),ik.toggleGrow(n)}))},ck=function(e,t){Rf(e,t,"overflow").each((function(n){kD(e,t,(function(e){var t=$(e,(function(e){return wa(e)}));wD.setGroups(n,t)})),Rf(e,t,"overflow-button").each((function(e){ik.hasGrown(n)&&Fh.on(e)})),ik.refresh(n)}))},lk=Qf({name:"SplitSlidingToolbar",configFields:ak(),partFields:uk(),factory:function(e,t,n,r){var o="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:Kl(e.splitToolbarBehaviours,[YC.config({others:{overflowGroup:function(e){return VD.sketch(w(w({},r["overflow-group"]()),{items:[vm.sketch(w(w({},r["overflow-button"]()),{action:function(t){Jr(e,o)}}))]}))}}}),gh("toolbar-toggle-events",[ao(o,(function(t){sk(t,e)}))])]),apis:{setGroups:function(t,n){!function(t,n){var r=$(n,t.getSystem().build);e.builtGroups.set(r)}(t,n),ck(t,e)},refresh:function(t){return ck(t,e)},toggle:function(t){return sk(t,e)},isOpen:function(t){return function(e,t){return Rf(e,t,"overflow").map(ik.hasGrown).getOr(!1)}(t,e)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)}}}),fk=h(ci("toolbar-height-change")),dk=function(e){var t=e.title.fold((function(){return{}}),(function(e){return{attributes:{title:e}}}));return{dom:w({tag:"div",classes:["tox-toolbar__group"]},t),components:[VD.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:ls([aC.config({}),xh.config({})])}},pk=function(e){return VD.sketch(dk(e))},hk=function(e,t){var n=mo((function(t){var n=$(e.initGroups,pk);wD.setGroups(t,n)}));return ls([ny(e.providers.isDisabled),Qv(),lh.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),gh("toolbar-events",[n])])},mk=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":dk({title:F.none(),items:[]}),"overflow-button":rE({name:"more",icon:F.some("more-drawer"),disabled:!1,tooltip:F.some("More..."),primary:!1,borderless:!1},F.none(),e.providers)},splitToolbarBehaviours:hk(e,t)}},gk=function(e){var t=mk(e),n=jD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return jD.sketch(w(w({},t),{lazySink:e.getSink,getOverflowBounds:function(){var t=e.moreDrawerData.lazyHeader().element,n=Ga(t),r=Do(t),o=Ga(r),i=Math.max(r.dom.scrollHeight,o.height);return Wa(n.x+4,o.y,n.width-8,i)},parts:w(w({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},vk=function(e){var t=lk.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=lk.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),r=mk(e);return lk.sketch(w(w({},r),{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(e){e.getSystem().broadcastOn([fk()],{type:"opened"})},onClosed:function(e){e.getSystem().broadcastOn([fk()],{type:"closed"})}}))},yk=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return wD.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===sg.scrolling?["tox-toolbar--scrolling"]:[])},components:[wD.parts.groups({})],toolbarBehaviours:hk(e,t)})},bk=lt([jt("type"),Ht("items",dt([xt([jt("name"),Xt("items",Mt)]),Mt]))].concat(Gm)),Ck=[Qt("text"),Qt("tooltip"),Qt("icon"),Wt("fetch"),sn("onSetup",(function(){return d}))],xk=lt(S([jt("type")],Ck)),wk=function(e){return Et("menubutton",xk,e)},_k=lt([jt("type"),Qt("tooltip"),Qt("icon"),Qt("text"),Zt("select"),Wt("fetch"),sn("onSetup",(function(){return d})),an("presets","normal",["normal","color","listpreview"]),tn("columns",1),Wt("onAction"),Wt("onItemAction")]),Sk=Object.freeze({__proto__:null,events:function(e,t){var n=function(n,r){e.updateState.each((function(e){var o=e(n,r);t.set(o)})),e.renderComponents.each((function(e){var o=e(r,t.get()),i=$(o,n.getSystem().build);sl(n,i)}))};return ro([ao(Tr(),(function(t,r){var o=r;if(!o.universal){var i=e.channel;L(o.channels,i)&&n(t,o.data)}})),mo((function(t,r){e.initialData.each((function(e){n(t,e)}))}))])}}),Ek=Object.freeze({__proto__:null,getState:function(e,t,n){return n}}),Ak=[Vt("channel"),Kt("renderComponents"),Kt("updateState"),Kt("initialData")],Dk=ds({fields:Ak,name:"reflecting",active:Sk,apis:Ek,state:Object.freeze({__proto__:null,init:function(){var e=dn(F.none());return{readState:function(){return e.get().fold((function(){return"none"}),(function(e){return e}))},get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(F.none())}}}})}),kk=h([Vt("toggleClass"),Vt("fetch"),wu("onExecute"),tn("getHotspot",F.some),tn("getAnchorOverrides",h({})),Js(),wu("onItemExecute"),Kt("lazySink"),Vt("dom"),Cu("onOpen"),Gl("splitDropdownBehaviours",[YC,lh,xh]),tn("matchWidth",!1),tn("useMinWidth",!1),tn("eventOrder",{}),Kt("role")].concat(dx())),Tk=_f({factory:vm,schema:[Vt("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:ls([xh.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(Zr)},buttonBehaviours:ls([Fh.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),Ok=_f({factory:vm,schema:[Vt("dom")],name:"button",defaults:function(){return{buttonBehaviours:ls([xh.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each((function(n){e.onExecute(n,t)}))}}}}),Bk=h([Tk,Ok,Ef({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[Vt("text")],name:"aria-descriptor"}),Sf({schema:[vu()],name:"menu",defaults:function(e){return{onExecute:function(t,n){t.getSystem().getByUid(e.uid).each((function(r){e.onItemExecute(r,t,n)}))}}}}),QC()]),Nk=Qf({name:"SplitDropdown",configFields:kk(),partFields:Bk(),factory:function(e,t,n,r){var o,i=function(e){od.getCurrent(e).each((function(e){md.highlightFirst(e),lh.focusIn(e)}))},a=function(t){ax(e,(function(e){return e}),t,r,i,TC.HighlightFirst).get(d)},u=function(t){var n=Lf(t,e,"button");return Zr(n),F.some(!0)},s=w(w({},ro([mo((function(t,n){Rf(t,e,"aria-descriptor").each((function(e){var n=ci("aria");Qo(e.element,"id",n),Qo(t.element,"aria-describedby",n)}))}))])),Ph(F.some(a))),c={repositionMenus:function(e){Fh.isOn(e)&&fx(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:c,eventOrder:w(w({},e.eventOrder),(o={},o[Or()]=["disabling","toggling","alloy.base.behaviour"],o)),events:s,behaviours:Kl(e.splitDropdownBehaviours,[YC.config({others:{sandbox:function(t){var n=Lf(t,e,"arrow");return lx(e,t,{onOpen:function(){Fh.on(n),Fh.on(t)},onClose:function(){Fh.off(n),Fh.off(t)}})}}}),lh.config({mode:"special",onSpace:u,onEnter:u,onDown:function(e){return a(e),F.some(!0)}}),xh.config({}),Fh.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(e,t){return e.repositionMenus(t)}}}),Fk=function(e){return{isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)}}},Mk=function(e){return{setActive:function(t){Fh.set(e,t)},isActive:function(){return Fh.isOn(e)},isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)}}},Pk=function(e,t){return e.map((function(e){return{"aria-label":t.translate(e),title:t.translate(e)}})).getOr({})},Ik=ci("focus-button"),Rk=["checklist","ordered-list"],Lk=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],zk=function(e,t,n,r,o,i){var a,u=function(e){return av.isRtl()&&L(Rk,e)?e+"-rtl":e},s=av.isRtl()&&e.exists((function(e){return L(Lk,e)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]).concat(s?["tox-tbtn__icon-rtl"]:[]),attributes:Pk(n,i)},components:sy([e.map((function(e){return zS(u(e),i.icons)})),t.map((function(e){return HS(e,"tox-tbtn",i)}))]),eventOrder:(a={},a[lr()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:ls([ny(i.isDisabled),Qv(),gh("common-button-display-events",[ao(lr(),(function(e,t){t.event.prevent(),Jr(e,Ik)}))])].concat(r.map((function(n){return Dk.config({channel:n,initialData:{icon:e,text:t},renderComponents:function(e,t){return sy([e.icon.map((function(e){return zS(u(e),i.icons)})),e.text.map((function(e){return HS(e,"tox-tbtn",i)}))])}})})).toArray()).concat(o.getOr([])))}},Vk=function(e,t,n){var r,o=dn(d),i=zk(e.icon,e.text,e.tooltip,F.none(),F.none(),n);return vm.sketch({dom:i.dom,components:i.components,eventOrder:jS,buttonBehaviours:ls([gh("toolbar-button-events",[(r={onAction:e.onAction,getApi:t.getApi},yo((function(e,t){ry(r,e)((function(t){Qr(e,$S,{buttonApi:t}),r.onAction(t)}))}))),oy(t,o),iy(t,o)]),ny((function(){return e.disabled||n.isDisabled()})),Qv()].concat(t.toolbarButtonBehaviours))})},Hk=function(e,t,n){return Vk(e,{toolbarButtonBehaviours:[].concat(n.length>0?[gh("toolbarButtonWith",n)]:[]),getApi:Fk,onSetup:e.onSetup},t)},$k=function(e,t,n){return Re(Vk(e,{toolbarButtonBehaviours:[mh.config({}),Fh.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[gh("toolbarToggleButtonWith",n)]:[]),getApi:Mk,onSetup:e.onSetup},t))},jk=function(e,t,n){return function(r){return IC((function(e){return t.fetch(e)})).map((function(o){return F.from(Nb(Re(fb(ci("menu-value"),o,(function(n){t.onItemAction(e(r),n)}),t.columns,t.presets,lg.CLOSE_ON_EXECUTE,t.select.getOr(b),n),{movement:pb(t.columns,t.presets),menuBehaviours:Yg("auto"!==t.columns?[]:[mo((function(e,n){Xg(e,4,xg(t.presets)).each((function(t){var n=t.numRows,r=t.numColumns;lh.setGridSize(e,n,r)}))}))])})))}))}},Uk=function(e,t){return ao($S,(function(n,r){var o=function(e){return{hide:function(){return Jr(e,Mr())},getValue:function(){return ql.getValue(e)}}}(e.get(n));t.onAction(o,r.event.buttonApi)}))},Wk=function(e,t,n){var r={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===t.type?function(e,t,n){var r=t.original;r.primary;var o=_(r,["primary"]),i=At(Qm(w(w({},o),{type:"togglebutton",onAction:d})));return $k(i,n.backstage.shared.providers,[Uk(e,t)])}(e,t,r):function(e,t,n){var r=t.original;r.primary;var o=_(r,["primary"]),i=At(Km(w(w({},o),{type:"button",onAction:d})));return Hk(i,n.backstage.shared.providers,[Uk(e,t)])}(e,t,r)},qk=function(e,t){var n=e.label.fold((function(){return{}}),(function(e){return{"aria-label":e}})),r=ym(AC.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:ls([lh.config({mode:"special",onEnter:function(e){return o.findPrimary(e).map((function(e){return Zr(e),!0}))},onLeft:function(e,t){return t.cut(),F.none()},onRight:function(e,t){return t.cut(),F.none()}})])})),o=function(e,t,n){var r=$(t,(function(t){return ym(Wk(e,t,n))}));return{asSpecs:function(){return $(r,(function(e){return e.asSpec()}))},findPrimary:function(e){return ae(t,(function(t,n){return t.primary?F.from(r[n]).bind((function(t){return t.getOpt(e)})).filter(v(Cv.isDisabled)):F.none()}))}}}(r,e.commands,t);return[{title:F.none(),items:[r.asSpec()]},{title:F.none(),items:o.asSpecs()}]},Gk=qk,Xk=function(e,t){var n=Ha(window),r=qa(hn.fromDom(e.getContentAreaContainer())),o=kv(e)||Tv(e)||Bv(e),i=function(e,t){var n=Math.max(t.x,e.x),r=e.right-n,o=t.width-(n-t.x);return{x:n,width:Math.min(r,o)}}(r,n),a=i.x,u=i.width;if(e.inline&&!o)return Wa(a,n.y,u,n.height);var s=function(e,t,n,r){var o=hn.fromDom(e.getContainer()),i=nu(o,".tox-editor-header").getOr(o),a=qa(i),u=a.y>=t.bottom,s=r&&!u;if(e.inline&&s)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(e.inline&&!s)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var c=qa(o);return s?{y:Math.max(a.bottom,n.y),bottom:Math.min(c.bottom,n.bottom)}:{y:Math.max(c.y,n.y),bottom:Math.min(a.y,n.bottom)}}(e,r,n,t.header.isPositionedAtTop()),c=s.y,l=s.bottom;return Wa(a,c,u,l-c)},Kk=function(e,t){var n=W(t,(function(t){return t.predicate(e.dom)})),r=U(n,(function(e){return"contexttoolbar"===e.type}));return{contextToolbars:r.pass,contextForms:r.fail}},Yk=function(e,t,n){var r=Kk(e,t);if(r.contextForms.length>0)return F.some({elem:e,toolbars:[r.contextForms[0]]});var o=Kk(e,n);if(o.contextForms.length>0)return F.some({elem:e,toolbars:[o.contextForms[0]]});if(r.contextToolbars.length>0||o.contextToolbars.length>0){var i=function(e){if(e.length<=1)return e;var t=function(t){return z(e,(function(e){return e.position===t}))},n=function(t){return W(e,(function(e){return e.position===t}))},r=t("selection"),o=t("node");if(r||o){if(o&&r){var i=n("node"),a=$(n("selection"),(function(e){return w(w({},e),{position:"node"})}));return i.concat(a)}return n(r?"selection":"node")}return n("line")}(r.contextToolbars.concat(o.contextToolbars));return F.some({elem:e,toolbars:i})}return F.none()},Jk=function(e,t,n){return e(t)?F.none():er(t,(function(e){var t=Kk(e,n.inNodeScope),r=t.contextToolbars,o=t.contextForms,i=o.length>0?o:function(e){if(e.length<=1)return e;var t=function(t){return X(e,(function(e){return e.position===t}))};return t("selection").orThunk((function(){return t("node")})).orThunk((function(){return t("line")})).map((function(e){return e.position})).fold((function(){return[]}),(function(t){return W(e,(function(e){return e.position===t}))}))}(r);return i.length>0?F.some({elem:e,toolbars:i}):F.none()}),e)},Qk=function(e,t){var n={},r=[],o=[],i={},a={},u=function(e,u){var s=At(Et("ContextForm",ig,u));n[e]=s,s.launch.map((function(n){i["form:"+e]=w(w({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){t(s)}})})),"editor"===s.scope?o.push(s):r.push(s),a[e]=s},s=function(e,t){var n;(n=t,Et("ContextToolbar",ag,n)).each((function(n){"editor"===t.scope?o.push(n):r.push(n),a[e]=n}))},c=we(e);return j(c,(function(t){var n=e[t];"contextform"===n.type?u(t,n):"contexttoolbar"===n.type&&s(t,n)})),{forms:n,inNodeScope:r,inEditorScope:o,lookupTable:a,formNavigators:i}},Zk=ci("forward-slide"),eT=ci("backward-slide"),tT=ci("change-slide-event"),nT="tox-pop--resizing",rT=function(e,t,n){var r=function(e,r,i,a){var u=t.shared.providers.translate(e.title);if("separator"===e.type)return F.some({type:"separator",text:u});if("submenu"===e.type){var s=J(e.getStyleItems(),(function(e){return o(e,r,a)}));return 0===r&&s.length<=0?F.none():F.some({type:"nestedmenuitem",text:u,disabled:s.length<=0,getSubmenuItems:function(){return J(e.getStyleItems(),(function(e){return o(e,r,a)}))}})}return F.some(w({type:"togglemenuitem",text:u,icon:e.icon,active:e.isSelected(a),disabled:i,onAction:n.onAction(e)},e.getStylePreview().fold((function(){return{}}),(function(e){return{meta:{style:e}}}))))},o=function(e,t,o){var i="formatter"===e.type&&n.isInvalid(e);return 0===t?i?[]:r(e,t,!1,o).toArray():r(e,t,i,o).toArray()},i=function(e){var t=n.getCurrentValue(),r=n.shouldHide?0:1;return J(e,(function(e){return o(e,r,t)}))};return{validateItems:i,getFetch:function(e,t){return function(n,r){var o=t(),a=i(o);r(QS(a,lg.CLOSE_ON_EXECUTE,e,!1))}}}},oT=function(e,t,n){var r=n.dataset,o="basic"===r.type?function(){return $(r.data,(function(e){return HA(e,n.isSelectedFor,n.getPreviewFor)}))}:r.getData;return{items:rT(0,t,n),getStyleItems:o}},iT=function(e,t,n){var r=oT(0,t,n),o=r.items,i=r.getStyleItems;return qS({text:n.icon.isSome()?F.none():F.some(""),icon:n.icon,tooltip:F.from(n.tooltip),role:F.none(),fetch:o.getFetch(t,i),onSetup:function(t){var r=function(){var e=t.getComponent();e.getSystem().isConnected()&&n.updateText(e)};return r(),e.on("NodeChange",r),function(){e.off("NodeChange",r)}},getApi:function(e){return{getComponent:h(e)}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};(LE=RE||(RE={}))[LE.SemiColon=0]="SemiColon",LE[LE.Space=1]="Space";var aT,uT,sT,cT,lT,fT,dT=function(e,t,n,r){return{type:"basic",data:function(e){return $(e,(function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{title:t,format:n}}))}(function(e,t){return t===RE.SemiColon?e.replace(/;$/,"").split(";"):e.split(" ")}(e.getParam(t,n,"string"),r))}},pT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],hT=function(e){var t={type:"basic",data:pT};return{tooltip:"Align",icon:F.some("align-left"),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:F.none,getPreviewFor:function(e){return function(){return F.none()}},onAction:function(t){return function(){return X(pT,(function(e){return e.format===t.format})).each((function(t){return e.execCommand(t.command)}))}},updateText:function(t){var n=X(pT,(function(t){return e.formatter.match(t.format)})).fold((function(){return"left"}),(function(e){return e.title.toLowerCase()}));Qr(t,WS,{icon:"align-"+n})},dataset:t,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}},mT=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],gT=function(e){var t=e.split(/\s*,\s*/);return $(t,(function(e){return e.replace(/^['"]+|['"]+$/g,"")}))},vT=function(e){var t=function(){var t=function(e){return e?gT(e)[0]:""},r=e.queryCommandValue("FontName"),o=n.data,i=r?r.toLowerCase():"";return{matchOpt:X(o,(function(e){var n=e.format;return n.toLowerCase()===i||t(n).toLowerCase()===t(i).toLowerCase()})).orThunk((function(){return function(e){var t;return 0===e.indexOf("-apple-system")&&(t=gT(e.toLowerCase()),Q(mT,(function(e){return t.indexOf(e.toLowerCase())>-1})))}(i)?F.from({title:"System Font",format:i}):F.none()})),font:r}},n=dT(e,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",RE.SemiColon);return{tooltip:"Fonts",icon:F.none(),isSelectedFor:function(e){return function(t){return t.exists((function(t){return t.format===e}))}},getCurrentValue:function(){return t().matchOpt},getPreviewFor:function(e){return function(){return F.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}})}},onAction:function(t){return function(){e.undoManager.transact((function(){e.focus(),e.execCommand("FontName",!1,t.format)}))}},updateText:function(e){var n=t(),r=n.matchOpt,o=n.font,i=r.fold((function(){return o}),(function(e){return e.title}));Qr(e,US,{text:i})},dataset:n,shouldHide:!1,isInvalid:b}},yT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},bT={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},CT=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":Be(bT,e).getOr(e)},xT=function(e){var t=function(){var t=F.none(),n=r.data,o=e.queryCommandValue("FontSize");if(o)for(var i=function(e){var r=CT(o,e),i=function(e){return Be(yT,e).getOr("")}(r);t=X(n,(function(e){return e.format===o||e.format===r||e.format===i}))},a=3;t.isNone()&&a>=0;a--)i(a);return{matchOpt:t,size:o}},n=h(F.none),r=dT(e,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",RE.Space);return{tooltip:"Font sizes",icon:F.none(),isSelectedFor:function(e){return function(t){return t.exists((function(t){return t.format===e}))}},getPreviewFor:n,getCurrentValue:function(){return t().matchOpt},onAction:function(t){return function(){e.undoManager.transact((function(){e.focus(),e.execCommand("FontSize",!1,t.format)}))}},updateText:function(e){var n=t(),r=n.matchOpt,o=n.size,i=r.fold((function(){return o}),(function(e){return e.title}));Qr(e,US,{text:i})},dataset:r,shouldHide:!1,isInvalid:b}},wT=function(e,t){var n=t(),r=$(n,(function(e){return e.format}));return F.from(e.formatter.closest(r)).bind((function(e){return X(n,(function(t){return t.format===e}))})).orThunk((function(){return ed(e.formatter.match("p"),{title:"Paragraph",format:"p"})}))},_T=function(e){var t=dn(F.none()),n=function(){return t.get().each(e)};return{clear:function(){n(),t.set(F.none())},isSet:function(){return t.get().isSome()},set:function(e){n(),t.set(F.some(e))}}},ST=function(){return _T((function(e){return e.destroy()}))},ET=function(){return _T((function(e){return e.unbind()}))},AT=function(e,t){return function(n){var r=ET(),o=function(){n.setActive(e.formatter.match(t));var o=e.formatter.formatChanged(t,n.setActive);r.set(o)};return e.initialized?o():e.on("init",o),r.clear}},DT=function(e){return function(t){return function(){e.undoManager.transact((function(){e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))}}},kT=function(e){var t=dT(e,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",RE.SemiColon);return{tooltip:"Blocks",icon:F.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:F.none,getPreviewFor:function(t){return function(){var n=e.formatter.get(t);return F.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))})}},onAction:DT(e),updateText:function(n){var r=wT(e,(function(){return t.data})).fold((function(){return"Paragraph"}),(function(e){return e.title}));Qr(n,US,{text:r})},dataset:t,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}},TT=function(e,t){return{tooltip:"Formats",icon:F.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:F.none,getPreviewFor:function(t){return function(){var n=e.formatter.get(t);return void 0!==n?F.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):F.none()}},onAction:DT(e),updateText:function(t){var n=function(e){var t=e.items;return void 0!==t&&t.length>0?J(t,n):[{title:e.title,format:e.format}]},r=J(VA(e),n),o=wT(e,(function(){return r})).fold((function(){return"Paragraph"}),(function(e){return e.title}));Qr(t,US,{text:o})},shouldHide:e.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!e.formatter.canApply(t.format)},dataset:t}},OT=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],BT=function(e,t){return function(n,r,o){var i=e(n).mapError((function(e){return kt(e)})).getOrDie();return t(i,r,o)}},NT={button:BT(Km,(function(e,t){return n=e,r=t.backstage.shared.providers,Hk(n,r,[]);var n,r})),togglebutton:BT(Qm,(function(e,t){return n=e,r=t.backstage.shared.providers,$k(n,r,[]);var n,r})),menubutton:BT(wk,(function(e,t){return eE(e,"tox-tbtn",t.backstage,F.none())})),splitbutton:BT((function(e){return Et("SplitButton",_k,e)}),(function(e,t){return n=e,r=t.backstage.shared,i=ci("channel-update-split-dropdown-display"),a=function(e){return{isDisabled:function(){return Cv.isDisabled(e)},setDisabled:function(t){return Cv.set(e,t)},setIconFill:function(t,n){nu(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((function(e){Qo(e,"fill",n)}))},setIconStroke:function(t,n){nu(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((function(e){Qo(e,"stroke",n)}))},setActive:function(t){e.getSystem().isConnected()&&(Qo(e.element,"aria-pressed",t),nu(e.element,"span").each((function(n){e.getSystem().getByDom(n).each((function(e){return Fh.set(e,t)}))})))},isActive:function(){return nu(e.element,"span").exists((function(t){return!!e.getSystem().isConnected()&&e.getSystem().getByDom(t).exists(Fh.isOn)}))}}},u=dn(d),s={getApi:a,onSetup:n.onSetup},Nk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:w({"aria-pressed":!1},Pk(n.tooltip,r.providers))},onExecute:function(e){n.onAction(a(e))},onItemExecute:function(e,t,n){},splitDropdownBehaviours:ls([ty(r.providers.isDisabled),Qv(),gh("split-dropdown-events",[ao(Ik,xh.focus),oy(s,u),iy(s,u)]),vx.config({})]),eventOrder:(o={},o[Hr()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:jk(a,n,r.providers),parts:{menu:Dg(0,n.columns,n.presets)},components:[Nk.parts.button(zk(n.icon,n.text,F.none(),F.some(i),F.some([Fh.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),Nk.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Cm("chevron-down",r.providers.icons)},buttonBehaviours:ls([ty(r.providers.isDisabled),Qv()])}),Nk.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]});var n,r,o,i,a,u,s})),grouptoolbarbutton:BT((function(e){return Et("GroupToolbarButton",bk,e)}),(function(e,t,n){var r,o=n.ui.registry.getAll().buttons,i=((r={})[Ks]=t.backstage.shared.header.isPositionedAtTop()?Ts.TopToBottom:Ts.BottomToTop,r);switch(Mv(n)){case sg.floating:return function(e,t,n,r){var o=t.shared;return RD.sketch({lazySink:o.getSink,fetch:function(){return IC((function(t){t($(n(e.items),pk))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:zk(e.icon,e.text,e.tooltip,F.none(),F.none(),o.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r}}}})}(e,t.backstage,(function(e){return IT(n,{buttons:o,toolbar:e,allowToolbarGroups:!1},t,F.none())}),i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})),styleSelectButton:function(e,t){return function(e,t){var n=w({type:"advanced"},t.styleselect);return iT(e,t,TT(e,n))}(e,t.backstage)},fontsizeSelectButton:function(e,t){return function(e,t){return iT(e,t,xT(e))}(e,t.backstage)},fontSelectButton:function(e,t){return function(e,t){return iT(e,t,vT(e))}(e,t.backstage)},formatButton:function(e,t){return function(e,t){return iT(e,t,kT(e))}(e,t.backstage)},alignMenuButton:function(e,t){return function(e,t){return iT(e,t,hT(e))}(e,t.backstage)}},FT={styleselect:NT.styleSelectButton,fontsizeselect:NT.fontsizeSelectButton,fontselect:NT.fontSelectButton,formatselect:NT.formatButton,align:NT.alignMenuButton},MT=function(e){var t,n=e.toolbar,o=e.buttons;return!1===n?[]:void 0===n||!0===n?function(e){var t=$(OT,(function(t){var n=W(t.items,(function(t){return Ne(e,t)||Ne(FT,t)}));return{name:t.name,items:n}}));return W(t,(function(e){return e.items.length>0}))}(o):r(n)?(t=n.split("|"),$(t,(function(e){return{items:e.trim().split(" ")}}))):function(e){return f(e,(function(e){return Ne(e,"name")&&Ne(e,"items")}))}(n)?n:[]},PT=function(e,t,n,r,o,i){return Be(t,n.toLowerCase()).orThunk((function(){return i.bind((function(e){return ae(e,(function(e){return Be(t,e+n.toLowerCase())}))}))})).fold((function(){return Be(FT,n.toLowerCase()).map((function(t){return t(e,o)})).orThunk((function(){return F.none()}))}),(function(t){return"grouptoolbarbutton"!==t.type||r?function(e,t,n){return Be(NT,e.type).fold((function(){return F.none()}),(function(r){return F.some(r(e,t,n))}))}(t,o,e):F.none()}))},IT=function(e,t,n,r){var o=MT(t),i=$(o,(function(o){var i=J(o.items,(function(o){return 0===o.trim().length?[]:PT(e,t.buttons,o,t.allowToolbarGroups,n,r).toArray()}));return{title:F.from(e.translate(o.name)),items:i}}));return W(i,(function(e){return e.items.length>0}))},RT={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},LT={maxHeightFunction:Hs(),maxWidthFunction:yD()},zT={onLtr:function(){return[Xu,Ku,qu,Uu,Gu,Wu,hm,mm,dm,lm,pm,fm]},onRtl:function(){return[Xu,Ku,Gu,Wu,qu,Uu,hm,mm,pm,fm,dm,lm]}},VT={onLtr:function(){return[Ku,Uu,Wu,qu,Gu,Xu,hm,mm,dm,lm,pm,fm]},onRtl:function(){return[Ku,Wu,Uu,Gu,qu,Xu,hm,mm,pm,fm,dm,lm]}},HT=function(e,t,n,r){var o,i,a=Gn().deviceType.isTouch,u=xa((o={sink:n,onEscape:function(){return e.focus(),F.some(!0)}},i=dn([]),om.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(e){i.set([]),om.getContent(e).each((function(e){ua(e.element,"visibility")})),ji(e.element,nT),ua(e.element,"width")},inlineBehaviours:ls([gh("context-toolbar-events",[ho(wr(),(function(e,t){ji(e.element,nT),ua(e.element,"width")})),ao(tT,(function(e,t){var n=e.element;ua(n,"width");var r=Fa(n);om.setContent(e,t.event.contents),Hi(n,nT);var o=Fa(n);Zi(n,"width",r+"px"),om.getContent(e).each((function(e){t.event.focus.bind((function(e){return ys(e),Cs(n)})).orThunk((function(){return lh.focusIn(e),bs(Io(n))}))})),gm.setTimeout((function(){Zi(e.element,"width",o+"px")}),0)})),ao(Zk,(function(e,t){om.getContent(e).each((function(t){i.set(i.get().concat([{bar:t,focus:bs(Io(e.element))}]))})),Qr(e,tT,{contents:t.event.forwardContents,focus:F.none()})})),ao(eT,(function(e,t){oe(i.get()).each((function(t){i.set(i.get().slice(0,i.get().length-1)),Qr(e,tT,{contents:wa(t.bar),focus:t.focus})}))}))]),lh.config({mode:"special",onEscape:function(e){return oe(i.get()).fold((function(){return o.onEscape()}),(function(t){return Jr(e,eT),F.some(!0)}))}})]),lazySink:function(){return ce.value(o.sink)}}))),s=function(){return Xk(e,r.backstage.shared)},c=function(){if(a()&&r.backstage.isContextMenuOpen())return!0;var t,n,o,i,u,c,l=(t=m.get().filter((function(e){return Xi(hn.fromDom(e))})).map((function(e){return e.getBoundingClientRect()})).getOrThunk((function(){return e.selection.getRng().getBoundingClientRect()})),n=e.inline?La().top:Ga(hn.fromDom(e.getBody())).y,{y:t.top+n,bottom:t.bottom+n}),f=s();return o=l.y,i=l.bottom,u=f.y,c=f.bottom,!(Math.max(o,u)<=Math.min(i,c))},l=function(){h.set(F.none()),om.hide(u)},f=function(){om.hide(u)},p=function(){h.get().each((function(e){var t=u.element;ua(t,"display"),c()?Zi(t,"display","none"):ol.positionWithinBounds(n,e,u,F.some(s()))}))},h=dn(F.none()),m=dn(F.none()),g=dn(null),v=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:ls([lh.config({mode:"acyclic"}),gh("pop-dialog-wrap-events",[mo((function(t){e.shortcuts.add("ctrl+F9","focus statusbar",(function(){return lh.focusIn(t)}))})),go((function(t){e.shortcuts.remove("ctrl+F9")}))])])}},y=ze((function(){return Qk(t,(function(e){var t=b([e]);Qr(u,Zk,{forwardContents:v(t)})}))})),b=function(t){var n=e.ui.registry.getAll().buttons,o=y(),i=w(w({},n),o.formNavigators),a=Mv(e)===sg.scrolling?sg.scrolling:sg.default,u=Y($(t,(function(t){return"contexttoolbar"===t.type?function(t,n){return IT(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},r,F.some(["form:"]))}(i,t):function(e,t){return Gk(e,t)}(t,r.backstage.shared.providers)})));return yk({type:a,uid:ci("context-toolbar"),initGroups:u,onEscape:F.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};e.on("contexttoolbar-show",(function(t){var n=y();Be(n.lookupTable,t.toolbarKey).each((function(n){x([n],t.target===e?F.none():F.some(t)),om.getContent(u).each(lh.focusIn)}))}));var C=function(e,t){var n="node"===e?r.backstage.shared.anchors.node(t):r.backstage.shared.anchors.cursor();return Re(n,function(e,t){return"line"===e?{bubble:Ws(12,0,RT),layouts:{onLtr:function(){return[Yu]},onRtl:function(){return[Ju]}},overrides:LT}:{bubble:Ws(0,12,RT),layouts:t?VT:zT,overrides:LT}}(e,a()))},x=function(e,t){if(S(),!a()||!r.backstage.isContextMenuOpen()){var n=b(e),o=t.map(hn.fromDom),i=C(e[0].position,o);h.set(F.some(i)),m.set(t);var l=u.element;ua(l,"display"),om.showWithinBounds(u,i,v(n),(function(){return F.some(s())})),c()&&Zi(l,"display","none")}},_=function(){e.hasFocus()&&function(e,t){var n,r=hn.fromDom(t.getBody()),o=function(e){return Yn(e,r)},i=hn.fromDom(t.selection.getNode());return o(n=i)||Qn(r,n)?Yk(i,e.inNodeScope,e.inEditorScope).orThunk((function(){return Jk(o,i,e)})):F.none()}(y(),e).fold(l,(function(e){x(e.toolbars,F.some(e.elem.dom))}))},S=function(){var e=g.get();null!==e&&(gm.clearTimeout(e),g.set(null))},E=function(){S(),g.set(gm.setEditorTimeout(e,_,0))};e.on("init",(function(){e.on(bD,f),e.on("ScrollContent ScrollWindow longpress",p),e.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){E()})),e.on("focusout",(function(t){gm.setEditorTimeout(e,(function(){Cs(n.element).isNone()&&Cs(u.element).isNone()&&l()}),0)})),e.on("SwitchMode",(function(){e.mode.isReadOnly()&&l()})),e.on("AfterProgressState",(function(t){t.state?l():e.hasFocus()&&E()})),e.on("NodeChange",(function(e){Cs(u.element).fold(E,d)}))}))},$T=Wf,jT=kf,UT=h([tn("shell",!1),Vt("makeItem"),tn("setupItem",d),Yl("listBehaviours",[mh])]),WT=Ef({name:"items",overrides:function(){return{behaviours:ls([mh.config({})])}}}),qT=h([WT]),GT=h("CustomList"),XT=Qf({name:GT(),configFields:UT(),partFields:qT(),factory:function(e,t,n,r){var o=e.shell?{behaviours:[mh.config({})],components:[]}:{behaviours:[],components:t},i=function(t){return e.shell?F.some(t):Rf(t,e,"items")};return{uid:e.uid,dom:e.dom,components:o.components,behaviours:Kl(e.listBehaviours,o.behaviours),apis:{setItems:function(t,n){i(t).fold((function(){throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(r){var o=mh.contents(r),i=n.length,a=i-o.length,u=a>0?V(a,(function(){return e.makeItem()})):[],s=o.slice(i);j(s,(function(e){return mh.remove(r,e)})),j(u,(function(e){return mh.append(r,e)}));var c=mh.contents(r);j(c,(function(r,o){e.setupItem(t,r,n[o],o)}))}))}}}},apis:{setItems:function(e,t,n){e.setItems(t,n)}}}),KT=d,YT=b,JT=h([]),QT=Object.freeze({__proto__:null,setup:KT,isDocked:YT,getBehaviours:JT}),ZT=function(e){return(oa(e,"position").is("fixed")?F.none():Oo(e)).orThunk((function(){var t=hn.fromTag("span");return To(e).bind((function(e){Uo(e,t);var n=Oo(t);return Go(t),n}))}))},eO=function(e){return ZT(e).map(Oa).getOrThunk((function(){return ka(0,0)}))},tO=Me([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),nO=function(e,t){var n=e.element;Hi(n,t.transitionClass),ji(n,t.fadeOutClass),Hi(n,t.fadeInClass),t.onShow(e)},rO=function(e,t){var n=e.element;Hi(n,t.transitionClass),ji(n,t.fadeInClass),Hi(n,t.fadeOutClass),t.onHide(e)},oO=function(e,t,n){return Q(e,(function(e){switch(e){case"bottom":return function(e,t){return e.bottom<=t.bottom}(t,n);case"top":return function(e,t){return e.y>=t.y}(t,n)}}))},iO=function(e,t){return t.getInitialPosition().map((function(t){return Wa(t.bounds.x,t.bounds.y,Fa(e),Ea(e))}))},aO=function(e,t,n){return n.getInitialPosition().bind((function(r){switch(n.setInitialPosition(F.none()),r.position){case"static":return F.some(tO.static());case"absolute":var o=ZT(e).map(qa).getOrThunk((function(){return qa(Ki())}));return F.some(tO.absolute(ws("absolute",Be(r.style,"left").map((function(e){return t.x-o.x})),Be(r.style,"top").map((function(e){return t.y-o.y})),Be(r.style,"right").map((function(e){return o.right-t.right})),Be(r.style,"bottom").map((function(e){return o.bottom-t.bottom})))));default:return F.none()}}))},uO=function(e,t,n){var r=qa(e);if(oO(n.getModes(),r,t))return F.none();!function(e,t,n){n.setInitialPosition(F.some({style:ia(e),position:na(e,"position")||"static",bounds:t}))}(e,r,n);var o=Xa(),i=r.x-o.x,a=t.y-o.y,u=o.bottom-t.bottom,s=r.y<=t.y;return F.some(tO.fixed(ws("fixed",F.some(i),s?F.some(a):F.none(),F.none(),s?F.none():F.some(u))))},sO=function(e,t,n){var r=e.element;return oa(r,"position").is("fixed")?function(e,t,n){return iO(e,n).filter((function(e){return oO(n.getModes(),e,t)})).bind((function(t){return aO(e,t,n)}))}(r,t,n):uO(r,t,n)},cO=function(e,t){j(["left","right","top","bottom","position"],(function(t){return ua(e.element,t)})),t.onUndocked(e)},lO=function(e,t,n){_s(e.element,n),("fixed"===n.position?t.onDocked:t.onUndocked)(e)},fO=function(e,t,n,r,o){void 0===o&&(o=!1),t.contextual.each((function(t){t.lazyContext(e).each((function(i){var a=function(e,t){return e.y<t.bottom&&e.bottom>t.y}(i,r);a!==n.isVisible()&&(n.setVisible(a),o&&!a?(Wi(e.element,[t.fadeOutClass]),t.onHide(e)):(a?nO:rO)(e,t))}))}))},dO=function(e,t,n){var r=e.element;n.setDocked(!1),function(e,t){var n=e.element;return iO(n,t).bind((function(e){return aO(n,e,t)}))}(e,n).each((function(n){n.fold((function(){return cO(e,t)}),(function(n){return lO(e,t,n)}),d)})),n.setVisible(!0),t.contextual.each((function(t){qi(r,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),pO(e,t,n)},pO=function(e,t,n){e.getSystem().isConnected()&&function(e,t,n){var r=t.lazyViewport(e),o=n.isDocked();o&&fO(e,t,n,r),sO(e,r,n).each((function(i){n.setDocked(!o),i.fold((function(){return cO(e,t)}),(function(n){return lO(e,t,n)}),(function(o){fO(e,t,n,r,!0),lO(e,t,o)}))}))}(e,t,n)},hO=function(e,t,n){n.isDocked()&&dO(e,t,n)},mO=Object.freeze({__proto__:null,refresh:pO,reset:hO,isDocked:function(e,t,n){return n.isDocked()},getModes:function(e,t,n){return n.getModes()},setModes:function(e,t,n,r){return n.setModes(r)}}),gO=Object.freeze({__proto__:null,events:function(e,t){return ro([ho(wr(),(function(n,r){e.contextual.each((function(e){Ui(n.element,e.transitionClass)&&(qi(n.element,[e.transitionClass,e.fadeInClass]),(t.isVisible()?e.onShown:e.onHidden)(n));r.stop()}))})),ao(zr(),(function(n,r){pO(n,e,t)})),ao(Vr(),(function(n,r){hO(n,e,t)}))])}}),vO=[en("contextual",[jt("fadeInClass"),jt("fadeOutClass"),jt("transitionClass"),Wt("lazyContext"),Cu("onShow"),Cu("onShown"),Cu("onHide"),Cu("onHidden")]),sn("lazyViewport",Xa),cn("modes",["top","bottom"],Mt),Cu("onDocked"),Cu("onUndocked")],yO=Object.freeze({__proto__:null,init:function(e){var t=dn(!1),n=dn(!0),r=dn(F.none()),o=dn(e.modes);return Ai({isDocked:t.get,setDocked:t.set,getInitialPosition:r.get,setInitialPosition:r.set,isVisible:n.get,setVisible:n.set,getModes:o.get,setModes:o.set,readState:function(){return"docked:  "+t.get()+", visible: "+n.get()+", modes: "+o.get().join(",")}})}}),bO=ds({fields:vO,name:"docking",active:gO,apis:mO,state:yO}),CO={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},xO="tox-tinymce--toolbar-sticky-on",wO="tox-tinymce--toolbar-sticky-off",_O=function(e){var t=e.element;To(t).each((function(n){var r,o="padding-"+bO.getModes(e)[0];if(bO.isDocked(e)){var i=Fa(n);Zi(t,"width",i+"px"),Zi(n,o,Aa(r=t)+(parseInt(na(r,"margin-top"),10)||0)+(parseInt(na(r,"margin-bottom"),10)||0)+"px")}else ua(t,"width"),ua(n,o)}))},SO=function(e,t){t?(ji(e,CO.fadeOutClass),Wi(e,[CO.transitionClass,CO.fadeInClass])):(ji(e,CO.fadeInClass),Wi(e,[CO.fadeOutClass,CO.transitionClass]))},EO=function(e,t){var n=hn.fromDom(e.getContainer());t?(Hi(n,xO),ji(n,wO)):(Hi(n,wO),ji(n,xO))},AO=function(e,t){var n,r=dn(F.none()),o=t.getSink,i=function(e){o().each((function(t){return e(t.element)}))},a=function(t){e.inline||_O(t),EO(e,bO.isDocked(t)),t.getSystem().broadcastOn([kl()],{}),o().each((function(e){return e.getSystem().broadcastOn([kl()],{})}))},u=e.inline?[]:[gs.config({channels:(n={},n[fk()]={onReceive:_O},n)})];return S([xh.config({}),bO.config({contextual:w({lazyContext:function(t){var n,r,o=Aa(t.element),i=e.inline?e.getContentAreaContainer():e.getContainer(),a=qa(hn.fromDom(i)),u=a.height-o,s=a.y+(n=t,r="top",L(bO.getModes(n),r)?0:o);return F.some(Wa(a.x,s,a.width,u))},onShow:function(){i((function(e){return SO(e,!0)}))},onShown:function(e){i((function(e){return qi(e,[CO.transitionClass,CO.fadeInClass])})),r.get().each((function(t){var n,o,i;n=e.element,i=Eo(o=t),bs(i).filter((function(e){return!Yn(o,e)})).filter((function(e){return Yn(e,hn.fromDom(i.dom.body))||Qn(n,e)})).each((function(){return ys(o)})),r.set(F.none())}))},onHide:function(e){r.set(function(e,t){return Cs(e).orThunk((function(){return t().toOptional().bind((function(e){return Cs(e.element)}))}))}(e.element,o)),i((function(e){return SO(e,!1)}))},onHidden:function(){i((function(e){return qi(e,[CO.transitionClass])}))}},CO),modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a})],u)},DO=Object.freeze({__proto__:null,setup:function(e,t,n){e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(function(){n().each(bO.reset)})),e.on("ResizeWindow ResizeEditor",(function(){n().each(_O)})),e.on("SkinLoaded",(function(){n().each((function(e){bO.isDocked(e)?bO.reset(e):bO.refresh(e)}))})),e.on("FullscreenStateChanged",(function(){n().each(bO.reset)}))),e.on("AfterScrollIntoView",(function(e){n().each((function(t){bO.refresh(t);var n=t.element;op(n)&&function(e,t){var n=Eo(t),r=n.dom.defaultView.innerHeight,o=La(n),i=hn.fromDom(e.elm),a=Ga(i),u=Ea(i),s=a.y,c=s+u,l=Oa(t),f=Ea(t),d=l.top,p=d+f,h=Math.abs(d-o.top)<2,m=Math.abs(p-(o.top+r))<2;if(h&&s<p)za(o.left,s-f,n);else if(m&&c>d){var g=s-r+u+f;za(o.left,g,n)}}(e,n)}))})),e.on("PostRender",(function(){EO(e,!1)}))},isDocked:function(e){return e().map(bO.isDocked).getOr(!1)},getBehaviours:AO}),kO=Jf({factory:function(e,t){var n={focus:lh.focusIn,setMenus:function(e,n){var r=$(n,(function(e){var n={type:"menubutton",text:e.text,fetch:function(t){t(e.getItems())}},r=wk(n).mapError((function(e){return kt(e)})).getOrDie();return eE(r,"tox-mbtn",t.backstage,F.some("menuitem"))}));mh.set(e,r)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:ls([mh.config({}),gh("menubar-events",[mo((function(t){e.onSetup(t)})),ao(hr(),(function(e,t){nu(e.element,".tox-mbtn--active").each((function(n){ru(t.event.target,".tox-mbtn").each((function(t){Yn(n,t)||e.getSystem().getByDom(n).each((function(n){e.getSystem().getByDom(t).each((function(e){mx.expand(e),mx.close(n),xh.focus(e)}))}))}))}))})),ao(Wr(),(function(e,t){t.event.prevFocus.bind((function(t){return e.getSystem().getByDom(t).toOptional()})).each((function(n){t.event.newFocus.bind((function(t){return e.getSystem().getByDom(t).toOptional()})).each((function(e){mx.isOpen(n)&&(mx.expand(e),mx.close(n))}))}))}))]),lh.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return e.onEscape(t),F.some(!0)}}),aC.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Vt("dom"),Vt("uid"),Vt("onEscape"),Vt("backstage"),tn("onSetup",d)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),TO="container",OO=[Gl("slotBehaviours",[])],BO=function(e){return"<alloy.field."+e+">"},NO=function(e,t){var n,r=function(t){return Hf(e)},o=function(t,n){return function(r,o){return Rf(r,e,o).map((function(e){return t(e,o)})).getOr(n)}},i=function(e,t){return"true"!==Zo(e.element,"aria-hidden")},a=o(i,!1),u=o((function(e,t){if(i(e)){var n=e.element;Zi(n,"display","none"),Qo(n,"aria-hidden","true"),Qr(e,qr(),{name:t,visible:!1})}})),s=(n=u,function(e,t){j(t,(function(t){return n(e,t)}))}),c=o((function(e,t){if(!i(e)){var n=e.element;ua(n,"display"),ni(n,"aria-hidden"),Qr(e,qr(),{name:t,visible:!0})}})),l={getSlotNames:r,getSlot:function(t,n){return Rf(t,e,n)},isShowing:a,hideSlot:u,hideAllSlots:function(e){return s(e,r())},showSlot:c};return{uid:e.uid,dom:e.dom,components:t,behaviours:Xl(e.slotBehaviours),apis:l}},FO=Ee({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},(function(e){return Si(e)})),MO=w(w({},FO),{sketch:function(e){var t,n=(t=[],{slot:function(e,n){return t.push(e),Nf(TO,BO(e),n)},record:function(){return t}}),r=e(n),o=n.record(),i=$(o,(function(e){return _f({name:e,pname:BO(e)})}));return Gf(TO,OO,i,NO,r)}}),PO=lt([Qt("icon"),Qt("tooltip"),sn("onShow",d),sn("onHide",d),sn("onSetup",(function(){return d}))]),IO=function(e){return{element:function(){return e.element.dom}}},RO=function(e,t){var n=$(we(t),(function(e){var n=t[e],r=At(function(e){return Et("sidebar",PO,e)}(n));return{name:e,getApi:IO,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}}));return $(n,(function(t){var r=dn(d);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Yg([oy(t,r),iy(t,r),ao(qr(),(function(e,t){var r=t.event;X(n,(function(e){return e.name===r.name})).each((function(t){(r.visible?t.onShow:t.onHide)(t.getApi(e))}))}))])})}))},LO=function(e){return MO.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:RO(t,e),slotBehaviours:Yg([mo((function(e){return MO.hideAllSlots(e)}))])}}))},zO=function(e){return od.getCurrent(e).bind((function(e){return ik.isGrowing(e)||ik.hasGrown(e)?od.getCurrent(e).bind((function(e){return X(MO.getSlotNames(e),(function(t){return MO.isShowing(e,t)}))})):F.none()}))},VO=ci("FixSizeEvent"),HO=ci("AutoSizeEvent"),$O=function(e){var t=hn.fromHtml(e),n=Bo(t),r=function(e){var t=void 0!==e.dom.attributes?e.dom.attributes:[];return G(t,(function(e,t){var n;return"class"===t.name?e:w(w({},e),((n={})[t.name]=t.value,n))}),{})}(t),o=function(e){return Array.prototype.slice.call(e.dom.classList,0)}(t),i=0===n.length?{}:{innerHtml:Ko(t)};return w({tag:bo(t),classes:o,attributes:r},i)},jO=function(e){return{dom:{tag:"div",attributes:{"aria-label":e.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:$O('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:ls([lh.config({mode:"special",onTab:function(){return F.some(!0)},onShiftTab:function(){return F.some(!0)}}),xh.config({})])}},UO=function(e,t,n){var r=dn(!1),o=dn(F.none()),i=function(o){o!==r.get()&&(!function(e,t,n){var r=e.element;!0===t?(mh.set(e,[jO(n)]),ua(r,"display"),ni(r,"aria-hidden")):(mh.set(e,[]),Zi(r,"display","none"),Qo(r,"aria-hidden","true"))}(t(),o,n.providers),r.set(o),e.fire("AfterProgressState",{state:o}))};e.on("ProgressState",(function(t){if(o.get().each(gm.clearTimeout),l(t.time)){var n=gm.setEditorTimeout(e,(function(){return i(t.state)}),t.time);o.set(F.some(n))}else i(t.state),o.set(F.none())}))},WO=jT.optional({factory:kO,name:"menubar",schema:[Vt("backstage")]}),qO=jT.optional({factory:{sketch:function(e){return XT.sketch({uid:e.uid,dom:e.dom,listBehaviours:ls([lh.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return yk({type:e.type,uid:ci("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:function(){return e.onEscape(),F.some(!0)}})},setupItem:function(e,t,n,r){wD.setGroups(t,n)},shell:!0})}},name:"multiple-toolbar",schema:[Vt("dom"),Vt("onEscape")]}),GO=jT.optional({factory:{sketch:function(e){return function(e){return e.type===sg.sliding?vk:e.type===sg.floating?gk:yk}(e)({type:e.type,uid:e.uid,onEscape:function(){return e.onEscape(),F.some(!0)},cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[Vt("dom"),Vt("onEscape"),Vt("getSink")]}),XO=jT.optional({factory:{sketch:function(e){var t=e.editor,n=e.sticky?AO:JT;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:ls(n(t,e.sharedBackstage))}}},name:"header",schema:[Vt("dom")]}),KO=jT.optional({name:"socket",schema:[Vt("dom")]}),YO=jT.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ls([aC.config({}),xh.config({}),ik.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){od.getCurrent(e).each(MO.hideAllSlots),Jr(e,HO)},onGrown:function(e){Jr(e,HO)},onStartGrow:function(e){Qr(e,VO,{width:oa(e.element,"width").getOr("")})},onStartShrink:function(e){Qr(e,VO,{width:Fa(e.element)+"px"})}}),mh.config({}),od.config({find:function(e){var t=mh.contents(e);return re(t)}})])}],behaviours:ls([k_(0),gh("sidebar-sliding-events",[ao(VO,(function(e,t){Zi(e.element,"width",t.event.width)})),ao(HO,(function(e,t){ua(e.element,"width")}))])])}}},name:"sidebar",schema:[Vt("dom")]}),JO=jT.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ls([mh.config({})]),components:[]}}},name:"throbber",schema:[Vt("dom")]}),QO=Qf({name:"OuterContainer",factory:function(e,t,n){var r={getSocket:function(t){return $T.getPart(t,e,"socket")},setSidebar:function(t,n){$T.getPart(t,e,"sidebar").each((function(e){return function(e,t){od.getCurrent(e).each((function(e){return mh.set(e,[LO(t)])}))}(e,n)}))},toggleSidebar:function(t,n){$T.getPart(t,e,"sidebar").each((function(e){return function(e,t){od.getCurrent(e).each((function(e){od.getCurrent(e).each((function(n){ik.hasGrown(e)?MO.isShowing(n,t)?ik.shrink(e):(MO.hideAllSlots(n),MO.showSlot(n,t)):(MO.hideAllSlots(n),MO.showSlot(n,t),ik.grow(e))}))}))}(e,n)}))},whichSidebar:function(t){return $T.getPart(t,e,"sidebar").bind(zO).getOrNull()},getHeader:function(t){return $T.getPart(t,e,"header")},getToolbar:function(t){return $T.getPart(t,e,"toolbar")},setToolbar:function(t,n){$T.getPart(t,e,"toolbar").each((function(e){e.getApis().setGroups(e,n)}))},setToolbars:function(t,n){$T.getPart(t,e,"multiple-toolbar").each((function(e){XT.setItems(e,n)}))},refreshToolbar:function(t){$T.getPart(t,e,"toolbar").each((function(e){return e.getApis().refresh(e)}))},toggleToolbarDrawer:function(t){$T.getPart(t,e,"toolbar").each((function(e){var t,n;t=e.getApis().toggle,n=function(t){return t(e)},null!=t?F.some(n(t)):F.none()}))},isToolbarDrawerToggled:function(t){return $T.getPart(t,e,"toolbar").bind((function(e){return F.from(e.getApis().isOpen).map((function(t){return t(e)}))})).getOr(!1)},getThrobber:function(t){return $T.getPart(t,e,"throbber")},focusToolbar:function(t){$T.getPart(t,e,"toolbar").orThunk((function(){return $T.getPart(t,e,"multiple-toolbar")})).each((function(e){lh.focusIn(e)}))},setMenubar:function(t,n){$T.getPart(t,e,"menubar").each((function(e){kO.setMenus(e,n)}))},focusMenubar:function(t){$T.getPart(t,e,"menubar").each((function(e){kO.focus(e)}))}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},configFields:[Vt("dom"),Vt("behaviours")],partFields:[XO,WO,GO,qO,KO,YO,JO],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getHeader:function(e,t){return e.getHeader(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){var r=$(n,(function(e){return pk(e)}));e.setToolbar(t,r)},setToolbars:function(e,t,n){var r=$(n,(function(e){return $(e,pk)}));e.setToolbars(t,r)},refreshToolbar:function(e,t){return e.refreshToolbar(t)},toggleToolbarDrawer:function(e,t){e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:function(e,t){return e.isToolbarDrawerToggled(t)},getThrobber:function(e,t){return e.getThrobber(t)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),ZO={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},eB=function(e){return"string"==typeof e?e.split(" "):e},tB=function(e,t){var n=w(w({},ZO),t.menus),r=we(t.menus).length>0,o=void 0===t.menubar||!0===t.menubar?eB("file edit view insert format tools table help"):eB(!1===t.menubar?"":t.menubar),i=W(o,(function(e){return r&&t.menus.hasOwnProperty(e)&&t.menus[e].hasOwnProperty("items")||ZO.hasOwnProperty(e)})),a=$(i,(function(r){var o=n[r];return function(e,t,n){var r=function(e){return e.getParam("removed_menuitems","")}(n).split(/[ ,]/);return{text:e.title,getItems:function(){return J(e.items,(function(e){var n=e.toLowerCase();return 0===n.trim().length||z(r,(function(e){return e===n}))?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]}))}}}({title:o.title,items:eB(o.items)},t,e)}));return W(a,(function(e){return e.getItems().length>0&&z(e.getItems(),(function(e){return"separator"!==e.type}))}))},nB=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},rB=function(e,t,n){return new Rm((function(r,o){n.load(t,r,o),e.on("remove",(function(){return n.unload(t)}))}))},oB=function(e,t){return rB(e,t+"/skin.min.css",e.ui.styleSheetLoader)},iB=function(e,t){var n;return(n=hn.fromDom(e.getElement()),Lo(n).isSome())?rB(e,t+"/skin.shadowdom.min.css",iv.DOM.styleSheetLoader):Rm.resolve()},aB=function(e,t){var n=function(e){var t=e.getParam("skin"),n=e.getParam("skin_url");if(!1!==t){var r=t||"oxide";n=n?e.documentBaseURI.toAbsolute(n):xv.baseURL+"/skins/ui/"+r}return n}(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css"),!1===function(e){return!1===e.getParam("skin")}(t)&&r(n)?Rm.all([oB(t,n),iB(t,n)]).then(nB(t),function(e,t){return function(){return function(e,t){return e.fire("SkinLoadError",t)}(e,{message:t})}}(t,"Skin could not be loaded")):nB(t)()},uB=g(aB,!1),sB=g(aB,!0),cB=function(e,t,n,o){var i=t.outerContainer,a=n.toolbar,u=n.buttons;if(f(a,r)){var s=a.map((function(t){var r={toolbar:t,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return IT(e,r,{backstage:o},F.none())}));QO.setToolbars(i,s)}else QO.setToolbar(i,IT(e,n,{backstage:o},F.none()))},lB=Gn(),fB=lB.os.isiOS()&&lB.os.version.major<=12,dB=Object.freeze({__proto__:null,render:function(e,t,n,r,o){var i=dn(0),a=t.outerContainer;uB(e);var u,s,c=hn.fromDom(o.targetNode),l=Ro(Io(c));u=c,s=t.mothership,ml(u,s,$o),hl(l,t.uiMothership),e.on("PostRender",(function(){cB(e,t,n,r),i.set(e.getWin().innerWidth),QO.setMenubar(a,tB(e,n)),QO.setSidebar(a,n.sidebar),function(e,t){var n=e.dom,r=e.getWin(),o=e.getDoc().documentElement,i=dn(ka(r.innerWidth,r.innerHeight)),a=dn(ka(o.offsetWidth,o.offsetHeight)),u=function(){var t=i.get();t.left===r.innerWidth&&t.top===r.innerHeight||(i.set(ka(r.innerWidth,r.innerHeight)),qy(e))},s=function(){var t=e.getDoc().documentElement,n=a.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(a.set(ka(t.offsetWidth,t.offsetHeight)),qy(e))},c=function(t){return function(e,t){return e.fire("ScrollContent",t)}(e,t)};n.bind(r,"resize",u),n.bind(r,"scroll",c);var l=Ib(hn.fromDom(e.getBody()),"load",s),f=t.uiMothership.element;e.on("hide",(function(){Zi(f,"display","none")})),e.on("show",(function(){ua(f,"display")})),e.on("NodeChange",s),e.on("remove",(function(){l.unbind(),n.unbind(r,"resize",u),n.unbind(r,"scroll",c),r=null}))}(e,t)}));var f,d,p,h=QO.getSocket(a).getOrDie("Could not find expected socket element");if(fB){ea(h.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var m=(f=function(){e.fire("ScrollContent")},d=20,p=null,{cancel:function(){null!==p&&(clearTimeout(p),p=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===p&&(p=setTimeout((function(){f.apply(null,e),p=null}),d))}}),g=Pb(h.element,"scroll",m.throttle);e.on("remove",g.unbind)}Jv(e,t),e.addCommand("ToggleSidebar",(function(t,n){QO.toggleSidebar(a,n),e.fire("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(function(){return QO.whichSidebar(a)}));var v=Mv(e);v!==sg.sliding&&v!==sg.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=e.getWin().innerWidth;n!==i.get()&&(QO.refreshToolbar(t.outerContainer),i.set(n))}));var y={enable:function(){Yv(t,!1)},disable:function(){Yv(t,!0)},isDisabled:function(){return Cv.isDisabled(a)}};return{iframeContainer:h.element.dom,editorContainer:a.element.dom,api:y}}}),pB=function(e){return/^[0-9\.]+(|px)$/i.test(""+e)?F.some(parseInt(""+e,10)):F.none()},hB=function(e){return l(e)?e+"px":e},mB=function(e,t,n){var r=t.filter((function(t){return e<t})),o=n.filter((function(t){return e>t}));return r.or(o).getOr(e)},gB=function(e){return function(e){var t=wv(e),n=Ev(e),r=Dv(e);return pB(t).map((function(e){return mB(e,n,r)}))}(e).getOr(wv(e))},vB=function(e){var t=_v(e),n=Sv(e),r=Av(e);return pB(t).map((function(e){return mB(e,n,r)}))},yB=function(e,t,n,r,o){var i=n.uiMothership,a=n.outerContainer,u=iv.DOM,s=Vv(e),c=jv(e),l=Av(e).or(vB(e)),f=r.shared.header,d=f.isPositionedAtTop,p=Mv(e),h=p===sg.sliding||p===sg.floating,m=dn(!1),g=function(){return m.get()&&!e.removed},v=function(e){return h?e.fold((function(){return 0}),(function(e){return e.components().length>1?Ea(e.components()[1].element):0})):0},y=function(){i.broadcastOn([kl()],{})},b=function(e){if(void 0===e&&(e=!1),g()){var n,r,i,u,f;if(s||(n=l.getOrThunk((function(){var e=pB(na(Ki(),"margin-left")).getOr(0);return Fa(Ki())-Oa(t).left+e})),Zi(o.get().element,"max-width",n+"px")),h&&QO.refreshToolbar(a),s||(r=QO.getToolbar(a),i=v(r),u=qa(t),f=d()?Math.max(u.y-Ea(o.get().element)+i,0):u.bottom,ea(a.element,{position:"absolute",top:Math.round(f)+"px",left:Math.round(u.x)+"px"})),c){var p=o.get();e?bO.reset(p):bO.refresh(p)}y()}},C=function(n){if(void 0===n&&(n=!0),!s&&c&&g()){var r=f.getDockingMode(),i=function(n){switch(Rv(e)){case Nv.auto:var r=QO.getToolbar(a),o=v(r),i=Ea(n.element)-o,u=qa(t);if(u.y>i)return"top";var s=Do(t),c=Math.max(s.dom.scrollHeight,Ea(s));return u.bottom<c-i||Xa().bottom<u.bottom-i?"bottom":"top";case Nv.bottom:return"bottom";case Nv.top:default:return"top"}}(o.get());i!==r&&(!function(e){var t=o.get();bO.setModes(t,[e]),f.setDockingMode(e);var n=d()?Ts.TopToBottom:Ts.BottomToTop;Qo(t.element,Ks,n)}(i),n&&b(!0))}};return{isVisible:g,isPositionedAtTop:d,show:function(){m.set(!0),Zi(a.element,"display","flex"),u.addClass(e.getBody(),"mce-edit-focus"),ua(i.element,"display"),C(!1),b()},hide:function(){m.set(!1),n.outerContainer&&(Zi(a.element,"display","none"),u.removeClass(e.getBody(),"mce-edit-focus")),Zi(i.element,"display","none")},update:b,updateMode:C,repositionPopups:y}},bB=function(e,t){var n=qa(e);return{pos:t?n.y:n.bottom,bounds:n}},CB=Object.freeze({__proto__:null,render:function(e,t,n,r,o){var i=t.mothership,a=t.uiMothership,u=t.outerContainer,s=dn(null),c=hn.fromDom(o.targetNode),l=yB(e,c,t,r,s),f=function(e){return e.getParam("toolbar_persist",!1,"boolean")}(e);sB(e);var d=function(){if(s.get())l.show();else{s.set(QO.getHeader(u).getOrDie());var o=Hv(e);hl(o,i),hl(o,a),cB(e,t,n,r),QO.setMenubar(u,tB(e,n)),l.show(),function(e,t,n,r){var o=dn(bB(t,n.isPositionedAtTop())),i=function(r){var i=bB(t,n.isPositionedAtTop()),a=i.pos,u=i.bounds,s=o.get(),c=s.pos,l=s.bounds,f=u.height!==l.height||u.width!==l.width;o.set({pos:a,bounds:u}),f&&qy(e,r),n.isVisible()&&(c!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};r||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),e.on("NodeChange keydown",(function(e){gm.requestAnimationFrame((function(){return i(e)}))})),e.on("ScrollWindow",(function(){return n.updateMode()}));var a=ET();a.set(Ib(hn.fromDom(e.getBody()),"load",i)),e.on("remove",(function(){a.clear()}))}(e,c,l,f),e.nodeChanged()}},p=function(){return gm.setEditorTimeout(e,d,0)};e.on("show",d),e.on("hide",l.hide),f||(e.on("focus",p),e.on("blur",l.hide)),e.on("init",(function(){(e.hasFocus()||f)&&p()})),Jv(e,t);var h={show:function(){l.show()},hide:function(){l.hide()},enable:function(){Yv(t,!1)},disable:function(){Yv(t,!0)},isDisabled:function(){return Cv.isDisabled(u)}};return{editorContainer:u.element.dom,api:h}}}),xB=function(e,t){!function(e,t){var n=oT(0,t,hT(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=oT(0,t,vT(e));e.ui.registry.addNestedMenuItem("fontformats",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=w({type:"advanced"},t.styleselect),r=oT(0,t,TT(e,n));e.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(e,t),function(e,t){var n=oT(0,t,kT(e));e.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=oT(0,t,xT(e));e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t)},wB={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},_B=(uT="[eE][+-]?[0-9]+",cT=["Infinity","[0-9]+\\."+(sT=function(e){return"(?:"+e+")?"})(aT="[0-9]+")+sT(uT),"\\.[0-9]+"+sT(uT),aT+sT(uT)].join("|"),new RegExp("^([+-]?(?:"+cT+"))(.*)$")),SB=function(e,t){return F.from(_B.exec(e)).bind((function(e){var n=Number(e[1]),r=e[2];return function(e,t){return z(t,(function(t){return z(wB[t],(function(t){return e===t}))}))}(r,t)?F.some({value:n,unit:r}):F.none()}))},EB=function(e){return function(e,t){return SB(e,t).map((function(e){return e.value+e.unit}))}(e,["fixed","relative","empty"]).getOr(e)},AB=function(e){var t=function(e){return e.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")}(e),n=new Map,r=ST(),o=function(){var t=EB(e.queryCommandValue("LineHeight"));F.from(n.get(t)).fold((function(){return r.clear()}),(function(e){r.set({destroy:function(){e.setActive(!1)}}),e.setActive(!0)}))};return e.on("nodeChange",o),$(t,(function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(EB(i),u),a+1===t.length&&o(),function(){0===a&&(e.off("nodeChange",o),r.clear())}},onAction:function(){return e.execCommand("LineHeight",!1,i)}}}))},DB=function(e){!function(e){e.ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return AB(e)}})}(e),function(e){e.ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(AB(e))}})}(e)},kB=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},TB=function(e){!function(e){N_.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(t,n){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:AT(e,t.name),onAction:kB(e,t.name)})}));for(var t=1;t<=6;t++){var n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:AT(e,n),onAction:kB(e,n)})}}(e),function(e){N_.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})}))}(e),function(e){N_.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)},onSetup:AT(e,t.name)})}))}(e)},OB=function(e){TB(e),function(e){N_.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:kB(e,"code")})}(e)},BB=function(e,t,n){var r=function(){return!!t.undoManager&&t.undoManager[n]()},o=function(){e.setDisabled(t.mode.isReadOnly()||!r())};return e.setDisabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o),function(){return t.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",o)}},NB=function(e){!function(e){e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return BB(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return BB(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}})}(e),function(e){e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return BB(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return BB(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}})}(e)},FB=function(e,t){!function(e){N_.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return e.execCommand(t.cmd)},icon:t.icon,onSetup:AT(e,t.name)})}));var t="alignnone",n="No alignment",r="JustifyNone",o="align-none";e.ui.registry.addButton(t,{tooltip:n,onAction:function(){return e.execCommand(r)},icon:o})}(e),OB(e),xB(e,t),NB(e),function(e){!function(e){e.addCommand("mceApplyTextcolor",(function(t,n){!function(e,t,n){e.undoManager.transact((function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))}(e,t,n)})),e.addCommand("mceRemoveTextcolor",(function(t){!function(e,t){e.undoManager.transact((function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}))}(e,t)}))}(e);var t=dn(null),n=dn(null);sb(e,"forecolor","forecolor","Text color",t),sb(e,"backcolor","hilitecolor","Background color",n),cb(e,"forecolor","forecolor","Text color"),cb(e,"backcolor","hilitecolor","Background color")}(e),function(e){!function(e){e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}})}(e),function(e){e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(e,t){e.setActive(t.hasVisual);var n=function(t){e.setActive(t.hasVisual)};return t.on("VisualAid",n),function(){return t.off("VisualAid",n)}}(t,e)},onAction:function(){e.execCommand("mceToggleVisualAid")}})}(e)}(e),function(e){!function(e){e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(e,t){e.setDisabled(!t.queryCommandState("outdent"));var n=function(){e.setDisabled(!t.queryCommandState("outdent"))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}(t,e)},onAction:function(){return e.execCommand("outdent")}}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return e.execCommand("indent")}})}(e)}(e),DB(e)},MB=function(e,t){return{anchor:"makeshift",x:e,y:t}},PB=function(e){return"longpress"===e.type||0===e.type.indexOf("touch")},IB=function(e,t){var n=iv.DOM.getPos(e);return function(e,t,n){return MB(e.x+t,e.y+n)}(t,n.x,n.y)},RB=function(e,t){return"contextmenu"===t.type||"longpress"===t.type?e.inline?function(e){if(PB(e)){var t=e.touches[0];return MB(t.pageX,t.pageY)}return MB(e.pageX,e.pageY)}(t):IB(e.getContentAreaContainer(),function(e){if(PB(e)){var t=e.touches[0];return MB(t.clientX,t.clientY)}return MB(e.clientX,e.clientY)}(t)):LB(e)},LB=function(e){return{anchor:"selection",root:hn.fromDom(e.selection.getNode())}},zB=function(e){return{anchor:"node",node:F.some(hn.fromDom(e.selection.getNode())),root:hn.fromDom(e.getBody())}},VB=function(e,t,n,r,o,i){var a=n(),u=i?zB(e):RB(e,t);QS(a,lg.CLOSE_ON_EXECUTE,r,!1).map((function(e){t.preventDefault(),om.showMenuAt(o,u,{menu:{markers:Sg("normal")},data:e})}))},HB={onLtr:function(){return[Ku,Uu,Wu,qu,Gu,Xu,hm,mm,dm,lm,pm,fm]},onRtl:function(){return[Ku,Wu,Uu,Gu,qu,Xu,hm,mm,pm,fm,dm,lm]}},$B={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},jB=function(e,t,n,r,o,i,a){var u=i?zB(e):function(e,t){return w({bubble:Ws(0,12,$B),layouts:HB,overrides:{maxWidthFunction:yD(),maxHeightFunction:Hs()}},RB(e,t))}(e,t);QS(n,lg.CLOSE_ON_EXECUTE,r,!0).map((function(n){t.preventDefault(),om.showMenuWithinBounds(o,u,{menu:{markers:Sg("normal"),highlightImmediately:a},data:n,type:"horizontal"},(function(){return F.some(Xk(e,r.shared))})),e.fire(bD)}))},UB=function(e,t,n,r,o,i){var a=Gn(),u=a.os.isiOS(),s=a.os.isOSX(),c=a.os.isAndroid(),l=a.deviceType.isTouch(),f=function(){var a=n();jB(e,t,a,r,o,i,!(c||u||s&&l))};if(!s&&!u||i)c&&!i&&e.selection.setCursorLocation(t.target,0),f();else{var d=function(){!function(e){var t=e.selection.getRng(),n=function(){gm.setEditorTimeout(e,(function(){e.selection.setRng(t)}),10),i()};e.once("touchend",n);var r=function(e){e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",r,!0);var o=function(){return i()};e.once("longpresscancel",o);var i=function(){e.off("touchend",n),e.off("longpresscancel",o),e.off("mousedown",r)}}(e),f()};!function(e,t){var n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;var r=t.touches[0],o=n.getRng();return Pc(e.getWin(),gc.domRange(o)).exists((function(e){return e.left<=r.clientX&&e.right>=r.clientX&&e.top<=r.clientY&&e.bottom>=r.clientY}))}(e,t)?(e.once("selectionchange",d),e.once("touchend",(function(){return e.off("selectionchange",d)}))):d()}},WB=function(e){return"string"==typeof e?e.split(/[ ,]/):e},qB=function(e){return e.getParam("contextmenu_never_use_native",!1,"boolean")},GB=function(e){return function(e,t,n){var r=e.ui.registry.getAll().contextMenus;return F.from(e.getParam(t)).map(WB).getOrThunk((function(){return W(WB(n),(function(e){return Ne(r,e)}))}))}(e,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},XB=function(e){return r(e)?"|"===e:"separator"===e.type},KB={type:"separator"},YB=function(e){var t,n=function(e){return{text:e.text,icon:e.icon,disabled:e.disabled,shortcut:e.shortcut}};if(r(e))return e;switch(e.type){case"separator":return KB;case"submenu":return w(w({type:"nestedmenuitem"},n(e)),{getSubmenuItems:function(){var t=e.getSubmenuItems();return r(t)?t:$(t,YB)}});default:return w(w({type:"menuitem"},n(e)),{onAction:(t=e.onAction,function(){return t()})})}},JB=function(e,t){if(0===t.length)return e;var n=oe(e).filter((function(e){return!XB(e)})).fold((function(){return[]}),(function(e){return[KB]}));return e.concat(n).concat(t).concat([KB])},QB=function(e,t){return"longpress"!==t.type&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType)},ZB=function(e,t){return QB(e,t)?e.selection.getStart(!0):t.target},eN=function(e,t,n){var o=Gn().deviceType.isTouch,i=xa(om.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return e.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:ls([gh("dismissContextMenu",[ao(jr(),(function(t,n){Al.close(t),e.focus()}))])])})),a=function(e){return om.hide(i)},u=function(t){if(qB(e)&&t.preventDefault(),!function(e,t){return t.ctrlKey&&!qB(e)}(e,t)&&!function(e){return!1===e.getParam("contextmenu")}(e)){var a=function(e,t){var n=function(e){return e.getParam("contextmenu_avoid_overlap","","string")}(e);if(QB(e,t))return!0;if(n){var r=ZB(e,t);return Lb(hn.fromDom(r),n)}return!1}(e,t);(o()?UB:VB)(e,t,(function(){var n=ZB(e,t),o=e.ui.registry.getAll(),i=GB(e);return function(e,t,n){var o=G(t,(function(t,o){return Be(e,o.toLowerCase()).map((function(e){var o=e.update(n);if(r(o))return JB(t,o.split(" "));if(o.length>0){var i=$(o,YB);return JB(t,i)}return t})).getOrThunk((function(){return t.concat([o])}))}),[]);return o.length>0&&XB(o[o.length-1])&&o.pop(),o}(o.contextMenus,i,n)}),n,i,a)}};e.on("init",(function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");e.on(t,a),e.on("longpress contextmenu",u)}))},tN=Me([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),nN=function(e){return function(t){return t.translate(-e.left,-e.top)}},rN=function(e){return function(t){return t.translate(e.left,e.top)}},oN=function(e){return function(t,n){return G(e,(function(e,t){return t(e)}),ka(t,n))}},iN=function(e,t,n){return e.fold(oN([rN(n),nN(t)]),oN([nN(t)]),oN([]))},aN=function(e,t,n){return e.fold(oN([rN(n)]),oN([]),oN([rN(t)]))},uN=function(e,t,n){return e.fold(oN([]),oN([nN(n)]),oN([rN(t),nN(n)]))},sN=function(e,t,n){var r=e.fold((function(e,t){return{position:F.some("absolute"),left:F.some(e+"px"),top:F.some(t+"px")}}),(function(e,t){return{position:F.some("absolute"),left:F.some(e-n.left+"px"),top:F.some(t-n.top+"px")}}),(function(e,t){return{position:F.some("fixed"),left:F.some(e+"px"),top:F.some(t+"px")}}));return w({right:F.none(),bottom:F.none()},r)},cN=function(e,t,n,r){var o=function(e,o){return function(i,a){var u=e(t,n,r);return o(i.getOr(u.left),a.getOr(u.top))}};return e.fold(o(uN,lN),o(aN,fN),o(iN,dN))},lN=tN.offset,fN=tN.absolute,dN=tN.fixed,pN=function(e,t){var n=Zo(e,t);return u(n)?NaN:parseInt(n,10)},hN=function(e,t,n,r){return function(e,t){var n=e.element,r=pN(n,t.leftAttr),o=pN(n,t.topAttr);return isNaN(r)||isNaN(o)?F.none():F.some(ka(r,o))}(e,t).fold((function(){return n}),(function(e){return dN(e.left+r.left,e.top+r.top)}))},mN=function(e,t,n,r,o,i){var a=hN(e,t,n,r),u=t.mustSnap?yN(e,t,a,o,i):bN(e,t,a,o,i),s=iN(a,o,i);return function(e,t,n){var r=e.element;Qo(r,t.leftAttr,n.left+"px"),Qo(r,t.topAttr,n.top+"px")}(e,t,s),u.fold((function(){return{coord:dN(s.left,s.top),extra:F.none()}}),(function(e){return{coord:e.output,extra:e.extra}}))},gN=function(e,t){!function(e,t){var n=e.element;ni(n,t.leftAttr),ni(n,t.topAttr)}(e,t)},vN=function(e,t,n,r){return ae(e,(function(e){var o=e.sensor;return function(e,t,n,r,o,i){var a=aN(e,o,i),u=aN(t,o,i);return Math.abs(a.left-u.left)<=n&&Math.abs(a.top-u.top)<=r}(t,o,e.range.left,e.range.top,n,r)?F.some({output:cN(e.output,t,n,r),extra:e.extra}):F.none()}))},yN=function(e,t,n,r,o){var i=t.getSnapPoints(e);return vN(i,n,r,o).orThunk((function(){return G(i,(function(e,t){var i=t.sensor,a=function(e,t,n,r,o,i){var a=aN(e,o,i),u=aN(t,o,i),s=Math.abs(a.left-u.left),c=Math.abs(a.top-u.top);return ka(s,c)}(n,i,t.range.left,t.range.top,r,o);return e.deltas.fold((function(){return{deltas:F.some(a),snap:F.some(t)}}),(function(n){return(a.left+a.top)/2<=(n.left+n.top)/2?{deltas:F.some(a),snap:F.some(t)}:e}))}),{deltas:F.none(),snap:F.none()}).snap.map((function(e){return{output:cN(e.output,n,r,o),extra:e.extra}}))}))},bN=function(e,t,n,r,o){var i=t.getSnapPoints(e);return vN(i,n,r,o)},CN=Object.freeze({__proto__:null,snapTo:function(e,t,n,r){var o=t.getTarget(e.element);if(t.repositionTarget){var i=Eo(e.element),a=La(i),u=eO(o),s=function(e,t,n){return{coord:cN(e.output,e.output,t,n),extra:e.extra}}(r,a,u),c=sN(s.coord,0,u);ta(o,c)}}}),xN="data-initial-z-index",wN=function(e,t){e.getSystem().addToGui(t),function(e){To(e.element).filter(xo).each((function(t){oa(t,"z-index").each((function(e){Qo(t,xN,e)})),Zi(t,"z-index",na(e.element,"z-index"))}))}(t)},_N=function(e){!function(e){To(e.element).filter(xo).each((function(e){ei(e,xN).fold((function(){return ua(e,"z-index")}),(function(t){return Zi(e,"z-index",t)})),ni(e,xN)}))}(e),e.getSystem().removeFromGui(e)},SN=function(e,t,n){return e.getSystem().build(Zb.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}))},EN=en("snaps",[Vt("getSnapPoints"),Cu("onSensor"),Vt("leftAttr"),Vt("topAttr"),tn("lazyViewport",Xa),tn("mustSnap",!1)]),AN=[tn("useFixed",b),Vt("blockerClass"),tn("getTarget",m),tn("onDrag",d),tn("repositionTarget",!0),tn("onDrop",d),sn("getBounds",Xa),EN],DN=function(e){return(t=oa(e,"left"),n=oa(e,"top"),r=oa(e,"position"),o=function(e,t,n){return("fixed"===n?dN:lN)(parseInt(e,10),parseInt(t,10))},t.isSome()&&n.isSome()&&r.isSome()?F.some(o(t.getOrDie(),n.getOrDie(),r.getOrDie())):F.none()).getOrThunk((function(){var t=Oa(e);return fN(t.left,t.top)}));var t,n,r,o},kN=function(e,t,n,r,o,i,a){return function(e,t,n,r,o){var i=o.bounds,a=aN(t,n,r),u=Ms(a.left,i.x,i.x+i.width-o.width),s=Ms(a.top,i.y,i.y+i.height-o.height),c=fN(u,s);return t.fold((function(){var e=uN(c,n,r);return lN(e.left,e.top)}),(function(){return c}),(function(){var e=iN(c,n,r);return dN(e.left,e.top)}))}(0,t.fold((function(){var e,t,a,u=(e=n,t=i.left,a=i.top,e.fold((function(e,n){return lN(e+t,n+a)}),(function(e,n){return fN(e+t,n+a)}),(function(e,n){return dN(e+t,n+a)}))),s=iN(u,r,o);return dN(s.left,s.top)}),(function(t){var a=mN(e,t,n,i,r,o);return a.extra.each((function(n){t.onSensor(e,n)})),a.coord})),r,o,a)},TN=function(e,t){return{bounds:e.getBounds(),height:Aa(t.element),width:Ma(t.element)}},ON=function(e,t,n,r,o){var i=n.update(r,o),a=n.getStartData().getOrThunk((function(){return TN(t,e)}));i.each((function(n){!function(e,t,n,r){var o=t.getTarget(e.element);if(t.repositionTarget){var i=Eo(e.element),a=La(i),u=eO(o),s=DN(o),c=kN(e,t.snaps,s,a,u,r,n),l=sN(c,0,u);ta(o,l)}t.onDrag(e,o,r)}(e,t,a,n)}))},BN=function(e,t,n,r){t.each(_N),n.snaps.each((function(t){gN(e,t)}));var o=n.getTarget(e.element);r.reset(),n.onDrop(e,o)},NN=function(e){return function(t,n){var r=function(e){n.setStartData(TN(t,e))};return ro(S([ao(zr(),(function(e){n.getStartData().each((function(){return r(e)}))}))],e(t,n,r)))}},FN=Object.freeze({__proto__:null,getData:function(e){return F.from(ka(e.x,e.y))},getDelta:function(e,t){return ka(t.left-e.left,t.top-e.top)}}),MN=function(e,t,n){return[ao(lr(),(function(r,o){if(0===o.event.raw.button){o.stop();var i=function(){return BN(r,F.some(s),e,t)},a=zb(i,200),u={drop:i,delayDrop:a.schedule,forceDrop:i,move:function(n){a.cancel(),ON(r,e,t,FN,n)}},s=SN(r,e.blockerClass,function(e){return ro([ao(lr(),e.forceDrop),ao(pr(),e.drop),ao(fr(),(function(t,n){e.move(n.event)})),ao(dr(),e.delayDrop)])}(u));n(r),wN(r,s)}}))]},PN=S(AN,[Su("dragger",{handlers:NN(MN)})]),IN=Object.freeze({__proto__:null,getData:function(e){var t=e.raw.touches;return 1===t.length?function(e){var t=e[0];return F.some(ka(t.clientX,t.clientY))}(t):F.none()},getDelta:function(e,t){return ka(t.left-e.left,t.top-e.top)}}),RN=function(e,t,n){var r=dn(F.none());return[ao(ar(),(function(o,i){i.stop();var a=function(){BN(o,r.get(),e,t),r.set(F.none())},u={drop:a,delayDrop:d,forceDrop:a,move:function(n){ON(o,e,t,IN,n)}},s=SN(o,e.blockerClass,function(e){return ro([ao(ar(),e.forceDrop),ao(sr(),e.drop),ao(cr(),e.drop),ao(ur(),(function(t,n){e.move(n.event)}))])}(u));r.set(F.some(s));n(o),wN(o,s)})),ao(ur(),(function(n,r){r.stop(),ON(n,e,t,IN,r.event)})),ao(sr(),(function(n,o){o.stop(),BN(n,r.get(),e,t),r.set(F.none())})),ao(cr(),(function(n){BN(n,r.get(),e,t),r.set(F.none())}))]},LN=PN,zN=S(AN,[Su("dragger",{handlers:NN(RN)})]),VN=S(AN,[Su("dragger",{handlers:NN((function(e,t,n){return S(MN(e,t,n),RN(e,t,n))}))})]),HN=hs({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:LN,touch:zN,mouseOrTouch:VN}),name:"dragging",active:{events:function(e,t){return e.dragger.handlers(e,t)}},extra:{snap:function(e){return{sensor:e.sensor,range:e.range,output:e.output,extra:F.from(e.extra)}}},state:Object.freeze({__proto__:null,init:function(){var e=F.none(),t=F.none(),n=h({});return Ai({readState:n,reset:function(){e=F.none(),t=F.none()},update:function(t,n){return t.getData(n).bind((function(n){return function(t,n){var r=e.map((function(e){return t.getDelta(e,n)}));return e=F.some(n),r}(t,n)}))},getStartData:function(){return t},setStartData:function(e){t=F.some(e)}})}}),apis:CN}),$N=function(e,t,n,r,o,i){return e.fold((function(){return HN.snap({sensor:fN(n-20,r-20),range:ka(o,i),output:fN(F.some(n),F.some(r)),extra:{td:t}})}),(function(e){var o=n-20,i=r-20,a=e.element.dom.getBoundingClientRect();return HN.snap({sensor:fN(o,i),range:ka(40,40),output:fN(F.some(n-a.width/2),F.some(r-a.height/2)),extra:{td:t}})}))},jN=function(e,t,n){return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(e,r){var o=r.td;(function(e,t){return e.exists((function(e){return Yn(e,t)}))})(t.get(),o)||(t.set(F.some(o)),n(o))},mustSnap:!0}},UN=function(e){return ym(vm.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ls([HN.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),vx.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},WN=function(e,t){var n=dn([]),r=dn([]),o=dn(!1),i=dn(F.none()),a=dn(F.none()),u=function(e){var n=Ga(e);return $N(f.getOpt(t),e,n.x,n.y,n.width,n.height)},s=function(e){var n=Ga(e);return $N(d.getOpt(t),e,n.right,n.bottom,n.width,n.height)},c=jN((function(){return $(n.get(),(function(e){return u(e)}))}),i,(function(t){a.get().each((function(n){e.fire("TableSelectorChange",{start:t,finish:n})}))})),l=jN((function(){return $(r.get(),(function(e){return s(e)}))}),a,(function(t){i.get().each((function(n){e.fire("TableSelectorChange",{start:n,finish:t})}))})),f=UN(c),d=UN(l),p=xa(f.asSpec()),h=xa(d.asSpec()),m=function(t,n,r,o){var i=r(n);HN.snapTo(t,i);!function(t,n,r,o){var i=n.dom.getBoundingClientRect();ua(t.element,"display");var a=ko(hn.fromDom(e.getBody())).dom.innerHeight,u=r(i),s=o(i,a);(u||s)&&Zi(t.element,"display","none")}(t,n,(function(e){return e[o]<0}),(function(e,t){return e[o]>t}))},g=function(e){return m(p,e,u,"top")},v=function(e){return m(h,e,s,"bottom")};Gn().deviceType.isTouch()&&(e.on("TableSelectionChange",(function(e){o.get()||(cl(t,p),cl(t,h),o.set(!0)),i.set(F.some(e.start)),a.set(F.some(e.finish)),e.otherCells.each((function(t){n.set(t.upOrLeftCells),r.set(t.downOrRightCells),g(e.start),v(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(function(){i.get().each(g),a.get().each(v)})),e.on("TableSelectionClear",(function(){o.get()&&(dl(p),dl(h),o.set(!1)),i.set(F.none()),a.set(F.none())})))},qN=function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1},GN=function(e,t,n){t.delimiter||(t.delimiter="");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ls([lh.config({mode:"flow",selector:"div[role=button]"}),Cv.config({disabled:n.isDisabled}),Qv(),aC.config({}),mh.config({}),gh("elementPathEvents",[mo((function(r,o){e.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return lh.focusIn(r)})),e.on("NodeChange",(function(o){var i,a,u=function(t){for(var n=[],r=t.length;r-- >0;){var o=t[r];if(1===o.nodeType&&!qN(o)){var i=e.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(i.isDefaultPrevented()||n.push({name:i.name,element:o}),i.isPropagationStopped())break}}return n}(o.parents);u.length>0?mh.set(r,(i=$(u||[],(function(t,r){return vm.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":r,"tab-index":-1,"aria-level":r+1},innerHtml:t.name},action:function(n){e.focus(),e.selection.select(t.element),e.nodeChanged()},buttonBehaviours:ls([ey(n.isDisabled),Qv()])})})),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+t.delimiter+" "}},G(i.slice(1),(function(e,t){var n=e;return n.push(a),n.push(t),n}),[i[0]]))):mh.set(r,[])}))}))])]),components:[]}};(fT=lT||(lT={}))[fT.None=0]="None",fT[fT.Both=1]="Both",fT[fT.Vertical=2]="Vertical";var XN,KN,YN,JN=function(e,t,n){var r=hn.fromDom(e.getContainer()),o=function(e,t,n,r,o){var i={};return i.height=mB(r+t.top,Ev(e),Dv(e)),n===lT.Both&&(i.width=mB(o+t.left,Sv(e),Av(e))),i}(e,t,n,Ea(r),Fa(r));Se(o,(function(e,t){return Zi(r,t,hB(e))})),function(e){e.fire("ResizeEditor")}(e)},QN=function(e,t,n,r){var o=ka(20*n,20*r);return JN(e,o,t),F.some(!0)},ZN=function(e,t){var n=function(e){var t=!e.hasPlugin("autoresize"),n=e.getParam("resize",t);return!1===n?lT.None:"both"===n?lT.Both:lT.Vertical}(e);return n===lT.None?F.none():F.some({dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},innerHtml:Cm("resize-handle",t.icons)},behaviours:ls([HN.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,r,o){return JN(e,o,n)},blockerClass:"tox-blocker"}),lh.config({mode:"special",onLeft:function(){return QN(e,n,-1,0)},onRight:function(){return QN(e,n,1,0)},onUp:function(){return QN(e,n,0,-1)},onDown:function(){return QN(e,n,0,1)}}),aC.config({}),xh.config({})])})},eF=function(e,t){var n,r,o=function(){var n,r=[];return e.getParam("elementpath",!0,"boolean")&&r.push(GN(e,{},t)),e.hasPlugin("wordcount")&&r.push(function(e,t){var n,r=function(e,n,r){return mh.set(e,[ya(t.translate(["{0} "+r,n[r]]))])};return vm.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ls([ey(t.isDisabled),Qv(),aC.config({}),mh.config({}),ql.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),gh("wordcount-events",[yo((function(e){var t=ql.getValue(e),n="words"===t.mode?"characters":"words";ql.setValue(e,{mode:n,count:t.count}),r(e,t.count,n)})),mo((function(t){e.on("wordCountUpdate",(function(e){var n=ql.getValue(t).mode;ql.setValue(t,{mode:n,count:e.wordCount}),r(t,e.wordCount,n)}))}))])]),eventOrder:(n={},n[Or()]=["disabling","alloy.base.behaviour","wordcount-events"],n)})}(e,t)),e.getParam("branding",!0,"boolean")&&r.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(n=av.translate(["Powered by {0}","Tiny"]))+'">'+n+"</a>"}}),r.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:r}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(n=o(),r=ZN(e,t),n.concat(r.toArray()))}},tF=function(e){var t,n,r,o,i=e.inline,a=i?CB:dB,u=jv(e)?DO:QT,s=F.none(),c=Gn(),l=c.browser.isIE()?["tox-platform-ie"]:[],f=c.deviceType.isTouch()?["tox-platform-touch"]:[],p=Lv(e),h=Hv(e),m=av.isRtl()?{attributes:{dir:"rtl"}}:{},g={attributes:(t={},t[Ks]=p?Ts.BottomToTop:Ts.TopToBottom,t)},v=function(){return s.bind(QO.getHeader)},y=function(){Zi(q.element,"width",document.body.clientWidth+"px")},b=xa((n=Yn(Ki(),h)&&"grid"===na(h,"display"),r={dom:w({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(l).concat(f)},m),behaviours:ls([ol.config({useFixed:function(){return u.isDocked(v)}})])},o={dom:{styles:{width:document.body.clientWidth+"px"}},events:ro([ao(Vr(),y)])},Re(r,n?o:{}))),C=function(){return ce.value(b)},x=ym({dom:{tag:"div",classes:["tox-anchorbar"]}}),_=function(){return s.bind((function(e){return QO.getThrobber(e)})).getOrDie("Could not find throbber element")},S=vD(b,e,(function(){return s.bind((function(e){return x.getOpt(e)})).getOrDie("Could not find a anchor bar element")})),E=QO.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:S,onEscape:function(){e.focus()}}),A=Mv(e),D=QO.parts.toolbar(w({dom:{tag:"div",classes:["tox-toolbar"]},getSink:C,providers:S.shared.providers,onEscape:function(){e.focus()},type:A,lazyToolbar:function(){return s.bind((function(e){return QO.getToolbar(e)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return v().getOrDie("Could not find header element")}},g)),k=QO.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:S.shared.providers,onEscape:function(){e.focus()},type:A}),T=QO.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),O=QO.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),B=QO.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:S}),N=e.getParam("statusbar",!0,"boolean")&&!i?F.some(eF(e,S.shared.providers)):F.none(),M={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[T,O]},P=Bv(e),I=Tv(e),R=kv(e),L=QO.parts.header({dom:w({tag:"div",classes:["tox-editor-header"]},g),components:Y([R?[E]:[],P?[k]:I?[D]:[],Vv(e)?[]:[x.asSpec()]]),sticky:jv(e),editor:e,sharedBackstage:S.shared}),z=Y([p?[]:[L],i?[]:[M],p?[L]:[]]),V=Y([[{dom:{tag:"div",classes:["tox-editor-container"]},components:z}],i?[]:N.toArray(),[B]]),H=$v(e),$=w(w({role:"application"},av.isRtl()?{dir:"rtl"}:{}),H?{"aria-hidden":"true"}:{}),U=xa(QO.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(p?["tox-tinymce--toolbar-bottom"]:[]).concat(f).concat(l),styles:w({visibility:"hidden"},H?{opacity:"0",border:"0"}:{}),attributes:$},components:V,behaviours:ls([Qv(),Cv.config({disableClass:"tox-tinymce--disabled"}),lh.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));s=F.some(U),e.shortcuts.add("alt+F9","focus menubar",(function(){QO.focusMenubar(U)})),e.shortcuts.add("alt+F10","focus toolbar",(function(){QO.focusToolbar(U)})),e.addCommand("ToggleToolbarDrawer",(function(){QO.toggleToolbarDrawer(U)})),e.addQueryStateHandler("ToggleToolbarDrawer",(function(){return QO.isToolbarDrawerToggled(U)}));var W=eC(U),q=eC(b);!function(e,t,n){var r=function(e,r){j([t,n],(function(t){t.broadcastEvent(e,r)}))},o=function(e,r){j([t,n],(function(t){t.broadcastOn([e],r)}))},i=function(e){return o(Dl(),{target:e.target})},a=Pb(hn.fromDom(document),"touchstart",i),u=Pb(hn.fromDom(document),"touchmove",(function(e){return r(Rr(),e)})),s=Pb(hn.fromDom(document),"touchend",(function(e){return r(Lr(),e)})),c=Pb(hn.fromDom(document),"mousedown",i),l=Pb(hn.fromDom(document),"mouseup",(function(e){0===e.raw.button&&o(Tl(),{target:e.target})})),f=function(e){return o(Dl(),{target:hn.fromDom(e.target)})},d=function(e){0===e.button&&o(Tl(),{target:hn.fromDom(e.target)})},p=function(e){return r(zr(),Rb(e))},h=function(e){o(kl(),{}),r(Vr(),Rb(e))},m=function(){return o(kl(),{})},g=function(t){t.state&&o(Dl(),{target:hn.fromDom(e.getContainer())})};e.on("PostRender",(function(){e.on("click",f),e.on("tap",f),e.on("mouseup",d),e.on("ScrollWindow",p),e.on("ResizeWindow",h),e.on("ResizeEditor",m),e.on("AfterProgressState",g)})),e.on("remove",(function(){e.off("click",f),e.off("tap",f),e.off("mouseup",d),e.off("ScrollWindow",p),e.off("ResizeWindow",h),e.off("ResizeEditor",m),e.off("AfterProgressState",g),c.unbind(),a.unbind(),u.unbind(),s.unbind(),l.unbind()})),e.on("detach",(function(){gl(t),gl(n),t.destroy(),n.destroy()}))}(e,W,q);var G=function(){var t=hB(gB(e)),n=hB(function(e){return vB(e).getOr(_v(e))}(e));return e.inline||(aa("div","width",n)&&Zi(U.element,"width",n),aa("div","height",t)?Zi(U.element,"height",t):Zi(U.element,"height","200px")),t};return{mothership:W,uiMothership:q,backstage:S,renderUI:function(){u.setup(e,S.shared,v),FB(e,S),eN(e,C,S),function(e){var t=e.ui.registry.getAll().sidebars;j(we(t),(function(n){var r=t[n],o=function(){return F.from(e.queryCommandValue("ToggleSidebar")).is(n)};e.ui.registry.addToggleButton(n,{icon:r.icon,tooltip:r.tooltip,onAction:function(t){e.execCommand("ToggleSidebar",!1,n),t.setActive(o())},onSetup:function(t){var n=function(){return t.setActive(o())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})}))}(e),UO(e,_,S.shared),Ee(function(e){return e.getParam("toolbar_groups",{},"object")}(e),(function(t,n){e.ui.registry.addGroupToolbarButton(n,t)}));var t=e.ui.registry.getAll(),n=t.buttons,r=t.menuItems,o=t.contextToolbars,i=t.sidebars,s=Ov(e),c={menuItems:r,menus:Uv(e),menubar:Wv(e),toolbar:s.getOrThunk((function(){return function(e){return e.getParam("toolbar",!0)}(e)})),allowToolbarGroups:A===sg.floating,buttons:n,sidebar:i};HT(e,o,b,{backstage:S}),WN(e,b);var l=e.getElement(),f=G(),d={mothership:W,uiMothership:q,outerContainer:U},p={targetNode:l,height:f};return a.render(e,d,c,S,p)},getUi:function(){return{channels:{broadcastAll:q.broadcast,broadcastOn:q.broadcastOn,register:d}}}}},nF=h([Vt("lazySink"),Kt("dragBlockClass"),sn("getBounds",Xa),tn("useTabstopAt",C),tn("eventOrder",{}),Gl("modalBehaviours",[lh]),xu("onExecute"),_u("onEscape")]),rF={sketch:m},oF=h([Ef({name:"draghandle",overrides:function(e,t){return{behaviours:ls([HN.config({mode:"mouse",getTarget:function(e){return tu(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])}}}),_f({schema:[Vt("dom")],name:"title"}),_f({factory:rF,schema:[Vt("dom")],name:"close"}),_f({factory:rF,schema:[Vt("dom")],name:"body"}),Ef({factory:rF,schema:[Vt("dom")],name:"footer"}),Sf({factory:{sketch:function(e,t){return w(w({},e),{dom:t.dom,components:t.components})}},schema:[tn("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),tn("components",[])],name:"blocker"})]),iF=Object.freeze({__proto__:null,block:function(e,t,n,r){Qo(e.element,"aria-busy",!0);var o=t.getRoot(e).getOr(e),i=ls([lh.config({mode:"special",onTab:function(){return F.some(!0)},onShiftTab:function(){return F.some(!0)}}),xh.config({})]),a=r(o,i),u=o.getSystem().build(a);mh.append(o,wa(u)),u.hasConfigured(lh)&&lh.focusIn(u),n.isBlocked()||t.onBlock(e),n.blockWith((function(){return mh.remove(o,u)}))},unblock:function(e,t,n){ni(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()}}),aF=[sn("getRoot",F.none),Cu("onBlock"),Cu("onUnblock")],uF=ds({fields:aF,name:"blocking",apis:iF,state:Object.freeze({__proto__:null,init:function(){var e=ST();return Ai({readState:e.isSet,blockWith:function(t){e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),sF=Qf({name:"ModalDialog",configFields:nF(),partFields:oF(),factory:function(e,t,n,r){var o,i=dn(F.none()),a=ci("modal-events"),u=w(w({},e.eventOrder),((o={})[Hr()]=[a].concat(e.eventOrder["alloy.system.attached"]||[]),o));return{uid:e.uid,dom:e.dom,components:t,apis:{show:function(t){i.set(F.some(t));var n=e.lazySink(t).getOrDie(),o=r.blocker(),a=n.getSystem().build(w(w({},o),{components:o.components.concat([wa(t)]),behaviours:ls([xh.config({}),gh("dialog-blocker-events",[ho(mr(),(function(){lh.focusIn(t)}))])])}));cl(n,a),lh.focusIn(t)},hide:function(e){i.set(F.none()),To(e.element).each((function(t){e.getSystem().getByDom(t).each((function(e){dl(e)}))}))},getBody:function(t){return Lf(t,e,"body")},getFooter:function(t){return Lf(t,e,"footer")},setIdle:function(e){uF.unblock(e)},setBusy:function(e,t){uF.block(e,t)}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Kl(e.modalBehaviours,[mh.config({}),lh.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),uF.config({getRoot:i.get}),gh(a,[mo((function(t){var n,r,o,i,a,u;n=t.element,r=Lf(t,e,"title").element,o=ei(n,"id").fold((function(){var e=ci("dialog-label");return Qo(r,"id",e),e}),m),Qo(n,"aria-labelledby",o),i=t.element,a=Lf(t,e,"body").element,u=F.from(Zo(i,"id")).fold((function(){var e=ci("dialog-describe");return Qo(a,"id",e),e}),m),Qo(i,"aria-describedby",u)}))])])}},apis:{show:function(e,t){e.show(t)},hide:function(e,t){e.hide(t)},getBody:function(e,t){return e.getBody(t)},getFooter:function(e,t){return e.getFooter(t)},setBusy:function(e,t,n){e.setBusy(t,n)},setIdle:function(e,t){e.setIdle(t)}}}),cF=lt([jt("type"),jt("name")].concat(Hg)),lF=Pt,fF=[vt("name","name",Ue((function(){return ci("button-name")})),Mt),Qt("icon"),an("align","end",["start","end"]),un("primary",!1),un("disabled",!1)],dF=S(fF,[jt("text")]),pF=S([Ut("type",["submit","cancel","custom"])],dF),hF=S([Ut("type",["menu"]),Qt("text"),Qt("tooltip"),Qt("icon"),Xt("items",cF)],fF),mF=Ot("type",{submit:pF,cancel:pF,custom:pF,menu:hF}),gF=[jt("type"),jt("text"),Ut("level",["info","warn","error","success"]),jt("icon"),tn("url","")],vF=lt(gF),yF=[jt("type"),jt("text"),un("disabled",!1),un("primary",!1),vt("name","name",Ue((function(){return ci("button-name")})),Mt),Qt("icon"),un("borderless",!1)],bF=lt(yF),CF=[jt("type"),jt("name"),jt("label"),un("disabled",!1)],xF=lt(CF),wF=Pt,_F=[jt("type"),jt("name")],SF=_F.concat([Qt("label")]),EF=SF.concat([tn("columns","auto")]),AF=lt(EF),DF=xt([jt("value"),jt("text"),jt("icon")]),kF=lt(SF),TF=Mt,OF=lt(SF),BF=Mt,NF=_F.concat([on("tag","textarea"),jt("scriptId"),jt("scriptUrl"),function(e,t){return nn(e,t,Lt)}("settings",void 0)]),FF=_F.concat([on("tag","textarea"),Wt("init")]),MF=_t((function(e){return Et("customeditor.old",ct(FF),e).orThunk((function(){return Et("customeditor.new",ct(NF),e)}))})),PF=Mt,IF=lt(SF),RF=ft(Ct),LF=function(e){return[jt("type"),$t("columns"),e]},zF=[jt("type"),jt("html"),an("presets","presentation",["presentation","document"])],VF=lt(zF),HF=SF.concat([un("sandboxed",!0)]),$F=lt(HF),jF=Mt,UF=SF.concat([Ht("currentState",lt([Vt("blob"),jt("url")]))]),WF=lt(UF),qF=SF.concat([Qt("inputMode"),Qt("placeholder"),un("maximized",!1),un("disabled",!1)]),GF=lt(qF),XF=Mt,KF=function(e){return[jt("type"),jt("label"),e]},YF=[jt("text"),jt("value")],JF=[jt("text"),Xt("items",(XN=function(){return QF},KN=XN,YN=ze((function(){return KN()})),{extract:function(e,t,n){return YN().extract(e,t,n)},toString:function(){return YN().toString()}}))],QF=dt([lt(YF),lt(JF)]),ZF=SF.concat([Xt("items",QF),un("disabled",!1)]),eM=lt(ZF),tM=Mt,nM=SF.concat([Gt("items",[jt("text"),jt("value")]),rn("size",1),un("disabled",!1)]),rM=lt(nM),oM=Mt,iM=SF.concat([un("constrain",!0),un("disabled",!1)]),aM=lt(iM),uM=lt([jt("width"),jt("height")]),sM=[jt("type"),Xt("header",Mt),Xt("cells",ft(Mt))],cM=lt(sM),lM=SF.concat([Qt("placeholder"),un("maximized",!1),un("disabled",!1)]),fM=lt(lM),dM=Mt,pM=SF.concat([an("filetype","file",["image","media","file"]),tn("disabled",!1)]),hM=lt(pM),mM=lt([jt("value"),tn("meta",{})]),gM=function(e){return vt("items","items",$e(),ft(_t((function(t){return Et("Checking item of "+e,vM,t).fold((function(e){return ce.error(kt(e))}),(function(e){return ce.value(e)}))}))))},vM=wt((function(){return Tt("type",{alertbanner:vF,bar:lt((e=gM("bar"),[jt("type"),e])),button:bF,checkbox:xF,colorinput:kF,colorpicker:OF,dropzone:IF,grid:lt(LF(gM("grid"))),iframe:$F,input:GF,listbox:eM,selectbox:rM,sizeinput:aM,textarea:fM,urlinput:hM,customeditor:MF,htmlpanel:VF,imagetools:WF,collection:AF,label:lt(KF(gM("label"))),table:cM,panel:bM});var e})),yM=[jt("type"),tn("classes",[]),Xt("items",vM)],bM=lt(yM),CM=[vt("name","name",Ue((function(){return ci("tab-name")})),Mt),jt("title"),Xt("items",vM)],xM=[jt("type"),Gt("tabs",CM)],wM=lt(xM),_M=dF,SM=mF,EM=lt([jt("title"),Ht("body",Tt("type",{panel:bM,tabpanel:wM})),on("size","normal"),Xt("buttons",SM),tn("initialData",{}),sn("onAction",d),sn("onChange",d),sn("onSubmit",d),sn("onClose",d),sn("onCancel",d),tn("onTabChange",d)]),AM=lt(S([Ut("type",["cancel","custom"])],_M)),DM=lt([jt("title"),jt("url"),Jt("height"),Jt("width"),function(e,t){return Yt(e,ft(t))}("buttons",AM),sn("onAction",d),sn("onCancel",d),sn("onClose",d),sn("onMessage",d)]),kM=function(e){return o(e)?[e].concat(J(Oe(e),kM)):i(e)?J(e,kM):[]},TM=function(e){return r(e.type)&&r(e.name)},OM={checkbox:wF,colorinput:TF,colorpicker:BF,dropzone:RF,input:XF,iframe:jF,sizeinput:uM,selectbox:oM,listbox:tM,size:uM,textarea:dM,urlinput:mM,customeditor:PF,collection:DF,togglemenuitem:lF},BM=function(e){var t=function(e){return W(kM(e),TM)}(e),n=J(t,(function(e){return function(e){return F.from(OM[e.type])}(e).fold((function(){return[]}),(function(t){return[Ht(e.name,t)]}))}));return lt(n)},NM=function(e){return{internalDialog:At(Et("dialog",EM,e)),dataValidator:BM(e),initialData:e.initialData}},FM={open:function(e,t){var n=NM(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(e,t){return e(At(Et("dialog",DM,t)))},redial:function(e){return NM(e)}},MM=function(e){var t=[],n={};return Se(e,(function(e,r){e.fold((function(){t.push(r)}),(function(e){n[r]=e}))})),t.length>0?ce.error(t):ce.value(n)},PM=function(e,t){var n=ym(y_.sketch((function(n){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:$(e.items,(function(e){return _A(n,e,t)}))}})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:ls([lh.config({mode:"acyclic",useTabstopAt:v(G_)}),D_(n),I_(n,{postprocess:function(e){return MM(e).fold((function(e){return{}}),(function(e){return e}))}})])}},IM=Jf({name:"TabButton",configFields:[tn("uid",void 0),Vt("value"),vt("dom","dom",We((function(){return{attributes:{role:"tab",id:ci("aria"),"aria-selected":"false"}}})),Bt()),Kt("action"),tn("domModification",{}),Gl("tabButtonBehaviours",[xh,lh,ql]),Vt("view")],factory:function(e,t){return{uid:e.uid,dom:e.dom,components:e.components,events:Ph(e.action),behaviours:Kl(e.tabButtonBehaviours,[xh.config({}),lh.config({mode:"execution",useSpace:!0,useEnter:!0}),ql.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}}}),RM=h([Vt("tabs"),Vt("dom"),tn("clickToDismiss",!1),Gl("tabbarBehaviours",[md,lh]),yu(["tabClass","selectedClass"])]),LM=Af({factory:IM,name:"tabs",unit:"tab",overrides:function(e){var t=function(e,t){md.dehighlight(e,t),Qr(e,Xr(),{tabbar:e,button:t})},n=function(e,t){md.highlight(e,t),Qr(e,Gr(),{tabbar:e,button:t})};return{action:function(r){var o=r.getSystem().getByUid(e.uid).getOrDie(),i=md.isHighlighted(o,r);(i&&e.clickToDismiss?t:i?d:n)(o,r)},domModification:{classes:[e.markers.tabClass]}}}}),zM=h([LM]),VM=Qf({name:"Tabbar",configFields:RM(),partFields:zM(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Kl(e.tabbarBehaviours,[md.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:function(e,t){Qo(t.element,"aria-selected","true")},onDehighlight:function(e,t){Qo(t.element,"aria-selected","false")}}),lh.config({mode:"flow",getInitial:function(e){return md.getHighlighted(e).map((function(e){return e.element}))},selector:"."+e.markers.tabClass,executeOnMove:!0})])}}}),HM=Jf({name:"Tabview",configFields:[Gl("tabviewBehaviours",[mh])],factory:function(e,t){return{uid:e.uid,dom:e.dom,behaviours:Kl(e.tabviewBehaviours,[mh.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),$M=h([tn("selectFirst",!0),Cu("onChangeTab"),Cu("onDismissTab"),tn("tabs",[]),Gl("tabSectionBehaviours",[])]),jM=_f({factory:VM,schema:[Vt("dom"),qt("markers",[Vt("tabClass"),Vt("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs}}}),UM=_f({factory:HM,name:"tabview"}),WM=h([jM,UM]),qM=Qf({name:"TabSection",configFields:$M(),partFields:WM(),factory:function(e,t,n,r){var o=function(t,n){Rf(t,e,"tabbar").each((function(e){n(e).each(Zr)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Xl(e.tabSectionBehaviours),events:ro(Y([e.selectFirst?[mo((function(e,t){o(e,md.getFirst)}))]:[],[ao(Gr(),(function(t,n){!function(t){var n=ql.getValue(t);Rf(t,e,"tabview").each((function(r){X(e.tabs,(function(e){return e.value===n})).each((function(n){var o=n.view();ei(t.element,"id").each((function(e){Qo(r.element,"aria-labelledby",e)})),mh.set(r,o),e.onChangeTab(r,t,o)}))}))}(n.event.button)})),ao(Xr(),(function(t,n){var r=n.event.button;e.onDismissTab(t,r)}))]])),apis:{getViewItems:function(t){return Rf(t,e,"tabview").map((function(e){return mh.contents(e)})).getOr([])},showTab:function(e,t){o(e,(function(e){var n=md.getCandidates(e);return X(n,(function(e){return ql.getValue(e)===t})).filter((function(t){return!md.isHighlighted(e,t)}))}))}}}},apis:{getViewItems:function(e,t){return e.getViewItems(t)},showTab:function(e,t,n){e.showTab(t,n)}}}),GM=function(e,t){Zi(e,"height",t+"px"),Gn().browser.isIE()?ua(e,"flex-basis"):Zi(e,"flex-basis",t+"px")},XM=function(e,t,n){tu(e,'[role="dialog"]').each((function(e){nu(e,'[role="tablist"]').each((function(r){n.get().map((function(n){return Zi(t,"height","0"),Zi(t,"flex-basis","0"),Math.min(n,function(e,t,n){var r,o=Do(e).dom,i=tu(e,".tox-dialog-wrap").getOr(e);r="fixed"===na(i,"position")?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight);var a=Ea(t),u=t.dom.offsetLeft>=n.dom.offsetLeft+Fa(n)?Math.max(Ea(n),a):a,s=parseInt(na(e,"margin-top"),10)||0,c=parseInt(na(e,"margin-bottom"),10)||0;return r-(Ea(e)+s+c-u)}(e,t,r))})).each((function(e){GM(t,e)}))}))}))},KM=function(e){return nu(e,'[role="tabpanel"]')},YM=function(e){var t;return{smartTabHeight:(t=dn(F.none()),{extraEvents:[mo((function(n){var r=n.element;KM(r).each((function(o){Zi(o,"visibility","hidden"),n.getSystem().getByDom(o).toOptional().each((function(n){var r=function(e){return re(te(e,(function(e,t){return e>t?-1:e<t?1:0})))}(function(e,t,n){return $(e,(function(r,o){mh.set(n,e[o].view());var i=t.dom.getBoundingClientRect();return mh.set(n,[]),i.height}))}(e,o,n));t.set(r)})),XM(r,o,t),ua(o,"visibility"),function(e,t){re(e).each((function(e){return qM.showTab(t,e.value)}))}(e,n),gm.requestAnimationFrame((function(){XM(r,o,t)}))}))})),ao(Vr(),(function(e){var n=e.element;KM(n).each((function(e){XM(n,e,t)}))})),ao(CC,(function(e,n){var r=e.element;KM(r).each((function(e){var n=bs(Io(e));Zi(e,"visibility","hidden");var o=oa(e,"height").map((function(e){return parseInt(e,10)}));ua(e,"height"),ua(e,"flex-basis");var i=e.dom.getBoundingClientRect().height;o.forall((function(e){return i>e}))?(t.set(F.from(i)),XM(r,e,t)):o.each((function(t){GM(e,t)})),ua(e,"visibility"),n.each(ys)}))}))],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},JM="send-data-to-section",QM="send-data-to-view",ZM=function(e,t){var n=dn({}),r=function(e){var t=ql.getValue(e),r=MM(t).getOr({}),o=n.get(),i=Re(o,r);n.set(i)},o=function(e){var t=n.get();ql.setValue(e,t)},i=dn(null),a=$(e.tabs,(function(e){return{value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:t.shared.providers.translate(e.title)},view:function(){return[y_.sketch((function(n){return{dom:{tag:"div",classes:["tox-form"]},components:$(e.items,(function(e){return _A(n,e,t)})),formBehaviours:ls([lh.config({mode:"acyclic",useTabstopAt:v(G_)}),gh("TabView.form.events",[mo(o),go(r)]),gs.config({channels:Je([{key:JM,value:{onReceive:r}},{key:QM,value:{onReceive:o}}])})])}}))]}}})),u=YM(a).smartTabHeight;return qM.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(e,t,n){var r=ql.getValue(t);Qr(e,bC,{name:r,oldName:i.get()}),i.set(r)},tabs:a,components:[qM.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[VM.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ls([aC.config({})])}),qM.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:u.selectFirst,tabSectionBehaviours:ls([gh("tabpanel",u.extraEvents),lh.config({mode:"acyclic"}),od.config({find:function(e){return re(qM.getViewItems(e))}}),ql.config({store:{mode:"manual",getValue:function(e){return e.getSystem().broadcastOn([JM],{}),n.get()},setValue:function(e,t){n.set(t),e.getSystem().broadcastOn([QM],{})}}})])})},eP=ci("update-dialog"),tP=ci("update-title"),nP=ci("update-body"),rP=ci("update-footer"),oP=ci("body-send-message"),iP=function(e,t,n,r){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:w(w({},t.map((function(e){return{id:e}})).getOr({})),r?{"aria-live":"polite"}:{})},components:[],behaviours:ls([k_(0),Dk.config({channel:nP,updateState:function(e,t){return F.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},renderComponents:function(e){switch(e.body.type){case"tabpanel":return[ZM(e.body,n)];default:return[PM(e.body,n)]}},initialData:e})])}},aP=fy.deviceType.isTouch(),uP=function(e,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}},sP=function(e,t){return sF.parts.close(vm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:ls([aC.config({})])}))},cP=function(){return sF.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},lP=function(e,t){return sF.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:$O("<p>"+t.translate(e)+"</p>")}]}]})},fP=function(e){return sF.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},dP=function(e,t){return[Zb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Zb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},pP=function(e){var t,n="tox-dialog",r=n+"-wrap",o=r+"__backdrop",i=n+"__disable-scroll";return sF.sketch({lazySink:e.lazySink,onEscape:function(t){return e.onEscape(t),F.some(!0)},useTabstopAt:function(e){return!G_(e)},dom:{tag:"div",classes:[n].concat(e.extraClasses),styles:w({position:"relative"},e.extraStyles)},components:S([e.header,e.body],e.footer.toArray()),parts:{blocker:{dom:$O('<div class="'+r+'"></div>'),components:[{dom:{tag:"div",classes:aP?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:r,modalBehaviours:ls(S([xh.config({}),gh("dialog-events",e.dialogEvents.concat([ho(mr(),(function(e,t){lh.focusIn(e)}))])),gh("scroll-lock",[mo((function(){Hi(Ki(),i)})),go((function(){ji(Ki(),i)}))])],e.extraBehaviours)),eventOrder:w((t={},t[Or()]=["dialog-events"],t[Hr()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[$r()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),e.eventOrder)})},hP=function(e){return vm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:Cm("close",e.icons)}}],action:function(e){Jr(e,hC)}})},mP=function(e,t,n){var r=function(e){return[ya(n.translate(e.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:w({},t.map((function(e){return{id:e}})).getOr({}))},components:r(e),behaviours:ls([Dk.config({channel:tP,renderComponents:r})])}},gP=function(){return{dom:$O('<div class="tox-dialog__draghandle"></div>')}},vP=function(e,t){return n={title:t.shared.providers.translate(e),draggable:t.dialog.isDraggableModal()},r=t.shared.providers,o=sF.parts.title(mP(n,F.none(),r)),i=sF.parts.draghandle(gP()),a=sF.parts.close(hP(r)),u=[o].concat(n.draggable?[i]:[]).concat([a]),Zb.sketch({dom:$O('<div class="tox-dialog__header"></div>'),components:u});var n,r,o,i,a,u},yP=function(e,t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:$O('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},bP=function(e,t,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){sF.setBusy(e(),(function(e,r){return yP(n.message,r,t)}))},onUnblock:function(){sF.setIdle(e())}}},CP=function(e,t,n,r){var o;return xa(pP(w(w({},e),{lazySink:r.shared.getSink,extraBehaviours:S([Dk.config({channel:eP,updateState:function(e,t){return F.some(t)},initialData:t}),z_({})],e.extraBehaviours),onEscape:function(e){Jr(e,hC)},dialogEvents:n,eventOrder:(o={},o[Tr()]=[Dk.name(),gs.name()],o[Hr()]=["scroll-lock",Dk.name(),"messages","dialog-events","alloy.base.behaviour"],o[$r()]=["alloy.base.behaviour","dialog-events","messages",Dk.name(),"scroll-lock"],o)})))},xP=function(e){return $(e,(function(e){return"menu"===e.type?function(e){var t=$(e.items,(function(e){var t=dn(!1);return w(w({},e),{storage:t})}));return w(w({},e),{items:t})}(e):e}))},wP=function(e){return G(e,(function(e,t){return"menu"===t.type?G(t.items,(function(e,t){return e[t.name]=t.storage,e}),e):e}),{})},_P=function(e,t){return[lo(mr(),q_),e(pC,(function(e,n){t.onClose(),n.onClose()})),e(hC,(function(e,t,n,r){t.onCancel(e),Jr(r,pC)})),ao(yC,(function(e,n){return t.onUnblock()})),ao(vC,(function(e,n){return t.onBlock(n.event)}))]},SP=function(e,t){var n=function(t,n){return ao(t,(function(t,o){r(t,(function(r,i){n(e(),r,o.event,t)}))}))},r=function(e,t){Dk.getState(e).get().each((function(n){t(n,e)}))};return S(_P(n,t),[n(mC,(function(e,t,n){t.onAction(e,{name:n.name})}))])},EP=function(e,t,n){var r=function(t,n){return ao(t,(function(t,r){o(t,(function(o,i){n(e(),o,r.event,t)}))}))},o=function(e,t){Dk.getState(e).get().each((function(n){t(n.internalDialog,e)}))};return S(_P(r,t),[r(gC,(function(e,t){return t.onSubmit(e)})),r(dC,(function(e,t,n){t.onChange(e,{name:n.name})})),r(mC,(function(e,t,r,o){var i=function(){return lh.focusIn(o)},a=function(e){return ti(e,"disabled")||ei(e,"aria-disabled").exists((function(e){return"true"===e}))},u=Io(o.element),s=bs(u);t.onAction(e,{name:r.name,value:r.value}),bs(u).fold(i,(function(e){a(e)||s.exists((function(t){return Qn(e,t)&&a(t)}))?i():n().toOptional().filter((function(t){return!Qn(t.element,e)})).each(i)}))})),r(bC,(function(e,t,n){t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})})),go((function(t){var n=e();ql.setValue(t,n.getData())}))])},AP=function(e,t){var n=t.map((function(e){return e.footerButtons})).getOr([]),r=U(n,(function(e){return"start"===e.align})),o=function(e,t){return Zb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:$(t,(function(e){return e.memento.asSpec()}))})};return[o("start",r.pass),o("end",r.fail)]},DP=function(e,t){return{dom:$O('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ls([Dk.config({channel:rP,initialData:e,updateState:function(e,n){var r=$(n.buttons,(function(e){var n=ym(function(e,t){return sE(e,e.type,t)}(e,t));return{name:e.name,align:e.align,memento:n}}));return F.some({lookupByName:function(e,t){return function(e,t,n){return X(t,(function(e){return e.name===n})).bind((function(t){return t.memento.getOpt(e)}))}(e,r,t)},footerButtons:r})},renderComponents:AP})])}},kP=function(e,t){return sF.parts.footer(DP(e,t))},TP=function(e,t){if(e.getRoot().getSystem().isConnected()){var n=od.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return y_.getField(n,t).fold((function(){var r=e.getFooter();return Dk.getState(r).get().bind((function(e){return e.lookupByName(n,t)}))}),(function(e){return F.some(e)}))}return F.none()},OP=function(e,t,n){var o=function(t){var n=e.getRoot();n.getSystem().isConnected()&&t(n)},i={getData:function(){var t=e.getRoot(),r=t.getSystem().isConnected()?e.getFormWrapper():t,o=ql.getValue(r),i=Ee(n,(function(e){return e.get()}));return w(w({},o),i)},setData:function(t){o((function(r){var o=i.getData(),a=w(w({},o),t),u=function(e,t){var n=e.getRoot();return Dk.getState(n).get().map((function(e){return At(Et("data",e.dataValidator,t))})).getOr(t)}(e,a),s=e.getFormWrapper();ql.setValue(s,u),Se(n,(function(e,t){Ne(a,t)&&e.set(a[t])}))}))},disable:function(t){TP(e,t).each(Cv.disable)},enable:function(t){TP(e,t).each(Cv.enable)},focus:function(t){TP(e,t).each(xh.focus)},block:function(e){if(!r(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(t){Qr(t,vC,{message:e})}))},unblock:function(){o((function(e){Jr(e,yC)}))},showTab:function(t){o((function(n){var r=e.getBody();Dk.getState(r).get().exists((function(e){return e.isTabPanel()}))&&od.getCurrent(r).each((function(e){qM.showTab(e,t)}))}))},redial:function(e){o((function(n){var r=t(e);n.getSystem().broadcastOn([eP],r),n.getSystem().broadcastOn([tP],r.internalDialog),n.getSystem().broadcastOn([nP],r.internalDialog),n.getSystem().broadcastOn([rP],r.internalDialog),i.setData(r.initialData)}))},close:function(){o((function(e){Jr(e,pC)}))}};return i},BP=function(e,t,n){var r=vP(e.internalDialog.title,n),o=function(e,t){var n=iP(e,F.none(),t,!1);return sF.parts.body(n)}({body:e.internalDialog.body},n),i=xP(e.internalDialog.buttons),a=wP(i),u=kP({buttons:i},n),s=EP((function(){return d}),bP((function(){return f}),n.shared.providers,t),n.shared.getSink),c=function(e){switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(e.internalDialog.size),l={header:r,body:o,footer:F.some(u),extraClasses:c,extraBehaviours:[],extraStyles:{}},f=CP(l,e,s,n),d=OP({getRoot:function(){return f},getBody:function(){return sF.getBody(f)},getFooter:function(){return sF.getFooter(f)},getFormWrapper:function(){var e=sF.getBody(f);return od.getCurrent(e).getOr(e)}},t.redial,a);return{dialog:f,instanceApi:d}},NP=function(e,t,n,r){var o,i,a,u,s,c=ci("dialog-label"),l=ci("dialog-content"),f=ym((a={title:e.internalDialog.title,draggable:!0},u=c,s=n.shared.providers,Zb.sketch({dom:$O('<div class="tox-dialog__header"></div>'),components:[mP(a,F.some(u),s),gP(),hP(s)],containerBehaviours:ls([HN.config({mode:"mouse",blockerClass:"blocker",getTarget:function(e){return ru(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),d=ym(function(e,t,n,r){return iP(e,F.some(t),n,r)}({body:e.internalDialog.body},l,n,r)),p=xP(e.internalDialog.buttons),h=wP(p),m=ym(function(e,t){return DP(e,t)}({buttons:p},n)),g=EP((function(){return y}),{onBlock:function(e){uF.block(v,(function(t,r){return yP(e.message,r,n.shared.providers)}))},onUnblock:function(){uF.unblock(v)},onClose:function(){return t.closeWindow()}},n.shared.getSink),v=xa({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(o={role:"dialog"},o["aria-labelledby"]=c,o["aria-describedby"]=""+l,o)},eventOrder:(i={},i[Tr()]=[Dk.name(),gs.name()],i[Or()]=["execute-on-form"],i[Hr()]=["reflecting","execute-on-form"],i),behaviours:ls([lh.config({mode:"cyclic",onEscape:function(e){return Jr(e,pC),F.some(!0)},useTabstopAt:function(e){return!G_(e)&&("button"!==bo(e)||"disabled"!==Zo(e,"disabled"))}}),Dk.config({channel:eP,updateState:function(e,t){return F.some(t)},initialData:e}),xh.config({}),gh("execute-on-form",g.concat([ho(mr(),(function(e,t){lh.focusIn(e)}))])),uF.config({getRoot:function(){return F.some(v)}}),mh.config({}),z_({})]),components:[f.asSpec(),d.asSpec(),m.asSpec()]}),y=OP({getRoot:function(){return v},getFooter:function(){return m.get(v)},getBody:function(){return d.get(v)},getFormWrapper:function(){var e=d.get(v);return od.getCurrent(e).getOr(e)}},t.redial,h);return{dialog:v,instanceApi:y}},FP=tinymce.util.Tools.resolve("tinymce.util.URI"),MP=["insertContent","setContent","execCommand","close","block","unblock"],PP=function(e){return o(e)&&-1!==MP.indexOf(e.mceAction)},IP=function(e,t,n,i){var u,s,c,l=vP(e.title,i),f=function(e){var t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[U_({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:ls([aC.config({}),xh.config({})])})]}],behaviours:ls([lh.config({mode:"acyclic",useTabstopAt:v(G_)})])};return sF.parts.body(t)}(e),d=e.buttons.bind((function(e){return 0===e.length?F.none():F.some(kP({buttons:e},i))})),p=SP((function(){return _}),bP((function(){return x}),i.shared.providers,t)),h=w(w({},e.height.fold((function(){return{}}),(function(e){return{height:e+"px","max-height":e+"px"}}))),e.width.fold((function(){return{}}),(function(e){return{width:e+"px","max-width":e+"px"}}))),m=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],g=new FP(e.url,{base_uri:new FP(window.location.href)}),y=g.protocol+"://"+g.host+(g.port?":"+g.port:""),b=dn(F.none()),C=[gh("messages",[mo((function(){var t=Pb(hn.fromDom(window),"message",(function(t){if(g.isSameOrigin(new FP(t.raw.origin))){var r=t.raw.data;PP(r)?function(e,t,n){switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":var r=!!a(n.ui)&&n.ui;e.execCommand(n.cmd,r,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}}(n,_,r):function(e){return!PP(e)&&o(e)&&Ne(e,"mceAction")}(r)&&e.onMessage(_,r)}}));b.set(F.some(t))})),go((function(){b.get().each((function(e){return e.unbind()}))}))]),gs.config({channels:(u={},u[oP]={onReceive:function(e,t){nu(e.element,"iframe").each((function(e){e.dom.contentWindow.postMessage(t,y)}))}},u)})],x=CP({header:l,body:f,footer:d,extraClasses:m,extraBehaviours:C,extraStyles:h},e,p,i),_=(s=x,c=function(e){s.getSystem().isConnected()&&e(s)},{block:function(e){if(!r(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c((function(t){Qr(t,vC,{message:e})}))},unblock:function(){c((function(e){Jr(e,yC)}))},close:function(){c((function(e){Jr(e,pC)}))},sendMessage:function(e){c((function(t){t.getSystem().broadcastOn([oP],e)}))}});return{dialog:x,instanceApi:_}},RP=function(e,t,n){return t&&n?[]:[bO.config({contextual:{lazyContext:function(){return F.some(qa(hn.fromDom(e.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},LP=function(e){var t=e.backstage,n=e.editor,r=jv(n),o=function(e){var t=e.backstage.shared;return{open:function(n,r){var o=function(){sF.hide(s),r()},i=ym(sE({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:F.none()},"cancel",e.backstage)),a=cP(),u=sP(o,t.providers),s=xa(pP({lazySink:function(){return t.getSink()},header:uP(a,u),body:lP(n,t.providers),footer:F.some(fP(dP([],[i.asSpec()]))),onEscape:o,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ao(hC,o)],eventOrder:{}}));sF.show(s);var c=i.get(s);xh.focus(c)}}}(e),i=function(e){var t=e.backstage.shared;return{open:function(n,r){var o=function(e){sF.hide(c),r(e)},i=ym(sE({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:F.none()},"submit",e.backstage)),a=sE({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:F.none()},"cancel",e.backstage),u=cP(),s=sP((function(){return o(!1)}),t.providers),c=xa(pP({lazySink:function(){return t.getSink()},header:uP(u,s),body:lP(n,t.providers),footer:F.some(fP(dP([],[a,i.asSpec()]))),onEscape:function(){return o(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ao(hC,(function(){return o(!1)})),ao(gC,(function(){return o(!0)}))],eventOrder:{}}));sF.show(c);var l=i.get(c);xh.focus(l)}}}(e),a=function(e,r){return FM.openUrl((function(e){var o=IP(e,{closeWindow:function(){sF.hide(o.dialog),r(o.instanceApi)}},n,t);return sF.show(o.dialog),o.instanceApi}),e)},u=function(e,n){return FM.open((function(e,r,o){var i=r,a=BP({dataValidator:o,initialData:i,internalDialog:e},{redial:FM.redial,closeWindow:function(){sF.hide(a.dialog),n(a.instanceApi)}},t);return sF.show(a.dialog),a.instanceApi.setData(i),a.instanceApi}),e)},s=function(e,o,i,a){return FM.open((function(e,u,s){var c,l=At(Et("data",s,u)),f=(c=dn(F.none()),{clear:function(){return c.set(F.none())},set:function(e){return c.set(F.some(e))},isSet:function(){return c.get().isSome()},on:function(e){return c.get().each(e)}}),d=t.shared.header.isPositionedAtTop(),p=function(){return f.on((function(e){om.reposition(e),bO.refresh(e)}))},h=NP({dataValidator:s,initialData:l,internalDialog:e},{redial:FM.redial,closeWindow:function(){f.on(om.hide),n.off("ResizeEditor",p),f.clear(),i(h.instanceApi)}},t,a),m=xa(om.sketch(w(w({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},d?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:ls(S([gh("window-manager-inline-events",[ao(jr(),(function(e,t){Jr(h.dialog,hC)}))])],RP(n,r,d))),isExtraPart:function(e,t){return function(e){return Lb(e,".tox-alert-dialog")||Lb(e,".tox-confirm-dialog")}(t)}})));return f.set(m),om.showWithin(m,o,wa(h.dialog),F.some(Ki())),r&&d||(bO.refresh(m),n.on("ResizeEditor",p)),h.instanceApi.setData(l),lh.focusIn(h.dialog),h.instanceApi}),e)};return{open:function(e,n,r){return void 0!==n&&"toolbar"===n.inline?s(e,t.shared.anchors.inlineDialog(),r,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?s(e,t.shared.anchors.cursor(),r,n.ariaAttrs):u(e,r)},openUrl:function(e,t){return a(e,t)},alert:function(e,t){o.open(e,(function(){t()}))},close:function(e){e.close()},confirm:function(e,t){i.open(e,(function(e){t(e)}))}}};x.add("silver",(function(e){var t=tF(e),n=t.uiMothership,r=t.backstage,o=t.renderUI,i=t.getUi;Fb(e,r.shared);var a=LP({editor:e,backstage:r});return{renderUI:o,getWindowManagerImpl:h(a),getNotificationManagerImpl:function(){return _m(0,{backstage:r},n)},ui:i()}}))}(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}}),global=tinymce.util.Tools.resolve("tinymce.PluginManager"),applyListFormat=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),noop=function(){},constant=function(e){return function(){return e}},never=constant(!1),always=constant(!0),none=function(){return NONE},eq=function(e){return e.isNone()},NONE={fold:function(e,t){return e()},is:never,isSome:never,isNone:always,getOr:id=function(e){return e},getOrThunk:call=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:constant(null),getOrUndefined:constant(void 0),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:constant("none()")},some=function(e){var t=constant(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:always,isNone:never,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return some(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:NONE},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(never,(function(t){return n(e,t)}))}};return o},Optional_from=function(e){return null==e?NONE:some(e)},isTableCellNode=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},isWithinList=function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t.parents,isTableCellNode),o=-1!==r?t.parents.slice(0,r):t.parents,i=global$1.grep(o,function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}}(e));return i.length>0&&i[0].nodeName===n},addSplitButton=function(e,t,n,r,o,i){e.ui.registry.addSplitButton(t,{tooltip:n,icon:"OL"===o?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(e){e(global$1.map(i,(function(e){return{type:"choiceitem",value:"default"===e?"":e,icon:"list-"+("OL"===o?"num":"bull")+"-"+("disc"===e||"decimal"===e?"default":e),text:function(e){return e.replace(/\-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}(e)}})))},onAction:function(){return e.execCommand(r)},onItemAction:function(t,n){applyListFormat(e,o,n)},select:function(t){return function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul"),n=e.dom.getStyle(t,"listStyleType");return Optional_from(n)}(e).map((function(e){return t===e})).getOr(!1)},onSetup:function(t){var n=function(n){t.setActive(isWithinList(e,n,o))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}})},addControl=function(e,t,n,r,o,i){i.length>1?addSplitButton(e,t,n,r,o,i):function(e,t,n,r,o,i){e.ui.registry.addToggleButton(t,{active:!1,tooltip:n,icon:"OL"===o?"ordered-list":"unordered-list",onSetup:function(t){var n=function(n){t.setActive(isWithinList(e,n,o))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}},onAction:function(){return e.execCommand(r)}})}(e,t,n,r,o)},global.add("advlist",(function(e){e.hasPlugin("lists")&&(function(e){addControl(e,"numlist","Numbered list","InsertOrderedList","OL",function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]}(e)),addControl(e,"bullist","Bullet list","InsertUnorderedList","UL",function(e){var t=e.getParam("advlist_bullet_styles","default,circle,square");return t?t.split(/[ ,]/):[]}(e))}(e),function(e){e.addCommand("ApplyUnorderedListStyle",(function(t,n){applyListFormat(e,"UL",n["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",(function(t,n){applyListFormat(e,"OL",n["list-style-type"])}))}(e))})),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r="a:not([href])",o=function(e){return!e},i=function(e){return e.getAttribute("id")||e.getAttribute("name")||""},a=function(e){return function(e){return e&&"a"===e.nodeName.toLowerCase()}(e)&&!e.getAttribute("href")&&""!==i(e)},u=function(e){var r=e.dom;t(r).walk(e.selection.getRng(),(function(e){n.each(e,(function(e){var t;a(t=e)&&!t.firstChild&&r.remove(e,!1)}))}))},s=function(e){return e.dom.getParent(e.selection.getStart(),r)},c=function(e,t){var n=s(e);n?function(e,t,n){n.removeAttribute("name"),n.id=t,e.addVisual(),e.undoManager.add()}(e,t,n):function(e,t){e.undoManager.transact((function(){(function(e){return e.getParam("allow_html_in_named_anchor",!1,"boolean")})(e)||e.selection.collapse(!0),e.selection.isCollapsed()?e.insertContent(e.dom.createHTML("a",{id:t})):(u(e),e.formatter.remove("namedAnchor",null,null,!0),e.formatter.apply("namedAnchor",{value:t}),e.addVisual())}))}(e,t),e.focus()},l=function(e){var t=function(e){var t=s(e);return t?i(t):""}(e);e.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:t},onSubmit:function(t){(function(e,t){return function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)}(t)?(c(e,t),!0):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1)})(e,t.getData().id)&&t.close()}})},f=function(e){return function(e){return e&&o(e.attr("href"))&&!o(e.attr("id")||e.attr("name"))}(e)&&!e.firstChild},d=function(e){return function(t){for(var n=0;n<t.length;n++){var r=t[n];f(r)&&r.attr("contenteditable",e)}}};e.add("anchor",(function(e){!function(e){e.on("PreInit",(function(){e.parser.addNodeFilter("a",d("false")),e.serializer.addNodeFilter("a",d(null))}))}(e),function(e){e.addCommand("mceAnchor",(function(){l(e)}))}(e),function(e){e.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return e.execCommand("mceAnchor")},onSetup:function(t){return e.selection.selectorChangedWithUnbind("a:not([href])",t.setActive).unbind}}),e.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return e.execCommand("mceAnchor")}})}(e),e.on("PreInit",(function(){!function(e){e.formatter.register("namedAnchor",{inline:"a",selector:r,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:function(e,t,n){return a(e)}})}(e)}))}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},r=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,n(t,r)):e.setStartBefore(t)},o=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,n(t,r)):e.setEndAfter(t)},i=function(e,t,n){var i,a,u,s,c,l,f,d=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@(?!.*@))(.+)$/i)}(e),p=function(e){return e.getParam("default_link_target",!1)}(e);if("A"!==e.selection.getNode().tagName){var h=e.selection.getRng().cloneRange();if(h.startOffset<5){if(!(c=h.endContainer.previousSibling)){if(!h.endContainer.firstChild||!h.endContainer.firstChild.nextSibling)return;c=h.endContainer.firstChild.nextSibling}if(l=c.length,r(h,c,l),o(h,c,l),h.endOffset<5)return;i=h.endOffset,a=c}else{if(3!==(a=h.endContainer).nodeType&&a.firstChild){for(;3!==a.nodeType&&a.firstChild;)a=a.firstChild;3===a.nodeType&&(r(h,a,0),o(h,a,a.nodeValue.length))}i=1===h.endOffset?2:h.endOffset-1-t}var m=i;do{r(h,a,i>=2?i-2:0),o(h,a,i>=1?i-1:0),i-=1,f=h.toString()}while(" "!==f&&""!==f&&160!==f.charCodeAt(0)&&i-2>=0&&f!==n);!function(e,t){return e===t||" "===e||160===e.charCodeAt(0)}(h.toString(),n)?0===h.startOffset?(r(h,a,0),o(h,a,m)):(r(h,a,i),o(h,a,m)):(r(h,a,i),o(h,a,m),i+=1),"."===(s=h.toString()).charAt(s.length-1)&&o(h,a,m-1);var g=(s=h.toString().trim()).match(d),v=function(e){return e.getParam("link_default_protocol","http","string")}(e);g&&("www."===g[1]?g[1]=v+"://www.":/@$/.test(g[1])&&!/^mailto:/.test(g[1])&&(g[1]="mailto:"+g[1]),u=e.selection.getBookmark(),e.selection.setRng(h),e.execCommand("createlink",!1,g[1]+g[2]),!1!==p&&e.dom.setAttrib(e.selection.getNode(),"target",p),e.selection.moveToBookmark(u),e.nodeChanged())}},a=function(e){var n;e.on("keydown",(function(t){if(13===t.keyCode)return function(e){i(e,-1,"")}(e)})),t.browser.isIE()?e.on("focus",(function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(t){}}})):(e.on("keypress",(function(t){if(41===t.keyCode)return function(e){i(e,-1,"(")}(e)})),e.on("keyup",(function(t){if(32===t.keyCode)return function(e){i(e,0,"")}(e)})))};e.add("autolink",(function(e){a(e)}))}(),function(){var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=(e=void 0,function(t){return e===t}),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e,t){var n=e||t,r=/^(\d+)([ms]?)$/.exec(""+n);return(r[2]?{s:1e3,m:6e4}[r[2]]:1)*parseInt(n,10)},u=function(e){var t=document.location;return e.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-").replace(/{path}/g,t.pathname).replace(/{query}/g,t.search).replace(/{hash}/g,t.hash).replace(/{id}/g,e.id)},s=function(e,t){if(n(t))return e.dom.isEmpty(e.getBody());var r=i.trim(t);if(""===r)return!0;var o=(new DOMParser).parseFromString(r,"text/html");return e.dom.isEmpty(o)},c=function(e){var t=parseInt(o.getItem(u(e)+"time"),10)||0;return!((new Date).getTime()-t>function(e){return a(e.getParam("autosave_retention"),"20m")}(e))||(l(e,!1),!1)},l=function(e,t){var n=u(e);o.removeItem(n+"draft"),o.removeItem(n+"time"),!1!==t&&function(e){e.fire("RemoveDraft")}(e)},f=function(e){var t=u(e);!s(e)&&e.isDirty()&&(o.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),o.setItem(t+"time",(new Date).getTime().toString()),function(e){e.fire("StoreDraft")}(e))},d=function(e){var t=u(e);c(e)&&(e.setContent(o.getItem(t+"draft"),{format:"raw"}),function(e){e.fire("RestoreDraft")}(e))},p=function(e){var t=function(e){return a(e.getParam("autosave_interval"),"30s")}(e);r.setEditorInterval(e,(function(){f(e)}),t)},h=function(e){e.undoManager.transact((function(){d(e),l(e)})),e.focus()},m=tinymce.util.Tools.resolve("tinymce.EditorManager"),g=function(e){return function(t){t.setDisabled(!c(e));var n=function(){return t.setDisabled(!c(e))};return e.on("StoreDraft RestoreDraft RemoveDraft",n),function(){return e.off("StoreDraft RestoreDraft RemoveDraft",n)}}};t.add("autosave",(function(e){return function(e){e.editorManager.on("BeforeUnload",(function(e){var t;i.each(m.get(),(function(e){e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&function(e){return e.getParam("autosave_ask_before_unload",!0)}(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))})),t&&(e.preventDefault(),e.returnValue=t)}))}(e),function(e){p(e),e.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:function(){h(e)},onSetup:g(e)}),e.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:function(){h(e)},onSetup:g(e)})}(e),e.on("init",(function(){(function(e){return e.getParam("autosave_restore_when_empty",!1)})(e)&&e.dom.isEmpty(e.getBody())&&d(e)})),function(e){return{hasDraft:function(){return c(e)},storeDraft:function(){return f(e)},restoreDraft:function(){return d(e)},removeDraft:function(t){return l(e,t)},isEmpty:function(t){return s(e,t)}}}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){var t=function(e){return e.getContent({source_view:!0})}(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:function(t){!function(e,t){e.focus(),e.undoManager.transact((function(){e.setContent(t)})),e.selection.setCursorLocation(),e.nodeChanged()}(e,t.getData().code),t.close()}})};e.add("code",(function(e){return function(e){e.addCommand("mceCodeEditor",(function(){t(e)}))}(e),function(e){e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return t(e)}}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return t(e)}})}(e),{}}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){},n=function(e){return function(){return e}},r=n(!1),o=n(!0),i=function(){return a},a=function(){var e=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e};return{fold:function(e,t){return e()},is:r,isSome:r,isNone:o,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:u,orThunk:a,map:i,each:t,bind:i,exists:r,forall:o,filter:i,equals:e,equals_:e,toArray:function(){return[]},toString:n("none()")}}(),u=function(e){var t=n(e),i=function(){return c},s=function(t){return t(e)},c={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:o,isNone:r,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:i,orThunk:i,map:function(t){return u(t(e))},each:function(t){t(e)},bind:s,exists:s,forall:s,filter:function(t){return t(e)?c:a},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(r,(function(t){return n(e,t)}))}};return c},s={some:u,none:i,from:function(e){return null==e?a:u(e)}},c=function(e){return function(e,t){return t>=0&&t<e.length?s.some(e[t]):s.none()}(e,0)},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=function(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")},d=function(e){return function(t,n){return e(n)}},p="undefined"!=typeof window?window:Function("return this;")(),h={},m={exports:h},g={};!function(e,t,n,r){var o=window.Prism;window.Prism={manual:!0},function(e){"object"==typeof t&&void 0!==n?n.exports=e():("undefined"!=typeof window?window:void 0!==g?g:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s=!1;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:__attribute__|_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,function:/[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Prism.languages.c.boolean},{}],2:[function(e,t,n){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}},{}],3:[function(e,t,n){(function(e){(function(){var n=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,n=0,r={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,i;switch(n=n||{},r.util.type(t)){case"Object":if(i=r.util.objId(t),n[i])return n[i];for(var a in o={},n[i]=o,t)t.hasOwnProperty(a)&&(o[a]=e(t[a],n));return o;case"Array":return i=r.util.objId(t),n[i]?n[i]:(o=[],n[i]=o,t.forEach((function(t,r){o[r]=e(t,n)})),o);default:return t}},getLanguage:function(e){for(;e&&!t.test(e.className);)e=e.parentElement;return e?(e.className.match(t)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var o=e.classList;if(o.contains(t))return!0;if(o.contains(r))return!1;e=e.parentElement}return!!n}},languages:{extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var i=(o=o||r.languages)[e],a={};for(var u in i)if(i.hasOwnProperty(u)){if(u==t)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);n.hasOwnProperty(u)||(a[u]=i[u])}var c=o[e];return o[e]=a,r.languages.DFS(r.languages,(function(t,n){n===c&&t!=e&&(this[t]=a)})),a},DFS:function e(t,n,o,i){i=i||{};var a=r.util.objId;for(var u in t)if(t.hasOwnProperty(u)){n.call(t,u,t[u],o||u);var s=t[u],c=r.util.type(s);"Object"!==c||i[a(s)]?"Array"!==c||i[a(s)]||(i[a(s)]=!0,e(s,n,u,i)):(i[a(s)]=!0,e(s,n,null,i))}}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",o),o.elements=Array.prototype.slice.apply(o.container.querySelectorAll(o.selector)),r.hooks.run("before-all-elements-highlight",o);for(var i,a=0;i=o.elements[a++];)r.highlightElement(i,!0===t,o.callback)},highlightElement:function(n,o,i){var a=r.util.getLanguage(n),u=r.languages[a];n.className=n.className.replace(t,"").replace(/\s+/g," ")+" language-"+a;var s=n.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&(s.className=s.className.replace(t,"").replace(/\s+/g," ")+" language-"+a);var c={element:n,language:a,grammar:u,code:n.textContent};function l(e){c.highlightedCode=e,r.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,r.hooks.run("after-highlight",c),r.hooks.run("complete",c),i&&i.call(c.element)}if(r.hooks.run("before-sanity-check",c),!c.code)return r.hooks.run("complete",c),void(i&&i.call(c.element));if(r.hooks.run("before-highlight",c),c.grammar)if(o&&e.Worker){var f=new Worker(r.filename);f.onmessage=function(e){l(e.data)},f.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else l(r.highlight(c.code,c.grammar,c.language));else l(r.util.encode(c.code))},highlight:function(e,t,n){var i={code:e,grammar:t,language:n};return r.hooks.run("before-tokenize",i),i.tokens=r.tokenize(i.code,i.grammar),r.hooks.run("after-tokenize",i),o.stringify(r.util.encode(i.tokens),i.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var o=new u;return s(o,o.head,e),a(e,o,t,o.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(o)},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var o,i=0;o=n[i++];)o(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function i(e,t,n,r){e.lastIndex=t;var o=e.exec(n);if(o&&r&&o[1]){var i=o[1].length;o.index+=i,o[0]=o[0].slice(i)}return o}function a(e,t,n,u,l,f){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var p=n[d];p=Array.isArray(p)?p:[p];for(var h=0;h<p.length;++h){if(f&&f.cause==d+","+h)return;var m=p[h],g=m.inside,v=!!m.lookbehind,y=!!m.greedy,b=m.alias;if(y&&!m.pattern.global){var C=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,C+"g")}for(var x=m.pattern||m,w=u.next,_=l;w!==t.tail&&!(f&&_>=f.reach);_+=w.value.length,w=w.next){var S=w.value;if(t.length>e.length)return;if(!(S instanceof o)){var E,A=1;if(y){if(!(E=i(x,_,e,v)))break;var D=E.index,k=E.index+E[0].length,T=_;for(T+=w.value.length;D>=T;)T+=(w=w.next).value.length;if(_=T-=w.value.length,w.value instanceof o)continue;for(var O=w;O!==t.tail&&(T<k||"string"==typeof O.value);O=O.next)A++,T+=O.value.length;A--,S=e.slice(_,T),E.index-=_}else if(!(E=i(x,0,S,v)))continue;D=E.index;var B=E[0],N=S.slice(0,D),F=S.slice(D+B.length),M=_+S.length;f&&M>f.reach&&(f.reach=M);var P=w.prev;N&&(P=s(t,P,N),_+=N.length),c(t,P,A),w=s(t,P,new o(d,g?r.tokenize(B,g):B,b,B)),F&&s(t,w,F),A>1&&a(e,t,n,w.prev,_,{cause:d+","+h,reach:M})}}}}}function u(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function s(e,t,n){var r=t.next,o={value:n,prev:t,next:r};return t.next=o,r.prev=o,e.length++,o}function c(e,t,n){for(var r=t.next,o=0;o<n&&r!==e.tail;o++)r=r.next;t.next=r,r.prev=t,e.length-=o}if(e.Prism=r,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var o="";return t.forEach((function(t){o+=e(t,n)})),o}var i={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(i.classes,a):i.classes.push(a)),r.hooks.run("wrap",i);var u="";for(var s in i.attributes)u+=" "+s+'="'+(i.attributes[s]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+u+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(r.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),o=n.language,i=n.code,a=n.immediateClose;e.postMessage(r.highlight(i,r.languages[o],o)),a&&e.close()}),!1),r):r;var l=r.util.currentScript();function f(){r.manual||r.highlightAll()}if(l&&(r.filename=l.src,l.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var d=document.readyState;"loading"===d||"interactive"===d&&l&&l.defer?document.addEventListener("DOMContentLoaded",f):window.requestAnimationFrame?window.requestAnimationFrame(f):window.setTimeout(f,16)}return r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});void 0!==t&&t.exports&&(t.exports=n),void 0!==e&&(e.Prism=n)}).call(this)}).call(this,void 0!==g?g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){var r,o;r=Prism,o=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char8_t|char16_t|char32_t|class|compl|concept|const|consteval|constexpr|constinit|const_cast|continue|co_await|co_return|co_yield|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r.languages.cpp=r.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return o.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:o,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:true|false)\b/}),r.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),r.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:r.languages.extend("cpp",{})}}),r.languages.insertBefore("inside","operator",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},r.languages.cpp["base-clause"])},{}],5:[function(e,t,n){!function(e){function t(e,t){return e.replace(/<<(\d+)>>/g,(function(e,n){return"(?:"+t[+n]+")"}))}function n(e,n,r){return RegExp(t(e,n),r||"")}function r(e,t){for(var n=0;n<t;n++)e=e.replace(/<<self>>/g,(function(){return"(?:"+e+")"}));return e.replace(/<<self>>/g,"[^\\s\\S]")}var o="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",i="class enum interface struct",a="add alias and ascending async await by descending from get global group into join let nameof not notnull on or orderby partial remove select set unmanaged value when where",u="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function s(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var c=s(i),l=RegExp(s(o+" "+i+" "+a+" "+u)),f=s(i+" "+a+" "+u),d=s(o+" "+i+" "+u),p=r(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),h=r(/\((?:[^()]|<<self>>)*\)/.source,2),m=/@?\b[A-Za-z_]\w*\b/.source,g=t(/<<0>>(?:\s*<<1>>)?/.source,[m,p]),v=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[f,g]),y=/\[\s*(?:,\s*)*\]/.source,b=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[v,y]),C=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[p,h,y]),x=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[C]),w=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[x,v,y]),_={keyword:l,punctuation:/[<>()?,.:[\]]/},S=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,E=/"(?:\\.|[^\\"\r\n])*"/.source,A=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[A]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:RegExp(S),greedy:!0,alias:"character"}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[v]),lookbehind:!0,inside:_},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[m,w]),lookbehind:!0,inside:_},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[m]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[c,g]),lookbehind:!0,inside:_},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[v]),lookbehind:!0,inside:_},{pattern:n(/(\bwhere\s+)<<0>>/.source,[m]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[b]),lookbehind:!0,inside:_},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[w,d,m]),inside:_}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:ul|lu|[dflmu])?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[m]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[m]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|typeof|sizeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[h]),lookbehind:!0,alias:"class-name",inside:_},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[w,v]),inside:_,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[w]),lookbehind:!0,inside:_,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[m,p]),inside:{function:n(/^<<0>>/.source,[m]),generic:{pattern:RegExp(p),alias:"class-name",inside:_}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>)(?:\s*,\s*(?:<<3>>|<<4>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[c,g,m,w,l.source]),lookbehind:!0,inside:{keyword:l,"class-name":{pattern:RegExp(w),greedy:!0,inside:_},punctuation:/,/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var D=E+"|"+S,k=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[D]),T=r(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[k]),2),O=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,B=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[v,T]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[O,B]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[O]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[T]),inside:e.languages.csharp},"class-name":{pattern:RegExp(v),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var N=/:[^}\r\n]+/.source,F=r(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[k]),2),M=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[F,N]),P=r(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[D]),2),I=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[P,N]);function R(t,r){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[t]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[r,N]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[M]),lookbehind:!0,greedy:!0,inside:R(M,F)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[I]),lookbehind:!0,greedy:!0,inside:R(I,P)}]})}(Prism),Prism.languages.dotnet=Prism.languages.cs=Prism.languages.csharp},{}],6:[function(e,t,n){!function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:RegExp("[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),string:{pattern:t,greedy:!0},property:/(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/(^|["'\s])style\s*=\s*(?:"[^"]*"|'[^']*')/i,lookbehind:!0,inside:{"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{style:{pattern:/(["'])[\s\S]+(?=["']$)/,lookbehind:!0,alias:"language-css",inside:e.languages.css},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},"attr-name":/^style/i}}},n.tag))}(Prism)},{}],7:[function(e,t,n){var r,o,i,a;r=Prism,o=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,i=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,a={pattern:RegExp(i+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}},r.languages.java=r.languages.extend("clike",{"class-name":[a,{pattern:RegExp(i+/[A-Z]\w*(?=\s+\w+\s*[;,=())])/.source),lookbehind:!0,inside:a.inside}],keyword:o,function:[r.languages.clike.function,{pattern:/(\:\:\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),r.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"}}),r.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":a,keyword:o,punctuation:/[<>(),.:]/,operator:/[?&|]/}},namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return o.source}))),lookbehind:!0,inside:{punctuation:/\./}}})},{}],8:[function(e,t,n){Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|(?:get|set)(?=\s*[\[$\w\xA0-\uFFFF])|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-flags":/[a-z]+$/,"regex-delimiter":/^\/|\/$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.js=Prism.languages.javascript},{}],9:[function(e,t,n){!function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,o,i){if(n.language===r){var a=n.tokenStack=[];n.code=n.code.replace(o,(function(e){if("function"==typeof i&&!i(e))return e;for(var o,u=a.length;-1!==n.code.indexOf(o=t(r,u));)++u;return a[u]=e,o})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=e.languages[r];var o=0,i=Object.keys(n.tokenStack);!function a(u){for(var s=0;s<u.length&&!(o>=i.length);s++){var c=u[s];if("string"==typeof c||c.content&&"string"==typeof c.content){var l=i[o],f=n.tokenStack[l],d="string"==typeof c?c:c.content,p=t(r,l),h=d.indexOf(p);if(h>-1){++o;var m=d.substring(0,h),g=new e.Token(r,e.tokenize(f,n.grammar),"language-"+r,f),v=d.substring(h+p.length),y=[];m&&y.push.apply(y,a([m])),y.push(g),v&&y.push.apply(y,a([v])),"string"==typeof c?u.splice.apply(u,[s,1].concat(y)):c.content=y}}else c.content&&a(c.content)}return u}(n.tokens)}}}})}(Prism)},{}],10:[function(e,t,n){Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};var o={};o[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",o)}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml},{}],11:[function(e,t,n){!function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/,/\b(?:null)\b/i],r=/\b0b[01]+\b|\b0x[\da-f]+\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+)(?:e[+-]?\d+)?/i,o=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,i=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?={))/i,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},keyword:[{pattern:/(\(\s*)\b(?:bool|boolean|int|integer|float|string|object|array)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:bool|int|float|string|object|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*[a-z0-9_|]\|\s*)(?:null|false)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?[a-z0-9_|]\|\s*)(?:null|false)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:null|false)\b/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},/\b(?:__halt_compiler|abstract|and|array|as|break|callable|case|catch|class|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|eval|exit|extends|final|finally|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|namespace|match|new|or|parent|print|private|protected|public|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield)\b/i],"argument-name":/\b[a-z_]\w*(?=\s*:(?!:))/i,"class-name":[{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:/\w+\s*(?=\()/,property:{pattern:/(->)[\w]+/,lookbehind:!0},number:r,operator:o,punctuation:i};var a={pattern:/{\$(?:{(?:{[^{}]+}|[^{}]+)}|[^{}])+}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)*)/,lookbehind:!0,inside:e.languages.php},u=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:a}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:a}}];e.languages.insertBefore("php","variable",{string:u}),e.languages.insertBefore("php","variable",{attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=]$)/,lookbehind:!0,inside:{comment:t,string:u,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:r,operator:o,punctuation:i}},delimiter:{pattern:/^#\[|]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",(function(t){if(/<\?/.test(t.code)){e.languages["markup-templating"].buildPlaceholders(t,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/gi)}})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")}))}(Prism)},{}],12:[function(e,t,n){Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},{}],13:[function(e,t,n){!function(e){e.languages.ruby=e.languages.extend("clike",{comment:[/#.*/,{pattern:/^=begin\s[\s\S]*?^=end/m,greedy:!0}],"class-name":{pattern:/(\b(?:class)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|protected|private|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.languages.ruby}};delete e.languages.ruby.function,e.languages.insertBefore("ruby","keyword",{regex:[{pattern:RegExp(/%r/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[gim]{0,3}/.source,/\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/.source,/<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/.source].join("|")+")"),greedy:!0,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[gim]{0,3}(?=\s*(?:$|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:{pattern:/(^|[^:]):[a-zA-Z_]\w*(?:[?!]|\b)/,lookbehind:!0},"method-definition":{pattern:/(\bdef\s+)[\w.]+/,lookbehind:!0,inside:{function:/\w+$/,rest:e.languages.ruby}}}),e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z]\w*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:RegExp(/%[qQiIwWxs]?/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S])*\)/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\]/.source,/<(?:[^<>\\]|\\[\s\S])*>/.source].join("|")+")"),greedy:!0,inside:{interpolation:t}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t}}],e.languages.rb=e.languages.ruby}(Prism)},{}],14:[function(e,t,n){var r=e("prismjs/components/prism-core");e("prismjs/components/prism-clike"),e("prismjs/components/prism-markup-templating"),e("prismjs/components/prism-c"),e("prismjs/components/prism-cpp"),e("prismjs/components/prism-csharp"),e("prismjs/components/prism-css"),e("prismjs/components/prism-java"),e("prismjs/components/prism-javascript"),e("prismjs/components/prism-markup"),e("prismjs/components/prism-php"),e("prismjs/components/prism-python"),e("prismjs/components/prism-ruby"),t.exports={boltExport:r}},{"prismjs/components/prism-c":1,"prismjs/components/prism-clike":2,"prismjs/components/prism-core":3,"prismjs/components/prism-cpp":4,"prismjs/components/prism-csharp":5,"prismjs/components/prism-css":6,"prismjs/components/prism-java":7,"prismjs/components/prism-javascript":8,"prismjs/components/prism-markup":10,"prismjs/components/prism-markup-templating":9,"prismjs/components/prism-php":11,"prismjs/components/prism-python":12,"prismjs/components/prism-ruby":13}]},{},[14])(14)}));var i=window.Prism;window.Prism=o}(0,h,m);var v=m.exports.boltExport,y=function(e){return p.Prism&&function(e){return e.getParam("codesample_global_prismjs",!1,"boolean")}(e)?p.Prism:v},b=function(e){var t=e.selection?e.selection.getNode():null;return f(t)?s.some(t):s.none()},C=function(e){var t=function(e){return function(e){return e.getParam("codesample_languages")}(e)||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]}(e),n=c(t).fold((function(){return""}),(function(e){return e.value})),r=function(e,t){return b(e).fold((function(){return t}),(function(e){var n=e.className.match(/language-(\w+)/);return n?n[1]:t}))}(e,n),o=function(e){return b(e).fold((function(){return""}),(function(e){return e.textContent}))}(e);e.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:t},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:r,code:o},onSubmit:function(t){var n=t.getData();!function(e,t,n){e.undoManager.transact((function(){var r=b(e);return n=l.DOM.encode(n),r.fold((function(){e.insertContent('<pre id="__new" class="language-'+t+'">'+n+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0])}),(function(r){e.dom.setAttrib(r,"class","language-"+t),r.innerHTML=n,y(e).highlightElement(r),e.selection.select(r)}))}))}(e,n.language,n.code),t.close()}})};e.add("codesample",(function(e){!function(e){var t=e.$;e.on("PreProcess",(function(e){t("pre[contenteditable=false]",e.node).filter(d(f)).each((function(e,n){var r=t(n),o=n.textContent;r.attr("class",t.trim(r.attr("class"))),r.removeAttr("contentEditable"),r.empty().append(t("<code></code>").each((function(){this.textContent=o})))}))})),e.on("SetContent",(function(){var n=t("pre").filter(d(f)).filter((function(e,t){return"false"!==t.contentEditable}));n.length&&e.undoManager.transact((function(){n.each((function(n,r){t(r).find("br").each((function(t,n){n.parentNode.replaceChild(e.getDoc().createTextNode("\n"),n)})),r.contentEditable="false",r.innerHTML=e.dom.encode(r.textContent),y(e).highlightElement(r),r.className=t.trim(r.className)}))}))}))}(e),function(e){e.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:function(){return C(e)},onSetup:function(t){var n=function(){t.setActive(function(e){var t=e.selection.getStart();return e.dom.is(t,'pre[class*="language-"]')}(e))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}}),e.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:function(){return C(e)}})}(e),function(e){e.addCommand("codesample",(function(){var t=e.selection.getNode();e.selection.isCollapsed()||f(t)?C(e):e.formatter.toggle("code")}))}(e),e.on("dblclick",(function(t){f(t.target)&&C(e)}))}))}(),function(){var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e,t){var r,o=e.dom,i=e.selection.getSelectedBlocks();i.length&&(r=o.getAttrib(i[0],"dir"),n.each(i,(function(e){o.getParent(e.parentNode,'*[dir="'+t+'"]',o.getRoot())||o.setAttrib(e,"dir",r!==t?t:null)})),e.nodeChanged())},o=(e="function",function(t){return typeof t===e}),i=function(){},a=function(e){return function(){return e}},u=a(!1),s=a(!0),c=function(){return l},l=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:u,isSome:u,isNone:s,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:n,orThunk:t,map:c,each:i,bind:c,exists:u,forall:s,filter:c,equals:e,equals_:e,toArray:function(){return[]},toString:a("none()")}}(),f=function(e){var t=a(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:u,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return f(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:l},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(u,(function(t){return n(e,t)}))}};return o},d={some:f,none:c,from:function(e){return null==e?l:f(e)}},p=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},h={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return p(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return p(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return p(n)},fromDom:p,fromPoint:function(e,t,n){return d.from(e.dom.elementFromPoint(t,n)).map(p)}};"undefined"!=typeof window?window:Function("return this;")();var m=function(e){return function(t){return function(e){return e.dom.nodeType}(t)===e}},g=m(3),v=m(9),y=m(11),b=o(Element.prototype.attachShadow)&&o(Node.prototype.getRootNode)?function(e){return h.fromDom(e.dom.getRootNode())}:function(e){return v(e)?e:(t=e,h.fromDom(t.dom.ownerDocument));var t},C=function(e){var t,n=b(e);return y(t=n)&&null!=t.dom.host?d.some(n):d.none()},x=function(e){return h.fromDom(e.dom.host)},w=function(e){var t=g(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r,o=t.ownerDocument;return C(h.fromDom(t)).fold((function(){return o.body.contains(t)}),(n=w,r=x,function(e){return n(r(e))}))},_=function(e,t){return function(e){return void 0!==e.style&&o(e.style.getPropertyValue)}(e)?e.style.getPropertyValue(t):""},S=function(e){return"rtl"===function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||w(e)?r:_(n,t)}(e,"direction")?"rtl":"ltr"},E=function(e,t){return function(n){var r=function(e){var r=h.fromDom(e.element);n.setActive(S(r)===t)};return e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}};t.add("directionality",(function(e){!function(e){e.addCommand("mceDirectionLTR",(function(){r(e,"ltr")})),e.addCommand("mceDirectionRTL",(function(){r(e,"rtl")}))}(e),function(e){e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return e.execCommand("mceDirectionLTR")},onSetup:E(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return e.execCommand("mceDirectionRTL")},onSetup:E(e,"rtl")})}(e)}))}(),function(){var e=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return{isFullscreen:function(){return null!==e.get()}}},r=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},o=function(e){return function(t){return typeof t===e}},i=r("string"),a=r("array"),u=o("boolean"),s=function(e){return!function(e){return null==e}(e)},c=o("function"),l=o("number"),f=function(){},d=function(e){return function(){return e}};function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var h=d(!1),m=d(!0),g=function(){return v},v=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:h,isSome:h,isNone:m,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:n,orThunk:t,map:g,each:f,bind:g,exists:h,forall:m,filter:g,equals:e,equals_:e,toArray:function(){return[]},toString:d("none()")}}(),y=function(e){var t=d(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:m,isNone:h,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return y(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:v},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(h,(function(t){return n(e,t)}))}};return o},b={some:y,none:g,from:function(e){return null==e?v:y(e)}},C=function(){return t=function(e){return e.unbind()},n=e(b.none()),r=function(){return n.get().each(t)},{clear:function(){r(),n.set(b.none())},isSet:function(){return n.get().isSome()},set:function(e){r(),n.set(b.some(e))}};var t,n,r},x=Array.prototype.push,w=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},_=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},S=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},E=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);x.apply(t,e[n])}return t}(w(e,t))},A=function(e){return function(e,t){return t>=0&&t<e.length?b.some(e[t]):b.none()}(e,0)},D=Object.keys,k=function(e){return void 0!==e.style&&c(e.style.getPropertyValue)},T=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},O={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return T(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return T(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return T(n)},fromDom:T,fromPoint:function(e,t,n){return b.from(e.dom.elementFromPoint(t,n)).map(T)}};"undefined"!=typeof window?window:Function("return this;")();var B=function(e){return function(t){return function(e){return e.dom.nodeType}(t)===e}},N=B(1),F=B(3),M=B(9),P=B(11),I=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},R=function(e){return O.fromDom(e.dom.ownerDocument)},L=function(e){return function(e){return b.from(e.dom.parentNode).map(O.fromDom)}(e).map(z).map((function(t){return S(t,(function(t){return n=t,!(e.dom===n.dom);var n}))})).getOr([])},z=function(e){return w(e.dom.childNodes,O.fromDom)},V=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode),H=d(V),$=V?function(e){return O.fromDom(e.dom.getRootNode())}:function(e){return M(e)?e:R(e)},j=function(e){var t,n=$(e);return P(t=n)&&s(t.dom.host)?b.some(n):b.none()},U=function(e){return O.fromDom(e.dom.host)},W=function(e){return s(e.dom.shadowRoot)},q=function(e){var t=F(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,r,o=t.ownerDocument;return j(O.fromDom(t)).fold((function(){return o.body.contains(t)}),(n=q,r=U,function(e){return n(r(e))}))},G=function(e,t,n){!function(e,t,n){if(!(i(n)||u(n)||l(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)},X=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},K=function(e,t){e.dom.removeAttribute(t)},Y=function(e,t){var n=e.dom;!function(e,t){for(var n=D(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(t,(function(e,t){!function(e,t,n){if(!i(n))throw new Error("CSS value must be a string: "+n);k(e)&&e.style.setProperty(t,n)}(n,t,e)}))},J=function(e,t){return k(e)?e.style.getPropertyValue(t):""},Q=function(e){var t,n,r=O.fromDom(function(e){if(H()&&s(e.target)){var t=O.fromDom(e.target);if(N(t)&&W(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return A(n)}}return b.from(e.target)}(e).getOr(e.target)),o=function(){return e.stopPropagation()},i=function(){return e.preventDefault()},a=(t=i,n=o,function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t(n.apply(null,e))});return function(e,t,n,r,o,i,a){return{target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:a}}(r,e.clientX,e.clientY,o,i,a,e)},Z=function(e,t,n,r,o){var i=function(e,t){return function(n){e(n)&&t(Q(n))}}(n,r);return e.dom.addEventListener(t,i,o),{unbind:p(ee,e,t,i,o)}},ee=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},te=m,ne=function(e,t,n){return function(e,t,n,r){return Z(e,t,n,r,!1)}(e,t,te,n)},re=function(e,t){return{left:e,top:t,translate:function(n,r){return re(e+n,t+r)}}},oe=re,ie=function(e){var t=void 0===e?window:e;return b.from(t.visualViewport)},ae=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},ue=function(e){var t=void 0===e?window:e,n=t.document,r=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return oe(n,r)}(O.fromDom(n));return ie(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,o=e.clientHeight;return ae(r.left,r.top,n,o)}),(function(e){return ae(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)}))},se=function(e,t,n){return ie(n).map((function(n){var r=function(e){return t(Q(e))};return n.addEventListener(e,r),{unbind:function(){return n.removeEventListener(e,r)}}})).getOrThunk((function(){return{unbind:f}}))},ce=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),le=tinymce.util.Tools.resolve("tinymce.Env"),fe=tinymce.util.Tools.resolve("tinymce.util.Delay"),de=function(e,t){e.fire("FullscreenStateChanged",{state:t})},pe=function(e){return e.getParam("fullscreen_native",!1,"boolean")},he=function(e){var t=O.fromDom(e.getElement());return j(t).map(U).getOrThunk((function(){return function(e){var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return O.fromDom(t)}(R(t))}))},me=function(e){return e.dom===(void 0!==(t=R(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},ge=function(e,t,n){return S(function(e,t){for(var n=c(t)?t:h,r=e.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=O.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,n),t)},ve=function(e){return function(e,t){var n,r=void 0===t?document:t.dom;return 1!==(n=r).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:w(r.querySelectorAll(e),O.fromDom)}(e)},ye=function(e,t){return function(e,t){return S(L(e),t)}(e,(function(e){return I(e,t)}))},be="data-ephox-mobile-fullscreen-style",Ce="position:absolute!important;",xe="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",we=le.os.isAndroid(),_e=function(e){var t,n,r,o,i=(n="background-color",r=(t=e).dom,""!==(o=window.getComputedStyle(r).getPropertyValue(n))||q(t)?o:J(r,n));return void 0!==i&&""!==i?"background-color:"+i+"!important":"background-color:rgb(255,255,255)!important;"},Se=function(e,t,n){var r,o,i=function(t){return function(n){var r=X(n,"style"),o=void 0===r?"no-styles":r.trim();o!==t&&(G(n,be,o),Y(n,e.parseStyle(t)))}},a=(r="*",ge(t,(function(e){return I(e,r)}),o)),u=E(a,(function(e){return ye(e,"*:not(.tox-silver-sink)")})),s=_e(n);_(u,i("display:none!important;")),_(a,i(Ce+xe+s)),i((!0===we?"":Ce)+xe+s)(t)},Ee=ce.DOM,Ae=ie().fold((function(){return{bind:f,unbind:f}}),(function(t){var n,r=(n=e(b.none()),{clear:function(){return n.set(b.none())},set:function(e){return n.set(b.some(e))},isSet:function(){return n.get().isSome()},on:function(e){return n.get().each(e)}}),o=C(),i=C(),a=fe.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){r.on((function(e){return Y(e,{top:t.offsetTop+"px",left:t.offsetLeft+"px",height:t.height+"px",width:t.width+"px"})}))}))}),50);return{bind:function(e){r.set(e),a(),o.set(se("resize",a)),i.set(se("scroll",a))},unbind:function(){r.on((function(){o.clear(),i.clear()})),r.clear()}}})),De=function(e,t){var n,r,o,i,a,u=document.body,s=document.documentElement,c=e.getContainer(),l=O.fromDom(c),f=he(e),d=t.get(),p=O.fromDom(e.getBody()),h=le.deviceType.isTouch(),m=c.style,g=e.iframeElement.style,v=function(e){e(u,"tox-fullscreen"),e(s,"tox-fullscreen"),e(c,"tox-fullscreen"),j(l).map((function(e){return U(e).dom})).each((function(t){e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},y=function(){var n,r;h&&(n=e.dom,r=ve("["+be+"]"),_(r,(function(e){var t=X(e,be);"no-styles"!==t?Y(e,n.parseStyle(t)):K(e,"style"),K(e,be)}))),v(Ee.removeClass),Ae.unbind(),b.from(t.get()).each((function(e){return e.fullscreenChangeHandler.unbind()}))};if(d)d.fullscreenChangeHandler.unbind(),pe(e)&&me(f)&&(r=R(f),(o=r.dom).exitFullscreen?o.exitFullscreen():o.msExitFullscreen?o.msExitFullscreen():o.webkitCancelFullScreen&&o.webkitCancelFullScreen()),g.width=d.iframeWidth,g.height=d.iframeHeight,m.width=d.containerWidth,m.height=d.containerHeight,m.top=d.containerTop,m.left=d.containerLeft,n=d.scrollPos,window.scrollTo(n.x,n.y),t.set(null),de(e,!1),y(),e.off("remove",y);else{var C=ne(R(f),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(n){pe(e)&&(me(f)||null===t.get()||De(e,t))})),x={scrollPos:(a=ue(window),{x:a.x,y:a.y}),containerWidth:m.width,containerHeight:m.height,containerTop:m.top,containerLeft:m.left,iframeWidth:g.width,iframeHeight:g.height,fullscreenChangeHandler:C};h&&Se(e.dom,l,p),g.width=g.height="100%",m.width=m.height="",v(Ee.addClass),Ae.bind(l),e.on("remove",y),t.set(x),pe(e)&&((i=f.dom).requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()),de(e,!0)}},ke=function(e,t){return function(n){n.setActive(null!==t.get());var r=function(e){return n.setActive(e.state)};return e.on("FullscreenStateChanged",r),function(){return e.off("FullscreenStateChanged",r)}}};t.add("fullscreen",(function(t){var r=e(null);return t.inline||(function(e,t){e.addCommand("mceFullScreen",(function(){De(e,t)}))}(t,r),function(e,t){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:ke(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:ke(e,t)})}(t,r),t.addShortcut("Meta+Shift+F","","mceFullScreen")),n(r)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("hr",(function(e){!function(e){e.addCommand("InsertHorizontalRule",(function(){e.execCommand("mceInsertContent",!1,"<hr />")}))}(e),function(e){e.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:function(){return e.execCommand("InsertHorizontalRule")}}),e.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:function(){return e.execCommand("InsertHorizontalRule")}})}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},n=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" "),u=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},s=function(e,t,n){return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",u(n.getMonth()+1,2))).replace("%d",u(n.getDate(),2))).replace("%H",""+u(n.getHours(),2))).replace("%M",""+u(n.getMinutes(),2))).replace("%S",""+u(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(a[n.getMonth()]))).replace("%b",""+e.translate(i[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},c=function(e,t){if(function(e){return e.getParam("insertdatetime_element",!1)}(e)){var n=s(e,t),r=void 0;r=/%[HMSIp]/.test(t)?s(e,"%Y-%m-%dT%H:%M"):s(e,"%Y-%m-%d");var o=e.dom.getParent(e.selection.getStart(),"time");o?function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)}(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(s(e,t))},l=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(e){var r,o,i=n(e),a=(r=function(e){var r=n(e);return r.length>0?r[0]:t(e)}(e),o=r,{get:function(){return o},set:function(e){o=e}});e.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(e){return e===a.get()},fetch:function(t){t(l.map(i,(function(t){return{type:"choiceitem",text:s(e,t),value:t}})))},onAction:function(t){c(e,a.get())},onItemAction:function(t,n){a.set(n),c(e,n)}});var u=function(t){return function(){a.set(t),c(e,t)}};e.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return l.map(i,(function(t){return{type:"menuitem",text:s(e,t),onAction:u(t)}}))}})};e.add("insertdatetime",(function(e){!function(e){e.addCommand("mceInsertDate",(function(){c(e,function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))}(e))})),e.addCommand("mceInsertTime",(function(){c(e,t(e))}))}(e),f(e)}))}(),function(){var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},o=function(e){return function(t){return typeof t===e}},i=r("string"),a=r("array"),u=(e=null,function(t){return e===t}),s=o("boolean"),c=o("function"),l=function(e){var t=e.getParam("link_assume_external_targets",!1);return s(t)&&t?1:!i(t)||"http"!==t&&"https"!==t?0:t},f=function(e){return e.getParam("default_link_target")},d=function(e){return e.getParam("target_list",!0)},p=function(e){return e.getParam("rel_list",[],"array")},h=function(e){return e.getParam("link_title",!0,"boolean")},m=function(e){return e.getParam("allow_unsafe_link_target",!1,"boolean")},g=function(e){return e.getParam("link_default_protocol","http","string")},v=function(){},y=function(e){return function(){return e}},b=y(!1),C=y(!0),x=function(){return w},w=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:b,isSome:b,isNone:C,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:y(null),getOrUndefined:y(void 0),or:n,orThunk:t,map:x,each:v,bind:x,exists:b,forall:C,filter:x,equals:e,equals_:e,toArray:function(){return[]},toString:y("none()")}}(),_=function(e){var t=y(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:C,isNone:b,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return _(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:w},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(b,(function(t){return n(e,t)}))}};return o},S={some:_,none:x,from:function(e){return null==e?w:_(e)}},E=Array.prototype.indexOf,A=Array.prototype.push,D=function(e,t){return function(e,t){return E.call(e,t)}(e,t)>-1},k=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);A.apply(t,e[n])}return t},T=function(e,t){return k(function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e,t))},O=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return S.none()},B=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},N=function(e,t){return e?S.some(t):S.none()},F=tinymce.util.Tools.resolve("tinymce.util.Tools"),M=function(e){return i(e.value)?e.value:""},P=function(e,t){var n=[];return F.each(e,(function(e){var r=function(e){return i(e.text)?e.text:i(e.title)?e.title:""}(e);if(void 0!==e.menu){var o=P(e.menu,t);n.push({text:r,items:o})}else{var a=t(e);n.push({text:r,value:a})}})),n},I=function(e){return void 0===e&&(e=M),function(t){return S.from(t).map((function(t){return P(t,e)}))}},R={sanitize:function(e){return I(M)(e)},sanitizeWith:I,createUi:function(e,t){return function(n){return{name:e,type:"listbox",label:t,items:n}}},getValue:M},L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},z=Object.keys,V=Object.hasOwnProperty,H=function(e,t,n,r){return function(e,t){for(var n=z(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(e,(function(e,o){(t(e,o)?n:r)(e,o)})),{}},$=function(e,t){return V.call(e,t)},j=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),U=function(e){return e&&"a"===e.nodeName.toLowerCase()},W=function(e){return U(e)&&!!X(e)},q=function(e,t){if(e.collapsed)return[];var n=e.cloneContents(),r=new j(n.firstChild,n),o=[],i=n.firstChild;do{t(i)&&o.push(i)}while(i=r.next());return o},G=function(e){return/^\w+:/i.test(e)},X=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},K=function(e,t){var n,r=["noopener"],o=e?e.split(/\s+/):[],i=function(e){return e.filter((function(e){return-1===F.inArray(r,e)}))},a=t?(n=i(n=o)).length>0?n.concat(r):r:i(o);return a.length>0?function(e){return F.trim(e.sort().join(" "))}(a):""},Y=function(e,t){return t=t||e.selection.getNode(),ee(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},J=function(e,t){return function(e){return e.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:e.getContent({format:"text"}))},Q=function(e){return F.grep(e,W).length>0},Z=function(e){var t=e.schema.getTextInlineElements();return 0===q(e.selection.getRng(),(function(e){return 1===e.nodeType&&!U(e)&&!$(t,e.nodeName.toLowerCase())})).length},ee=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},te=function(e,t){var n,r,o=L({},t);if(!(p(e).length>0)&&!1===m(e)){var i=K(o.rel,"_blank"===o.target);o.rel=i||null}return S.from(o.target).isNone()&&!1===d(e)&&(o.target=f(e)),o.href=(n=o.href,"http"!==(r=l(e))&&"https"!==r||G(n)?n:r+"://"+n),o},ne=function(e,t,n){var r=e.selection.getNode(),o=Y(e,r),i=te(e,function(e){return t=["title","rel","class","target"],n=function(t,n){return e[n].each((function(e){t[n]=e.length>0?e:null})),t},r={href:e.href},function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(t,(function(e){r=n(r,e)})),r;var t,n,r}(n));e.undoManager.transact((function(){n.href===t.href&&t.attach(),o?(e.focus(),function(e,t,n,r){n.each((function(e){t.hasOwnProperty("innerText")?t.innerText=e:t.textContent=e})),e.dom.setAttribs(t,r),e.selection.select(t)}(e,o,n.text,i)):function(e,t,n,r){ee(t)?ue(e,t,r):n.fold((function(){e.execCommand("mceInsertLink",!1,r)}),(function(t){e.insertContent(e.dom.createHTML("a",r,e.dom.encode(t)))}))}(e,r,n.text,i)}))},re=function(e){var t=e.class,n=e.href,r=e.rel,o=e.target,i=e.text,a=e.title;return function(e,t){var n,r={};return H(e,t,(n=r,function(e,t){n[t]=e}),v),r}({class:t.getOrNull(),href:n,rel:r.getOrNull(),target:o.getOrNull(),text:i.getOrNull(),title:a.getOrNull()},(function(e,t){return!1===u(e)}))},oe=function(e,t,n){e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,re(n)):ne(e,t,n)},ie=function(e){e.hasPlugin("rtc",!0)?e.execCommand("unlink"):function(e){e.undoManager.transact((function(){var t=e.selection.getNode();ee(t)?ae(e,t):function(e){var t=e.dom,n=e.selection,r=n.getBookmark(),o=n.getRng().cloneRange(),i=t.getParent(o.startContainer,"a[href]",e.getBody()),a=t.getParent(o.endContainer,"a[href]",e.getBody());i&&o.setStartBefore(i),a&&o.setEndAfter(a),n.setRng(o),e.execCommand("unlink"),n.moveToBookmark(r)}(e),e.focus()}))}(e)},ae=function(e,t){var n=e.dom.select("img",t)[0];if(n){var r=e.dom.getParents(n,"a[href]",t)[0];r&&(r.parentNode.insertBefore(n,r),e.dom.remove(r))}},ue=function(e,t,n){var r=e.dom.select("img",t)[0];if(r){var o=e.dom.create("a",n);r.parentNode.insertBefore(o,r),o.appendChild(r)}},se=function(e){return $(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},ce=function(e,t){return O(t,(function(t){return se(t)?ce(e,t.items):N(t.value===e,t)}))},le=function(e,t,n,r){var o=r[t],i=e.length>0;return void 0!==o?ce(o,n).map((function(t){return{url:{value:t.value,meta:{text:i?e:t.text,attach:v}},text:i?e:t.text}})):S.none()},fe=function(e,t){var n={text:e.text,title:e.title},r=function(e){var t,r=(t=e.url,N(n.text.length<=0,S.from(t.meta.text).getOr(t.value))),o=function(e){return N(n.title.length<=0,S.from(e.meta.title).getOr(""))}(e.url);return r.isSome()||o.isSome()?S.some(L(L({},r.map((function(e){return{text:e}})).getOr({})),o.map((function(e){return{title:e}})).getOr({}))):S.none()},o=function(e,r){var o,i,a=(o=t,i=r.name,"link"===i?o.link:"anchor"===i?o.anchor:S.none()).getOr([]);return le(n.text,r.name,a,e)};return{onChange:function(e,t){var i=t.name;return"url"===i?r(e()):D(["anchor","link"],i)?o(e(),t):"text"===i||"title"===i?(n[i]=e()[i],S.none()):S.none()}}},de=tinymce.util.Tools.resolve("tinymce.util.Delay"),pe=tinymce.util.Tools.resolve("tinymce.util.Promise"),he=function(e){var t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?S.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(e){return L(L({},e),{href:"mailto:"+t})}}):S.none()},me=function(e,t){return O([he,(n=l(e),r=g(e),function(e){var t=e.href;return 1===n&&!G(t)||0===n&&/^\s*www(\.|\d\.)/i.test(t)?S.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+r+":// prefix?",preprocess:function(e){return L(L({},e),{href:r+"://"+t})}}):S.none()})],(function(e){return e(t)})).fold((function(){return pe.resolve(t)}),(function(n){return new pe((function(r){!function(e,t,n){var r=e.selection.getRng();de.setEditorTimeout(e,(function(){e.windowManager.confirm(t,(function(t){e.selection.setRng(r),n(t)}))}))}(e,n.message,(function(e){r(e?n.preprocess(t):t)}))}))}));var n,r},ge=function(e){var t=e.dom.select("a:not([href])"),n=T(t,(function(e){var t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?S.some([{text:"None",value:""}].concat(n)):S.none()},ve=function(e){var t=function(e){return e.getParam("link_class_list",[],"array")}(e);return t.length>0?R.sanitize(t):S.none()},ye=tinymce.util.Tools.resolve("tinymce.util.XHR"),be=function(e){var t=function(t){return e.convertURL(t.value||t.url,"href")},n=function(e){return e.getParam("link_list")}(e);return new pe((function(e){i(n)?ye.send({url:n,success:function(t){return e(function(e){try{return S.some(JSON.parse(e))}catch(t){return S.none()}}(t))},error:function(t){return e(S.none())}}):c(n)?n((function(t){return e(S.some(t))})):e(S.from(n))})).then((function(e){return e.bind(R.sanitizeWith(t)).map((function(e){if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))}))},Ce=function(e,t){var n=p(e);if(n.length>0){var r=t.is("_blank");return(!1===m(e)?R.sanitizeWith((function(e){return K(R.getValue(e),r)})):R.sanitize)(n)}return S.none()},xe=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],we=function(e){var t=d(e);return a(t)?R.sanitize(t).orThunk((function(){return S.some(xe)})):!1===t?S.none():S.some(xe)},_e=function(e,t,n){var r=e.getAttrib(t,n);return null!==r&&r.length>0?S.some(r):S.none()},Se=function(e,t){return be(e).then((function(n){var r=function(e,t){var n=e.dom,r=Z(e)?S.some(J(e.selection,t)):S.none(),o=t?S.some(n.getAttrib(t,"href")):S.none(),i=t?S.from(n.getAttrib(t,"target")):S.none(),a=_e(n,t,"rel"),u=_e(n,t,"class");return{url:o,text:r,title:_e(n,t,"title"),target:i,rel:a,linkClass:u}}(e,t);return{anchor:r,catalogs:{targets:we(e),rels:Ce(e,r.target),classes:ve(e),anchor:ge(e),link:n},optNode:S.from(t),flags:{titleEnabled:h(e)}}}))},Ee=function(e){(function(e){var t=Y(e);return Se(e,t)})(e).then((function(t){var n=function(e,t){return function(n){var r=n.getData();if(!r.url.value)return ie(e),void n.close();var o=function(e){return S.from(r[e]).filter((function(n){return!t.anchor[e].is(n)}))},i={href:r.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},a={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:v};me(e,i).then((function(t){oe(e,a,t)})),n.close()}}(e,t);return function(e,t,n){var r=e.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),o=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=function(e,t){var n=e.anchor,r=n.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:r,link:r,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}}(e,S.from(f(n))),a=e.catalogs,u=fe(i,a);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:k([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,B([a.anchor.map(R.createUi("anchor","Anchors")),a.rels.map(R.createUi("rel","Rel")),a.targets.map(R.createUi("target","Open link in...")),a.link.map(R.createUi("link","Link list")),a.classes.map(R.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(e,t){var n=t.name;u.onChange(e.getData,{name:n}).each((function(t){e.setData(t)}))},onSubmit:t}}(t,n,e)})).then((function(t){e.windowManager.open(t)}))},Ae=function(e){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(t,n)},De=function(e,t){return e.dom.getParent(t,"a[href]")},ke=function(e){return De(e,e.selection.getStart())},Te=function(e,t){if(t){var n=X(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else Ae(t.href)}},Oe=function(e){return function(){Ee(e)}},Be=function(e){return function(){Te(e,ke(e))}},Ne=function(e,t){return e.on("NodeChange",t),function(){return e.off("NodeChange",t)}},Fe=function(e){return function(t){return Ne(e,(function(){t.setActive(!e.mode.isReadOnly()&&null!==Y(e,e.selection.getNode()))}))}},Me=function(e){return function(t){var n=function(){return t.setDisabled(null===Y(e,e.selection.getNode()))};return n(),Ne(e,n)}},Pe=function(e){return function(t){var n=function(t){return Q(t)||(n=e.selection.getRng(),q(n,W).length>0);var n},r=e.dom.getParents(e.selection.getStart());return t.setDisabled(!n(r)),Ne(e,(function(e){return t.setDisabled(!n(e.parents))}))}};t.add("link",(function(e){!function(e){e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Oe(e),onSetup:Fe(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Be(e),onSetup:Me(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return ie(e)},onSetup:Pe(e)})}(e),function(e){e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Be(e),onSetup:Me(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Oe(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return ie(e)},onSetup:Pe(e)})}(e),function(e){e.ui.registry.addContextMenu("link",{update:function(t){return Q(e.dom.getParents(t,"a"))?"link unlink openlink":"link"}})}(e),function(e){var t=function(t){var n=e.selection.getNode();return t.setDisabled(!Y(e,n)),v};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Fe(e)},label:"Link",predicate:function(t){return!!Y(e,t)&&function(e){return e.getParam("link_context_toolbar",!1,"boolean")}(e)},initValue:function(){var t=Y(e);return t?X(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(t){var n=e.selection.getNode();return t.setActive(!!Y(e,n)),Fe(e)(t)},onAction:function(t){var n=Y(e),r=t.getValue();if(n)e.undoManager.transact((function(){e.dom.setAttrib(n,"href",r),e.selection.collapse(!1),t.hide()}));else{var o={href:r,attach:v},i=Z(e)?S.some(J(e.selection,n)).filter((function(e){return e.length>0})).or(S.from(r)):S.none();oe(e,o,{href:r,text:i,title:S.none(),rel:S.none(),target:S.none(),class:S.none()}),t.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:function(t){ie(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:function(t){Be(e)(),t.hide()}}]})}(e),function(e){e.on("click",(function(t){var r=De(e,t.target);r&&n.metaKeyPressed(t)&&(t.preventDefault(),Te(e,r))})),e.on("keydown",(function(t){var n=ke(e);n&&13===t.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)&&(t.preventDefault(),Te(e,n))}))}(e),function(e){e.addCommand("mceLink",(function(){!function(e){return e.getParam("link_quicklink",!1,"boolean")}(e)?Oe(e)():e.fire("contexttoolbar-show",{toolbarKey:"quicklink"})}))}(e),function(e){e.addShortcut("Meta+K","",(function(){e.execCommand("mceLink")}))}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},n=function(e){return function(t){return typeof t===e}},r=t("string"),o=t("object"),i=t("array"),a=n("boolean"),u=n("function"),s=n("number"),c=function(){},l=function(e){return function(){return e}},f=function(e){return function(t){return!e(t)}},d=l(!1),p=l(!0),h=function(){return m},m=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:d,isSome:d,isNone:p,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:t,map:h,each:c,bind:h,exists:d,forall:p,filter:h,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")}}(),g=function(e){var t=l(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:p,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return g(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(d,(function(t){return n(e,t)}))}};return o},v={some:g,none:h,from:function(e){return null==e?m:g(e)}},y=Array.prototype.slice,b=Array.prototype.push,C=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},x=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},w=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},_=function(e,t,n){return x(e,(function(e){n=t(n,e)})),n},S=function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return v.some(i);if(n(i,r))break}return v.none()},E=function(e,t){return S(e,t,d)},A=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);b.apply(t,e[n])}return t}(C(e,t))},D=function(e){var t=y.call(e,0);return t.reverse(),t},k=function(e,t){return t>=0&&t<e.length?v.some(e[t]):v.none()},T=function(e){return k(e,0)},O=function(e){return k(e,e.length-1)},B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var N,F=function(){return M(0,0)},M=function(e,t){return{major:e,minor:t}},P={nu:M,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?F():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return M(r(1),r(2))}(e,n)},unknown:F},I=function(e,t){var n=String(t).toLowerCase();return E(e,(function(e){return e.search(n)}))},R=function(e,t){return I(e,t).map((function(e){var n=P.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},L=function(e,t){return I(e,t).map((function(e){var n=P.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},z=function(e,t){return-1!==e.indexOf(t)},V=(N=/^\s+|\s+$/g,function(e){return e.replace(N,"")}),H=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$=function(e){return function(t){return z(t,e)}},j=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return z(e,"edge/")&&z(e,"chrome")&&z(e,"safari")&&z(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,H],search:function(e){return z(e,"chrome")&&!z(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return z(e,"msie")||z(e,"trident")}},{name:"Opera",versionRegexes:[H,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$("firefox")},{name:"Safari",versionRegexes:[H,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(z(e,"safari")||z(e,"mobile/"))&&z(e,"applewebkit")}}],U=[{name:"Windows",search:$("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return z(e,"iphone")||z(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:$("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$("linux"),versionRegexes:[]},{name:"Solaris",search:$("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],W={browsers:l(j),oses:l(U)},q="Edge",G="Chrome",X="Opera",K="Firefox",Y="Safari",J=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r(q),isChrome:r(G),isIE:r("IE"),isOpera:r(X),isFirefox:r(K),isSafari:r(Y)}},Q={unknown:function(){return J({current:void 0,version:P.unknown()})},nu:J,edge:l(q),chrome:l(G),ie:l("IE"),opera:l(X),firefox:l(K),safari:l(Y)},Z="Windows",ee="Android",te="Linux",ne="Solaris",re="FreeBSD",oe="ChromeOS",ie=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r(Z),isiOS:r("iOS"),isAndroid:r(ee),isOSX:r("OSX"),isLinux:r(te),isSolaris:r(ne),isFreeBSD:r(re),isChromeOS:r(oe)}},ae={unknown:function(){return ie({current:void 0,version:P.unknown()})},nu:ie,windows:l(Z),ios:l("iOS"),android:l(ee),linux:l(te),osx:l("OSX"),solaris:l(ne),freebsd:l(re),chromeos:l(oe)},ue=function(e,t){var n=W.browsers(),r=W.oses(),o=R(n,e).fold(Q.unknown,Q.nu),i=L(r,e).fold(ae.unknown,ae.nu),a=function(e,t,n,r){var o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),u=a||r("(pointer:coarse)"),s=o||!i&&a&&r("(min-device-width:768px)"),c=i||a&&!s,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!c&&!s&&!f;return{isiPad:l(o),isiPhone:l(i),isTablet:l(s),isPhone:l(c),isTouch:l(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:l(f),isDesktop:l(d)}}(i,o,e,t);return{browser:o,os:i,deviceType:a}},se=function(e){return window.matchMedia(e).matches},ce=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}}((function(){return ue(navigator.userAgent,se)})),le=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},fe={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return le(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return le(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return le(n)},fromDom:le,fromPoint:function(e,t,n){return v.from(e.dom.elementFromPoint(t,n)).map(le)}},de=function(e,t){return e.dom===t.dom},pe=function(e,t){return n=e.dom,r=t.dom,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(n,r,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,r},he=function(e,t){return ce().browser.isIE()?pe(e,t):function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)}(e,t)},me=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ge=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ve=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ye=tinymce.util.Tools.resolve("tinymce.util.VK"),be=Object.keys,Ce=function(e,t){for(var n=be(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},xe=function(e,t){var n={};return function(e,t,n,r){Ce(e,(function(e,o){(t(e,o)?n:r)(e,o)}))}(e,t,function(e){return function(t,n){e[n]=t}}(n),c),n};"undefined"!=typeof window?window:Function("return this;")();var we,_e=function(e){return e.dom.nodeName.toLowerCase()},Se=(we=1,function(e){return function(e){return e.dom.nodeType}(e)===we}),Ee=function(e,t){var n=e.dom;Ce(t,(function(e,t){!function(e,t,n){if(!(r(n)||a(n)||s(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)}))},Ae=function(e){return _(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})},De=function(e){return v.from(e.dom.parentNode).map(fe.fromDom)},ke=function(e){return C(e.dom.childNodes,fe.fromDom)},Te=function(e,t){var n=e.dom.childNodes;return v.from(n[t]).map(fe.fromDom)},Oe=function(e){return Te(e,0)},Be=function(e){return Te(e,e.dom.childNodes.length-1)},Ne=function(e,t){De(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},Fe=function(e,t){e.dom.appendChild(t.dom)},Me=function(e,t){x(t,(function(t){Fe(e,t)}))},Pe=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ie=function(e){return function(e,t){return fe.fromDom(e.dom.cloneNode(t))}(e,!0)},Re=function(e,t){var n=function(e,t){var n=fe.fromTag(t),r=Ae(e);return Ee(n,r),n}(e,t);Ne(e,n);var r=ke(e);return Me(n,r),Pe(e),n},Le=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ze=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ve=function(e){return function(t){return t&&t.nodeName.toLowerCase()===e}},He=function(e){return function(t){return t&&e.test(t.nodeName)}},$e=function(e){return e&&3===e.nodeType},je=He(/^(OL|UL|DL)$/),Ue=He(/^(OL|UL)$/),We=Ve("ol"),qe=He(/^(LI|DT|DD)$/),Ge=He(/^(DT|DD)$/),Xe=He(/^(TH|TD)$/),Ke=Ve("br"),Ye=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},Je=function(e,t){return e&&e.nodeName in t},Qe=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},Ze=function(e,t){return e.isChildOf(t,e.getRoot())},et=function(e,t){var n,r,o,i=e.dom,a=e.schema.getBlockElements(),u=i.createFragment(),s=function(e){var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t}(e);if(s&&((r=i.create(s)).tagName===s.toUpperCase()&&i.setAttribs(r,function(e){return e.getParam("forced_root_block_attrs",{})}(e)),Je(t.firstChild,a)||u.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;o||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),Je(n,a)?(u.appendChild(n),r=null):s?(r||(r=i.create(s),u.appendChild(r)),r.appendChild(n)):u.appendChild(n)}return s?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):u.appendChild(i.create("br")),u},tt=Le.DOM,nt=function(e,t){me(t,"dd")?Re(t,"dt"):me(t,"dt")&&De(t).each((function(n){return function(e,t,n){var r=tt.select('span[data-mce-type="bookmark"]',t),o=et(e,n),i=tt.createRng();i.setStartAfter(n),i.setEndAfter(t);for(var a,u=i.extractContents(),s=u.firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&e.dom.isEmpty(s)){tt.remove(s);break}e.dom.isEmpty(u)||tt.insertAfter(u,t),tt.insertAfter(o,t),Qe(e.dom,n.parentNode)&&(a=n.parentNode,ze.each(r,(function(e){a.parentNode.insertBefore(e,n.parentNode)})),tt.remove(a)),tt.remove(n),Qe(e.dom,t)&&tt.remove(t)}(e,n.dom,t.dom)}))},rt=function(e){me(e,"dt")&&Re(e,"dd")},ot=function(e,t){if($e(e))return{container:e,offset:t};var n=ge.getNode(e,t);return $e(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&$e(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&$e(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},it=function(e){var t=e.cloneRange(),n=ot(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=ot(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},at=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ut=function(e,t){var n=t||e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",lt(e,n))},st=function(e){var t=ut(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return ze.grep(e.querySelectorAll("ol,ul,dl"),(function(e){return je(e)}))}(t):ze.grep(n,(function(e){return je(e)&&t!==e}))},ct=function(e){var t=e.selection.getSelectedBlocks();return ze.grep(function(e,t){var n=ze.map(t,(function(t){return e.dom.getParent(t,"li,dd,dt",lt(e,t))||t}));return at.unique(n)}(e,t),(function(e){return qe(e)}))},lt=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},ft=function(e,t){var n=e.dom.getParents(t,"ol,ul",lt(e,t));return O(n)},dt=function(e){var t=function(e){var t=ft(e,e.selection.getStart()),n=w(e.selection.getSelectedBlocks(),Ue);return t.toArray().concat(n)}(e);return pt(e,t)},pt=function(e,t){var n=C(t,(function(t){return ft(e,t).getOr(t)}));return at.unique(n)},ht=function(e,t,n){return e.isSome()&&t.isSome()?v.some(n(e.getOrDie(),t.getOrDie())):v.none()},mt=function(e,t,n){return e.fire("ListMutation",{action:t,element:n})},gt=function(e,t,n){if(!r(n))throw new Error("CSS value must be a string: "+n);(function(e){return void 0!==e.style&&u(e.style.getPropertyValue)})(e)&&e.style.setProperty(t,n)},vt=function(e,t){Fe(e.item,t.list)},yt=function(e,t){var n={list:fe.fromTag(t,e),item:fe.fromTag("li",e)};return Fe(n.list,n.item),n},bt=function(e,t,n){var r=t.slice(0,n.depth);return O(r).each((function(t){!function(e,t){Fe(e.list,t),e.item=t}(t,function(e,t,n){var r=fe.fromTag("li",e);return Ee(r,t),Me(r,n),r}(e,n.itemAttributes,n.content)),function(e,t){_e(e.list)!==t.listType&&(e.list=Re(e.list,t.listType)),Ee(e.list,t.listAttributes)}(t,n)})),r},Ct=function(e,t,n){var r,o=function(e,t,n){for(var r=[],o=0;o<n;o++)r.push(yt(e,t.listType));return r}(e,n,n.depth-t.length);return function(e){for(var t=1;t<e.length;t++)vt(e[t-1],e[t])}(o),function(e,t){for(var n=0;n<e.length-1;n++)r=e[n].item,o="list-style-type",i="none",a=void 0,a=r.dom,gt(a,o,i);var r,o,i,a;O(e).each((function(e){Ee(e.list,t.listAttributes),Ee(e.item,t.itemAttributes),Me(e.item,t.content)}))}(o,n),r=o,ht(O(t),T(r),vt),t.concat(o)},xt=function(e){return me(e,"OL,UL")},wt=function(e){return Oe(e).map(xt).getOr(!1)},_t=function(e){return e.depth>0},St=function(e){return e.isSelected},Et=function(e){var t=ke(e),n=Be(e).map(xt).getOr(!1)?t.slice(0,-1):t;return C(n,Ie)},At=function(e){return x(e,(function(t,n){(function(e,t){var n=e[t].depth,r=function(e){return e.depth===n&&!e.dirty},o=function(e){return e.depth<n};return S(D(e.slice(0,t)),r,o).orThunk((function(){return S(e.slice(t+1),r,o)}))})(e,n).fold((function(){t.dirty&&function(e){e.listAttributes=xe(e.listAttributes,(function(e,t){return"start"!==t}))}(t)}),(function(e){return r=e,(n=t).listType=r.listType,void(n.listAttributes=B({},r.listAttributes));var n,r}))})),e},Dt=function(e,t,n,r){return Oe(r).filter(xt).fold((function(){t.each((function(e){de(e.start,r)&&n.set(!0)}));var o=function(e,t,n){return De(e).filter(Se).map((function(r){return{depth:t,dirty:!1,isSelected:n,content:Et(e),itemAttributes:Ae(e),listAttributes:Ae(r),listType:_e(r)}}))}(r,e,n.get());t.each((function(e){de(e.end,r)&&n.set(!1)}));var i=Be(r).filter(xt).map((function(r){return kt(e,t,n,r)})).getOr([]);return o.toArray().concat(i)}),(function(r){return kt(e,t,n,r)}))},kt=function(e,t,n,r){return A(ke(r),(function(r){return(xt(r)?kt:Dt)(e+1,t,n,r)}))},Tt=function(e,t){var n=At(t);return C(n,(function(t){var n,r,o,i=(n=t.content,o=(r||document).createDocumentFragment(),x(n,(function(e){o.appendChild(e.dom)})),fe.fromDom(o));return fe.fromDom(et(e,i.dom))}))},Ot=function(e,t){var n=At(t);return function(e,t){var n=_(t,(function(t,n){return n.depth>t.length?Ct(e,t,n):bt(e,t,n)}),[]);return T(n).map((function(e){return e.list}))}(e.contentDocument,n).toArray()},Bt=function(e,t,n){var r=function(e,t){var n,r=(n=!1,{get:function(){return n},set:function(e){n=e}});return C(e,(function(e){return{sourceList:e,entries:kt(0,t,r,e)}}))}(t,function(e){var t=C(ct(e),fe.fromDom);return ht(E(t,f(wt)),E(D(t),f(wt)),(function(e,t){return{start:e,end:t}}))}(e));x(r,(function(t){!function(e,t){x(w(e,St),(function(e){return function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0}(t,e)}))}(t.entries,n);var r,o=function(e,t){return A(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],s=t(u);s!==n&&(r.push(o),o=[]),n=s,o.push(u)}return 0!==o.length&&r.push(o),r}(t,_t),(function(t){return T(t).map(_t).getOr(!1)?Ot(e,t):Tt(e,t)}))}(e,t.entries);x(o,(function(t){mt(e,"Indent"===n?"IndentList":"OutdentList",t.dom)})),r=t.sourceList,x(o,(function(e){Ne(r,e)})),Pe(t.sourceList)}))},Nt=function(e,t){var n=C(dt(e),fe.fromDom),r=C(function(e){return w(ct(e),Ge)}(e),fe.fromDom),o=!1;if(n.length||r.length){var i=e.selection.getBookmark();Bt(e,n,t),function(e,t,n){x(n,"Indent"===t?rt:function(t){return nt(e,t)})}(e,t,r),e.selection.moveToBookmark(i),e.selection.setRng(it(e.selection.getRng())),e.nodeChanged(),o=!0}return o},Ft=function(e){return Nt(e,"Indent")},Mt=function(e){return Nt(e,"Outdent")},Pt=function(e){return Nt(e,"Flatten")},It=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Rt=Le.DOM,Lt=function(e){var t={},n=function(n){var r,o,i;o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1===o.nodeType&&(r=Rt.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[i]):Rt.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=i};return n(!0),e.collapsed||n(),t},zt=function(e){var t=function(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,Rt.remove(o),!n.hasChildNodes()&&Rt.isBlock(n)&&n.appendChild(Rt.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)};t(!0),t();var n=Rt.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),it(n)},Vt=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ht=function(e){return/\btox\-/.test(e.className)},$t=function(e,t,n){var r=function(e){var r=S(e.parents,je,Xe).filter((function(e){return e.nodeName===t&&!Ht(e)})).isSome();n(r)},o=e.dom.getParents(e.selection.getNode());return r({parents:o}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}},jt=function(e,t){ze.each(t,(function(t,n){e.setAttribute(n,t)}))},Ut=function(e,t,n){!function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)}(e,t,n),function(e,t,n){jt(t,n["list-attributes"]),ze.each(e.select("li",t),(function(e){jt(e,n["list-item-attributes"])}))}(e,t,n)},Wt=function(e,t,n,r){var o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&Ke(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(Ye(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},qt=function(e,t,n){var r=e.selection.getRng(),o="LI",i=lt(e,e.selection.getStart(!0)),a=e.dom;if("false"!==a.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(o="DT");var u=Lt(r),s=function(e,t,n){for(var r,o=[],i=e.dom,a=Wt(e,t,!0,n),u=Wt(e,t,!1,n),s=[],c=a;c&&(s.push(c),c!==u);c=c.nextSibling);return ze.each(s,(function(t){if(Ye(e,t))return o.push(t),void(r=null);if(i.isBlock(t)||Ke(t))return Ke(t)&&i.remove(t),void(r=null);var a=t.nextSibling;It.isBookmarkNode(t)&&(je(a)||Ye(e,a)||!a&&t.parentNode===n)?r=null:(r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))})),o}(e,r,i);ze.each(s,(function(r){var i,u=r.previousSibling,s=r.parentNode;qe(s)||(u&&je(u)&&u.nodeName===t&&function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(null===o?"":o)}(a,u,n)?(i=u,r=a.rename(r,o),u.appendChild(r)):(i=a.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=a.rename(r,o)),function(e,t,n){ze.each(n,(function(n){var r;return e.setStyle(t,((r={})[n]="",r))}))}(a,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ut(a,i,n),Xt(e.dom,i))})),e.selection.setRng(zt(u))}},Gt=function(e,t,n){return function(e,t){return e&&t&&je(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&(r=n,t.className===r.className);var r},Xt=function(e,t){var n,r;if(n=t.nextSibling,Gt(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,Gt(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},Kt=function(e,t,n,r,o){var i=je(t);if(i&&t.nodeName===r&&!Yt(o))Pt(e);else{qt(e,r,o);var a=Lt(e.selection.getRng(!0)),u=i?function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}([t],n):n;ze.each(u,(function(t){!function(e,t,n,r){if(t.nodeName!==n){var o=e.dom.rename(t,n);Ut(e.dom,o,r),mt(e,Vt(n),o)}else Ut(e.dom,t,r),mt(e,Vt(n),t)}(e,t,r,o)})),e.selection.setRng(zt(a))}},Yt=function(e){return"list-style-type"in e},Jt=function(e,t,n){var r=ut(e),i=st(e),a=o(n)?n:{};i.length>0?Kt(e,r,i,t,a):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||Yt(r)||Ht(t)){var o=Lt(e.selection.getRng(!0));Ut(e.dom,t,r);var i=e.dom.rename(t,n);Xt(e.dom,i),e.selection.setRng(zt(o)),qt(e,n,r),mt(e,Vt(n),i)}else Pt(e);else qt(e,n,r),mt(e,Vt(n),t)}(e,r,t,a)},Qt=Le.DOM,Zt=function(e,t){ze.each(ze.grep(e.select("ol,ul",t)),(function(t){!function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),Qe(e,r)&&Qt.remove(r)):Qt.setStyle(r,"listStyleType","none")),je(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}(e,t)}))},en=function(e,t,n,r){var o=t.startContainer,i=t.startOffset;if($e(o)&&(n?i<o.data.length:i>0))return o;var a=e.schema.getNonEmptyElements();1===o.nodeType&&(o=ge.getNode(o,i));var u=new ve(o,r);for(n&&function(e,t){return!!Ke(t)&&e.isBlock(t.nextSibling)&&!Ke(t.previousSibling)}(e.dom,o)&&u.next();o=u[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(a[o.nodeName])return o;if($e(o)&&o.data.length>0)return o}},tn=function(e,t){var n=t.childNodes;return 1===n.length&&!je(n[0])&&e.isBlock(n[0])},nn=function(e,t,n){var r,o=tn(e,n)?n.firstChild:n;if(function(e,t){tn(e,t)&&e.remove(t.firstChild,!0)}(e,t),!Qe(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},rn=function(e,t,n){var r,o=t.parentNode;if(Ze(e,t)&&Ze(e,n)){je(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&Ke(o.previousSibling)&&e.remove(o.previousSibling);var i=n.lastChild;i&&Ke(i)&&t.hasChildNodes()&&e.remove(i),Qe(e,n,!0)&&e.$(n).empty(),nn(e,t,n),r&&n.appendChild(r);var a=he(fe.fromDom(n),fe.fromDom(t))?e.getParents(t,je,n):[];e.remove(t),x(a,(function(t){Qe(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},on=function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),rn(e.dom,t,n),e.selection.setCursorLocation(n,0)}(e,n,r);else{var i=Lt(t);rn(o,n,r),e.selection.setRng(zt(i))}},an=function(e,t){var n=e.dom,r=e.selection,o=r.getStart(),i=lt(e,o),a=n.getParent(r.getStart(),"LI",i);if(a){var u=a.parentNode;if(u===e.getBody()&&Qe(n,u))return!0;var s=it(r.getRng()),c=n.getParent(en(e,s,t,i),"LI",i);if(c&&c!==a)return e.undoManager.transact((function(){var n;t?on(e,s,c,a):(n=a).parentNode.firstChild===n?Mt(e):function(e,t,n,r){var o=Lt(t);rn(e.dom,n,r);var i=zt(o);e.selection.setRng(i)}(e,s,a,c)})),!0;if(!c&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact((function(){Pt(e)})),!0}return!1},un=function(e,t){return an(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=lt(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=it(e.selection.getRng()),u=n.getParent(en(e,a,t,o),"LI",o);if(u)return e.undoManager.transact((function(){!function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)}(n,i,o),Xt(n,u.parentNode),e.selection.select(u,!0),e.selection.collapse(t)})),!0}return!1}(e,t)},sn=function(e,t){return e.selection.isCollapsed()?un(e,t):function(e){var t=e.selection.getStart(),n=lt(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||ct(e).length>0)&&(e.undoManager.transact((function(){e.execCommand("Delete"),Zt(e.dom,e.getBody())})),!0)}(e)},cn=function(e){var t=D(V(e).split("")),n=C(t,(function(e,t){var n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*n}));return _(n,(function(e,t){return e+t}),0)},ln=function(e){if(--e<0)return"";var t=e%26,n=Math.floor(e/26);return ln(n)+String.fromCharCode("A".charCodeAt(0)+t)},fn=function(e){var t,n,r=ut(e);We(r)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(t={start:e.dom.getAttrib(r,"start","1"),listStyleType:v.some(e.dom.getStyle(r,"list-style-type"))},n=parseInt(t.start,10),t.listStyleType.is("upper-alpha")?ln(n):t.listStyleType.is("lower-alpha")?ln(n).toLowerCase():t.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){(function(e){switch(function(e){return/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:function(e){return/^[a-z]+$/.test(e)}(e)?1:e.length>0?4:3}(e)){case 2:return v.some({listStyleType:v.none(),start:e});case 0:return v.some({listStyleType:v.some("upper-alpha"),start:cn(e).toString()});case 1:return v.some({listStyleType:v.some("lower-alpha"),start:cn(e).toString()});case 3:return v.some({listStyleType:v.none(),start:""});case 4:return v.none()}})(t.getData().start).each((function(t){e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},dn=function(e,t){return function(){var n=ut(e);return n&&n.nodeName===t}},pn=function(e){e.addCommand("mceListProps",(function(){fn(e)}))},hn=function(e){e.on("BeforeExecCommand",(function(t){var n=t.command.toLowerCase();"indent"===n?Ft(e):"outdent"===n&&Mt(e)})),e.addCommand("InsertUnorderedList",(function(t,n){Jt(e,"UL",n)})),e.addCommand("InsertOrderedList",(function(t,n){Jt(e,"OL",n)})),e.addCommand("InsertDefinitionList",(function(t,n){Jt(e,"DL",n)})),e.addCommand("RemoveList",(function(){Pt(e)})),pn(e),e.addCommand("mceListUpdate",(function(t,n){o(n)&&function(e,t){var n=ut(e);e.undoManager.transact((function(){o(t.styles)&&e.dom.setStyles(n,t.styles),o(t.attrs)&&Ce(t.attrs,(function(t,r){return e.dom.setAttrib(n,r,t)}))}))}(e,n)})),e.addQueryStateHandler("InsertUnorderedList",dn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",dn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",dn(e,"DL"))},mn=function(e){(function(e){return e.getParam("lists_indent_on_tab",!0)})(e)&&function(e){e.on("keydown",(function(t){t.keyCode!==ye.TAB||ye.metaKeyPressed(t)||e.undoManager.transact((function(){(t.shiftKey?Mt(e):Ft(e))&&t.preventDefault()}))}))}(e),function(e){e.on("keydown",(function(t){t.keyCode===ye.BACKSPACE?sn(e,!1)&&t.preventDefault():t.keyCode===ye.DELETE&&sn(e,!0)&&t.preventDefault()}))}(e)};e.add("lists",(function(e){return!1===e.hasPlugin("rtc",!0)?(mn(e),hn(e)):pn(e),function(e){var t=function(t){return function(){return e.execCommand(t)}};e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:function(t){return $t(e,"OL",t.setActive)}}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:function(t){return $t(e,"UL",t.setActive)}}))}(e),function(e){var t={text:"List properties...",icon:"ordered-list",onAction:function(){return e.execCommand("mceListProps")},onSetup:function(t){return $t(e,"OL",(function(e){return t.setDisabled(!e)}))}};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:function(t){var n=ut(e,t);return We(n)?["listprops"]:[]}})}(e),function(e){return{backspaceDelete:function(t){sn(e,t)}}}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},r=n("string"),o=n("object"),i=n("array"),a=function(e){return!function(e){return null==e}(e)},u=function(){},s=function(e){return function(){return e}},c=s(!1),l=s(!0),f=function(){return d},d=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:n,orThunk:t,map:f,each:u,bind:f,exists:c,forall:l,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:s("none()")}}(),p=function(e){var t=s(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:d},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,(function(t){return n(e,t)}))}};return o},h={some:p,none:f,from:function(e){return null==e?d:p(e)}},m=Array.prototype.push,g=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},v=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);m.apply(t,e[n])}return t},y=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},b=Object.keys,C=Object.hasOwnProperty,x=function(e,t){return w(e,t)?h.from(e[t]):h.none()},w=function(e,t){return C.call(e,t)},_=function(e){return e.getParam("media_scripts")},S=function(e){return e.getParam("media_live_embeds",!0)},E=tinymce.util.Tools.resolve("tinymce.util.Tools"),A=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),D=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),k=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},T=A.DOM,O=function(e){return e.replace(/px$/,"")},B=function(e,t){var n=y(!1),r={};return D({validate:!1,allow_conditional_comments:!0,start:function(t,o){if(n.get());else if(w(o.map,"data-ephox-embed-iri"))n.set(!0),r=function(e){var t=e.map.style,n=t?T.parseStyle(t):{};return{type:"ephox-embed-iri",source:e.map["data-ephox-embed-iri"],altsource:"",poster:"",width:x(n,"max-width").map(O).getOr(""),height:x(n,"max-height").map(O).getOr("")}}(o);else{if(r.source||"param"!==t||(r.source=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=E.extend(o.map,r)),"script"===t){var i=k(e,o.map.src);if(!i)return;r={type:"script",source:o.map.src,width:String(i.width),height:String(i.height)}}"source"===t&&(r.source?r.altsource||(r.altsource=o.map.src):r.source=o.map.src),"img"!==t||r.poster||(r.poster=o.map.src)}}}).parse(t),r.source=r.source||r.src||r.data,r.altsource=r.altsource||"",r.poster=r.poster||"",r},N=function(e){var t={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t||""},F=tinymce.util.Tools.resolve("tinymce.html.Schema"),M=tinymce.util.Tools.resolve("tinymce.html.Writer"),P=A.DOM,I=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},R=function(e,t){!function(e,t){for(var n=b(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(t,(function(t,n){var r=""+t;if(e.map[n])for(var o=e.length;o--;){var i=e[o];i.name===n&&(r?(e.map[n]=r,i.value=r):(delete e.map[n],e.splice(o,1)))}else r&&(e.push({name:n,value:r}),e.map[n]=r)}))},L=["source","altsource"],z=function(e,t,n){var r,o=M(),i=y(!1),a=0;return D({validate:!1,allow_conditional_comments:!0,comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,u,s){if(i.get());else if(w(u.map,"data-ephox-embed-iri"))i.set(!0),function(e,t){var n=t.map.style,r=n?P.parseStyle(n):{};r["max-width"]=I(e.width),r["max-height"]=I(e.height),R(t,{style:P.serializeStyle(r)})}(t,u);else{switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&R(u,{width:t.width,height:t.height})}if(n)switch(e){case"video":R(u,{poster:t.poster,src:""}),t.altsource&&R(u,{src:""});break;case"iframe":R(u,{src:t.source});break;case"source":if(a<2&&(R(u,{src:t[L[a]],type:t[L[a]+"mime"]}),!t[L[a]]))return;a++;break;case"img":if(!t.poster)return;r=!0}}o.start(e,u,s)},end:function(e){if(!i.get()){if("video"===e&&n)for(var u=0;u<2;u++)if(t[L[u]]){var s=[];s.map={},a<=u&&(R(s,{src:t[L[u]],type:t[L[u]+"mime"]}),o.start("source",s,!0))}if(t.poster&&"object"===e&&n&&!r){var c=[];c.map={},R(c,{src:t.poster,width:t.width,height:t.height}),o.start("img",c,!0)}}o.end(e)}},F({})).parse(e),o.getContent()},V=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],H=function(e,t){for(var n=function(e){var t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"}(t),r=e.regex.exec(t),o=n+e.url,i=function(e){o=o.replace("$"+e,(function(){return r[e]?r[e]:""}))},a=0;a<r.length;a++)i(a);return o.replace(/\?$/,"")},$=function(e,t){var n=E.extend({},t);if(!n.source&&(E.extend(n,B(_(e),n.embed)),!n.source))return"";n.altsource||(n.altsource=""),n.poster||(n.poster=""),n.source=e.convertURL(n.source,"source"),n.altsource=e.convertURL(n.altsource,"source"),n.sourcemime=N(n.source),n.altsourcemime=N(n.altsource),n.poster=e.convertURL(n.poster,"poster");var r,o,i=(r=n.source,(o=V.filter((function(e){return e.regex.test(r)}))).length>0?E.extend({},o[0],{url:H(o[0],r)}):null);if(i&&(n.source=i.url,n.type=i.type,n.allowfullscreen=i.allowFullscreen,n.width=n.width||String(i.w),n.height=n.height||String(i.h)),n.embed)return z(n.embed,n,!0);var a=k(_(e),n.source);a&&(n.type="script",n.width=String(a.width),n.height=String(a.height));var u=function(e){return e.getParam("audio_template_callback")}(e),s=function(e){return e.getParam("video_template_callback")}(e);return n.width=n.width||"300",n.height=n.height||"150",E.each(n,(function(t,r){n[r]=e.dom.encode(""+t)})),"iframe"===n.type?function(e){var t=e.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"}(n):"application/x-shockwave-flash"===n.sourcemime?function(e){var t='<object data="'+e.source+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+"</object>"}(n):-1!==n.sourcemime.indexOf("audio")?function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source+'">'+(e.altsource?'\n<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</audio>"}(n,u):"script"===n.type?function(e){return'<script src="'+e.source+'"><\/script>'}(n):function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</video>"}(n,s)},j=tinymce.util.Tools.resolve("tinymce.util.Promise"),U={},W=function(e){return function(t){return $(e,t)}},q=function(e,t){var n=function(e){return e.getParam("media_url_resolver")}(e);return n?function(e,t,n){return new j((function(r,o){var i=function(n){return n.html&&(U[e.source]=n),r({url:e.source,html:n.html?n.html:t(e)})};U[e.source]?i(U[e.source]):n({url:e.source},i,o)}))}(t,W(e),n):function(e,t){return new j((function(n){n({html:t(e),url:e.source})}))}(t,W(e))},G=function(e,n){var r=n?function(e,t){return x(t,e).bind((function(e){return x(e,"meta")}))}(n,e).getOr({}):{},i=function(e,t,n){return function(r){var i,a=function(){return x(e,r)},u=function(){return x(t,r)},s=function(e){return x(e,"value").bind((function(e){return e.length>0?h.some(e):h.none()}))};return(i={})[r]=(r===n?a().bind((function(e){return o(e)?s(e).orThunk(u):u().orThunk((function(){return h.from(e)}))})):u().orThunk((function(){return a().bind((function(e){return o(e)?s(e):h.from(e)}))}))).getOr(""),i}}(e,r,n);return t(t(t(t(t({},i("source")),i("altsource")),i("poster")),i("embed")),function(e,t){var n={};return x(e,"dimensions").each((function(e){g(["width","height"],(function(r){x(t,r).orThunk((function(){return x(e,r)})).each((function(e){return n[r]=e}))}))})),n}(e,r))},X=function(e){var n=t(t({},e),{source:{value:x(e,"source").getOr("")},altsource:{value:x(e,"altsource").getOr("")},poster:{value:x(e,"poster").getOr("")}});return g(["width","height"],(function(t){x(e,t).each((function(e){var r=n.dimensions||{};r[t]=e,n.dimensions=r}))})),n},K=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},Y=function(e,t){return B(_(e),t)},J=function(e,n){return function(o){if(r(o.url)&&o.url.trim().length>0){var i=o.html,a=Y(n,i),u=t(t({},a),{source:o.url,embed:i});e.setData(X(u))}}},Q=function(e,t){var n=e.dom.select("*[data-mce-object]");e.insertContent(t),function(e,t){for(var n=e.dom.select("*[data-mce-object]"),r=0;r<t.length;r++)for(var o=n.length-1;o>=0;o--)t[r]===n[o]&&n.splice(o,1);e.selection.select(n[0])}(e,n),e.nodeChanged()},Z=function(e,t,n){var r;t.embed=z(t.embed,t),t.embed&&(e.source===t.source||(r=t.source,U.hasOwnProperty(r)))?Q(n,t.embed):q(n,t).then((function(e){Q(n,e.html)})).catch(K(n))},ee=function(e){var n=function(e){var n=e.selection.getNode(),r=function(e){return e.getAttribute("data-mce-object")||e.getAttribute("data-ephox-embed-iri")}(n)?e.serializer.serialize(n,{selection:!0}):"";return t({embed:r},B(_(e),r))}(e),r=y(n),o=X(n),i=function(e){return e.getParam("media_dimensions",!0)}(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],a={title:"General",name:"general",items:v([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],i])},u={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},s=[];(function(e){return e.getParam("media_alt_source",!0)})(e)&&s.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),function(e){return e.getParam("media_poster",!0)}(e)&&s.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var c={title:"Advanced",name:"advanced",items:s},l=[a,u];s.length>0&&l.push(c);var f={type:"tabpanel",tabs:l},d=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:f,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(t){var n=G(t.getData());Z(r.get(),n,e),t.close()},onChange:function(n,o){switch(o.name){case"source":!function(t,n){var r=G(n.getData(),"source");t.source!==r.source&&(J(d,e)({url:r.source,html:""}),q(e,r).then(J(d,e)).catch(K(e)))}(r.get(),n);break;case"embed":!function(t){var n=G(t.getData()),r=Y(e,n.embed);t.setData(X(r))}(n);break;case"dimensions":case"altsource":case"poster":!function(n,r){var o=G(n.getData(),r),i=$(e,o);n.setData(X(t(t({},o),{embed:i})))}(n,o.name)}r.set(G(n.getData()))},initialData:o})},te=tinymce.util.Tools.resolve("tinymce.html.Node"),ne=tinymce.util.Tools.resolve("tinymce.Env"),re=tinymce.util.Tools.resolve("tinymce.html.DomParser"),oe=function(e,t){if(!1===function(e){return e.getParam("media_filter_html",!0)}(e))return t;var n,r=M();return D({validate:!1,allow_conditional_comments:!1,comment:function(e){n||r.comment(e)},cdata:function(e){n||r.cdata(e)},text:function(e,t){n||r.text(e,t)},start:function(t,o,i){if(n=!0,"script"!==t&&"noscript"!==t&&"svg"!==t){for(var a=o.length-1;a>=0;a--){var u=o[a].name;0===u.indexOf("on")&&(delete o.map[u],o.splice(a,1)),"style"===u&&(o[a].value=e.dom.serializeStyle(e.dom.parseStyle(o[a].value),t))}r.start(t,o,i),n=!1}},end:function(e){n||r.end(e)}},F({})).parse(t),r.getContent()},ie=function(e){var t=e.name;return"iframe"===t||"video"===t||"audio"===t},ae=function(e,t,n,r){void 0===r&&(r=null);var o=e.attr(n);return a(o)?o:w(t,n)?null:r},ue=function(e,t,n){var r="img"===t.name||"video"===e.name,o=r?"300":null,i="audio"===e.name?"30":"150",a=r?i:null;t.attr({width:ae(e,n,"width",o),height:ae(e,n,"height",a)})},se=function(e,t){var n=t.name,r=new te("img",1);return r.shortEnded=!0,le(e,t,r),ue(t,r,{}),r.attr({style:t.attr("style"),src:ne.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},ce=function(e,t){var n=t.name,r=new te("span",1);r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),le(e,t,r);var o=e.dom.parseStyle(t.attr("style")),i=new te(n,1);if(ue(t,i,o),i.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===n)i.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"});else{g(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(function(e){i.attr(e,t.attr(e))}));var u=r.attr("data-mce-html");a(u)&&function(e,t,n,r){for(var o=re({forced_root_block:!1,validate:!1},e.schema).parse(r,{context:t});o.firstChild;)n.append(o.firstChild)}(e,n,i,u)}var s=new te("span",1);return s.attr("class","mce-shim"),r.append(i),r.append(s),r},le=function(e,t,n){for(var r=t.attributes,o=r.length;o--;){var i=r[o].name,a=r[o].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(a=e.convertURL(a,i)),n.attr("data-mce-p-"+i,a))}var u=t.firstChild&&t.firstChild.value;u&&(n.attr("data-mce-html",escape(oe(e,u))),n.firstChild=null)},fe=function(e){var t=e.attr("class");return t&&/\btiny-pageembed\b/.test(t)},de=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri")||fe(e))return!0;return!1},pe=function(e){e.on("preInit",(function(){var t=e.schema.getSpecialElements();E.each("video audio iframe object".split(" "),(function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")}));var n=e.schema.getBoolAttrs();E.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),(function(e){n[e]={}})),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(e){return function(t){for(var n,r,o=t.length;o--;)(n=t[o]).parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(r=k(_(e),n.attr("src"))))&&(r&&(r.width&&n.attr("width",r.width.toString()),r.height&&n.attr("height",r.height.toString())),ie(n)&&S(e)&&ne.ceFalse?de(n)||n.replace(ce(e,n)):de(n)||n.replace(se(e,n))))}}(e)),e.serializer.addAttributeFilter("data-mce-object",(function(t,n){for(var r,o,i,a,u,s,c,l,f=t.length;f--;)if((r=t[f]).parent){for(c=r.attr(n),o=new te(c,1),"audio"!==c&&"script"!==c&&((l=r.attr("class"))&&-1!==l.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),i=(a=r.attributes).length;i--;){var d=a[i].name;0===d.indexOf("data-mce-p-")&&o.attr(d.substr(11),a[i].value)}"script"===c&&o.attr("type","text/javascript"),(u=r.attr("data-mce-html"))&&((s=new te("#text",3)).raw=!0,s.value=oe(e,unescape(u)),o.append(s)),r.replace(o)}}))})),e.on("SetContent",(function(){e.$("span.mce-preview-object").each((function(t,n){var r=e.$(n);0===r.find("span.mce-shim").length&&r.append('<span class="mce-shim"></span>')}))}))},he=function(e,t){return function(n){return e.selection.selectorChangedWithUnbind(t.join(","),n.setActive).unbind}};e.add("media",(function(e){return function(e){e.addCommand("mceMedia",(function(){ee(e)}))}(e),function(e){e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:function(){e.execCommand("mceMedia")},onSetup:he(e,["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"])}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:function(){e.execCommand("mceMedia")}})}(e),function(e){e.on("ResolveName",(function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))}(e),pe(e),function(e){e.on("click keyup touchend",(function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(function(e){"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()})),e.on("ObjectResized",(function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(z(t,{width:String(e.width),height:String(e.height)}))))}))}(e),function(e){return{showDialog:function(){ee(e)}}}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},n=function(e,n){var r=function(e){return e.getParam("nonbreaking_wrap",!0,"boolean")}(e)||e.plugins.visualchars?'<span class="'+(function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()}(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+t("&nbsp;",n)+"</span>":t("&nbsp;",n);e.undoManager.transact((function(){return e.insertContent(r)}))},r=tinymce.util.Tools.resolve("tinymce.util.VK");e.add("nonbreaking",(function(e){!function(e){e.addCommand("mceNonBreaking",(function(){n(e,1)}))}(e),function(e){e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:function(){return e.execCommand("mceNonBreaking")}}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:function(){return e.execCommand("mceNonBreaking")}})}(e),function(e){var t=function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t}(e);t>0&&e.on("keydown",(function(o){if(o.keyCode===r.TAB&&!o.isDefaultPrevented()){if(o.shiftKey)return;o.preventDefault(),o.stopImmediatePropagation(),n(e,t)}}))}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},r=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},o=function(e,t,n){return function(r){var o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return r;if(">"===a){var u=t.lastIndexOf("<",i);if(-1!==u){var s=t.substring(u,i);if(-1!==s.indexOf('contenteditable="false"'))return r}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"}},i=function(e){var i="contenteditable",a=" "+t.trim(function(e){return e.getParam("noneditable_editable_class","mceEditable")}(e))+" ",u=" "+t.trim(n(e))+" ",s=r(a),c=r(u),l=function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t}(e);e.on("PreInit",(function(){l.length>0&&e.on("BeforeSetContent",(function(t){!function(e,t,r){var i=t.length,a=r.content;if("raw"!==r.format){for(;i--;)a=a.replace(t[i],o(e,a,n(e)));r.content=a}}(e,l,t)})),e.parser.addAttributeFilter("class",(function(e){for(var t,n=e.length;n--;)t=e[n],s(t)?t.attr(i,"true"):c(t)&&t.attr(i,"false")})),e.serializer.addAttributeFilter(i,(function(e){for(var t,n=e.length;n--;)t=e[n],(s(t)||c(t))&&(l.length>0&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(i,null))}))}))};e.add("noneditable",(function(e){i(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("pagebreak_split_block",!1)},r="mce-pagebreak",o=function(e){var n='<img src="'+t.transparentSrc+'" class="'+'mce-pagebreak" data-mce-resize="false" data-mce-placeholder />';return e?"<p>"+n+"</p>":n};e.add("pagebreak",(function(e){!function(e){e.addCommand("mcePageBreak",(function(){e.insertContent(o(n(e)))}))}(e),function(e){e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:function(){return e.execCommand("mcePageBreak")}}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:function(){return e.execCommand("mcePageBreak")}})}(e),function(e){var t=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")}(e),i=function(){return n(e)},a=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(function(e){return"\\"+e})),"gi");e.on("BeforeSetContent",(function(e){e.content=e.content.replace(a,o(i()))})),e.on("PreInit",(function(){e.serializer.addNodeFilter("img",(function(n){for(var o,a,u=n.length;u--;)if((a=(o=n[u]).attr("class"))&&-1!==a.indexOf(r)){var s=o.parent;if(e.schema.getBlockElements()[s.name]&&i()){s.type=3,s.value=t,s.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}}))}))}(e),function(e){e.on("ResolveName",(function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,r)&&(t.name="pagebreak")}))}(e)}))}(),function(){var e,t,n,r=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e){return!function(e){return null==e}(e)},a=(e="function",function(t){return typeof t===e}),u=function(){},s=function(e){return function(){return e}},c=s(!1),l=s(!0),f=function(){return d},d=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:n,orThunk:t,map:f,each:u,bind:f,exists:c,forall:l,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:s("none()")}}(),p=function(e){var t=s(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:d},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,(function(t){return n(e,t)}))}};return o},h={some:p,none:f,from:function(e){return null==e?d:p(e)}},m=Array.prototype.slice,g=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},v=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},y=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},b=a(Array.from)?Array.from:function(e){return m.call(e)},C=function(){var e=r(h.none());return{clear:function(){return e.set(h.none())},set:function(t){return e.set(h.some(t))},isSet:function(){return e.get().isSome()},on:function(t){return e.get().each(t)}}},x=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},w=tinymce.util.Tools.resolve("tinymce.Env"),_=tinymce.util.Tools.resolve("tinymce.util.Delay"),S=tinymce.util.Tools.resolve("tinymce.util.Promise"),E=tinymce.util.Tools.resolve("tinymce.util.VK"),A=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},D=tinymce.util.Tools.resolve("tinymce.util.Tools"),k=function(e){return e.getParam("paste_data_images",!1)},T=function(e){return e.getParam("paste_merge_formats",!0)},O=function(e){return e.getParam("paste_retain_style_properties")},B=function(e){return e.getParam("validate")},N=function(e){return e.getParam("allow_html_data_urls",!1,"boolean")},F=function(e){return e.getParam("paste_data_images",!1,"boolean")},M=function(e){return D.explode(e.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))},P="x-tinymce/html",I="\x3c!-- x-tinymce/html --\x3e",R=function(e){return-1!==e.indexOf(I)},L=function(){return P},z=tinymce.util.Tools.resolve("tinymce.html.Entities"),V=function(e,t,n){var r=e.split(/\n\n/),o=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+z.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"}(t,n),i="</"+t+">",a=D.map(r,(function(e){return e.split(/\n/).join("<br />")}));return 1===a.length?a[0]:D.map(a,(function(e){return o+e+i})).join("")},H=tinymce.util.Tools.resolve("tinymce.html.DomParser"),$=tinymce.util.Tools.resolve("tinymce.html.Serializer"),j="",U=tinymce.util.Tools.resolve("tinymce.html.Node"),W=tinymce.util.Tools.resolve("tinymce.html.Schema"),q=function(e,t){return D.each(t,(function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])})),e},G=function(e){return e=q(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?j:" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},X=function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},K=function(e){var t;return e=e.replace(/^[\u00a0 ]+/,""),D.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],(function(n){if(n.test(e))return t=!0,!1})),t},Y=function(e,t,n,r){var o,i={},a=e.dom.parseStyle(r);return D.each(a,(function(a,u){switch(u){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":return void("normal"!==a&&(i[u]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}0!==u.indexOf("mso-comment")?0!==u.indexOf("mso-")&&("all"===O(e)||t&&t[u])&&(i[u]=a):n.remove()})),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],n.wrap(new U("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],n.wrap(new U("i",1))),(i=e.dom.serializeStyle(i,n.name))||null},J=function(e,t){var n,r=O(e);r&&(n=D.makeMap(r.split(/[, ]/))),t=q(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,j],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(j):""}]]);var o=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}(e),i=W({valid_elements:o,valid_children:"-li[p]"});D.each(i.elements,(function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}));var a=H({},i);a.addAttributeFilter("style",(function(t){for(var r,o=t.length;o--;)(r=t[o]).attr("style",Y(e,n,r,r.attr("style"))),"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()})),a.addAttributeFilter("class",(function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)})),a.addNodeFilter("del",(function(e){for(var t=e.length;t--;)e[t].remove()})),a.addNodeFilter("a",(function(e){for(var t,n,r,o=e.length;o--;)if(n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()}));var u=a.parse(t);return function(e){return e.getParam("paste_convert_word_fake_lists",!0)}(e)&&function(e){for(var t,n,r=1,o=function(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=o(e)}while(e=e.next);return t},i=function(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!i(e,t))return!1}while(e=e.next);return!0},a=function(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{a(e)}while(e=e.next)},u=function(e,o,u){var s=e._listLevel||r;s!==r&&(s<r?t&&(t=t.parent.parent):(n=t,t=null)),t&&t.name===o?t.append(e):(n=n||t,t=new U(o,1),u>1&&t.attr("start",""+u),e.wrap(t)),e.name="li",s>r&&n&&n.lastChild.append(t),r=s,a(e),i(e,/^\u00a0+/),i(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),i(e,/^\u00a0+/)},s=[],c=e.firstChild;null!=c;)if(s.push(c),null!==(c=c.walk()))for(;void 0!==c&&c.parent!==e;)c=c.walk();for(var l=0;l<s.length;l++)if("p"===(e=s[l]).name&&e.firstChild){var f=o(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(f)){u(e,"ul");continue}if(K(f)){var d=/([0-9]+)\./.exec(f),p=1;d&&(p=parseInt(d[1],10)),u(e,"ol",p);continue}if(e._listLevel){u(e,"ul",1);continue}t=null}else n=t,t=null}(u),t=$({validate:B(e)},i).serialize(u)},Q=function(e,t){return{content:e,cancelled:t}},Z=function(e,t,n,r){var o=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})}(e,t,n,r),i=function(e,t){var n=H({},e.schema);n.addNodeFilter("meta",(function(e){D.each(e,(function(e){e.remove()}))}));var r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return $({validate:B(e)},e.schema).serialize(r)}(e,o.content);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?function(e,t,n,r){var o=e.dom.create("div",{style:"display:none"},t),i=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})}(e,o,n,r);return Q(i.node.innerHTML,i.isDefaultPrevented())}(e,i,n,r):Q(i,o.isDefaultPrevented())},ee=function(e,t,n){var r=X(t),o=r?function(e,t){return function(e){return e.getParam("paste_enable_default_filters",!0)}(e)?J(e,t):t}(e,t):t;return Z(e,o,n,r)},te=function(e,t){return e.insertContent(t,{merge:T(e),paste:!0}),!0},ne=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},re=function(e,t){return ne(t)&&g(M(e),(function(e){return n=t.toLowerCase(),r="."+e.toLowerCase(),x(n,r,n.length-r.length);var n,r}))},oe=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!ne(t))&&function(e,t,n){return e.undoManager.extra((function(){n(e,t)}),(function(){e.execCommand("mceInsertLink",!1,t)})),!0}(e,t,n)},ie=function(e,t,n){return!!re(e,t)&&function(e,t,n){return e.undoManager.extra((function(){n(e,t)}),(function(){e.insertContent('<img src="'+t+'">')})),!0}(e,t,n)},ae=function(e,t,n){n||!1===function(e){return e.getParam("smart_paste",!0)}(e)?te(e,t):function(e,t){D.each([oe,ie,te],(function(n){return!0!==n(e,t,te)}))}(e,t)},ue=function(e){return"\n"===e||"\r"===e},se=function(e,t){var n,r,o,i,a=(n=" ",(r=function(e){return e.getParam("paste_tab_spaces",4,"number")}(e))<=0?"":new Array(r+1).join(n)),u=t.replace(/\t/g,a);return(o=function(e,t){return function(e){return-1!==" \f\t\v".indexOf(e)}(t)||t===j?e.pcIsSpace||""===e.str||e.str.length===u.length-1||function(e,t){return t<e.length&&t>=0&&ue(e[t])}(u,e.str.length+1)?{pcIsSpace:!1,str:e.str+j}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:ue(t),str:e.str+t}},i={pcIsSpace:!1,str:""},y(u,(function(e){i=o(i,e)})),i).str},ce=function(e,t,n,r){var o=ee(e,t,n);!1===o.cancelled&&ae(e,o.content,r)},le=function(e,t,n){var r=n||R(t);ce(e,function(e){return e.replace(I,"")}(t),r,!1)},fe=function(e,t){var n=e.dom.encode(t).replace(/\r\n/g,"\n"),r=function(e,t,n){return t?V(e,!0===t?"p":t,n):function(e){return e.replace(/\r?\n/g,"<br>")}(e)}(se(e,n),function(e){return e.getParam("forced_root_block")}(e),function(e){return e.getParam("forced_root_block_attrs")}(e));ce(e,r,!1,!0)},de=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(i){t[o]=""}}}return t},pe=function(e,t){return t in e&&e[t].length>0},he=function(e){return pe(e,"text/html")||pe(e,"text/plain")},me=(t="mceclip",n=0,function(){return t+n++}),ge=function(e,t){var n,r,o=(n=t.uri,(r=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(n))?{type:r[1],data:decodeURIComponent(r[2])}:{type:null,data:null}),a=o.data,u=o.type,s=me(),c=t.blob,l=new Image;if(l.src=t.uri,function(e,t){var n=function(e){return e.getParam("images_dataimg_filter")}(e);return!n||n(t)}(e,l)){var f=e.editorUpload.blobCache,d=void 0,p=f.getByData(a,u);if(p)d=p;else{var h=function(e){return e.getParam("images_reuse_filename")}(e)&&i(c.name),m=h?function(e,t){var n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return i(n)?e.dom.encode(n[1]):null}(e,c.name):s,g=h?c.name:void 0;d=f.create(s,c,a,m,g),f.add(d)}le(e,'<img src="'+d.blobUri()+'">',!1)}else le(e,'<img src="'+t.uri+'">',!1)},ve=function(e){return S.all(v(e,(function(e){return new S((function(t){var n=function(e){return i(e.getAsFile)}(e)?e.getAsFile():e,r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})},r.readAsDataURL(n)}))})))},ye=function(e){var t=M(e);return function(e){return function(e,t){return x(e,t,0)}(e.type,"image/")&&g(t,(function(t){return n=t.toLowerCase(),r={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(D.hasOwn(r,n)?"image/"+r[n]:"image/"+n)===e.type;var n,r}))}},be=function(e,t,n){var r="paste"===t.type?t.clipboardData:t.dataTransfer;if(F(e)&&r){var o=function(e,t){var n=t.items?v(b(t.items),(function(e){return e.getAsFile()})):[],r=t.files?b(t.files):[];return function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}(n.length>0?n:r,ye(e))}(e,r);if(o.length>0)return t.preventDefault(),ve(o).then((function(t){n&&e.selection.setRng(n),y(t,(function(t){ge(e,t)}))})),!0}return!1},Ce=function(e){return E.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},xe=function(e,t,n){var r,o=C(),i=C();e.on("keyup",i.clear),e.on("keydown",(function(n){var a=function(e){Ce(e)&&!e.isDefaultPrevented()&&t.remove()};if(Ce(n)&&!n.isDefaultPrevented()){if((r=n.shiftKey&&86===n.keyCode)&&w.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),o.set(n),i.set(!0),w.ie&&r)return n.preventDefault(),void function(e,t){e.fire("paste",{ieFake:t})}(e,!0);t.remove(),t.create(),e.once("keyup",a),e.once("paste",(function(){e.off("keyup",a)}))}}));var a=function(e,n,r,o,i){var a;pe(n,"text/html")?a=n["text/html"]:(a=t.getHtml(),i=i||R(a),t.isDefaultContent(a)&&(o=!0)),a=G(a),t.remove();var u=!1===i&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),s=ne(a);(!a.length||u&&!s)&&(o=!0),(o||s)&&(a=pe(n,"text/plain")&&u?n["text/plain"]:function(e){var t=W(),n=H({},t),r="",o=t.getShortEndedElements(),i=D.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),u=function(e){var t=e.name,n=e;if("br"!==t){if("wbr"!==t)if(o[t]&&(r+=" "),i[t])r+=" ";else{if(3===e.type&&(r+=e.value),!e.shortEnded&&(e=e.firstChild))do{u(e)}while(e=e.next);a[t]&&n.next&&(r+="\n","p"===t&&(r+="\n"))}}else r+="\n"};return e=q(e,[/<!\[[^\]]+\]>/g]),u(n.parse(e)),r}(a)),t.isDefaultContent(a)?r||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?fe(e,a):le(e,a,i)};e.on("paste",(function(u){var s=o.isSet()||i.isSet();s&&o.clear();var c=function(e,t){return de(t.clipboardData||e.getDoc().dataTransfer)}(e,u),l="text"===n.get()||r,f=pe(c,L());r=!1,u.isDefaultPrevented()||function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}(u)?t.remove():he(c)||!be(e,u,t.getLastRng()||e.selection.getRng())?(s||u.preventDefault(),!w.ie||s&&!u.ieFake||pe(c,"text/html")||(t.create(),e.dom.bind(t.getEl(),"paste",(function(e){e.stopPropagation()})),e.getDoc().execCommand("Paste",!1,null),c["text/html"]=t.getHtml()),pe(c,"text/html")?(u.preventDefault(),f||(f=R(c["text/html"])),a(e,c,s,l,f)):_.setEditorTimeout(e,(function(){a(e,c,s,l,f)}),0)):t.remove()}))},we=function(e){return w.ie&&e.inline?document.body:e.getBody()},_e=function(e,t,n){(function(e){return we(e)!==e.getBody()})(e)&&e.dom.bind(t,"paste keyup",(function(t){Ae(e,n)||e.fire("paste")}))},Se=function(e){return e.dom.get("mcepastebin")},Ee=function(e,t){return t===e},Ae=function(e,t){var n,r=Se(e);return(n=r)&&"mcepastebin"===n.id&&Ee(t,r.innerHTML)},De=function(e){var t=r(null),n="%MCEPASTEBIN%";return{create:function(){return function(e,t,n){var r=e.dom,o=e.getBody();t.set(e.selection.getRng());var i=e.dom.add(we(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);(w.ie||w.gecko)&&r.setStyle(i,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(i,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()})),_e(e,i,n),i.focus(),e.selection.select(i,!0)}(e,t,n)},remove:function(){return function(e,t){if(Se(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)}(e,t)},getEl:function(){return Se(e)},getHtml:function(){return function(e){var t=function(t,n){t.appendChild(n),e.dom.remove(n,!0)},n=D.grep(we(e).childNodes,(function(e){return"mcepastebin"===e.id})),r=n.shift();D.each(n,(function(e){t(r,e)}));for(var o=e.dom.select("div[id=mcepastebin]",r),i=o.length-1;i>=0;i--){var a=e.dom.create("div");r.insertBefore(a,o[i]),t(a,o[i])}return r?r.innerHTML:""}(e)},getLastRng:function(){return function(e){return e.get()}(t)},isDefault:function(){return Ae(e,n)},isDefaultContent:function(e){return Ee(n,e)}}},ke=function(e,t){var n=De(e);return e.on("PreInit",(function(){return function(e,t,n){var r;xe(e,t,n),e.parser.addNodeFilter("img",(function(t,n,o){var i,a=function(e){e.attr("data-mce-object")||r===w.transparentSrc||e.remove()},u=function(e){return 0===e.indexOf("data:")};if(!F(e)&&(i=o).data&&!0===i.data.paste)for(var s=t.length;s--;)(r=t[s].attr("src"))&&(0===r.indexOf("webkit-fake-url")||!N(e)&&u(r))&&a(t[s])}))}(e,n,t)})),{pasteFormat:t,pasteHtml:function(t,n){return le(e,t,n)},pasteText:function(t){return fe(e,t)},pasteImageData:function(t,n){return be(e,t,n)},getDataTransferItems:de,hasHtmlOrText:he,hasContentType:pe}},Te=function(e,t){e.addCommand("mceTogglePlainTextPaste",(function(){!function(e,t){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),A(e,!1)):(t.pasteFormat.set("text"),A(e,!0)),e.focus()}(e,t)})),e.addCommand("mceInsertClipboardContent",(function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)}))},Oe=function(e,t,n){if(!function(e){return!1===w.iOS&&"function"==typeof(null==e?void 0:e.setData)}(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(L(),t),!0}catch(r){return!1}},Be=function(e,t,n,r){Oe(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},Ne=function(e){return function(t,n){var r=function(e){return I+e}(t),o=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(i),e.dom.add(e.getBody(),o);var a=e.selection.getRng();i.focus();var u=e.dom.createRng();u.selectNodeContents(i),e.selection.setRng(u),_.setTimeout((function(){e.selection.setRng(a),o.parentNode.removeChild(o),n()}),0)}},Fe=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},Me=function(e){return!e.selection.isCollapsed()||function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())}(e)},Pe=function(e){e.on("cut",function(e){return function(t){Me(e)&&Be(t,Fe(e),Ne(e),(function(){if(w.browser.isChrome()||w.browser.isFirefox()){var t=e.selection.getRng();_.setEditorTimeout(e,(function(){e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))}}(e)),e.on("copy",function(e){return function(t){Me(e)&&Be(t,Fe(e),Ne(e),u)}}(e))},Ie=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Re=function(e,t){return Ie.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Le=function(e,t){e.focus(),e.selection.setRng(t)},ze=function(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal,n.wordContent)}))},Ve=function(e,t){if(!X(t))return t;var n=[];D.each(e.schema.getBlockElements(),(function(e,t){n.push(t)}));var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=q(t,[[r,"$1"]]),t=q(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])},He=function(e,t,n,r){if(r||n)return t;var o,i=function(e){return e.getParam("paste_webkit_styles")}(e);if(!1===function(e){return e.getParam("paste_remove_styles_if_webkit",!0)}(e)||"all"===i)return t;if(i&&(o=i.split(/[, ]/)),o){var a=e.dom,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,r){var i=a.parseStyle(a.decode(n)),s={};if("none"===o)return t+r;for(var c=0;c<o.length;c++){var l=i[o[c]],f=a.getStyle(u,o[c],!0);/color/.test(o[c])&&(l=a.toHex(l),f=a.toHex(f)),f!==l&&(s[o[c]]=l)}return(s=a.serializeStyle(s,"span"))?t+' style="'+s+'"'+r:t+r}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,r){return t+' style="'+n+'"'+r}))},$e=function(e,t){e.$("a",t).find("font,u").each((function(t,n){e.dom.remove(n,!0)}))},je=function(e,t){return function(n){n.setActive("text"===t.pasteFormat.get());var r=function(e){return n.setActive(e.state)};return e.on("PastePlainTextToggle",r),function(){return e.off("PastePlainTextToggle",r)}}};o.add("paste",(function(e){if(!1===function(e){return!!e.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)}(e)){var t=r(!1),n=r(function(e){return e.getParam("paste_as_text",!1)}(e)?"text":"html"),o=ke(e,n),i=function(e){w.webkit&&ze(e,He),w.ie&&(ze(e,Ve),function(e,t){e.on("PastePostProcess",(function(n){t(e,n.node)}))}(e,$e))}(e);return function(e,t){e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:function(){return e.execCommand("mceTogglePlainTextPaste")},onSetup:je(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:function(){return e.execCommand("mceTogglePlainTextPaste")},onSetup:je(e,t)})}(e,o),Te(e,o),function(e){var t=e.plugins.paste,n=function(e){return e.getParam("paste_preprocess")}(e);n&&e.on("PastePreProcess",(function(e){n.call(t,t,e)}));var r=function(e){return e.getParam("paste_postprocess")}(e);r&&e.on("PastePostProcess",(function(e){r.call(t,t,e)}))}(e),Pe(e),function(e,t,n){(function(e){return e.getParam("paste_block_drop",!1)})(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault(),e.stopPropagation()})),k(e)||e.on("drop",(function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()})),e.on("drop",(function(r){var o=Re(e,r);if(!r.isDefaultPrevented()&&!n.get()){var i,a=t.getDataTransferItems(r.dataTransfer),u=t.hasContentType(a,L());if((t.hasHtmlOrText(a)&&(!(i=a["text/plain"])||0!==i.indexOf("file://"))||!t.pasteImageData(r,o))&&o&&function(e){return e.getParam("paste_filter_drop",!0)}(e)){var s=a["mce-internal"]||a["text/html"]||a["text/plain"];s&&(r.preventDefault(),_.setEditorTimeout(e,(function(){e.undoManager.transact((function(){a["mce-internal"]&&e.execCommand("Delete"),Le(e,o),s=G(s),a["text/html"]?t.pasteHtml(s,u):t.pasteText(s)}))})))}}})),e.on("dragstart",(function(e){n.set(!0)})),e.on("dragover dragend",(function(t){k(e)&&!1===n.get()&&(t.preventDefault(),Le(e,Re(e,t))),"dragend"===t.type&&n.set(!1)}))}(e,o,t),function(e,t){return{clipboard:e,quirks:t}}(o,i)}}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){var r=function(e){var r="",o=e.dom.encode,i=function(e){return e.getParam("content_style","","string")}(e);r+='<base href="'+o(e.documentBaseURI.getURI())+'">';var a=function(e){return e.getParam("content_css_cors",!1,"boolean")}(e)?' crossorigin="anonymous"':"";n.each(e.contentCSS,(function(t){r+='<link type="text/css" rel="stylesheet" href="'+o(e.documentBaseURI.toAbsolute(t))+'"'+a+">"})),i&&(r+='<style type="text/css">'+i+"</style>");var u=function(e){var t=e.getParam("body_id","tinymce","string");return-1===t.indexOf("=")?t:function(e){var t=e.getParam("body_id","","hash");return t[e.id]||t}(e)}(e),s=function(e){var t=e.getParam("body_class","","string");return-1===t.indexOf("=")?t:function(e){return e.getParam("body_class","","hash")[e.id]||""}(e)}(e),c='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",l=e.getBody().dir,f=l?' dir="'+o(l)+'"':"";return"<!DOCTYPE html><html><head>"+r+'</head><body id="'+o(u)+'" class="mce-content-body '+o(s)+'"'+f+">"+e.getContent()+c+"</body></html>"}(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:r}}).focus("close")};e.add("preview",(function(e){!function(e){e.addCommand("mcePreview",(function(){r(e)}))}(e),function(e){e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:function(){return e.execCommand("mcePreview")}}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:function(){return e.execCommand("mcePreview")}})}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");e.add("print",(function(e){!function(e){e.addCommand("mcePrint",(function(){t.browser.isIE()?e.getDoc().execCommand("print",!1,null):e.getWin().print()}))}(e),function(e){e.ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:function(){return e.execCommand("mcePrint")}}),e.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:function(){return e.execCommand("mcePrint")}})}(e),e.addShortcut("Meta+P","","mcePrint")}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("save_enablewhendirty",!0)},o=function(e,t){e.notificationManager.open({text:t,type:"error"})},i=function(e){e.addCommand("mceSave",(function(){!function(e){var n=t.DOM.getParent(e.id,"form");if(!r(e)||e.isDirty()){if(e.save(),function(e){return!!e.getParam("save_onsavecallback")}(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();n?(e.setDirty(!1),n.onsubmit&&!n.onsubmit()||("function"==typeof n.submit?n.submit():o(e,"Error: Form submit field collision.")),e.nodeChanged()):o(e,"Error: No form element found.")}}(e)})),e.addCommand("mceCancel",(function(){!function(e){var t=n.trim(e.startContent);!function(e){return!!e.getParam("save_oncancelcallback")}(e)?e.resetContent(t):e.execCallback("save_oncancelcallback",e)}(e)}))},a=function(e){return function(t){var n=function(){t.setDisabled(r(e)&&!e.isDirty())};return e.on("NodeChange dirty",n),function(){return e.off("NodeChange dirty",n)}}};e.add("save",(function(e){!function(e){e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return e.execCommand("mceSave")},onSetup:a(e)}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return e.execCommand("mceCancel")},onSetup:a(e)}),e.addShortcut("Meta+S","","mceSave")}(e),i(e)}))}(),function(){var e=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},o=function(e){return function(t){return typeof t===e}},i=r("string"),a=r("array"),u=o("boolean"),s=o("number"),c=function(){},l=function(e){return function(){return e}},f=l(!1),d=l(!0),p=l("[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]"),h=function(){return m},m=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:f,isSome:f,isNone:d,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:t,map:h,each:c,bind:h,exists:f,forall:d,filter:h,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")}}(),g=function(e){var t=l(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:d,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return g(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,(function(t){return n(e,t)}))}};return o},v={some:g,none:h,from:function(e){return null==e?m:g(e)}},y=p,b=tinymce.util.Tools.resolve("tinymce.util.Tools"),C=Array.prototype.slice,x=Array.prototype.push,w=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},_=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},S=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},E=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);x.apply(t,e[n])}return t}(w(e,t))},A=Object.hasOwnProperty,D=function(e,t){return A.call(e,t)};"undefined"!=typeof window?window:Function("return this;")();var k,T,O,B,N=(k=3,function(e){return function(e){return e.dom.nodeType}(e)===k}),F=function(e,t,n){!function(e,t,n){if(!(i(n)||u(n)||s(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)},M=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},P={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return M(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return M(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return M(n)},fromDom:M,fromPoint:function(e,t,n){return v.from(e.dom.elementFromPoint(t,n)).map(M)}},I=function(e,t){return{element:e,offset:t}},R=function(e,t){var n=function(e){return w(e.dom.childNodes,P.fromDom)}(e);return n.length>0&&t<n.length?I(n[t],0):I(e,t)},L=function(e,t){(function(e){return v.from(e.dom.parentNode).map(P.fromDom)})(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},z=function(e,t){L(e,t),function(e,t){e.dom.appendChild(t.dom)}(t,e)},V=(T=N,O="text",{get:function(e){if(!T(e))throw new Error("Can only get "+O+" value of a "+O+" node");return B(e).getOr("")},getOption:B=function(e){return T(e)?v.from(e.dom.nodeValue):v.none()},set:function(e,t){if(!T(e))throw new Error("Can only set raw "+O+" value of a "+O+" node");e.dom.nodeValue=t}}),H=function(e){return V.get(e)},$=function(e,t){return function(e,t){var n,r=void 0===t?document:t.dom;return 1!==(n=r).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:w(r.querySelectorAll(e),P.fromDom)}(t,e)},j=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),U=function(e,t){return e.isBlock(t)||D(e.schema.getShortEndedElements(),t.nodeName)},W=function(e,t){return"false"===e.getContentEditable(t)},q=function(e,t){return!e.isBlock(t)&&D(e.schema.getWhiteSpaceElements(),t.nodeName)},G=function(e,t){return R(P.fromDom(e),t)},X=function(e,t,n,r,o,i){void 0===i&&(i=!0);for(var a=i?t(!1):n;a;){var u=W(e,a);if(u||q(e,a)){if(u?r.cef(a):r.boundary(a))break;a=t(!0)}else{if(U(e,a)){if(r.boundary(a))break}else 3===a.nodeType&&r.text(a);if(a===o)break;a=t(!1)}}},K=function(e,t,n,r,o){if(!function(e,t){return U(e,t)||W(e,t)||q(e,t)||function(e,t){return"true"===e.getContentEditable(t)&&"false"===e.getContentEditableParent(t.parentNode)}(e,t)}(e,n)){var i=e.getParent(r,e.isBlock),a=new j(n,i),u=o?a.next.bind(a):a.prev.bind(a);X(e,u,n,{boundary:d,cef:d,text:function(e){o?t.fOffset+=e.length:t.sOffset+=e.length,t.elements.push(P.fromDom(e))}})}},Y=function(e,t,n,r,o,i){void 0===i&&(i=!0);var a=new j(n,t),u=[],s={sOffset:0,fOffset:0,elements:[]};K(e,s,n,t,!1);var c=function(){return s.elements.length>0&&(u.push(s),s={sOffset:0,fOffset:0,elements:[]}),!1};return X(e,a.next.bind(a),n,{boundary:c,cef:function(e){return c(),o&&u.push.apply(u,o.cef(e)),!1},text:function(e){s.elements.push(P.fromDom(e)),o&&o.text(e,s)}},r,i),r&&K(e,s,r,t,!0),c(),u},J=function(e,t){var n=G(t.startContainer,t.startOffset),r=n.element.dom,o=G(t.endContainer,t.endOffset),i=o.element.dom;return Y(e,t.commonAncestorContainer,r,i,{text:function(e,t){e===i?t.fOffset+=e.length-o.offset:e===r&&(t.sOffset+=n.offset)},cef:function(t){var n,r,o,i=E($(P.fromDom(t),"*[contenteditable=true]"),(function(t){var n=t.dom;return Y(e,n,n)}));return n=i,r=function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,Node.DOCUMENT_POSITION_PRECEDING)}(e.elements[0].dom,t.elements[0].dom)?1:-1},(o=C.call(n,0)).sort(r),o}},!1)},Q=function(e,t){return t.collapsed?[]:J(e,t)},Z=function(e,t){var n=e.createRng();return n.selectNode(t),Q(e,n)},ee=function(e,t){var n,r,o;return function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],s=t(u);s!==n&&(r.push(o),o=[]),n=s,o.push(u)}return 0!==o.length&&r.push(o),r}((n=e,r=function(e,n){var r=H(n),o=e.last,i=o+r.length,a=E(t,(function(e,t){return e.start<i&&e.finish>o?[{element:n,start:Math.max(o,e.start)-o,finish:Math.min(i,e.finish)-o,matchId:t}]:[]}));return{results:e.results.concat(a),last:i}},o={results:[],last:0},_(n,(function(e){o=r(o,e)})),o).results,(function(e){return e.matchId}))},te=function(e,t){return E(t,(function(t){var n=t.elements,r=w(n,H).join(""),o=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);var o=t.regex;o.lastIndex=n;for(var i,a=[];i=o.exec(e);){var u=i[t.matchIndex],s=i.index+i[0].indexOf(u),c=s+u.length;if(c>r)break;a.push({start:s,finish:c}),o.lastIndex=c}return a}(r,e,t.sOffset,r.length-t.fOffset);return ee(n,o)}))},ne=function(e,t){S(e,(function(e,n){S(e,(function(e){var r=P.fromDom(t.cloneNode(!1));F(r,"data-mce-index",n);var o=e.element.dom;if(o.length===e.finish&&0===e.start)z(e.element,r);else{o.length!==e.finish&&o.splitText(e.finish);var i=o.splitText(e.start);z(P.fromDom(i),r)}}))}))},re=function(e,t,n,r){var o=n.getBookmark(),i=e.select("td[data-mce-selected],th[data-mce-selected]"),a=i.length>0?function(e,t){return E(t,(function(t){return Z(e,t)}))}(e,i):Q(e,n.getRng()),u=te(t,a);return ne(u,r),n.moveToBookmark(o),u.length},oe=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},ie=function(e,t,n,r){var o=e.dom.create("span",{"data-mce-bogus":1});o.className="mce-match-marker";var i=e.getBody();return me(e,t,!1),r?re(e.dom,n,e.selection,o):function(e,t,n,r){var o=Z(e,n),i=te(t,o);return ne(i,r),i.length}(e.dom,n,i,o)},ae=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},ue=function(e,t){var n=[],r=b.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=oe(r[o]);null!==i&&i.length&&(i===t.toString()&&n.push(r[o]))}return n},se=function(e,t,n){var r=t.get(),o=r.index,i=e.dom;(n=!1!==n)?o+1===r.count?o=0:o++:o-1==-1?o=r.count-1:o--,i.removeClass(ue(e,r.index),"mce-match-marker-selected");var a=ue(e,o);return a.length?(i.addClass(ue(e,o),"mce-match-marker-selected"),e.selection.scrollIntoView(a[0]),o):-1},ce=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},le=function(e,t,n,r,o,i){var a=function(e,t){var n="("+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return t?"(?:^|\\s|"+y()+")"+n+"(?=$|\\s|"+y()+")":n}(n,o),u={regex:new RegExp(a,r?"g":"gi"),matchIndex:1},s=ie(e,t,u,i);if(s){var c=se(e,t,!0);t.set({index:c,count:s,text:n,matchCase:r,wholeWord:o,inSelection:i})}return s},fe=function(e,t){var r=se(e,t,!0);t.set(n(n({},t.get()),{index:r}))},de=function(e,t){var r=se(e,t,!1);t.set(n(n({},t.get()),{index:r}))},pe=function(e){var t=oe(e);return null!==t&&t.length>0},he=function(e,t,r,o,i){var a,u=t.get(),s=u.index,c=s;o=!1!==o;for(var l=e.getBody(),f=b.grep(b.toArray(l.getElementsByTagName("span")),pe),d=0;d<f.length;d++){var p=oe(f[d]),h=a=parseInt(p,10);if(i||h===u.index){for(r.length?(f[d].firstChild.nodeValue=r,ae(f[d])):ce(e.dom,f[d]);f[++d];){if((h=parseInt(oe(f[d]),10))!==a){d--;break}ce(e.dom,f[d])}o&&c--}else a>s&&f[d].setAttribute("data-mce-index",String(a-1))}return t.set(n(n({},u),{count:i?0:u.count-1,index:c})),o?fe(e,t):de(e,t),!i&&t.get().count>0},me=function(e,t,r){var o,i,a,u=t.get(),s=b.toArray(e.getBody().getElementsByTagName("span"));for(o=0;o<s.length;o++){var c=oe(s[o]);null!==c&&c.length&&(c===u.index.toString()&&(i||(i=s[o].firstChild),a=s[o].firstChild),ae(s[o]))}if(t.set(n(n({},u),{index:-1,count:0,text:""})),i&&a){var l=e.dom.createRng();return l.setStart(i,0),l.setEnd(a,a.data.length),!1!==r&&e.selection.setRng(l),l}},ge=tinymce.util.Tools.resolve("tinymce.Env"),ve=function(t,r){var o,i=(o=e(v.none()),{clear:function(){return o.set(v.none())},set:function(e){return o.set(v.some(e))},isSet:function(){return o.get().isSome()},on:function(e){return o.get().each(e)}});t.undoManager.add();var a=b.trim(t.selection.getContent({format:"text"})),u=function(e){(function(e,t){return t.get().count>1}(0,r)?e.enable:e.disable)("next"),(function(e,t){return t.get().count>1}(0,r)?e.enable:e.disable)("prev")},s=function(e,t){var n=t?e.disable:e.enable;_(["replace","replaceall","prev","next"],n)},c=function(e,t){ge.browser.isSafari()&&ge.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)},l=function(e){me(t,r,!1),s(e,!0),u(e)},f=function(e){var n=e.getData(),o=r.get();if(n.findtext.length){if(o.text===n.findtext&&o.matchCase===n.matchcase&&o.wholeWord===n.wholewords)fe(t,r);else{var i=le(t,r,n.findtext,n.matchcase,n.wholewords,n.inselection);i<=0&&function(e){t.windowManager.alert("Could not find the specified string.",(function(){e.focus("findtext")}))}(e),s(e,0===i)}u(e)}else l(e)},d=r.get(),p={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:{findtext:a,replacetext:"",wholewords:d.wholeWord,matchcase:d.matchCase,inselection:d.inSelection},onChange:function(e,t){"findtext"===t.name&&r.get().count>0&&l(e)},onAction:function(e,o){var i=e.getData();switch(o.name){case"find":f(e);break;case"replace":he(t,r,i.replacetext)?u(e):l(e);break;case"replaceall":he(t,r,i.replacetext,!0,!0),l(e);break;case"prev":de(t,r),u(e);break;case"next":fe(t,r),u(e);break;case"matchcase":case"wholewords":case"inselection":!function(e){var t=e.getData(),o=r.get();r.set(n(n({},o),{matchCase:t.matchcase,wholeWord:t.wholewords,inSelection:t.inselection}))}(e),l(e)}c(e,o.name)},onSubmit:function(e){f(e),c(e,"find")},onClose:function(){t.focus(),me(t,r),t.undoManager.add()}};i.set(t.windowManager.open(p,{inline:"toolbar"}))},ye=function(e,t){return function(){ve(e,t)}};t.add("searchreplace",(function(t){var n=e({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return function(e,t){e.addCommand("SearchReplace",(function(){ve(e,t)}))}(t,n),function(e,t){e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ye(e,t),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ye(e,t),icon:"search"}),e.shortcuts.add("Meta+F","",ye(e,t))}(t,n),function(e,t){return{done:function(n){return me(e,t,n)},find:function(n,r,o,i){return void 0===i&&(i=!1),le(e,t,n,r,o,i)},next:function(){return fe(e,t)},prev:function(){return de(e,t)},replace:function(n,r,o){return he(e,t,n,r,o)}}}(t,n)}))}(),function(){var e=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=Object.hasOwnProperty,r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=tinymce.util.Tools.resolve("tinymce.util.URI"),i=tinymce.util.Tools.resolve("tinymce.util.XHR"),a=function(e){return e.getParam("spellchecker_rpc_url")},u=function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)},s=function(e){return e&&1===e.nodeType&&"false"===e.contentEditable},c=function(e,t){var n,r=[],o=t.dom,i=t.schema.getBlockElements(),a=t.schema.getWhiteSpaceElements(),u=t.schema.getShortEndedElements(),c=function(e,t){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}},l=function(e){var t;if(3===e.nodeType)return e.data;if(a[e.nodeName]&&!i[e.nodeName])return"";if(s(e))return"\n";if(t="",(i[e.nodeName]||u[e.nodeName])&&(t+="\n"),e=e.firstChild)do{t+=l(e)}while(e=e.nextSibling);return t},f=function(e){for(var t=e.parentNode;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)},d=function(t){var n=e.getElementsByTagName("*"),r=[];t="number"==typeof t?""+t:null;for(var o=0;o<n.length;o++){var i=n[o],a=i.getAttribute("data-mce-index");null!==a&&a.length&&-1!==i.className.indexOf("mce-spellchecker-word")&&(a!==t&&null!==t||r.push(i))}return r},p=function(e){for(var t=r.length;t--;)if(r[t]===e)return t;return-1};function h(e){for(var t=0,n=r.length;t<n&&!1!==e(r[t],t);t++);return this}function m(e){var t,n=d(e?p(e):null);for(t=n.length;t--;)f(n[t]);return this}var g=function(e){var n=d(p(e)),r=t.dom.createRng();return r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),r};var v=l(e);return{text:v,matches:r,each:h,filter:function(e){var t=[];return h((function(n,r){e(n,r)&&t.push(n)})),r=t,this},reset:function(){return r.splice(0,r.length),m(),this},matchFromElement:function(e){return r[e.getAttribute("data-mce-index")]},elementFromMatch:function(e){return d(p(e))[0]},find:function(e,t){if(v&&e.global)for(;n=e.exec(v);)r.push(c(n,t));return this},add:function(e,t,n){return r.push({start:e,end:e+t,text:v.substr(e,t),data:n}),this},wrap:function(t){return r.length&&function(e,t,n){var r,o,c,l,f,d=[],p=0,h=e,m=0;(t=t.slice(0)).sort((function(e,t){return e.start-t.start})),f=t.shift();e:for(;;){if((i[h.nodeName]||u[h.nodeName]||s(h))&&p++,3===h.nodeType&&(!o&&h.length+p>=f.end?(o=h,l=f.end-p):r&&d.push(h),!r&&h.length+p>f.start&&(r=h,c=f.start-p),p+=h.length),r&&o){if(h=n({startNode:r,startNodeIndex:c,endNode:o,endNodeIndex:l,innerNodes:d,match:f.text,matchIndex:m}),p-=o.length-l,r=null,o=null,d=[],m++,!(f=t.shift()))break}else if(a[h.nodeName]&&!i[h.nodeName]||!h.firstChild){if(h.nextSibling){h=h.nextSibling;continue}}else if(!s(h)){h=h.firstChild;continue}for(;;){if(h.nextSibling){h=h.nextSibling;break}if(h.parentNode===e)break e;h=h.parentNode}}}(e,r,function(e){var t=function(t,n){var i=r[n];i.stencil||(i.stencil=e(i));var a=i.stencil.cloneNode(!1);return a.setAttribute("data-mce-index",n),t&&a.appendChild(o.doc.createTextNode(t)),a};return function(e){var n,r,i,a=e.startNode,u=e.endNode,s=e.matchIndex,c=o.doc;if(a===u){var l=a;i=l.parentNode,e.startNodeIndex>0&&(n=c.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var f=t(e.match,s);return i.insertBefore(f,l),e.endNodeIndex<l.length&&(r=c.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),f}n=c.createTextNode(a.data.substring(0,e.startNodeIndex)),r=c.createTextNode(u.data.substring(e.endNodeIndex));for(var d=t(a.data.substring(e.startNodeIndex),s),p=0,h=e.innerNodes.length;p<h;++p){var m=e.innerNodes[p],g=t(m.data,s);m.parentNode.replaceChild(g,m)}var v=t(u.data.substring(0,e.endNodeIndex),s);return(i=a.parentNode).insertBefore(n,a),i.insertBefore(d,a),i.removeChild(a),(i=u.parentNode).insertBefore(v,u),i.insertBefore(r,u),i.removeChild(u),v}}(t)),this},unwrap:m,replace:function(e,n){var r=g(e);return r.deleteContents(),n.length>0&&r.insertNode(t.dom.doc.createTextNode(n)),r},rangeFromMatch:g,indexOf:p}},l=function(e,t){if(!t.get()){var n=c(e.getBody(),e);t.set(n)}return t.get()},f=function(e,t,n,u,s,c,l){var f=function(e){return e.getParam("spellchecker_callback")}(e);(f||function(e,t,n){return function(u,s,c,l){var f={method:u,lang:n.get()},d="";f["addToDictionary"===u?"word":"text"]=s,r.each(f,(function(e,t){d&&(d+="&"),d+=t+"="+encodeURIComponent(e)})),i.send({url:new o(t).toAbsolute(a(e)),type:"post",content_type:"application/x-www-form-urlencoded",data:d,success:function(t){var n=JSON.parse(t);if(n)n.error?l(n.error):c(n);else{var r=e.translate("Server response wasn't proper JSON.");l(r)}},error:function(){var t=e.translate("The spelling service was not found: (")+a(e)+e.translate(")");l(t)}})}}(e,t,n)).call(e.plugins.spellchecker,u,s,c,l)},d=function(e,t,n,r,o,i){if(!m(e,n,r)){e.setProgressState(!0),f(e,t,i,"spellcheck",l(e,r).text,(function(t){v(e,n,r,o,t)}),(function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),m(e,n,r)})),e.focus()}},p=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||m(e,t,n)},h=function(e,t,n,o,i,a){e.selection.collapse(),a?r.each(e.dom.select("span.mce-spellchecker-word"),(function(t){t.getAttribute("data-mce-word")===o&&e.dom.remove(t,!0)})):e.dom.remove(i,!0),p(e,t,n)},m=function(e,t,n){var r=e.selection.getBookmark();if(l(e,n).reset(),e.selection.moveToBookmark(r),n.set(null),t.get())return t.set(!1),function(e){e.fire("SpellcheckEnd")}(e),!0},g=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},v=function(e,t,r,o,i){var a=!!i.dictionary,s=i.words;if(e.setProgressState(!1),function(e){for(var t in e)if(n.call(e,t))return!1;return!0}(s)){var c=e.translate("No misspellings found.");return e.notificationManager.open({text:c,type:"info"}),void t.set(!1)}o.set({suggestions:s,hasDictionarySupport:a});var f=e.selection.getBookmark();l(e,r).find(u(e)).filter((function(e){return!!s[e.text]})).wrap((function(t){return e.dom.create("span",{class:"mce-spellchecker-word","aria-invalid":"spelling","data-mce-bogus":1,"data-mce-word":t.text})})),e.selection.moveToBookmark(f),t.set(!0),function(e){e.fire("SpellcheckStart")}(e)},y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b="SpellcheckStart SpellcheckEnd",C=function(e,t,n,o,i,a){var u,s,c=(u=function(e){return r.map(function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")}(e).split(","),(function(e){var t=e.split("=");return{name:t[0],value:t[1]}}))}(e),s=[],r.each(u,(function(e){s.push({selectable:!0,text:e.name,data:e.value})})),s),l=function(){d(e,t,n,o,a,i)},f={tooltip:"Spellcheck",onAction:l,icon:"spell-check",onSetup:function(t){var r=function(){t.setActive(n.get())};return e.on(b,r),function(){e.off(b,r)}}},p=y(y({},f),{type:"splitbutton",select:function(e){return e===i.get()},fetch:function(e){e(r.map(c,(function(e){return{type:"choiceitem",value:e.data,text:e.text}})))},onItemAction:function(e,t){i.set(t)}});c.length>1?e.ui.registry.addSplitButton("spellchecker",p):e.ui.registry.addToggleButton("spellchecker",f),e.ui.registry.addToggleMenuItem("spellchecker",{text:"Spellcheck",icon:"spell-check",onSetup:function(t){t.setActive(n.get());var r=function(){t.setActive(n.get())};return e.on(b,r),function(){e.off(b,r)}},onAction:l})},x=function(e,t,n,o,i,a,u,s){var c=[],l=n.get().suggestions[u];return r.each(l,(function(t){c.push({text:t,onAction:function(){e.insertContent(e.dom.encode(t)),e.dom.remove(s),p(e,o,i)}})})),n.get().hasDictionarySupport&&(c.push({type:"separator"}),c.push({text:"Add to dictionary",onAction:function(){!function(e,t,n,r,o,i,a){e.setProgressState(!0),f(e,t,o,"addToDictionary",i,(function(){e.setProgressState(!1),e.dom.remove(a,!0),p(e,n,r)}),(function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)}))}(e,t,o,i,a,u,s)}})),c.push.apply(c,[{type:"separator"},{text:"Ignore",onAction:function(){h(e,o,i,u,s)}},{text:"Ignore all",onAction:function(){h(e,o,i,u,s,true)}}]),c},w=function(e,t,n,o,i,a){e.ui.registry.addContextMenu("spellchecker",{update:function(u){var s=u;if("mce-spellchecker-word"!==s.className)return[];var c=function(e,t){var n=[],o=r.toArray(e.getBody().getElementsByTagName("span"));if(o.length)for(var i=0;i<o.length;i++){var a=g(o[i]);null!==a&&a.length&&a===t.toString()&&n.push(o[i])}return n}(e,g(s));if(c.length>0){var l=e.dom.createRng();return l.setStartBefore(c[0]),l.setEndAfter(c[c.length-1]),e.selection.setRng(l),x(e,t,n,o,i,a,s.getAttribute("data-mce-word"),c)}}})};t.add("spellchecker",(function(t,n){if(!1===function(e){return!!e.hasPlugin("tinymcespellchecker",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0)}(t)){var r=e(!1),o=e(function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)}(t)),i=e(null),a=e(null);return C(t,n,r,i,o,a),w(t,n,a,r,i,o),function(e,t,n,r,o,i){e.addCommand("mceSpellCheck",(function(){d(e,t,n,r,o,i)}))}(t,n,r,i,a,o),function(e,t,n,r,o,i){return{getTextMatcher:r.get,getWordCharPattern:function(){return u(e)},markErrors:function(o){v(e,t,r,n,o)},getLanguage:o.get}}(t,r,a,i,o)}}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Delay"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.util.VK"),u=t.DOM,s=function(e){e.keyCode!==a.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()};e.add("tabfocus",(function(e){!function(e){var t=function(t){var s,c;if(!(t.keyCode!==a.TAB||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())){var l,f=function(r){var o=u.select(":input:enabled,*[tabindex]:not(iframe)"),a=function(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&a(e.parentNode)},l=function(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&n.get(t.id)&&-1!==e.tabIndex&&a(e)};if(i.each(o,(function(t,n){if(t.id===e.id)return s=n,!1})),r>0){for(c=s+1;c<o.length;c++)if(l(o[c]))return o[c]}else for(c=s-1;c>=0;c--)if(l(o[c]))return o[c];return null},d=i.explode(function(e){return e.getParam("tab_focus",function(e){return e.getParam("tabfocus_elements",":prev,:next")}(e))}(e));if(1===d.length&&(d[1]=d[0],d[0]=":prev"),l=t.shiftKey?":prev"===d[0]?f(-1):u.get(d[0]):":next"===d[1]?f(1):u.get(d[1])){var p=n.get(l.id||l.name);l.id&&p?p.focus():o.setTimeout((function(){r.webkit||window.focus(),l.focus()}),10),t.preventDefault()}}};e.on("init",(function(){e.inline&&u.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",s),r.gecko?e.on("keypress keydown",t):e.on("keydown",t)}))}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){},n=function(e){return function(){return e}};var r=n(!1),o=n(!0),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.util.XHR"),u=function(e){return e.getParam("template_mdate_classes","mdate")},s=function(e){return e.getParam("template_replace_values")},c=function(e){return e.getParam("template_mdate_format",e.translate("%Y-%m-%d"))},l=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},f=function(e,t,n){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",l(n.getMonth()+1,2))).replace("%d",l(n.getDate(),2))).replace("%H",""+l(n.getHours(),2))).replace("%M",""+l(n.getMinutes(),2))).replace("%S",""+l(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(a[n.getMonth()]))).replace("%b",""+e.translate(i[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},d=function(e,t){return function(){var n=function(e){return e.getParam("templates")}(e);"function"!=typeof n?"string"==typeof n?a.send({url:n,success:function(e){t(JSON.parse(e))}}):t(n):n(t)}},p=function(e,t){return i.each(t,(function(t,n){"function"==typeof t&&(t=t(n)),e=e.replace(new RegExp("\\{\\$"+n+"\\}","g"),t)})),e},h=function(e,t){var n=e.dom,r=s(e);i.each(n.select("*",t),(function(e){i.each(r,(function(t,o){n.hasClass(e,o)&&"function"==typeof r[o]&&r[o](e)}))}))},m=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)},g=function(e,t,n){var r,o=e.dom,a=e.selection.getContent();n=p(n,s(e)),r=o.create("div",null,n);var l=o.select(".mceTmpl",r);l&&l.length>0&&(r=o.create("div",null)).appendChild(l[0].cloneNode(!0)),i.each(o.select("*",r),(function(t){m(t,function(e){return e.getParam("template_cdate_classes","cdate")}(e).replace(/\s+/g,"|"))&&(t.innerHTML=f(e,function(e){return e.getParam("template_cdate_format",e.translate("%Y-%m-%d"))}(e))),m(t,u(e).replace(/\s+/g,"|"))&&(t.innerHTML=f(e,c(e))),m(t,function(e){return e.getParam("template_selected_content_classes","selcontent")}(e).replace(/\s+/g,"|"))&&(t.innerHTML=a)})),h(e,r),e.execCommand("mceInsertContent",!1,r.innerHTML),e.addVisual()},v=function(){return y},y=function(){var e=function(e){return e.isNone()},i=function(e){return e()},a=function(e){return e};return{fold:function(e,t){return e()},is:r,isSome:r,isNone:o,getOr:a,getOrThunk:i,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:a,orThunk:i,map:v,each:t,bind:v,exists:r,forall:o,filter:v,equals:e,equals_:e,toArray:function(){return[]},toString:n("none()")}}(),b=function(e){var t=n(e),i=function(){return u},a=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:o,isNone:r,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:i,orThunk:i,map:function(t){return b(t(e))},each:function(t){t(e)},bind:a,exists:a,forall:a,filter:function(t){return t(e)?u:y},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(r,(function(t){return n(e,t)}))}};return u},C={some:b,none:v,from:function(e){return null==e?y:b(e)}},x=function(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return C.some(i);if(n(i,r))break}return C.none()}(e,t,r)},w=tinymce.util.Tools.resolve("tinymce.Env"),_=tinymce.util.Tools.resolve("tinymce.util.Promise"),S=Object.hasOwnProperty,E=function(e,t){return S.call(e,t)},A={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},D=function(e){return e.replace(/["'<>&]/g,(function(e){return(t=A,n=e,E(t,n)?C.from(t[n]):C.none()).getOr(e);var t,n}))},k=function(e,t){var n=function(e){return function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e,(function(e){return{text:e.text,value:e.text}}))},r=function(e,t){return x(e,(function(e){return e.text===t}))},o=function(t){e.windowManager.alert("Could not load the specified template.",(function(){return t.focus("template")}))},u=function(e){return new _((function(t,n){e.value.url.fold((function(){return t(e.value.content.getOr(""))}),(function(e){return a.send({url:e,success:function(e){t(e)},error:function(e){n(e)}})}))}))},s=function(e,t){return function(n,i){if("template"===i.name){var a=n.getData().template;r(e,a).each((function(e){n.block("Loading..."),u(e).then((function(r){t(n,e,r)})).catch((function(){t(n,e,""),n.disable("save"),o(n)}))}))}}},c=function(t){return function(n){var i=n.getData();r(t,i.template).each((function(t){u(t).then((function(t){g(e,0,t),n.close()})).catch((function(){n.disable("save"),o(n)}))}))}};(function(){if(!t||0===t.length){var n=e.translate("No templates defined.");return e.notificationManager.open({text:n,type:"info"}),C.none()}return C.from(i.map(t,(function(e,t){var n=function(e){return void 0!==e.url};return{selected:0===t,text:e.title,value:{url:n(e)?C.from(e.url):C.none(),content:n(e)?C.none():C.from(e.content),description:e.description}}})))})().each((function(t){var r=n(t),a=function(e,n){return{title:"Insert Template",size:"large",body:{type:"panel",items:e},initialData:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:c(t),onChange:s(t,l)}},l=function(t,n,o){var u=function(e,t){if(-1===t.indexOf("<html>")){var n="",r=function(e){return e.getParam("content_style","","string")}(e),o=function(e){return e.getParam("content_css_cors",!1,"boolean")}(e)?' crossorigin="anonymous"':"";i.each(e.contentCSS,(function(t){n+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'"'+o+">"})),r&&(n+='<style type="text/css">'+r+"</style>");var a=function(e){var t=e.getParam("body_class","","string");return-1===t.indexOf("=")?t:function(e){return e.getParam("body_class","","hash")[e.id]||""}(e)}(e),u=e.dom.encode,s='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(w.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",c=e.getBody().dir,l=c?' dir="'+u(c)+'"':"";t='<!DOCTYPE html><html><head><base href="'+u(e.documentBaseURI.getURI())+'">'+n+s+'</head><body class="'+u(a)+'"'+l+">"+t+"</body></html>"}return p(t,function(e){return e.getParam("template_preview_replace_values")}(e))}(e,o),s=[{type:"selectbox",name:"template",label:"Templates",items:r},{type:"htmlpanel",html:'<p aria-live="polite">'+D(n.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],c={template:n.text,preview:u};t.unblock(),t.redial(a(s,c)),t.focus("template")},f=e.windowManager.open(a([],{template:"",preview:""}));f.block("Loading..."),u(t[0]).then((function(e){l(f,t[0],e)})).catch((function(){l(f,t[0],""),f.disable("save"),o(f)}))}))},T=function(e){return function(t){k(e,t)}};e.add("template",(function(e){!function(e){e.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:d(e,T(e))}),e.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:d(e,T(e))})}(e),function(e){e.addCommand("mceInsertTemplate",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}(g,e))}(e),function(e){e.on("PreProcess",(function(t){var n=e.dom,r=c(e);i.each(n.select("div",t.node),(function(t){n.hasClass(t,"mceTmpl")&&(i.each(n.select("*",t),(function(t){n.hasClass(t,u(e).replace(/\s+/g,"|"))&&(t.innerHTML=f(e,r))})),h(e,t))}))}))}(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var n=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},r=n("string"),o=n("object"),i=n("array"),a=function(){},u=function(e){return function(){return e}},s=function(e){return e},c=u(!1),l=u(!0),f=function(){return d},d=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:t,map:f,each:a,bind:f,exists:c,forall:l,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:u("none()")}}(),p=function(e){var t=u(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:d},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,(function(t){return n(e,t)}))}};return o},h={some:p,none:f,from:function(e){return null==e?d:p(e)}},m=Array.prototype.slice,g=Array.prototype.indexOf,v=function(e,t){return n=e,r=t,g.call(n,r)>-1;var n,r},y=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},b=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},C=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},x=function(e,t,n){return function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,(function(e){n=t(n,e)})),n},w=function(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return h.some(i);if(n(i,r))break}return h.none()}(e,t,c)},_=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},S=function(e){return function(e,t){return t>=0&&t<e.length?h.some(e[t]):h.none()}(e,0)},E=Object.keys,A=Object.hasOwnProperty;(function(e){if(!i(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};b(e,(function(r,o){var a=E(r);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],s=r[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!i(s))throw new Error("case arguments must be an array");t.push(u),n[u]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+i);var a=function(e){var r=E(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!_(t,(function(e){return v(r,e)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[u].apply(null,n)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);var i=t[o];return i.apply(null,n)},match:a,log:function(e){}}}}))})([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var D=function(e){var t=[],n=[];return b(e,(function(e){e.fold((function(e){t.push(e)}),(function(e){n.push(e)}))})),{errors:t,values:n}},k=function(e){return{is:function(t){return e===t},isValue:l,isError:c,getOr:u(e),getOrThunk:u(e),getOrDie:u(e),or:function(t){return k(e)},orThunk:function(t){return k(e)},fold:function(t,n){return n(e)},map:function(t){return k(t(e))},mapError:function(t){return k(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return h.some(e)}}},T=function(e){return{is:c,isValue:c,isError:l,getOr:s,getOrThunk:function(e){return e()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return T(e)},mapError:function(t){return T(t(e))},each:a,bind:function(t){return T(e)},exists:c,forall:l,toOptional:h.none}},O={value:k,error:T,fromOption:function(e,t){return e.fold((function(){return T(t)}),k)}},B=function(e){return"inline-command"===e.type||"inline-format"===e.type},N=function(e){return"block-command"===e.type||"block-format"===e.type},F=function(e){return t=e,n=function(e,t){return e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1},(r=m.call(t,0)).sort(n),r;var t,n,r},M=function(e){var t=function(t){return O.error({message:t,pattern:e})},n=function(n,o,a){if(void 0!==e.format){var u=void 0;if(i(e.format)){if(!_(e.format,r))return t(n+" pattern has non-string items in the `format` array");u=e.format}else{if(!r(e.format))return t(n+" pattern has non-string `format` parameter");u=[e.format]}return O.value(o(u))}return void 0!==e.cmd?r(e.cmd)?O.value(a(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!o(e))return t("Raw pattern is not an object");if(!r(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!r(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");var a=e.start,u=e.end;return 0===u.length&&(u=a,a=""),n("Inline",(function(e){return{type:"inline-format",start:a,end:u,format:e}}),(function(e,t){return{type:"inline-command",start:a,end:u,cmd:e,value:t}}))}return void 0!==e.replacement?r(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):O.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",(function(t){return{type:"block-format",start:e.start,format:t[0]}}),(function(t,n){return{type:"block-command",start:e.start,cmd:t,value:n}}))},P=function(e){return"block-command"===e.type?{start:e.start,cmd:e.cmd,value:e.value}:"block-format"===e.type?{start:e.start,format:e.format}:"inline-command"===e.type?"mceInsertContent"===e.cmd&&""===e.start?{start:e.end,replacement:e.value}:{start:e.start,end:e.end,cmd:e.cmd,value:e.value}:"inline-format"===e.type?{start:e.start,end:e.end,format:1===e.format.length?e.format[0]:e.format}:void 0},I=function(e){return{inlinePatterns:C(e,B),blockPatterns:F(C(e,N))}},R=function(e){return{setPatterns:function(t){var n=D(y(t,M));if(n.errors.length>0){var r=n.errors[0];throw new Error(r.message+":\n"+JSON.stringify(r.pattern,null,2))}e.set(I(n.values))},getPatterns:function(){return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}(y(e.get().inlinePatterns,P),y(e.get().blockPatterns,P))}}},L="undefined"!=typeof window?window:Function("return this;")(),z=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=L.console;n&&(n.error?n.error.apply(n,e):n.log.apply(n,e))},V=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],H=function(e){var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},$=tinymce.util.Tools.resolve("tinymce.util.Delay"),j=tinymce.util.Tools.resolve("tinymce.util.VK"),U=tinymce.util.Tools.resolve("tinymce.util.Tools"),W=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),q=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),G=function(e,t){return{container:e,offset:t}},X=function(e){return e.nodeType===Node.TEXT_NODE},K=function(e,t,n){if(t&&e.isEmpty(t)&&!n(t)){var r=t.parentNode;e.remove(t),K(e,r,n)}},Y=function(e,t,n,r){void 0===r&&(r=!0);var o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(X(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),X(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),K(e,o,n),o!==i&&K(e,i,n))},J=function(e,t){var n=t.get(e);return i(n)&&S(n).exists((function(e){return t=e,n="block",A.call(t,n);var t,n}))},Q=function(e){return 0===e.start.length},Z=function(e,t){var n=h.from(e.dom.getParent(t.startContainer,e.dom.isBlock));return""===H(e)?n.orThunk((function(){return h.some(e.getBody())})):n},ee=W.DOM,te=function(e){return function(t){return e===t?-1:0}},ne=function(e,t,n){if(X(e)&&t>=0)return h.some(G(e,t));var r=q(ee);return h.from(r.backwards(e,t,te(e),n)).map((function(e){return G(e.container,e.container.data.length)}))},re=function(e,t,n){if(!X(e))return h.none();var r=e.textContent;if(t>=0&&t<=r.length)return h.some(G(e,t));var o=q(ee);return h.from(o.backwards(e,t,te(e),n)).bind((function(e){var r=e.container.data;return re(e.container,t+r.length,n)}))},oe=function(e,t,n){if(!X(e))return h.none();var r=e.textContent;if(t<=r.length)return h.some(G(e,t));var o=q(ee);return h.from(o.forwards(e,t,te(e),n)).bind((function(e){return oe(e.container,t-r.length,n)}))},ie=function(e,t,n,r,o){var i=q(e,function(e){return function(t){return e.isBlock(t)||v(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t)}}(e));return h.from(i.backwards(t,n,r,o))},ae=function(e,t,n){if(X(t)&&(n<0||n>t.data.length))return[];for(var r=[n],o=t;o!==e&&o.parentNode;){for(var i=o.parentNode,a=0;a<i.childNodes.length;a++)if(i.childNodes[a]===o){r.push(a);break}o=i}return o===e?r.reverse():[]},ue=function(e,t,n,r,o){return{start:ae(e,t,n),end:ae(e,r,o)}},se=function(e,t){var n,r,o,i=t.slice(),a=i.pop();return(n=i,r=function(e,t){return e.bind((function(e){return h.from(e.childNodes[t])}))},o=h.some(e),b(n,(function(e){o=r(o,e)})),o).bind((function(e){return X(e)&&(a<0||a>e.data.length)?h.none():h.some({node:e,offset:a})}))},ce=function(e,t){return se(e,t.start).bind((function(n){var r=n.node,o=n.offset;return se(e,t.end).map((function(e){var t=e.node,n=e.offset,i=document.createRange();return i.setStart(r,o),i.setEnd(t,n),i}))}))},le=function(e,t,n){(function(e,t,n){if(X(e)&&t>=e.length)return h.some(G(e,t));var r=q(ee);return h.from(r.forwards(e,t,te(e),n)).map((function(e){return G(e.container,0)}))})(t,0,t).each((function(r){var o=r.container;oe(o,n.start.length,t).each((function(n){var r=e.createRng();r.setStart(o,0),r.setEnd(n.container,n.offset),Y(e,r,(function(e){return e===t}))}))}))},fe=function(e,t){var n=e.dom,r=e.selection.getRng();return Z(e,r).filter((function(t){var r=H(e),o=""===r&&n.is(t,"body")||n.is(t,r);return null!==t&&o})).bind((function(e){var r=e.textContent;return function(e,t){var n=t.replace(""," ");return w(e,(function(e){return 0===t.indexOf(e.start)||0===n.indexOf(e.start)}))}(t,r).map((function(t){return U.trim(r).length===t.start.length?[]:[{pattern:t,range:ue(n.getRoot(),e,0,e,0)}]}))})).getOr([])},de=function(e,t){if(0!==t.length){var n=e.selection.getBookmark();b(t,(function(t){return function(e,t){var n=e.dom,r=t.pattern,o=ce(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return Z(e,o).each((function(t){"block-format"===r.type?J(r.format,e.formatter)&&e.undoManager.transact((function(){le(e.dom,t,r),e.formatter.apply(r.format)})):"block-command"===r.type&&e.undoManager.transact((function(){le(e.dom,t,r),e.execCommand(r.cmd,!1,r.value)}))})),!0}(e,t)})),e.selection.moveToBookmark(n)}},pe=0,he=function(e,t){return e.create("span",{"data-mce-type":"bookmark",id:t})},me=function(e,t){var n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},ge=function(e,t,n){var r=ce(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,i=r.endContainer,a=0===r.endOffset?i:i.splitText(r.endOffset),u=0===r.startOffset?o:o.splitText(r.startOffset);return{prefix:t,end:a.parentNode.insertBefore(he(e,t+"-end"),a),start:u.parentNode.insertBefore(he(e,t+"-start"),u)}},ve=function(e,t,n){K(e,e.get(t.prefix+"-end"),n),K(e,e.get(t.prefix+"-start"),n)},ye=function(e,t,n,r){var o,i=t.start;return ie(e,r.container,r.offset,(o=i,function(e,t){var n=e.data.substring(0,t),r=n.lastIndexOf(o.charAt(o.length-1)),i=n.lastIndexOf(o);return-1!==i?i+o.length:-1!==r?r+1:-1}),n).bind((function(r){if(r.offset>=i.length){var o=e.createRng();return o.setStart(r.container,r.offset-i.length),o.setEnd(r.container,r.offset),h.some(o)}var a=r.offset-i.length;return re(r.container,a,n).map((function(t){var n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(r.container,r.offset),n})).filter((function(e){return e.toString()===i})).orThunk((function(){return ye(e,t,n,G(r.container,0))}))}))},be=function(e,t,n){var r=e.dom,o=r.getRoot(),i=n.pattern,a=n.position.container,u=n.position.offset;return re(a,u-n.pattern.end.length,t).bind((function(s){var c=ue(o,s.container,s.offset,a,u);if(Q(i))return h.some({matches:[{pattern:i,startRng:c,endRng:c}],position:s});var l=Ce(e,n.remainingPatterns,s.container,s.offset,t),f=l.getOr({matches:[],position:s}),d=f.position;return function(e,t,n,r,o,i){if(void 0===i&&(i=!1),0===t.start.length&&!i){var a=e.createRng();return a.setStart(n,r),a.setEnd(n,r),h.some(a)}return ne(n,r,o).bind((function(n){return ye(e,t,o,n).bind((function(e){if(i){if(e.endContainer===n.container&&e.endOffset===n.offset)return h.none();if(0===n.offset&&e.endContainer.textContent.length===e.endOffset)return h.none()}return h.some(e)}))}))}(r,i,d.container,d.offset,t,l.isNone()).map((function(e){var t=function(e,t){return ue(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset)}(o,e);return{matches:f.matches.concat([{pattern:i,startRng:t,endRng:c}]),position:G(e.startContainer,e.startOffset)}}))}))},Ce=function(e,t,n,r,o){var i=e.dom;return ne(n,r,i.getRoot()).bind((function(a){var u=i.createRng();u.setStart(o,0),u.setEnd(n,r);for(var s,c,l=u.toString(),f=0;f<t.length;f++){var d=t[f];if(s=l,c=d.end,function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(s,c,s.length-c.length)){var p=t.slice();p.splice(f,1);var m=be(e,o,{pattern:d,remainingPatterns:p,position:a});if(m.isSome())return m}}return h.none()}))},xe=function(e,t,n){e.selection.setRng(n),"inline-format"===t.type?b(t.format,(function(t){e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},we=function(e,n){var r,o,i=(r="mce_textpattern",o=(new Date).getTime(),r+"_"+Math.floor(1e9*Math.random())+ ++pe+String(o)),a=x(n,(function(n,r){var o=ge(e,i+"_end"+n.length,r.endRng);return n.concat([t(t({},r),{endMarker:o})])}),[]);return x(a,(function(n,r){var o=a.length-n.length-1,u=Q(r.pattern)?r.endMarker:ge(e,i+"_start"+o,r.startRng);return n.concat([t(t({},r),{startMarker:u})])}),[])},_e=function(e,t,n){var r=e.selection.getRng();return!1===r.collapsed?[]:Z(e,r).bind((function(o){var i=r.startOffset-(n?1:0);return Ce(e,t,r.startContainer,i,o)})).fold((function(){return[]}),(function(e){return e.matches}))},Se=function(e,t){if(0!==t.length){var n=e.dom,r=e.selection.getBookmark(),o=we(n,t);b(o,(function(t){var r=n.getParent(t.startMarker.start,n.isBlock),o=function(e){return e===r};Q(t.pattern)?function(e,t,n,r){var o=me(e.dom,n);Y(e.dom,o,r),xe(e,t,o)}(e,t.pattern,t.endMarker,o):function(e,t,n,r,o){var i=e.dom,a=me(i,r),u=me(i,n);Y(i,u,o),Y(i,a,o);var s={prefix:n.prefix,start:n.end,end:r.start},c=me(i,s);xe(e,t,c)}(e,t.pattern,t.startMarker,t.endMarker,o),ve(n,t.endMarker,o),ve(n,t.startMarker,o)})),e.selection.moveToBookmark(r)}},Ee=function(e,t){var n=_e(e,t.inlinePatterns,!0);n.length>0&&e.undoManager.transact((function(){Se(e,n)}))},Ae=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},De=function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",(function(n){13!==n.keyCode||j.modifierPressed(n)||function(e,t){if(!e.selection.isCollapsed())return!1;var n=_e(e,t.inlinePatterns,!1),r=fe(e,t.blockPatterns);return(r.length>0||n.length>0)&&(e.undoManager.add(),e.undoManager.extra((function(){e.execCommand("mceInsertNewLine")}),(function(){e.insertContent("\ufeff"),Se(e,n),de(e,r);var t=e.selection.getRng(),o=ne(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),o.each((function(t){var n=t.container;"\ufeff"===n.data.charAt(t.offset-1)&&(n.deleteData(t.offset-1,1),K(e.dom,n.parentNode,(function(t){return t===e.dom.getRoot()})))}))})),!0)}(e,t.get())&&n.preventDefault()}),!0),e.on("keyup",(function(n){Ae(r,n,(function(e,t){return e===t.keyCode&&!1===j.modifierPressed(t)}))&&Ee(e,t.get())})),e.on("keypress",(function(r){Ae(n,r,(function(e,t){return e.charCodeAt(0)===t.charCode}))&&$.setEditorTimeout(e,(function(){Ee(e,t.get())}))}))};e.add("textpattern",(function(e){var t,n,r=(t=function(e){var t=e.getParam("textpattern_patterns",V,"array");if(!i(t))return z("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var n=D(y(t,M));return b(n.errors,(function(e){return z(e.message,e.pattern)})),I(n.values)}(e),n=t,{get:function(){return n},set:function(e){n=e}});return De(e,r),R(r)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t,n){e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),function(e,t){e.fire("VisualBlocks",{state:t})}(e,n.get())},n=function(e,t){return function(n){n.setActive(t.get());var r=function(e){return n.setActive(e.state)};return e.on("VisualBlocks",r),function(){return e.off("VisualBlocks",r)}}};e.add("visualblocks",(function(e,r){var o,i=(o=!1,{get:function(){return o},set:function(e){o=e}});!function(e,n,r){e.addCommand("mceVisualBlocks",(function(){t(e,0,r)}))}(e,0,i),function(e,t){e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return e.execCommand("mceVisualBlocks")},onSetup:n(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return e.execCommand("mceVisualBlocks")},onSetup:n(e,t)})}(e,i),function(e,n,r){e.on("PreviewFormats AfterPreviewFormats",(function(t){r.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),e.on("init",(function(){(function(e){return e.getParam("visualblocks_default_state",!1,"boolean")})(e)&&t(e,0,r)}))}(e,0,i)}))}(),function(){var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return function(t){return typeof t===e}},r=(e="string",function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}),o=n("boolean"),i=n("number"),a=function(){},u=function(e){return function(){return e}},s=u(!1),c=u(!0),l=function(){return f},f=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:s,isSome:s,isNone:c,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:t,map:l,each:a,bind:l,exists:s,forall:c,filter:l,equals:e,equals_:e,toArray:function(){return[]},toString:u("none()")}}(),d=function(e){var t=u(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:c,isNone:s,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return d(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:f},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return o},p=function(e){return null==e?f:d(e)},h=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},m=Object.keys,g=function(e,t){for(var n=m(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}};"undefined"!=typeof window?window:Function("return this;")();var v,y,b=function(e){return e.dom.nodeValue},C=(v=3,function(e){return function(e){return e.dom.nodeType}(e)===v}),x=function(e,t,n){!function(e,t,n){if(!(r(n)||o(n)||i(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)},w=function(e,t){e.dom.removeAttribute(t)},_=function(e,t){var n=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n}(e,t);return void 0===n||""===n?[]:n.split(" ")},S=function(e){return void 0!==e.dom.classList},E=function(e,t){return function(e,t,n){var r=_(e,t).concat([n]);return x(e,t,r.join(" ")),!0}(e,"class",t)},A=function(e,t){return function(e,t,n){var r=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}(_(e,t),(function(e){return e!==n}));return r.length>0?x(e,t,r.join(" ")):w(e,t),!1}(e,"class",t)},D=function(e){0===(S(e)?e.dom.classList:function(e){return _(e,"class")}(e)).length&&w(e,"class")},k=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},T={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw new Error("HTML must have a single root node");return k(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return k(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return k(n)},fromDom:k,fromPoint:function(e,t,n){return p(e.dom.elementFromPoint(t,n)).map(k)}},O={"":"nbsp","":"shy"},B=function(e,t){var n="";return g(e,(function(e,t){n+=t})),new RegExp("["+n+"]",t?"g":"")},N=B(O),F=B(O,!0),M=(y="",g(O,(function(e){y&&(y+=","),y+="span.mce-"+e})),y),P="mce-nbsp",I=function(e){return'<span data-mce-bogus="1" class="mce-'+O[e]+'">'+e+"</span>"},R=function(e){var t=b(e);return C(e)&&void 0!==t&&N.test(t)},L=function(e,t){var n=[],r=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e.dom.childNodes,T.fromDom);return h(r,(function(e){t(e)&&(n=n.concat([e])),n=n.concat(L(e,t))})),n},z=function(e){return"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap")},V=function(e,t){var n=L(T.fromDom(t),R);h(n,(function(t){var n,r,o=t.dom.parentNode;if(z(o))n=T.fromDom(o),r=P,S(n)?n.dom.classList.add(r):E(n,r);else{for(var i=e.dom.encode(b(t)).replace(F,I),a=e.dom.create("div",null,i),u=void 0;u=a.lastChild;)e.dom.insertAfter(u,t.dom);e.dom.remove(t.dom)}}))},H=function(e,t){var n=e.dom.select(M,t);h(n,(function(t){var n,r;z(t)?(n=T.fromDom(t),r=P,S(n)?n.dom.classList.remove(r):A(n,r),D(n)):e.dom.remove(t,!0)}))},$=function(e){var t=e.getBody(),n=e.selection.getBookmark(),r=function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}}(e.selection.getNode(),t);H(e,r=void 0!==r?r:t),V(e,r),e.selection.moveToBookmark(n)},j=function(e,t){!function(e,t){e.fire("VisualChars",{state:t})}(e,t.get());var n=e.getBody();!0===t.get()?V(e,n):H(e,n)},U=function(e,t){e.addCommand("mceVisualChars",(function(){!function(e,t){t.set(!t.get());var n=e.selection.getBookmark();j(e,t),e.selection.moveToBookmark(n)}(e,t)}))},W=tinymce.util.Tools.resolve("tinymce.util.Delay"),q=function(e,t){return function(n){n.setActive(t.get());var r=function(e){return n.setActive(e.state)};return e.on("VisualChars",r),function(){return e.off("VisualChars",r)}}};t.add("visualchars",(function(e){var t,n,r=(t=function(e){return e.getParam("visualchars_default_state",!1)}(e),n=t,{get:function(){return n},set:function(e){n=e}});return U(e,r),function(e,t){e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:function(){return e.execCommand("mceVisualChars")},onSetup:q(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:function(){return e.execCommand("mceVisualChars")},onSetup:q(e,t)})}(e,r),function(e,t){var n=W.debounce((function(){$(e)}),300);(function(e){return!1!==e.getParam("forced_root_block")})(e)&&e.on("keydown",(function(r){!0===t.get()&&(13===r.keyCode?$(e):n())})),e.on("remove",n.stop)}(e,r),function(e,t){e.on("init",(function(){j(e,t)}))}(e,r),function(e){return{isEnabled:function(){return e.get()}}}(r)}))}(),function(){var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return e},r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o="[-'\\.]",i="[:]",a="[+*/,;;]",u="[0-9---------------------------------]",s="\\r",c="\\n",l="[\v\f\u2028\u2029]",f="[------------------------------------------------------------------------------------------------------]",d="[----\ufeff-]",p="[-------]",h="[=_--<>]",m="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",g=0,v=1,y=2,b=3,C=4,x=5,w=6,_=7,S=8,E=9,A=10,D=11,k=12,T=13,O=[new RegExp("[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),new RegExp(o),new RegExp(i),new RegExp(a),new RegExp(u),new RegExp(s),new RegExp(c),new RegExp(l),new RegExp(f),new RegExp(d),new RegExp(p),new RegExp(h),new RegExp("@")],B=new RegExp("^"+m+"$"),N=O,F=T,M=function(e){for(var t=F,n=N.length,r=0;r<n;++r){var o=N[r];if(o&&o.test(e)){t=r;break}}return t},P=function(e){var t,n;return function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e,(t=M,n={},function(e){if(n[e])return n[e];var r=t(e);return n[e]=r,r}))},I=function(e,t){var n=e[t],r=e[t+1];if(t<0||t>e.length-1&&0!==t)return!1;if(n===g&&r===g)return!1;var o=e[t+2];if(n===g&&(r===y||r===v||r===k)&&o===g)return!1;var i=e[t-1];return(n!==y&&n!==v&&r!==k||r!==g||i!==g)&&((n!==C&&n!==g||r!==C&&r!==g)&&((n!==b&&n!==v||r!==C||i!==C)&&((n!==C||r!==b&&r!==v||o!==C)&&(n!==S&&n!==E&&i!==S&&i!==E&&r!==S&&r!==E&&((n!==x||r!==w)&&(n===_||n===x||n===w||(r===_||r===x||r===w||(n!==A||r!==A)&&((r!==D||n!==g&&n!==C&&n!==A&&n!==D)&&((n!==D||r!==g&&r!==C&&r!==A)&&n!==k)))))))))},R=/^\s+$/,L=B,z=function(e){return"http"===e||"https"===e},V=function(e,t){var n=function(e,t){var n;for(n=t;n<e.length&&!R.test(e[n]);n++);return n}(e,t+1);return"://"===e.slice(t+1,n).join("").substr(0,3)?n:t},H=function(e,t,n){n=r(r({},{includeWhitespace:!1,includePunctuation:!1}),n);for(var o=[],i=[],a=0;a<e.length;a++){var u=t(e[a]);"\ufeff"!==u&&(o.push(e[a]),i.push(u))}return function(e,t,n,r){for(var o=[],i=[],a=0;a<n.length;++a)if(i.push(e[a]),I(n,a)){var u=t[a];if((r.includeWhitespace||!R.test(u))&&(r.includePunctuation||!L.test(u))){var s=a-i.length+1,c=a+1,l=t.slice(s,c).join("");if(z(l)){var f=V(t,a),d=e.slice(c,f);Array.prototype.push.apply(i,d),a=f}o.push(i)}i=[]}return o}(o,i,P(i),n)},$=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),j=function(e,t){for(var n,r=t.getBlockElements(),o=t.getShortEndedElements(),i=[],a="",u=new $(e,e);e=u.next();)3===e.nodeType?a+=e.data.replace(/\uFEFF/g,""):(r[(n=e).nodeName]||o[n.nodeName])&&a.length&&(i.push(a),a="");return a.length&&i.push(a),i},U=function(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},W=function(e,t){var r=j(e,t).join("\n");return H(r.split(""),n).length},q=function(e,t){var n=j(e,t).join("");return U(n)},G=function(e,t){var n=j(e,t).join("").replace(/\s/g,"");return U(n)},X=function(e,t){return function(){return t(e.getBody(),e.schema)}},K=function(e,t){return function(){return t(e.selection.getRng().cloneContents(),e.schema)}},Y=function(e){return X(e,W)},J=tinymce.util.Tools.resolve("tinymce.util.Delay"),Q=function(e,t){!function(e,t){e.fire("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})}(e,t)},Z=function(e,t){e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})};void 0===e&&(e=300),t.add("wordcount",(function(t){var n=function(e){return{body:{getWordCount:Y(e),getCharacterCount:X(e,q),getCharacterCountWithoutSpaces:X(e,G)},selection:{getWordCount:K(e,W),getCharacterCount:K(e,q),getCharacterCountWithoutSpaces:K(e,G)},getCount:Y(e)}}(t);return function(e,t){e.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:function(){return Z(e,t)}}),e.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:function(){return Z(e,t)}})}(t,n),function(e,t,n){var r=J.debounce((function(){return Q(e,t)}),n);e.on("init",(function(){Q(e,t),J.setEditorTimeout(e,(function(){e.on("SetContent BeforeAddUndo Undo Redo keyup",r)}),0)}))}(t,n,e),n}))}();var _sfc_main$4=defineComponent({name:"TinymceImageUpload",components:{Upload:Upload},props:{fullscreen:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:["uploading","done","error"],setup(e,{emit:t}){let n=!1;const{uploadUrl:r}=useGlobSetting(),{t:o}=useI18n(),{prefixCls:i}=useDesign("tinymce-img-upload");return{prefixCls:i,handleChange:function(e){var r,o;const i=e.file,a=null==i?void 0:i.status,u=null==(o=null==(r=null==i?void 0:i.response)?void 0:r.result)?void 0:o.url,s=null==i?void 0:i.name;"uploading"===a?n||(t("uploading",s),n=!0):"done"===a?(t("done",s,u),n=!1):"error"===a&&(t("error"),n=!1)},uploadUrl:r,t:o,getButtonProps:computed((()=>{const{disabled:t}=e;return{disabled:t}}))}}}),ImgUpload_vue_vue_type_style_index_0_scoped_true_lang=".lz-tinymce-img-upload[data-v-4123c428] {\n  position: absolute;\n  top: 4px;\n  right: 10px;\n  z-index: 20;\n}\n.lz-tinymce-img-upload.fullscreen[data-v-4123c428] {\n  position: fixed;\n  z-index: 10000;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n";const _withId=withScopeId(),_sfc_render$4=_withId(((e,t,n,r,o,i)=>{const a=resolveComponent("a-button"),u=resolveComponent("Upload");return openBlock(),createBlock("div",{class:[e.prefixCls,{fullscreen:e.fullscreen}]},[createVNode(u,{name:"file",multiple:"",onChange:e.handleChange,action:e.uploadUrl,showUploadList:!1,accept:".jpg,.jpeg,.gif,.png,.webp"},{default:_withId((()=>[createVNode(a,mergeProps({type:"primary"},__spreadValues({},e.getButtonProps)),{default:_withId((()=>[createTextVNode(toDisplayString(e.t("component.upload.imgUpload")),1)])),_:1},16)])),_:1},8,["onChange","action"])],2)}));_sfc_main$4.render=_sfc_render$4,_sfc_main$4.__scopeId="data-v-4123c428";const plugins=["advlist anchor autolink autosave code codesample  directionality  fullscreen hr insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus  template  textpattern visualblocks visualchars wordcount"],toolbar=["fontsizeselect lineheight searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link  preview anchor pagebreak insertdatetime media  forecolor backcolor fullscreen"],validEvents=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],isValidKey=e=>-1!==validEvents.indexOf(e),bindHandlers=(e,t,n)=>{Object.keys(t).filter(isValidKey).forEach((r=>{const o=t[r];"function"==typeof o&&("onInit"===r?o(e,n):n.on(r.substring(2),(e=>o(e,n))))}))},tinymceProps={options:{type:Object,default:{}},value:{type:String},toolbar:{type:Array,default:toolbar},plugins:{type:Array,default:plugins},modelValue:{type:String},height:{type:[Number,String],required:!1,default:400},width:{type:[Number,String],required:!1,default:"auto"},showImageUpload:{type:Boolean,default:!0}};var _sfc_main$3=defineComponent({name:"Tinymce",components:{ImgUpload:_sfc_main$4},inheritAttrs:!1,props:tinymceProps,emits:["change","update:modelValue"],setup(e,{emit:t,attrs:n}){const r=ref$1(),o=ref$1(!1),i=ref$1(buildShortUUID("tiny-vue")),a=ref$1(null),{prefixCls:u}=useDesign("tinymce-container"),s=useAppStore(),c=computed((()=>e.modelValue)),l=computed((()=>{const t=e.width;return isNumber$1(t)?`${t}px`:t})),f=computed((()=>"light"===s.getDarkMode?"oxide":"oxide-dark")),d=computed((()=>{const e=useLocale().getLocale.value;return["zh_CN","en"].includes(e)?e:"zh_CN"})),p=computed((()=>{const{height:a,options:u,toolbar:s,plugins:c}=e;return __spreadProps(__spreadValues({selector:`#${unref(i)}`,height:a,toolbar:s,menubar:"file edit insert view format table",plugins:c,language_url:"/ui/resource/tinymce/langs/"+d.value+".js",language:d.value,branding:!1,default_link_target:"_blank",link_title:!1,object_resizing:!1,auto_focus:!0,skin:f.value,skin_url:"/ui/resource/tinymce/skins/ui/"+f.value,content_css:"/ui/resource/tinymce/skins/ui/"+f.value+"/content.min.css"},u),{setup:i=>{r.value=i,i.on("init",(i=>function(i){const a=unref(r);if(!a)return;const u=e.modelValue||"";a.setContent(u),function(r){const i=n.modelEvents?n.modelEvents:null,a=Array.isArray(i)?i.join(" "):i;watch((()=>e.modelValue),((e,t)=>{g(r,e,t)})),watch((()=>e.value),((e,t)=>{g(r,e,t)}),{immediate:!0}),r.on(a||"change keyup undo redo",(()=>{const e=r.getContent({format:n.outputFormat});t("update:modelValue",e),t("change",e)})),r.on("FullscreenStateChanged",(e=>{o.value=e.state}))}(a),bindHandlers(i,n,unref(r))}(i)))}})})),h=computed((()=>{const{options:t}=e,n=t&&Reflect.get(t,"readonly"),o=unref(r);return o&&o.setMode(n?"readonly":"design"),null!=n&&n}));function m(){var e;null!==tinymce$1&&(null==(e=null==tinymce$1?void 0:tinymce$1.remove)||e.call(tinymce$1,unref(r)))}function g(e,t,r){e&&"string"==typeof t&&t!==r&&t!==e.getContent({format:n.outputFormat})&&e.setContent(t)}function v(e){return`[uploading:${e}]`}return watch((()=>n.disabled),(()=>{const e=unref(r);e&&e.setMode(n.disabled?"readonly":"design")})),onMountedOrActivated((()=>{i.value=buildShortUUID("tiny-vue"),nextTick((()=>{setTimeout((()=>{!function(){const e=unref(a);e&&(e.style.visibility="");tinymce$1.init(unref(p))}()}),30)}))})),onUnmounted((()=>{m()})),onDeactivated((()=>{m()})),{prefixCls:u,containerWidth:l,initOptions:p,tinymceContent:c,elRef:a,tinymceId:i,handleImageUploading:function(e){var t;const n=unref(r);if(!n)return;const o=null!=(t=null==n?void 0:n.getContent())?t:"";g(n,`${o}\n${v(e)}`)},handleDone:function(e,t){var n,o;const i=unref(r);if(!i)return;const a=null!=(n=null==i?void 0:i.getContent())?n:"";g(i,null!=(o=null==a?void 0:a.replace(v(e),`<img src="${t}"/>`))?o:"")},editorRef:r,fullscreen:o,disabled:h}}}),Editor_vue_vue_type_style_index_0_lang=".lz-tinymce-container {\n  position: relative;\n  line-height: normal;\n}\n.lz-tinymce-container textarea {\n  z-index: -1;\n  visibility: hidden;\n}\n/* stylelint-disable no-duplicate-selectors */\n/* stylelint-disable */\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\n";function _sfc_render$3(e,t,n,r,o,i){const a=resolveComponent("ImgUpload");return openBlock(),createBlock("div",{class:e.prefixCls,style:{width:e.containerWidth}},[e.showImageUpload?withDirectives((openBlock(),createBlock(a,{key:0,fullscreen:e.fullscreen,onUploading:e.handleImageUploading,onDone:e.handleDone,disabled:e.disabled},null,8,["fullscreen","onUploading","onDone","disabled"])),[[vShow,e.editorRef]]):createCommentVNode("",!0),createVNode("textarea",{id:e.tinymceId,ref:"elRef",style:{visibility:"hidden"}},null,8,["id"])],6)}_sfc_main$3.render=_sfc_render$3,withInstall(_sfc_main$3);const basicProps={spec:{type:Array,default:()=>[]},sku:{type:Array,default:()=>[]}},Generator=(e,t)=>{const n=()=>Math.floor((Date.now()-t)/1e3);let r=0,o=0;return{id:e,seed:t,uuid:()=>{if(n()<o){if(r>4095)throw Error("uuid out of range")}else r=0,o=n()+1;const t=4095&r;return r++,2097152*(8589934591&o)+4096*(511&e)+t}}};var uuidInt=(e,t=0)=>{if("number"!=typeof e)throw Error("id need be number");if("number"!=typeof t)throw Error("seed need be number");if(e=parseInt(e),t=parseInt(t),e<0||e>511)throw Error("d must be >=0 or <= 511");if(t<0||t>Date.now())throw Error("seed must <= now");const n=Generator(e,t);return n.id=e,n.seed=t,n};const uid=Math.floor(510*Math.random()),generator=uuidInt(uid);var _sfc_main$2=defineComponent({name:"SkuForm",components:{CloseCircleFilled:CloseCircleFilled,PlusOutlined:PlusOutlined},props:basicProps,emits:["spec:update"],setup(e,{emit:t}){const n=ref$1(),r=ref$1(""),o=ref$1(-1),i=ref$1(""),a=ref$1([]);watch((()=>e.spec),(e=>{a.value=isArray$1(e)?e:[]}),{immediate:!0,deep:!0});function u(){t("spec:update",unref(a))}return{specRef:a,inputRef:n,spec_input:r,spec_value_visible:o,spec_value_input:i,showInput:e=>{o.value=e,nextTick((()=>{n.value.focus()}))},handleAddSpec:()=>{const e=unref(r),t=unref(a),n=t.filter((t=>t.spec_name===e));if(e&&0===n.length){const n={spec_id:generator.uuid(),spec_name:e,value:[]};a.value=[...new Set([...t,n])],u()}r.value=""},removeSpec:function(e){a.value.splice(e,1),u()},handleAddSpecValue:e=>{const t=unref(i),n=unref(a)[e].value.filter((e=>e.spec_value_name===t));if(t&&0===n.length){const n={spec_id:unref(a)[e].spec_id,spec_name:unref(a)[e].spec_name,spec_value_id:generator.uuid(),spec_value_name:t};a.value.forEach((function(t,r){e===r&&t.value.push(n)})),u()}i.value="",o.value=-1},removeSpecValue:(e,t)=>{a.value[e].value.splice(t,1),u()}}}});const _hoisted_1$2=createTextVNode("  "),_hoisted_2=createTextVNode("");function _sfc_render$2(e,t,n,r,o,i){const a=resolveComponent("CloseCircleFilled"),u=resolveComponent("a-tag"),s=resolveComponent("a-tooltip"),c=resolveComponent("a-input"),l=resolveComponent("plus-outlined"),f=resolveComponent("a-card"),d=resolveComponent("a-list-item"),p=resolveComponent("a-button"),h=resolveComponent("a-input-search"),m=resolveComponent("a-col"),g=resolveComponent("a-row"),v=resolveComponent("a-list");return openBlock(),createBlock("div",null,[createVNode(v,{grid:{gutter:20,xs:24,sm:12,md:12,lg:8,xl:4,xxl:4},"data-source":e.specRef},{renderItem:withCtx((({item:n,index:r})=>[createVNode(d,null,{default:withCtx((()=>[createVNode(f,{size:"small",title:n.spec_name},{extra:withCtx((()=>[createVNode(a,{onClick:t=>e.removeSpec(r)},null,8,["onClick"])])),default:withCtx((()=>[(openBlock(!0),createBlock(Fragment,null,renderList(n.value,((t,n)=>(openBlock(),createBlock(Fragment,{key:t.spec_value_id},[t.spec_value_name.length>20?(openBlock(),createBlock(s,{key:0,title:t.spec_value_name},{default:withCtx((()=>[createVNode(u,{key:t.spec_value_id,closable:!0,onClose:t=>e.removeSpecValue(r,n)},{default:withCtx((()=>[createTextVNode(toDisplayString(`${t.spec_value_name.slice(0,20)}...`),1)])),_:2},1032,["onClose"])])),_:2},1032,["title"])):(openBlock(),createBlock(u,{key:1,closable:!0,onClose:t=>e.removeSpecValue(r,n)},{default:withCtx((()=>[createTextVNode(toDisplayString(t.spec_value_name),1)])),_:2},1032,["onClose"]))],64)))),128)),n.value.length<5?(openBlock(),createBlock(Fragment,{key:0},[e.spec_value_visible===r?(openBlock(),createBlock(c,{key:0,ref:"inputRef",type:"text",size:"small",style:{width:"128px"},value:e.spec_value_input,"onUpdate:value":t[1]||(t[1]=t=>e.spec_value_input=t),onBlur:t=>e.handleAddSpecValue(r),onKeyup:withKeys((t=>e.handleAddSpecValue(r)),["enter"])},null,8,["value","onBlur","onKeyup"])):createCommentVNode("",!0),createVNode(u,{onClick:t=>e.showInput(r),style:{"border-style":"dashed"}},{default:withCtx((()=>[createVNode(l),_hoisted_1$2])),_:2},1032,["onClick"])],64)):createCommentVNode("",!0)])),_:2},1032,["title"])])),_:2},1024)])),default:withCtx((()=>[e.specRef.length<4?(openBlock(),createBlock(g,{key:0,type:"flex",justify:"start"},{default:withCtx((()=>[createVNode(m,{span:12},{default:withCtx((()=>[createVNode(h,{value:e.spec_input,"onUpdate:value":t[2]||(t[2]=t=>e.spec_input=t),size:"large",onSearch:e.handleAddSpec},{enterButton:withCtx((()=>[createVNode(p,null,{default:withCtx((()=>[createVNode(l,{style:{fontSize:"20px"}}),_hoisted_2])),_:1})])),_:1},8,["value","onSearch"])])),_:1})])),_:1})):createCommentVNode("",!0)])),_:1},8,["data-source"])])}_sfc_main$2.render=_sfc_render$2;var lodash={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(e,t){(function(){var n,r="Expected a function",o="__lodash_hash_undefined__",i="__lodash_placeholder__",a=16,u=32,s=64,c=128,l=256,f=1/0,d=9007199254740991,p=NaN,h=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",u],["partialRight",s],["rearg",l]],g="[object Arguments]",v="[object Array]",y="[object Boolean]",b="[object Date]",C="[object Error]",x="[object Function]",w="[object GeneratorFunction]",_="[object Map]",S="[object Number]",E="[object Object]",A="[object Promise]",D="[object RegExp]",k="[object Set]",T="[object String]",O="[object Symbol]",B="[object WeakMap]",N="[object ArrayBuffer]",F="[object DataView]",M="[object Float32Array]",P="[object Float64Array]",I="[object Int8Array]",R="[object Int16Array]",L="[object Int32Array]",z="[object Uint8Array]",V="[object Uint8ClampedArray]",H="[object Uint16Array]",$="[object Uint32Array]",j=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,X=RegExp(q.source),K=RegExp(G.source),Y=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,re=RegExp(ne.source),oe=/^\s+/,ie=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ce=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_e="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",De="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ke="[']",Te="[\\ud800-\\udfff]",Oe="["+De+"]",Be="["+we+"]",Ne="\\d+",Fe="[\\u2700-\\u27bf]",Me="["+Se+"]",Pe="[^\\ud800-\\udfff"+De+Ne+_e+Se+Ee+"]",Ie="\\ud83c[\\udffb-\\udfff]",Re="[^\\ud800-\\udfff]",Le="(?:\\ud83c[\\udde6-\\uddff]){2}",ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ee+"]",He="(?:"+Me+"|"+Pe+")",$e="(?:"+Ve+"|"+Pe+")",je="(?:['](?:d|ll|m|re|s|t|ve))?",Ue="(?:['](?:D|LL|M|RE|S|T|VE))?",We="(?:"+Be+"|"+Ie+")"+"?",qe="[\\ufe0e\\ufe0f]?",Ge=qe+We+("(?:\\u200d(?:"+[Re,Le,ze].join("|")+")"+qe+We+")*"),Xe="(?:"+[Fe,Le,ze].join("|")+")"+Ge,Ke="(?:"+[Re+Be+"?",Be,Le,ze,Te].join("|")+")",Ye=RegExp(ke,"g"),Je=RegExp(Be,"g"),Qe=RegExp(Ie+"(?="+Ie+")|"+Ke+Ge,"g"),Ze=RegExp([Ve+"?"+Me+"+"+je+"(?="+[Oe,Ve,"$"].join("|")+")",$e+"+"+Ue+"(?="+[Oe,Ve+He,"$"].join("|")+")",Ve+"?"+He+"+"+je,Ve+"+"+Ue,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Xe].join("|"),"g"),et=RegExp("[\\u200d\\ud800-\\udfff"+we+Ae+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,ot={};ot[M]=ot[P]=ot[I]=ot[R]=ot[L]=ot[z]=ot[V]=ot[H]=ot[$]=!0,ot[g]=ot[v]=ot[N]=ot[y]=ot[F]=ot[b]=ot[C]=ot[x]=ot[_]=ot[S]=ot[E]=ot[D]=ot[k]=ot[T]=ot[B]=!1;var it={};it[g]=it[v]=it[N]=it[F]=it[y]=it[b]=it[M]=it[P]=it[I]=it[R]=it[L]=it[_]=it[S]=it[E]=it[D]=it[k]=it[T]=it[O]=it[z]=it[V]=it[H]=it[$]=!0,it[C]=it[x]=it[B]=!1;var at={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,st=parseInt,ct="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=ct||lt||Function("return this")(),dt=t&&!t.nodeType&&t,pt=dt&&e&&!e.nodeType&&e,ht=pt&&pt.exports===dt,mt=ht&&ct.process,gt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(t){}}(),vt=gt&&gt.isArrayBuffer,yt=gt&&gt.isDate,bt=gt&&gt.isMap,Ct=gt&&gt.isRegExp,xt=gt&&gt.isSet,wt=gt&&gt.isTypedArray;function _t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Tt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Ot(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function Nt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Ft(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Mt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var It=jt("length");function Rt(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function Lt(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function zt(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Lt(e,Ht,n)}function Vt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function Ht(e){return e!=e}function $t(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:p}function jt(e){return function(t){return null==t?n:t[e]}}function Ut(e){return function(t){return null==e?n:e[t]}}function Wt(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function qt(e,t){for(var r,o=-1,i=e.length;++o<i;){var a=t(e[o]);a!==n&&(r=r===n?a:r+a)}return r}function Gt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,dn(e)+1).replace(oe,""):e}function Kt(e){return function(t){return e(t)}}function Yt(e,t){return Bt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&zt(t,e[n],0)>-1;);return n}function Zt(e,t){for(var n=e.length;n--&&zt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var tn=Ut({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),nn=Ut({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(e){return"\\"+at[e]}function on(e){return et.test(e)}function an(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,r=e.length,o=0,a=[];++n<r;){var u=e[n];u!==t&&u!==i||(e[n]=i,a[o++]=n)}return a}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){return on(e)?function(e){var t=Qe.lastIndex=0;for(;Qe.test(e);)++t;return t}(e):It(e)}function fn(e){return on(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var pn=Ut({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var hn=function e(t){var ie,we=(t=null==t?ft:hn.defaults(ft.Object(),t,hn.pick(ft,nt))).Array,_e=t.Date,Se=t.Error,Ee=t.Function,Ae=t.Math,De=t.Object,ke=t.RegExp,Te=t.String,Oe=t.TypeError,Be=we.prototype,Ne=Ee.prototype,Fe=De.prototype,Me=t["__core-js_shared__"],Pe=Ne.toString,Ie=Fe.hasOwnProperty,Re=0,Le=(ie=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+ie:"",ze=Fe.toString,Ve=Pe.call(De),He=ft._,$e=ke("^"+Pe.call(Ie).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=ht?t.Buffer:n,Ue=t.Symbol,We=t.Uint8Array,qe=je?je.allocUnsafe:n,Ge=un(De.getPrototypeOf,De),Xe=De.create,Ke=Fe.propertyIsEnumerable,Qe=Be.splice,et=Ue?Ue.isConcatSpreadable:n,at=Ue?Ue.iterator:n,ct=Ue?Ue.toStringTag:n,lt=function(){try{var e=pi(De,"defineProperty");return e({},"",{}),e}catch(t){}}(),dt=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,pt=_e&&_e.now!==ft.Date.now&&_e.now,mt=t.setTimeout!==ft.setTimeout&&t.setTimeout,gt=Ae.ceil,It=Ae.floor,Ut=De.getOwnPropertySymbols,mn=je?je.isBuffer:n,gn=t.isFinite,vn=Be.join,yn=un(De.keys,De),bn=Ae.max,Cn=Ae.min,xn=_e.now,wn=t.parseInt,_n=Ae.random,Sn=Be.reverse,En=pi(t,"DataView"),An=pi(t,"Map"),Dn=pi(t,"Promise"),kn=pi(t,"Set"),Tn=pi(t,"WeakMap"),On=pi(De,"create"),Bn=Tn&&new Tn,Nn={},Fn=ji(En),Mn=ji(An),Pn=ji(Dn),In=ji(kn),Rn=ji(Tn),Ln=Ue?Ue.prototype:n,zn=Ln?Ln.valueOf:n,Vn=Ln?Ln.toString:n;function Hn(e){if(au(e)&&!Ka(e)&&!(e instanceof Wn)){if(e instanceof Un)return e;if(Ie.call(e,"__wrapped__"))return Ui(e)}return new Un(e)}var $n=function(){function e(){}return function(t){if(!iu(t))return{};if(Xe)return Xe(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function jn(){}function Un(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Xn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Jn(e,t){var n=Ka(e),r=!n&&Xa(e),o=!n&&!r&&Za(e),i=!n&&!r&&!o&&hu(e),a=n||r||o||i,u=a?Gt(e.length,Te):[],s=u.length;for(var c in e)!t&&!Ie.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ci(c,s))||u.push(c);return u}function Qn(e){var t=e.length;return t?e[Kr(0,t-1)]:n}function Zn(e,t){return Ri(Bo(e),sr(t,0,e.length))}function er(e){return Ri(Bo(e))}function tr(e,t,r){(r!==n&&!Wa(e[t],r)||r===n&&!(t in e))&&ar(e,t,r)}function nr(e,t,r){var o=e[t];Ie.call(e,t)&&Wa(o,r)&&(r!==n||t in e)||ar(e,t,r)}function rr(e,t){for(var n=e.length;n--;)if(Wa(e[n][0],t))return n;return-1}function or(e,t,n,r){return pr(e,(function(e,o,i){t(r,e,n(e),i)})),r}function ir(e,t){return e&&No(t,Iu(t),e)}function ar(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(e,t){for(var r=-1,o=t.length,i=we(o),a=null==e;++r<o;)i[r]=a?n:Bu(e,t[r]);return i}function sr(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function cr(e,t,r,o,i,a){var u,s=1&t,c=2&t,l=4&t;if(r&&(u=i?r(e,o,i,a):r(e)),u!==n)return u;if(!iu(e))return e;var f=Ka(e);if(f){if(u=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return Bo(e,u)}else{var d=gi(e),p=d==x||d==w;if(Za(e))return Eo(e,s);if(d==E||d==g||p&&!i){if(u=c||p?{}:yi(e),!s)return c?function(e,t){return No(e,mi(e),t)}(e,function(e,t){return e&&No(t,Ru(t),e)}(u,e)):function(e,t){return No(e,hi(e),t)}(e,ir(u,e))}else{if(!it[d])return i?e:{};u=function(e,t,n){var r=e.constructor;switch(t){case N:return Ao(e);case y:case b:return new r(+e);case F:return function(e,t){var n=t?Ao(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case P:case I:case R:case L:case z:case V:case H:case $:return Do(e,n);case _:return new r;case S:case T:return new r(e);case D:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new r;case O:return o=e,zn?De(zn.call(o)):{}}var o}(e,d,s)}}a||(a=new Yn);var h=a.get(e);if(h)return h;a.set(e,u),fu(e)?e.forEach((function(n){u.add(cr(n,t,r,n,e,a))})):uu(e)&&e.forEach((function(n,o){u.set(o,cr(n,t,r,o,e,a))}));var m=f?n:(l?c?ai:ii:c?Ru:Iu)(e);return Et(m||e,(function(n,o){m&&(n=e[o=n]),nr(u,o,cr(n,t,r,o,e,a))})),u}function lr(e,t,r){var o=r.length;if(null==e)return!o;for(e=De(e);o--;){var i=r[o],a=t[i],u=e[i];if(u===n&&!(i in e)||!a(u))return!1}return!0}function fr(e,t,o){if("function"!=typeof e)throw new Oe(r);return Fi((function(){e.apply(n,o)}),t)}function dr(e,t,n,r){var o=-1,i=Tt,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=Bt(t,Kt(n))),r?(i=Ot,a=!1):t.length>=200&&(i=Jt,a=!1,t=new Kn(t));e:for(;++o<u;){var l=e[o],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;s.push(l)}else i(t,f,r)||s.push(l)}return s}Hn.templateSettings={escape:Y,evaluate:J,interpolate:Q,variable:"",imports:{_:Hn}},Hn.prototype=jn.prototype,Hn.prototype.constructor=Hn,Un.prototype=$n(jn.prototype),Un.prototype.constructor=Un,Wn.prototype=$n(jn.prototype),Wn.prototype.constructor=Wn,qn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},qn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qn.prototype.get=function(e){var t=this.__data__;if(On){var r=t[e];return r===o?n:r}return Ie.call(t,e)?t[e]:n},qn.prototype.has=function(e){var t=this.__data__;return On?t[e]!==n:Ie.call(t,e)},qn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=On&&t===n?o:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?n:t[r][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(An||Gn),string:new qn}},Xn.prototype.delete=function(e){var t=fi(this,e).delete(e);return this.size-=t?1:0,t},Xn.prototype.get=function(e){return fi(this,e).get(e)},Xn.prototype.has=function(e){return fi(this,e).has(e)},Xn.prototype.set=function(e,t){var n=fi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,o),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!An||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(e,t),this.size=n.size,this};var pr=Po(xr),hr=Po(wr,!0);function mr(e,t){var n=!0;return pr(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function gr(e,t,r){for(var o=-1,i=e.length;++o<i;){var a=e[o],u=t(a);if(null!=u&&(s===n?u==u&&!pu(u):r(u,s)))var s=u,c=a}return c}function vr(e,t){var n=[];return pr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function yr(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=bi),o||(o=[]);++i<a;){var u=e[i];t>0&&n(u)?t>1?yr(u,t-1,n,r,o):Nt(o,u):r||(o[o.length]=u)}return o}var br=Io(),Cr=Io(!0);function xr(e,t){return e&&br(e,t,Iu)}function wr(e,t){return e&&Cr(e,t,Iu)}function _r(e,t){return kt(t,(function(t){return nu(e[t])}))}function Sr(e,t){for(var r=0,o=(t=xo(t,e)).length;null!=e&&r<o;)e=e[$i(t[r++])];return r&&r==o?e:n}function Er(e,t,n){var r=t(e);return Ka(e)?r:Nt(r,n(e))}function Ar(e){return null==e?e===n?"[object Undefined]":"[object Null]":ct&&ct in De(e)?function(e){var t=Ie.call(e,ct),r=e[ct];try{e[ct]=n;var o=!0}catch(a){}var i=ze.call(e);o&&(t?e[ct]=r:delete e[ct]);return i}(e):function(e){return ze.call(e)}(e)}function Dr(e,t){return e>t}function kr(e,t){return null!=e&&Ie.call(e,t)}function Tr(e,t){return null!=e&&t in De(e)}function Or(e,t,r){for(var o=r?Ot:Tt,i=e[0].length,a=e.length,u=a,s=we(a),c=Infinity,l=[];u--;){var f=e[u];u&&t&&(f=Bt(f,Kt(t))),c=Cn(f.length,c),s[u]=!r&&(t||i>=120&&f.length>=120)?new Kn(u&&f):n}f=e[0];var d=-1,p=s[0];e:for(;++d<i&&l.length<c;){var h=f[d],m=t?t(h):h;if(h=r||0!==h?h:0,!(p?Jt(p,m):o(l,m,r))){for(u=a;--u;){var g=s[u];if(!(g?Jt(g,m):o(e[u],m,r)))continue e}p&&p.push(m),l.push(h)}}return l}function Br(e,t,r){var o=null==(e=Ti(e,t=xo(t,e)))?e:e[$i(ta(t))];return null==o?n:_t(o,e,r)}function Nr(e){return au(e)&&Ar(e)==g}function Fr(e,t,r,o,i){return e===t||(null==e||null==t||!au(e)&&!au(t)?e!=e&&t!=t:function(e,t,r,o,i,a){var u=Ka(e),s=Ka(t),c=u?v:gi(e),l=s?v:gi(t),f=(c=c==g?E:c)==E,d=(l=l==g?E:l)==E,p=c==l;if(p&&Za(e)){if(!Za(t))return!1;u=!0,f=!1}if(p&&!f)return a||(a=new Yn),u||hu(e)?ri(e,t,r,o,i,a):function(e,t,n,r,o,i,a){switch(n){case F:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!i(new We(e),new We(t)));case y:case b:case S:return Wa(+e,+t);case C:return e.name==t.name&&e.message==t.message;case D:case T:return e==t+"";case _:var u=an;case k:var s=1&r;if(u||(u=cn),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=ri(u(e),u(t),r,o,i,a);return a.delete(e),l;case O:if(zn)return zn.call(e)==zn.call(t)}return!1}(e,t,c,r,o,i,a);if(!(1&r)){var h=f&&Ie.call(e,"__wrapped__"),m=d&&Ie.call(t,"__wrapped__");if(h||m){var x=h?e.value():e,w=m?t.value():t;return a||(a=new Yn),i(x,w,r,o,a)}}if(!p)return!1;return a||(a=new Yn),function(e,t,r,o,i,a){var u=1&r,s=ii(e),c=s.length,l=ii(t).length;if(c!=l&&!u)return!1;var f=c;for(;f--;){var d=s[f];if(!(u?d in t:Ie.call(t,d)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var m=!0;a.set(e,t),a.set(t,e);var g=u;for(;++f<c;){var v=e[d=s[f]],y=t[d];if(o)var b=u?o(y,v,d,t,e,a):o(v,y,d,e,t,a);if(!(b===n?v===y||i(v,y,r,o,a):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var C=e.constructor,x=t.constructor;C==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof C&&C instanceof C&&"function"==typeof x&&x instanceof x||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,r,o,i,a)}(e,t,r,o,Fr,i))}function Mr(e,t,r,o){var i=r.length,a=i,u=!o;if(null==e)return!a;for(e=De(e);i--;){var s=r[i];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var c=(s=r[i])[0],l=e[c],f=s[1];if(u&&s[2]){if(l===n&&!(c in e))return!1}else{var d=new Yn;if(o)var p=o(l,f,c,e,t,d);if(!(p===n?Fr(f,l,3,o,d):p))return!1}}return!0}function Pr(e){return!(!iu(e)||(t=e,Le&&Le in t))&&(nu(e)?$e:ge).test(ji(e));var t}function Ir(e){return"function"==typeof e?e:null==e?ss:"object"==typeof e?Ka(e)?$r(e[0],e[1]):Hr(e):vs(e)}function Rr(e){if(!Ei(e))return yn(e);var t=[];for(var n in De(e))Ie.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Lr(e){if(!iu(e))return function(e){var t=[];if(null!=e)for(var n in De(e))t.push(n);return t}(e);var t=Ei(e),n=[];for(var r in e)("constructor"!=r||!t&&Ie.call(e,r))&&n.push(r);return n}function zr(e,t){return e<t}function Vr(e,t){var n=-1,r=Ja(e)?we(e.length):[];return pr(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}function Hr(e){var t=di(e);return 1==t.length&&t[0][2]?Di(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function $r(e,t){return wi(e)&&Ai(t)?Di($i(e),t):function(r){var o=Bu(r,e);return o===n&&o===t?Nu(r,e):Fr(t,o,3)}}function jr(e,t,r,o,i){e!==t&&br(t,(function(a,u){if(i||(i=new Yn),iu(a))!function(e,t,r,o,i,a,u){var s=Bi(e,r),c=Bi(t,r),l=u.get(c);if(l)return void tr(e,r,l);var f=a?a(s,c,r+"",e,t,u):n,d=f===n;if(d){var p=Ka(c),h=!p&&Za(c),m=!p&&!h&&hu(c);f=c,p||h||m?Ka(s)?f=s:Qa(s)?f=Bo(s):h?(d=!1,f=Eo(c,!0)):m?(d=!1,f=Do(c,!0)):f=[]:cu(c)||Xa(c)?(f=s,Xa(s)?f=wu(s):iu(s)&&!nu(s)||(f=yi(c))):d=!1}d&&(u.set(c,f),i(f,c,o,a,u),u.delete(c));tr(e,r,f)}(e,t,u,r,jr,o,i);else{var s=o?o(Bi(e,u),a,u+"",e,t,i):n;s===n&&(s=a),tr(e,u,s)}}),Ru)}function Ur(e,t){var r=e.length;if(r)return Ci(t+=t<0?r:0,r)?e[t]:n}function Wr(e,t,n){t=t.length?Bt(t,(function(e){return Ka(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e})):[ss];var r=-1;return t=Bt(t,Kt(li())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Vr(e,(function(e,n,o){return{criteria:Bt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,i=t.criteria,a=o.length,u=n.length;for(;++r<a;){var s=ko(o[r],i[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function qr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],u=Sr(e,a);n(u,a)&&eo(i,xo(a,e),u)}return i}function Gr(e,t,n,r){var o=r?Vt:zt,i=-1,a=t.length,u=e;for(e===t&&(t=Bo(t)),n&&(u=Bt(e,Kt(n)));++i<a;)for(var s=0,c=t[i],l=n?n(c):c;(s=o(u,l,s,r))>-1;)u!==e&&Qe.call(u,s,1),Qe.call(e,s,1);return e}function Xr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;Ci(o)?Qe.call(e,o,1):po(e,o)}}return e}function Kr(e,t){return e+It(_n()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=It(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Mi(ki(e,t,ss),e+"")}function Qr(e){return Qn(Wu(e))}function Zr(e,t){var n=Wu(e);return Ri(n,sr(t,0,n.length))}function eo(e,t,r,o){if(!iu(e))return e;for(var i=-1,a=(t=xo(t,e)).length,u=a-1,s=e;null!=s&&++i<a;){var c=$i(t[i]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=u){var f=s[c];(l=o?o(f,c,s):n)===n&&(l=iu(f)?f:Ci(t[i+1])?[]:{})}nr(s,c,l),s=s[c]}return e}var to=Bn?function(e,t){return Bn.set(e,t),e}:ss,no=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:is(t),writable:!0})}:ss;function ro(e){return Ri(Wu(e))}function oo(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=we(o);++r<o;)i[r]=e[r+t];return i}function io(e,t){var n;return pr(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function ao(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!pu(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return uo(e,t,ss,n)}function uo(e,t,r,o){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var u=(t=r(t))!=t,s=null===t,c=pu(t),l=t===n;i<a;){var f=It((i+a)/2),d=r(e[f]),p=d!==n,h=null===d,m=d==d,g=pu(d);if(u)var v=o||m;else v=l?m&&(o||p):s?m&&p&&(o||!h):c?m&&p&&!h&&(o||!g):!h&&!g&&(o?d<=t:d<t);v?i=f+1:a=f}return Cn(a,4294967294)}function so(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],u=t?t(a):a;if(!n||!Wa(u,s)){var s=u;i[o++]=0===a?0:a}}return i}function co(e){return"number"==typeof e?e:pu(e)?p:+e}function lo(e){if("string"==typeof e)return e;if(Ka(e))return Bt(e,lo)+"";if(pu(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function fo(e,t,n){var r=-1,o=Tt,i=e.length,a=!0,u=[],s=u;if(n)a=!1,o=Ot;else if(i>=200){var c=t?null:Jo(e);if(c)return cn(c);a=!1,o=Jt,s=new Kn}else s=t?[]:u;e:for(;++r<i;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue e;t&&s.push(f),u.push(l)}else o(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u}function po(e,t){return null==(e=Ti(e,t=xo(t,e)))||delete e[$i(ta(t))]}function ho(e,t,n,r){return eo(e,t,n(Sr(e,t)),r)}function mo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?oo(e,r?0:i,r?i+1:o):oo(e,r?i+1:0,r?o:i)}function go(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Ft(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function vo(e,t,n){var r=e.length;if(r<2)return r?fo(e[0]):[];for(var o=-1,i=we(r);++o<r;)for(var a=e[o],u=-1;++u<r;)u!=o&&(i[o]=dr(i[o]||a,e[u],t,n));return fo(yr(i,1),t,n)}function yo(e,t,r){for(var o=-1,i=e.length,a=t.length,u={};++o<i;){var s=o<a?t[o]:n;r(u,e[o],s)}return u}function bo(e){return Qa(e)?e:[]}function Co(e){return"function"==typeof e?e:ss}function xo(e,t){return Ka(e)?e:wi(e,t)?[e]:Hi(_u(e))}var wo=Jr;function _o(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:oo(e,t,r)}var So=dt||function(e){return ft.clearTimeout(e)};function Eo(e,t){if(t)return e.slice();var n=e.length,r=qe?qe(n):new e.constructor(n);return e.copy(r),r}function Ao(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Do(e,t){var n=t?Ao(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ko(e,t){if(e!==t){var r=e!==n,o=null===e,i=e==e,a=pu(e),u=t!==n,s=null===t,c=t==t,l=pu(t);if(!s&&!l&&!a&&e>t||a&&u&&c&&!s&&!l||o&&u&&c||!r&&c||!i)return 1;if(!o&&!a&&!l&&e<t||l&&r&&i&&!o&&!a||s&&r&&i||!u&&i||!c)return-1}return 0}function To(e,t,n,r){for(var o=-1,i=e.length,a=n.length,u=-1,s=t.length,c=bn(i-a,0),l=we(s+c),f=!r;++u<s;)l[u]=t[u];for(;++o<a;)(f||o<i)&&(l[n[o]]=e[o]);for(;c--;)l[u++]=e[o++];return l}function Oo(e,t,n,r){for(var o=-1,i=e.length,a=-1,u=n.length,s=-1,c=t.length,l=bn(i-u,0),f=we(l+c),d=!r;++o<l;)f[o]=e[o];for(var p=o;++s<c;)f[p+s]=t[s];for(;++a<u;)(d||o<i)&&(f[p+n[a]]=e[o++]);return f}function Bo(e,t){var n=-1,r=e.length;for(t||(t=we(r));++n<r;)t[n]=e[n];return t}function No(e,t,r,o){var i=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var s=t[a],c=o?o(r[s],e[s],s,r,e):n;c===n&&(c=e[s]),i?ar(r,s,c):nr(r,s,c)}return r}function Fo(e,t){return function(n,r){var o=Ka(n)?St:or,i=t?t():{};return o(n,e,li(r,2),i)}}function Mo(e){return Jr((function(t,r){var o=-1,i=r.length,a=i>1?r[i-1]:n,u=i>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(i--,a):n,u&&xi(r[0],r[1],u)&&(a=i<3?n:a,i=1),t=De(t);++o<i;){var s=r[o];s&&e(t,s,o,a)}return t}))}function Po(e,t){return function(n,r){if(null==n)return n;if(!Ja(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=De(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Io(e){return function(t,n,r){for(var o=-1,i=De(t),a=r(t),u=a.length;u--;){var s=a[e?u:++o];if(!1===n(i[s],s,i))break}return t}}function Ro(e){return function(t){var r=on(t=_u(t))?fn(t):n,o=r?r[0]:t.charAt(0),i=r?_o(r,1).join(""):t.slice(1);return o[e]()+i}}function Lo(e){return function(t){return Ft(ns(Xu(t).replace(Ye,"")),e,"")}}function zo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return iu(r)?r:n}}function Vo(e){return function(t,r,o){var i=De(t);if(!Ja(t)){var a=li(r,3);t=Iu(t),r=function(e){return a(i[e],e,i)}}var u=e(t,r,o);return u>-1?i[a?t[u]:u]:n}}function Ho(e){return oi((function(t){var o=t.length,i=o,a=Un.prototype.thru;for(e&&t.reverse();i--;){var u=t[i];if("function"!=typeof u)throw new Oe(r);if(a&&!s&&"wrapper"==si(u))var s=new Un([],!0)}for(i=s?i:o;++i<o;){var c=si(u=t[i]),l="wrapper"==c?ui(u):n;s=l&&_i(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[si(l[0])].apply(s,l[3]):1==u.length&&_i(u)?s[c]():s.thru(u)}return function(){var e=arguments,n=e[0];if(s&&1==e.length&&Ka(n))return s.plant(n).value();for(var r=0,i=o?t[r].apply(this,e):n;++r<o;)i=t[r].call(this,i);return i}}))}function $o(e,t,r,o,i,a,u,s,l,f){var d=t&c,p=1&t,h=2&t,m=24&t,g=512&t,v=h?n:zo(e);return function n(){for(var c=arguments.length,y=we(c),b=c;b--;)y[b]=arguments[b];if(m)var C=ci(n),x=en(y,C);if(o&&(y=To(y,o,i,m)),a&&(y=Oo(y,a,u,m)),c-=x,m&&c<f){var w=sn(y,C);return Ko(e,t,$o,n.placeholder,r,y,w,s,l,f-c)}var _=p?r:this,S=h?_[e]:e;return c=y.length,s?y=Oi(y,s):g&&c>1&&y.reverse(),d&&l<c&&(y.length=l),this&&this!==ft&&this instanceof n&&(S=v||zo(S)),S.apply(_,y)}}function jo(e,t){return function(n,r){return function(e,t,n,r){return xr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function Uo(e,t){return function(r,o){var i;if(r===n&&o===n)return t;if(r!==n&&(i=r),o!==n){if(i===n)return o;"string"==typeof r||"string"==typeof o?(r=lo(r),o=lo(o)):(r=co(r),o=co(o)),i=e(r,o)}return i}}function Wo(e){return oi((function(t){return t=Bt(t,Kt(li())),Jr((function(n){var r=this;return e(t,(function(e){return _t(e,r,n)}))}))}))}function qo(e,t){var r=(t=t===n?" ":lo(t)).length;if(r<2)return r?Yr(t,e):t;var o=Yr(t,gt(e/ln(t)));return on(t)?_o(fn(o),0,e).join(""):o.slice(0,e)}function Go(e){return function(t,r,o){return o&&"number"!=typeof o&&xi(t,r,o)&&(r=o=n),t=yu(t),r===n?(r=t,t=0):r=yu(r),function(e,t,n,r){for(var o=-1,i=bn(gt((t-e)/(n||1)),0),a=we(i);i--;)a[r?i:++o]=e,e+=n;return a}(t,r,o=o===n?t<r?1:-1:yu(o),e)}}function Xo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=xu(t),n=xu(n)),e(t,n)}}function Ko(e,t,r,o,i,a,c,l,f,d){var p=8&t;t|=p?u:s,4&(t&=~(p?s:u))||(t&=-4);var h=[e,t,i,p?a:n,p?c:n,p?n:a,p?n:c,l,f,d],m=r.apply(n,h);return _i(e)&&Ni(m,h),m.placeholder=o,Pi(m,e,t)}function Yo(e){var t=Ae[e];return function(e,n){if(e=xu(e),(n=null==n?0:Cn(bu(n),292))&&gn(e)){var r=(_u(e)+"e").split("e");return+((r=(_u(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Jo=kn&&1/cn(new kn([,-0]))[1]==f?function(e){return new kn(e)}:ps;function Qo(e){return function(t){var n=gi(t);return n==_?an(t):n==k?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return Bt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zo(e,t,o,f,d,p,h,m){var g=2&t;if(!g&&"function"!=typeof e)throw new Oe(r);var v=f?f.length:0;if(v||(t&=-97,f=d=n),h=h===n?h:bn(bu(h),0),m=m===n?m:bu(m),v-=d?d.length:0,t&s){var y=f,b=d;f=d=n}var C=g?n:ui(e),x=[e,t,o,f,d,y,b,p,h,m];if(C&&function(e,t){var n=e[1],r=t[1],o=n|r,a=o<131,u=r==c&&8==n||r==c&&n==l&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!u)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var s=t[3];if(s){var f=e[3];e[3]=f?To(f,s,t[4]):s,e[4]=f?sn(e[3],i):t[4]}(s=t[5])&&(f=e[5],e[5]=f?Oo(f,s,t[6]):s,e[6]=f?sn(e[5],i):t[6]);(s=t[7])&&(e[7]=s);r&c&&(e[8]=null==e[8]?t[8]:Cn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(x,C),e=x[0],t=x[1],o=x[2],f=x[3],d=x[4],!(m=x[9]=x[9]===n?g?0:e.length:bn(x[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||t==a?function(e,t,r){var o=zo(e);return function i(){for(var a=arguments.length,u=we(a),s=a,c=ci(i);s--;)u[s]=arguments[s];var l=a<3&&u[0]!==c&&u[a-1]!==c?[]:sn(u,c);return(a-=l.length)<r?Ko(e,t,$o,i.placeholder,n,u,l,n,n,r-a):_t(this&&this!==ft&&this instanceof i?o:e,this,u)}}(e,t,m):t!=u&&33!=t||d.length?$o.apply(n,x):function(e,t,n,r){var o=1&t,i=zo(e);return function t(){for(var a=-1,u=arguments.length,s=-1,c=r.length,l=we(c+u),f=this&&this!==ft&&this instanceof t?i:e;++s<c;)l[s]=r[s];for(;u--;)l[s++]=arguments[++a];return _t(f,o?n:this,l)}}(e,t,o,f);else var w=function(e,t,n){var r=1&t,o=zo(e);return function t(){return(this&&this!==ft&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,o);return Pi((C?to:Ni)(w,x),e,t)}function ei(e,t,r,o){return e===n||Wa(e,Fe[r])&&!Ie.call(o,r)?t:e}function ti(e,t,r,o,i,a){return iu(e)&&iu(t)&&(a.set(t,e),jr(e,t,n,ti,a),a.delete(t)),e}function ni(e){return cu(e)?n:e}function ri(e,t,r,o,i,a){var u=1&r,s=e.length,c=t.length;if(s!=c&&!(u&&c>s))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var d=-1,p=!0,h=2&r?new Kn:n;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],g=t[d];if(o)var v=u?o(g,m,d,t,e,a):o(m,g,d,e,t,a);if(v!==n){if(v)continue;p=!1;break}if(h){if(!Pt(t,(function(e,t){if(!Jt(h,t)&&(m===e||i(m,e,r,o,a)))return h.push(t)}))){p=!1;break}}else if(m!==g&&!i(m,g,r,o,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function oi(e){return Mi(ki(e,n,Yi),e+"")}function ii(e){return Er(e,Iu,hi)}function ai(e){return Er(e,Ru,mi)}var ui=Bn?function(e){return Bn.get(e)}:ps;function si(e){for(var t=e.name+"",n=Nn[t],r=Ie.call(Nn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function ci(e){return(Ie.call(Hn,"placeholder")?Hn:e).placeholder}function li(){var e=Hn.iteratee||cs;return e=e===cs?Ir:e,arguments.length?e(arguments[0],arguments[1]):e}function fi(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function di(e){for(var t=Iu(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Ai(o)]}return t}function pi(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Pr(r)?r:n}var hi=Ut?function(e){return null==e?[]:(e=De(e),kt(Ut(e),(function(t){return Ke.call(e,t)})))}:Cs,mi=Ut?function(e){for(var t=[];e;)Nt(t,hi(e)),e=Ge(e);return t}:Cs,gi=Ar;function vi(e,t,n){for(var r=-1,o=(t=xo(t,e)).length,i=!1;++r<o;){var a=$i(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&ou(o)&&Ci(a,o)&&(Ka(e)||Xa(e))}function yi(e){return"function"!=typeof e.constructor||Ei(e)?{}:$n(Ge(e))}function bi(e){return Ka(e)||Xa(e)||!!(et&&e&&e[et])}function Ci(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function xi(e,t,n){if(!iu(n))return!1;var r=typeof t;return!!("number"==r?Ja(n)&&Ci(t,n.length):"string"==r&&t in n)&&Wa(n[t],e)}function wi(e,t){if(Ka(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!pu(e))||(ee.test(e)||!Z.test(e)||null!=t&&e in De(t))}function _i(e){var t=si(e),n=Hn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ui(n);return!!r&&e===r[0]}(En&&gi(new En(new ArrayBuffer(1)))!=F||An&&gi(new An)!=_||Dn&&gi(Dn.resolve())!=A||kn&&gi(new kn)!=k||Tn&&gi(new Tn)!=B)&&(gi=function(e){var t=Ar(e),r=t==E?e.constructor:n,o=r?ji(r):"";if(o)switch(o){case Fn:return F;case Mn:return _;case Pn:return A;case In:return k;case Rn:return B}return t});var Si=Me?nu:xs;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Fe)}function Ai(e){return e==e&&!iu(e)}function Di(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==n||e in De(r)))}}function ki(e,t,r){return t=bn(t===n?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=bn(n.length-t,0),a=we(i);++o<i;)a[o]=n[t+o];o=-1;for(var u=we(t+1);++o<t;)u[o]=n[o];return u[t]=r(a),_t(e,this,u)}}function Ti(e,t){return t.length<2?e:Sr(e,oo(t,0,-1))}function Oi(e,t){for(var r=e.length,o=Cn(t.length,r),i=Bo(e);o--;){var a=t[o];e[o]=Ci(a,r)?i[a]:n}return e}function Bi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ni=Ii(to),Fi=mt||function(e,t){return ft.setTimeout(e,t)},Mi=Ii(no);function Pi(e,t,n){var r=t+"";return Mi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ae,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Et(m,(function(n){var r="_."+n[0];t&n[1]&&!Tt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(se):[]}(r),n)))}function Ii(e){var t=0,r=0;return function(){var o=xn(),i=16-(o-r);if(r=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ri(e,t){var r=-1,o=e.length,i=o-1;for(t=t===n?o:t;++r<t;){var a=Kr(r,i),u=e[a];e[a]=e[r],e[r]=u}return e.length=t,e}var Li,zi,Vi,Hi=(Li=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,(function(e,n,r,o){t.push(r?o.replace(fe,"$1"):n||e)})),t},zi=za(Li,(function(e){return 500===Vi.size&&Vi.clear(),e})),Vi=zi.cache,zi);function $i(e){if("string"==typeof e||pu(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function ji(e){if(null!=e){try{return Pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ui(e){if(e instanceof Wn)return e.clone();var t=new Un(e.__wrapped__,e.__chain__);return t.__actions__=Bo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Wi=Jr((function(e,t){return Qa(e)?dr(e,yr(t,1,Qa,!0)):[]})),qi=Jr((function(e,t){var r=ta(t);return Qa(r)&&(r=n),Qa(e)?dr(e,yr(t,1,Qa,!0),li(r,2)):[]})),Gi=Jr((function(e,t){var r=ta(t);return Qa(r)&&(r=n),Qa(e)?dr(e,yr(t,1,Qa,!0),n,r):[]}));function Xi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:bu(n);return o<0&&(o=bn(r+o,0)),Lt(e,li(t,3),o)}function Ki(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return r!==n&&(i=bu(r),i=r<0?bn(o+i,0):Cn(i,o-1)),Lt(e,li(t,3),i,!0)}function Yi(e){return(null==e?0:e.length)?yr(e,1):[]}function Ji(e){return e&&e.length?e[0]:n}var Qi=Jr((function(e){var t=Bt(e,bo);return t.length&&t[0]===e[0]?Or(t):[]})),Zi=Jr((function(e){var t=ta(e),r=Bt(e,bo);return t===ta(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Or(r,li(t,2)):[]})),ea=Jr((function(e){var t=ta(e),r=Bt(e,bo);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Or(r,n,t):[]}));function ta(e){var t=null==e?0:e.length;return t?e[t-1]:n}var na=Jr(ra);function ra(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var oa=oi((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return Xr(e,Bt(t,(function(e){return Ci(e,n)?+e:e})).sort(ko)),r}));function ia(e){return null==e?e:Sn.call(e)}var aa=Jr((function(e){return fo(yr(e,1,Qa,!0))})),ua=Jr((function(e){var t=ta(e);return Qa(t)&&(t=n),fo(yr(e,1,Qa,!0),li(t,2))})),sa=Jr((function(e){var t=ta(e);return t="function"==typeof t?t:n,fo(yr(e,1,Qa,!0),n,t)}));function ca(e){if(!e||!e.length)return[];var t=0;return e=kt(e,(function(e){if(Qa(e))return t=bn(e.length,t),!0})),Gt(t,(function(t){return Bt(e,jt(t))}))}function la(e,t){if(!e||!e.length)return[];var r=ca(e);return null==t?r:Bt(r,(function(e){return _t(t,n,e)}))}var fa=Jr((function(e,t){return Qa(e)?dr(e,t):[]})),da=Jr((function(e){return vo(kt(e,Qa))})),pa=Jr((function(e){var t=ta(e);return Qa(t)&&(t=n),vo(kt(e,Qa),li(t,2))})),ha=Jr((function(e){var t=ta(e);return t="function"==typeof t?t:n,vo(kt(e,Qa),n,t)})),ma=Jr(ca);var ga=Jr((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,la(e,r)}));function va(e){var t=Hn(e);return t.__chain__=!0,t}function ya(e,t){return t(e)}var ba=oi((function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,i=function(t){return ur(t,e)};return!(t>1||this.__actions__.length)&&o instanceof Wn&&Ci(r)?((o=o.slice(r,+r+(t?1:0))).__actions__.push({func:ya,args:[i],thisArg:n}),new Un(o,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(i)}));var Ca=Fo((function(e,t,n){Ie.call(e,n)?++e[n]:ar(e,n,1)}));var xa=Vo(Xi),wa=Vo(Ki);function _a(e,t){return(Ka(e)?Et:pr)(e,li(t,3))}function Sa(e,t){return(Ka(e)?At:hr)(e,li(t,3))}var Ea=Fo((function(e,t,n){Ie.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Aa=Jr((function(e,t,n){var r=-1,o="function"==typeof t,i=Ja(e)?we(e.length):[];return pr(e,(function(e){i[++r]=o?_t(t,e,n):Br(e,t,n)})),i})),Da=Fo((function(e,t,n){ar(e,n,t)}));function ka(e,t){return(Ka(e)?Bt:Vr)(e,li(t,3))}var Ta=Fo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Oa=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xi(e,t[0],t[1])?t=[]:n>2&&xi(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,yr(t,1),[])})),Ba=pt||function(){return ft.Date.now()};function Na(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Zo(e,c,n,n,n,n,t)}function Fa(e,t){var o;if("function"!=typeof t)throw new Oe(r);return e=bu(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=n),o}}var Ma=Jr((function(e,t,n){var r=1;if(n.length){var o=sn(n,ci(Ma));r|=u}return Zo(e,r,t,n,o)})),Pa=Jr((function(e,t,n){var r=3;if(n.length){var o=sn(n,ci(Pa));r|=u}return Zo(t,r,e,n,o)}));function Ia(e,t,o){var i,a,u,s,c,l,f=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw new Oe(r);function m(t){var r=i,o=a;return i=a=n,f=t,s=e.apply(o,r)}function g(e){return f=e,c=Fi(y,t),d?m(e):s}function v(e){var r=e-l;return l===n||r>=t||r<0||p&&e-f>=u}function y(){var e=Ba();if(v(e))return b(e);c=Fi(y,function(e){var n=t-(e-l);return p?Cn(n,u-(e-f)):n}(e))}function b(e){return c=n,h&&i?m(e):(i=a=n,s)}function C(){var e=Ba(),r=v(e);if(i=arguments,a=this,l=e,r){if(c===n)return g(l);if(p)return So(c),c=Fi(y,t),m(l)}return c===n&&(c=Fi(y,t)),s}return t=xu(t)||0,iu(o)&&(d=!!o.leading,u=(p="maxWait"in o)?bn(xu(o.maxWait)||0,t):u,h="trailing"in o?!!o.trailing:h),C.cancel=function(){c!==n&&So(c),f=0,i=l=a=c=n},C.flush=function(){return c===n?s:b(Ba())},C}var Ra=Jr((function(e,t){return fr(e,1,t)})),La=Jr((function(e,t,n){return fr(e,xu(t)||0,n)}));function za(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(r);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(za.Cache||Xn),n}function Va(e){if("function"!=typeof e)throw new Oe(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}za.Cache=Xn;var Ha=wo((function(e,t){var n=(t=1==t.length&&Ka(t[0])?Bt(t[0],Kt(li())):Bt(yr(t,1),Kt(li()))).length;return Jr((function(r){for(var o=-1,i=Cn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return _t(e,this,r)}))})),$a=Jr((function(e,t){var r=sn(t,ci($a));return Zo(e,u,n,t,r)})),ja=Jr((function(e,t){var r=sn(t,ci(ja));return Zo(e,s,n,t,r)})),Ua=oi((function(e,t){return Zo(e,l,n,n,n,t)}));function Wa(e,t){return e===t||e!=e&&t!=t}var qa=Xo(Dr),Ga=Xo((function(e,t){return e>=t})),Xa=Nr(function(){return arguments}())?Nr:function(e){return au(e)&&Ie.call(e,"callee")&&!Ke.call(e,"callee")},Ka=we.isArray,Ya=vt?Kt(vt):function(e){return au(e)&&Ar(e)==N};function Ja(e){return null!=e&&ou(e.length)&&!nu(e)}function Qa(e){return au(e)&&Ja(e)}var Za=mn||xs,eu=yt?Kt(yt):function(e){return au(e)&&Ar(e)==b};function tu(e){if(!au(e))return!1;var t=Ar(e);return t==C||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!cu(e)}function nu(e){if(!iu(e))return!1;var t=Ar(e);return t==x||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ru(e){return"number"==typeof e&&e==bu(e)}function ou(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function iu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function au(e){return null!=e&&"object"==typeof e}var uu=bt?Kt(bt):function(e){return au(e)&&gi(e)==_};function su(e){return"number"==typeof e||au(e)&&Ar(e)==S}function cu(e){if(!au(e)||Ar(e)!=E)return!1;var t=Ge(e);if(null===t)return!0;var n=Ie.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Ve}var lu=Ct?Kt(Ct):function(e){return au(e)&&Ar(e)==D};var fu=xt?Kt(xt):function(e){return au(e)&&gi(e)==k};function du(e){return"string"==typeof e||!Ka(e)&&au(e)&&Ar(e)==T}function pu(e){return"symbol"==typeof e||au(e)&&Ar(e)==O}var hu=wt?Kt(wt):function(e){return au(e)&&ou(e.length)&&!!ot[Ar(e)]};var mu=Xo(zr),gu=Xo((function(e,t){return e<=t}));function vu(e){if(!e)return[];if(Ja(e))return du(e)?fn(e):Bo(e);if(at&&e[at])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[at]());var t=gi(e);return(t==_?an:t==k?cn:Wu)(e)}function yu(e){return e?(e=xu(e))===f||-Infinity===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function bu(e){var t=yu(e),n=t%1;return t==t?n?t-n:t:0}function Cu(e){return e?sr(bu(e),0,h):0}function xu(e){if("number"==typeof e)return e;if(pu(e))return p;if(iu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=iu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=me.test(e);return n||ve.test(e)?st(e.slice(2),n?2:8):he.test(e)?p:+e}function wu(e){return No(e,Ru(e))}function _u(e){return null==e?"":lo(e)}var Su=Mo((function(e,t){if(Ei(t)||Ja(t))No(t,Iu(t),e);else for(var n in t)Ie.call(t,n)&&nr(e,n,t[n])})),Eu=Mo((function(e,t){No(t,Ru(t),e)})),Au=Mo((function(e,t,n,r){No(t,Ru(t),e,r)})),Du=Mo((function(e,t,n,r){No(t,Iu(t),e,r)})),ku=oi(ur);var Tu=Jr((function(e,t){e=De(e);var r=-1,o=t.length,i=o>2?t[2]:n;for(i&&xi(t[0],t[1],i)&&(o=1);++r<o;)for(var a=t[r],u=Ru(a),s=-1,c=u.length;++s<c;){var l=u[s],f=e[l];(f===n||Wa(f,Fe[l])&&!Ie.call(e,l))&&(e[l]=a[l])}return e})),Ou=Jr((function(e){return e.push(n,ti),_t(zu,n,e)}));function Bu(e,t,r){var o=null==e?n:Sr(e,t);return o===n?r:o}function Nu(e,t){return null!=e&&vi(e,t,Tr)}var Fu=jo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),e[t]=n}),is(ss)),Mu=jo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),Ie.call(e,t)?e[t].push(n):e[t]=[n]}),li),Pu=Jr(Br);function Iu(e){return Ja(e)?Jn(e):Rr(e)}function Ru(e){return Ja(e)?Jn(e,!0):Lr(e)}var Lu=Mo((function(e,t,n){jr(e,t,n)})),zu=Mo((function(e,t,n,r){jr(e,t,n,r)})),Vu=oi((function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,(function(t){return t=xo(t,e),r||(r=t.length>1),t})),No(e,ai(e),n),r&&(n=cr(n,7,ni));for(var o=t.length;o--;)po(n,t[o]);return n}));var Hu=oi((function(e,t){return null==e?{}:function(e,t){return qr(e,t,(function(t,n){return Nu(e,n)}))}(e,t)}));function $u(e,t){if(null==e)return{};var n=Bt(ai(e),(function(e){return[e]}));return t=li(t),qr(e,n,(function(e,n){return t(e,n[0])}))}var ju=Qo(Iu),Uu=Qo(Ru);function Wu(e){return null==e?[]:Yt(e,Iu(e))}var qu=Lo((function(e,t,n){return t=t.toLowerCase(),e+(n?Gu(t):t)}));function Gu(e){return ts(_u(e).toLowerCase())}function Xu(e){return(e=_u(e))&&e.replace(be,tn).replace(Je,"")}var Ku=Lo((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Yu=Lo((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ju=Ro("toLowerCase");var Qu=Lo((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Zu=Lo((function(e,t,n){return e+(n?" ":"")+ts(t)}));var es=Lo((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ts=Ro("toUpperCase");function ns(e,t,r){return e=_u(e),(t=r?n:t)===n?function(e){return tt.test(e)}(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var rs=Jr((function(e,t){try{return _t(e,n,t)}catch(r){return tu(r)?r:new Se(r)}})),os=oi((function(e,t){return Et(t,(function(t){t=$i(t),ar(e,t,Ma(e[t],e))})),e}));function is(e){return function(){return e}}var as=Ho(),us=Ho(!0);function ss(e){return e}function cs(e){return Ir("function"==typeof e?e:cr(e,1))}var ls=Jr((function(e,t){return function(n){return Br(n,e,t)}})),fs=Jr((function(e,t){return function(n){return Br(e,n,t)}}));function ds(e,t,n){var r=Iu(t),o=_r(t,r);null!=n||iu(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=_r(t,Iu(t)));var i=!(iu(n)&&"chain"in n&&!n.chain),a=nu(e);return Et(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=Bo(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function ps(){}var hs=Wo(Bt),ms=Wo(Dt),gs=Wo(Pt);function vs(e){return wi(e)?jt($i(e)):function(e){return function(t){return Sr(t,e)}}(e)}var ys=Go(),bs=Go(!0);function Cs(){return[]}function xs(){return!1}var ws=Uo((function(e,t){return e+t}),0),_s=Yo("ceil"),Ss=Uo((function(e,t){return e/t}),1),Es=Yo("floor");var As,Ds=Uo((function(e,t){return e*t}),1),ks=Yo("round"),Ts=Uo((function(e,t){return e-t}),0);return Hn.after=function(e,t){if("function"!=typeof t)throw new Oe(r);return e=bu(e),function(){if(--e<1)return t.apply(this,arguments)}},Hn.ary=Na,Hn.assign=Su,Hn.assignIn=Eu,Hn.assignInWith=Au,Hn.assignWith=Du,Hn.at=ku,Hn.before=Fa,Hn.bind=Ma,Hn.bindAll=os,Hn.bindKey=Pa,Hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ka(e)?e:[e]},Hn.chain=va,Hn.chunk=function(e,t,r){t=(r?xi(e,t,r):t===n)?1:bn(bu(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,a=0,u=we(gt(o/t));i<o;)u[a++]=oo(e,i,i+=t);return u},Hn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=we(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Nt(Ka(n)?Bo(n):[n],yr(t,1))},Hn.cond=function(e){var t=null==e?0:e.length,n=li();return e=t?Bt(e,(function(e){if("function"!=typeof e[1])throw new Oe(r);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var o=e[r];if(_t(o[0],this,n))return _t(o[1],this,n)}}))},Hn.conforms=function(e){return function(e){var t=Iu(e);return function(n){return lr(n,e,t)}}(cr(e,1))},Hn.constant=is,Hn.countBy=Ca,Hn.create=function(e,t){var n=$n(e);return null==t?n:ir(n,t)},Hn.curry=function e(t,r,o){var i=Zo(t,8,n,n,n,n,n,r=o?n:r);return i.placeholder=e.placeholder,i},Hn.curryRight=function e(t,r,o){var i=Zo(t,a,n,n,n,n,n,r=o?n:r);return i.placeholder=e.placeholder,i},Hn.debounce=Ia,Hn.defaults=Tu,Hn.defaultsDeep=Ou,Hn.defer=Ra,Hn.delay=La,Hn.difference=Wi,Hn.differenceBy=qi,Hn.differenceWith=Gi,Hn.drop=function(e,t,r){var o=null==e?0:e.length;return o?oo(e,(t=r||t===n?1:bu(t))<0?0:t,o):[]},Hn.dropRight=function(e,t,r){var o=null==e?0:e.length;return o?oo(e,0,(t=o-(t=r||t===n?1:bu(t)))<0?0:t):[]},Hn.dropRightWhile=function(e,t){return e&&e.length?mo(e,li(t,3),!0,!0):[]},Hn.dropWhile=function(e,t){return e&&e.length?mo(e,li(t,3),!0):[]},Hn.fill=function(e,t,r,o){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&xi(e,t,r)&&(r=0,o=i),function(e,t,r,o){var i=e.length;for((r=bu(r))<0&&(r=-r>i?0:i+r),(o=o===n||o>i?i:bu(o))<0&&(o+=i),o=r>o?0:Cu(o);r<o;)e[r++]=t;return e}(e,t,r,o)):[]},Hn.filter=function(e,t){return(Ka(e)?kt:vr)(e,li(t,3))},Hn.flatMap=function(e,t){return yr(ka(e,t),1)},Hn.flatMapDeep=function(e,t){return yr(ka(e,t),f)},Hn.flatMapDepth=function(e,t,r){return r=r===n?1:bu(r),yr(ka(e,t),r)},Hn.flatten=Yi,Hn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},Hn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===n?1:bu(t)):[]},Hn.flip=function(e){return Zo(e,512)},Hn.flow=as,Hn.flowRight=us,Hn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Hn.functions=function(e){return null==e?[]:_r(e,Iu(e))},Hn.functionsIn=function(e){return null==e?[]:_r(e,Ru(e))},Hn.groupBy=Ea,Hn.initial=function(e){return(null==e?0:e.length)?oo(e,0,-1):[]},Hn.intersection=Qi,Hn.intersectionBy=Zi,Hn.intersectionWith=ea,Hn.invert=Fu,Hn.invertBy=Mu,Hn.invokeMap=Aa,Hn.iteratee=cs,Hn.keyBy=Da,Hn.keys=Iu,Hn.keysIn=Ru,Hn.map=ka,Hn.mapKeys=function(e,t){var n={};return t=li(t,3),xr(e,(function(e,r,o){ar(n,t(e,r,o),e)})),n},Hn.mapValues=function(e,t){var n={};return t=li(t,3),xr(e,(function(e,r,o){ar(n,r,t(e,r,o))})),n},Hn.matches=function(e){return Hr(cr(e,1))},Hn.matchesProperty=function(e,t){return $r(e,cr(t,1))},Hn.memoize=za,Hn.merge=Lu,Hn.mergeWith=zu,Hn.method=ls,Hn.methodOf=fs,Hn.mixin=ds,Hn.negate=Va,Hn.nthArg=function(e){return e=bu(e),Jr((function(t){return Ur(t,e)}))},Hn.omit=Vu,Hn.omitBy=function(e,t){return $u(e,Va(li(t)))},Hn.once=function(e){return Fa(2,e)},Hn.orderBy=function(e,t,r,o){return null==e?[]:(Ka(t)||(t=null==t?[]:[t]),Ka(r=o?n:r)||(r=null==r?[]:[r]),Wr(e,t,r))},Hn.over=hs,Hn.overArgs=Ha,Hn.overEvery=ms,Hn.overSome=gs,Hn.partial=$a,Hn.partialRight=ja,Hn.partition=Ta,Hn.pick=Hu,Hn.pickBy=$u,Hn.property=vs,Hn.propertyOf=function(e){return function(t){return null==e?n:Sr(e,t)}},Hn.pull=na,Hn.pullAll=ra,Hn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,li(n,2)):e},Hn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Gr(e,t,n,r):e},Hn.pullAt=oa,Hn.range=ys,Hn.rangeRight=bs,Hn.rearg=Ua,Hn.reject=function(e,t){return(Ka(e)?kt:vr)(e,Va(li(t,3)))},Hn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=li(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Xr(e,o),n},Hn.rest=function(e,t){if("function"!=typeof e)throw new Oe(r);return Jr(e,t=t===n?t:bu(t))},Hn.reverse=ia,Hn.sampleSize=function(e,t,r){return t=(r?xi(e,t,r):t===n)?1:bu(t),(Ka(e)?Zn:Zr)(e,t)},Hn.set=function(e,t,n){return null==e?e:eo(e,t,n)},Hn.setWith=function(e,t,r,o){return o="function"==typeof o?o:n,null==e?e:eo(e,t,r,o)},Hn.shuffle=function(e){return(Ka(e)?er:ro)(e)},Hn.slice=function(e,t,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&xi(e,t,r)?(t=0,r=o):(t=null==t?0:bu(t),r=r===n?o:bu(r)),oo(e,t,r)):[]},Hn.sortBy=Oa,Hn.sortedUniq=function(e){return e&&e.length?so(e):[]},Hn.sortedUniqBy=function(e,t){return e&&e.length?so(e,li(t,2)):[]},Hn.split=function(e,t,r){return r&&"number"!=typeof r&&xi(e,t,r)&&(t=r=n),(r=r===n?h:r>>>0)?(e=_u(e))&&("string"==typeof t||null!=t&&!lu(t))&&!(t=lo(t))&&on(e)?_o(fn(e),0,r):e.split(t,r):[]},Hn.spread=function(e,t){if("function"!=typeof e)throw new Oe(r);return t=null==t?0:bn(bu(t),0),Jr((function(n){var r=n[t],o=_o(n,0,t);return r&&Nt(o,r),_t(e,this,o)}))},Hn.tail=function(e){var t=null==e?0:e.length;return t?oo(e,1,t):[]},Hn.take=function(e,t,r){return e&&e.length?oo(e,0,(t=r||t===n?1:bu(t))<0?0:t):[]},Hn.takeRight=function(e,t,r){var o=null==e?0:e.length;return o?oo(e,(t=o-(t=r||t===n?1:bu(t)))<0?0:t,o):[]},Hn.takeRightWhile=function(e,t){return e&&e.length?mo(e,li(t,3),!1,!0):[]},Hn.takeWhile=function(e,t){return e&&e.length?mo(e,li(t,3)):[]},Hn.tap=function(e,t){return t(e),e},Hn.throttle=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new Oe(r);return iu(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),Ia(e,t,{leading:o,maxWait:t,trailing:i})},Hn.thru=ya,Hn.toArray=vu,Hn.toPairs=ju,Hn.toPairsIn=Uu,Hn.toPath=function(e){return Ka(e)?Bt(e,$i):pu(e)?[e]:Bo(Hi(_u(e)))},Hn.toPlainObject=wu,Hn.transform=function(e,t,n){var r=Ka(e),o=r||Za(e)||hu(e);if(t=li(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:iu(e)&&nu(i)?$n(Ge(e)):{}}return(o?Et:xr)(e,(function(e,r,o){return t(n,e,r,o)})),n},Hn.unary=function(e){return Na(e,1)},Hn.union=aa,Hn.unionBy=ua,Hn.unionWith=sa,Hn.uniq=function(e){return e&&e.length?fo(e):[]},Hn.uniqBy=function(e,t){return e&&e.length?fo(e,li(t,2)):[]},Hn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?fo(e,n,t):[]},Hn.unset=function(e,t){return null==e||po(e,t)},Hn.unzip=ca,Hn.unzipWith=la,Hn.update=function(e,t,n){return null==e?e:ho(e,t,Co(n))},Hn.updateWith=function(e,t,r,o){return o="function"==typeof o?o:n,null==e?e:ho(e,t,Co(r),o)},Hn.values=Wu,Hn.valuesIn=function(e){return null==e?[]:Yt(e,Ru(e))},Hn.without=fa,Hn.words=ns,Hn.wrap=function(e,t){return $a(Co(t),e)},Hn.xor=da,Hn.xorBy=pa,Hn.xorWith=ha,Hn.zip=ma,Hn.zipObject=function(e,t){return yo(e||[],t||[],nr)},Hn.zipObjectDeep=function(e,t){return yo(e||[],t||[],eo)},Hn.zipWith=ga,Hn.entries=ju,Hn.entriesIn=Uu,Hn.extend=Eu,Hn.extendWith=Au,ds(Hn,Hn),Hn.add=ws,Hn.attempt=rs,Hn.camelCase=qu,Hn.capitalize=Gu,Hn.ceil=_s,Hn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=xu(r))==r?r:0),t!==n&&(t=(t=xu(t))==t?t:0),sr(xu(e),t,r)},Hn.clone=function(e){return cr(e,4)},Hn.cloneDeep=function(e){return cr(e,5)},Hn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:n)},Hn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:n)},Hn.conformsTo=function(e,t){return null==t||lr(e,t,Iu(t))},Hn.deburr=Xu,Hn.defaultTo=function(e,t){return null==e||e!=e?t:e},Hn.divide=Ss,Hn.endsWith=function(e,t,r){e=_u(e),t=lo(t);var o=e.length,i=r=r===n?o:sr(bu(r),0,o);return(r-=t.length)>=0&&e.slice(r,i)==t},Hn.eq=Wa,Hn.escape=function(e){return(e=_u(e))&&K.test(e)?e.replace(G,nn):e},Hn.escapeRegExp=function(e){return(e=_u(e))&&re.test(e)?e.replace(ne,"\\$&"):e},Hn.every=function(e,t,r){var o=Ka(e)?Dt:mr;return r&&xi(e,t,r)&&(t=n),o(e,li(t,3))},Hn.find=xa,Hn.findIndex=Xi,Hn.findKey=function(e,t){return Rt(e,li(t,3),xr)},Hn.findLast=wa,Hn.findLastIndex=Ki,Hn.findLastKey=function(e,t){return Rt(e,li(t,3),wr)},Hn.floor=Es,Hn.forEach=_a,Hn.forEachRight=Sa,Hn.forIn=function(e,t){return null==e?e:br(e,li(t,3),Ru)},Hn.forInRight=function(e,t){return null==e?e:Cr(e,li(t,3),Ru)},Hn.forOwn=function(e,t){return e&&xr(e,li(t,3))},Hn.forOwnRight=function(e,t){return e&&wr(e,li(t,3))},Hn.get=Bu,Hn.gt=qa,Hn.gte=Ga,Hn.has=function(e,t){return null!=e&&vi(e,t,kr)},Hn.hasIn=Nu,Hn.head=Ji,Hn.identity=ss,Hn.includes=function(e,t,n,r){e=Ja(e)?e:Wu(e),n=n&&!r?bu(n):0;var o=e.length;return n<0&&(n=bn(o+n,0)),du(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&zt(e,t,n)>-1},Hn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:bu(n);return o<0&&(o=bn(r+o,0)),zt(e,t,o)},Hn.inRange=function(e,t,r){return t=yu(t),r===n?(r=t,t=0):r=yu(r),function(e,t,n){return e>=Cn(t,n)&&e<bn(t,n)}(e=xu(e),t,r)},Hn.invoke=Pu,Hn.isArguments=Xa,Hn.isArray=Ka,Hn.isArrayBuffer=Ya,Hn.isArrayLike=Ja,Hn.isArrayLikeObject=Qa,Hn.isBoolean=function(e){return!0===e||!1===e||au(e)&&Ar(e)==y},Hn.isBuffer=Za,Hn.isDate=eu,Hn.isElement=function(e){return au(e)&&1===e.nodeType&&!cu(e)},Hn.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Ka(e)||"string"==typeof e||"function"==typeof e.splice||Za(e)||hu(e)||Xa(e)))return!e.length;var t=gi(e);if(t==_||t==k)return!e.size;if(Ei(e))return!Rr(e).length;for(var n in e)if(Ie.call(e,n))return!1;return!0},Hn.isEqual=function(e,t){return Fr(e,t)},Hn.isEqualWith=function(e,t,r){var o=(r="function"==typeof r?r:n)?r(e,t):n;return o===n?Fr(e,t,n,r):!!o},Hn.isError=tu,Hn.isFinite=function(e){return"number"==typeof e&&gn(e)},Hn.isFunction=nu,Hn.isInteger=ru,Hn.isLength=ou,Hn.isMap=uu,Hn.isMatch=function(e,t){return e===t||Mr(e,t,di(t))},Hn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Mr(e,t,di(t),r)},Hn.isNaN=function(e){return su(e)&&e!=+e},Hn.isNative=function(e){if(Si(e))throw new Se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},Hn.isNil=function(e){return null==e},Hn.isNull=function(e){return null===e},Hn.isNumber=su,Hn.isObject=iu,Hn.isObjectLike=au,Hn.isPlainObject=cu,Hn.isRegExp=lu,Hn.isSafeInteger=function(e){return ru(e)&&e>=-9007199254740991&&e<=d},Hn.isSet=fu,Hn.isString=du,Hn.isSymbol=pu,Hn.isTypedArray=hu,Hn.isUndefined=function(e){return e===n},Hn.isWeakMap=function(e){return au(e)&&gi(e)==B},Hn.isWeakSet=function(e){return au(e)&&"[object WeakSet]"==Ar(e)},Hn.join=function(e,t){return null==e?"":vn.call(e,t)},Hn.kebabCase=Ku,Hn.last=ta,Hn.lastIndexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var i=o;return r!==n&&(i=(i=bu(r))<0?bn(o+i,0):Cn(i,o-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Lt(e,Ht,i,!0)},Hn.lowerCase=Yu,Hn.lowerFirst=Ju,Hn.lt=mu,Hn.lte=gu,Hn.max=function(e){return e&&e.length?gr(e,ss,Dr):n},Hn.maxBy=function(e,t){return e&&e.length?gr(e,li(t,2),Dr):n},Hn.mean=function(e){return $t(e,ss)},Hn.meanBy=function(e,t){return $t(e,li(t,2))},Hn.min=function(e){return e&&e.length?gr(e,ss,zr):n},Hn.minBy=function(e,t){return e&&e.length?gr(e,li(t,2),zr):n},Hn.stubArray=Cs,Hn.stubFalse=xs,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=Ds,Hn.nth=function(e,t){return e&&e.length?Ur(e,bu(t)):n},Hn.noConflict=function(){return ft._===this&&(ft._=He),this},Hn.noop=ps,Hn.now=Ba,Hn.pad=function(e,t,n){e=_u(e);var r=(t=bu(t))?ln(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return qo(It(o),n)+e+qo(gt(o),n)},Hn.padEnd=function(e,t,n){e=_u(e);var r=(t=bu(t))?ln(e):0;return t&&r<t?e+qo(t-r,n):e},Hn.padStart=function(e,t,n){e=_u(e);var r=(t=bu(t))?ln(e):0;return t&&r<t?qo(t-r,n)+e:e},Hn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(_u(e).replace(oe,""),t||0)},Hn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&xi(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=yu(e),t===n?(t=e,e=0):t=yu(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var i=_n();return Cn(e+i*(t-e+ut("1e-"+((i+"").length-1))),t)}return Kr(e,t)},Hn.reduce=function(e,t,n){var r=Ka(e)?Ft:Wt,o=arguments.length<3;return r(e,li(t,4),n,o,pr)},Hn.reduceRight=function(e,t,n){var r=Ka(e)?Mt:Wt,o=arguments.length<3;return r(e,li(t,4),n,o,hr)},Hn.repeat=function(e,t,r){return t=(r?xi(e,t,r):t===n)?1:bu(t),Yr(_u(e),t)},Hn.replace=function(){var e=arguments,t=_u(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Hn.result=function(e,t,r){var o=-1,i=(t=xo(t,e)).length;for(i||(i=1,e=n);++o<i;){var a=null==e?n:e[$i(t[o])];a===n&&(o=i,a=r),e=nu(a)?a.call(e):a}return e},Hn.round=ks,Hn.runInContext=e,Hn.sample=function(e){return(Ka(e)?Qn:Qr)(e)},Hn.size=function(e){if(null==e)return 0;if(Ja(e))return du(e)?ln(e):e.length;var t=gi(e);return t==_||t==k?e.size:Rr(e).length},Hn.snakeCase=Qu,Hn.some=function(e,t,r){var o=Ka(e)?Pt:io;return r&&xi(e,t,r)&&(t=n),o(e,li(t,3))},Hn.sortedIndex=function(e,t){return ao(e,t)},Hn.sortedIndexBy=function(e,t,n){return uo(e,t,li(n,2))},Hn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ao(e,t);if(r<n&&Wa(e[r],t))return r}return-1},Hn.sortedLastIndex=function(e,t){return ao(e,t,!0)},Hn.sortedLastIndexBy=function(e,t,n){return uo(e,t,li(n,2),!0)},Hn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ao(e,t,!0)-1;if(Wa(e[n],t))return n}return-1},Hn.startCase=Zu,Hn.startsWith=function(e,t,n){return e=_u(e),n=null==n?0:sr(bu(n),0,e.length),t=lo(t),e.slice(n,n+t.length)==t},Hn.subtract=Ts,Hn.sum=function(e){return e&&e.length?qt(e,ss):0},Hn.sumBy=function(e,t){return e&&e.length?qt(e,li(t,2)):0},Hn.template=function(e,t,r){var o=Hn.templateSettings;r&&xi(e,t,r)&&(t=n),e=_u(e),t=Au({},t,o,ei);var i,a,u=Au({},t.imports,o.imports,ei),s=Iu(u),c=Yt(u,s),l=0,f=t.interpolate||Ce,d="__p += '",p=ke((t.escape||Ce).source+"|"+f.source+"|"+(f===Q?de:Ce).source+"|"+(t.evaluate||Ce).source+"|$","g"),h="//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(p,(function(t,n,r,o,u,s){return r||(r=o),d+=e.slice(l,s).replace(xe,rn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),u&&(a=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+t.length,t})),d+="';\n";var m=Ie.call(t,"variable")&&t.variable;if(m){if(le.test(m))throw new Se("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(j,""):d).replace(U,"$1").replace(W,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=rs((function(){return Ee(s,h+"return "+d).apply(n,c)}));if(g.source=d,tu(g))throw g;return g},Hn.times=function(e,t){if((e=bu(e))<1||e>d)return[];var n=h,r=Cn(e,h);t=li(t),e-=h;for(var o=Gt(r,t);++n<e;)t(n);return o},Hn.toFinite=yu,Hn.toInteger=bu,Hn.toLength=Cu,Hn.toLower=function(e){return _u(e).toLowerCase()},Hn.toNumber=xu,Hn.toSafeInteger=function(e){return e?sr(bu(e),-9007199254740991,d):0===e?e:0},Hn.toString=_u,Hn.toUpper=function(e){return _u(e).toUpperCase()},Hn.trim=function(e,t,r){if((e=_u(e))&&(r||t===n))return Xt(e);if(!e||!(t=lo(t)))return e;var o=fn(e),i=fn(t);return _o(o,Qt(o,i),Zt(o,i)+1).join("")},Hn.trimEnd=function(e,t,r){if((e=_u(e))&&(r||t===n))return e.slice(0,dn(e)+1);if(!e||!(t=lo(t)))return e;var o=fn(e);return _o(o,0,Zt(o,fn(t))+1).join("")},Hn.trimStart=function(e,t,r){if((e=_u(e))&&(r||t===n))return e.replace(oe,"");if(!e||!(t=lo(t)))return e;var o=fn(e);return _o(o,Qt(o,fn(t))).join("")},Hn.truncate=function(e,t){var r=30,o="...";if(iu(t)){var i="separator"in t?t.separator:i;r="length"in t?bu(t.length):r,o="omission"in t?lo(t.omission):o}var a=(e=_u(e)).length;if(on(e)){var u=fn(e);a=u.length}if(r>=a)return e;var s=r-ln(o);if(s<1)return o;var c=u?_o(u,0,s).join(""):e.slice(0,s);if(i===n)return c+o;if(u&&(s+=c.length-s),lu(i)){if(e.slice(s).search(i)){var l,f=c;for(i.global||(i=ke(i.source,_u(pe.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var d=l.index;c=c.slice(0,d===n?s:d)}}else if(e.indexOf(lo(i),s)!=s){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+o},Hn.unescape=function(e){return(e=_u(e))&&X.test(e)?e.replace(q,pn):e},Hn.uniqueId=function(e){var t=++Re;return _u(e)+t},Hn.upperCase=es,Hn.upperFirst=ts,Hn.each=_a,Hn.eachRight=Sa,Hn.first=Ji,ds(Hn,(As={},xr(Hn,(function(e,t){Ie.call(Hn.prototype,t)||(As[t]=e)})),As),{chain:!1}),Hn.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Hn[e].placeholder=Hn})),Et(["drop","take"],(function(e,t){Wn.prototype[e]=function(r){r=r===n?1:bn(bu(r),0);var o=this.__filtered__&&!t?new Wn(this):this.clone();return o.__filtered__?o.__takeCount__=Cn(r,o.__takeCount__):o.__views__.push({size:Cn(r,h),type:e+(o.__dir__<0?"Right":"")}),o},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Et(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:li(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Et(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),Et(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(ss)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Br(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Va(li(e)))},Wn.prototype.slice=function(e,t){e=bu(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Wn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=bu(t))<0?r.dropRight(-t):r.take(t-e)),r)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(h)},xr(Wn.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),i=Hn[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);i&&(Hn.prototype[t]=function(){var t=this.__wrapped__,u=o?[1]:arguments,s=t instanceof Wn,c=u[0],l=s||Ka(t),f=function(e){var t=i.apply(Hn,Nt([e],u));return o&&d?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(s=l=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,m=s&&!p;if(!a&&l){t=m?t:new Wn(this);var g=e.apply(t,u);return g.__actions__.push({func:ya,args:[f],thisArg:n}),new Un(g,d)}return h&&m?e.apply(this,u):(g=this.thru(f),h?o?g.value()[0]:g.value():g)})})),Et(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Hn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Ka(o)?o:[],e)}return this[n]((function(n){return t.apply(Ka(n)?n:[],e)}))}})),xr(Wn.prototype,(function(e,t){var n=Hn[t];if(n){var r=n.name+"";Ie.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:t,func:n})}})),Nn[$o(n,2).name]=[{name:"wrapper",func:n}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Bo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Bo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Bo(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ka(e),r=t<0,o=n?e.length:0,i=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Cn(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,u=i.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,d=0,p=Cn(s,this.__takeCount__);if(!n||!r&&o==s&&p==s)return go(e,this.__actions__);var h=[];e:for(;s--&&d<p;){for(var m=-1,g=e[c+=t];++m<f;){var v=l[m],y=v.iteratee,b=v.type,C=y(g);if(2==b)g=C;else if(!C){if(1==b)continue e;break e}}h[d++]=g}return h},Hn.prototype.at=ba,Hn.prototype.chain=function(){return va(this)},Hn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===n&&(this.__values__=vu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Hn.prototype.plant=function(e){for(var t,r=this;r instanceof jn;){var o=Ui(r);o.__index__=0,o.__values__=n,t?i.__wrapped__=o:t=o;var i=o;r=r.__wrapped__}return i.__wrapped__=e,t},Hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:ya,args:[ia],thisArg:n}),new Un(t,this.__chain__)}return this.thru(ia)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return go(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,at&&(Hn.prototype[at]=function(){return this}),Hn}();pt?((pt.exports=hn)._=hn,dt._=hn):ft._=hn}).call(commonjsGlobal)}(lodash,lodash.exports);var _=lodash.exports;class Descartes2SKU{constructor(e){if(!_.isArray(e)&&!_.isObject(e))throw new Error("Sorry, the receiving parameter should be an Array or Object");this.arrORobj=e}descartes(e){const t=this.arrORobj;let n=[];if(_.size(t)>0)if(_.isArray(t))switch(e){case 1:n=this._descartes_1(t);break;case 2:n=this._descartes_2(t);break;default:n=this._descartes_2(t)}else _.isObject(t)&&(n=this._descartes_obj(t));return n}_descartes_obj(e){const t=e||this.arrORobj;let n=_.keys(t),r=[];const o=[];for(let i in t)t[i].length>0?o.push(t[i]):(delete t[i],_.pull(n,i));return this._descartes_2(o).forEach((e=>{r.push(Object.assign({},e))})),r.forEach(((e,t)=>{r[t]=_.mapKeys(e,((e,t)=>{let r=Number(t);return n[r]}))})),r}_descartes_2(e){const t=e||this._arrORobj,n=t.length-1,r=[],o=(e,i)=>{const a=t[i],u=i===n;for(let t in a){var s=e.slice();s.push(a[t]),u?r.push(s):o(s,i+1)}};return t.length&&o([],0),r}_descartes_1(e){const t=e||this._arrORobj;let n=[];return t?t.length<=0?[]:(1===t.length&&(n=this._descartes1(t[0])),2===t.length&&(n=this._descartes2(t[0],t[1])),t.length>=3&&(n=this._descartes3(t)),n):[]}_descartes1(e){const t=[];for(let n in e)t.push([e[n]]);return t}_descartes2(e,t){const n=[];for(let r in e)for(let o in t)n.push([e[r],t[o]]);return n}_descartes3(e){let t=this._descartes2(e[0],e[1]);for(let n=2;n<e.length;n++)t=this._descartes2DAnd1D(t,e[n]);return t}_descartes2DAnd1D(e,t){const n=[];for(let r in e)for(let o in t)n.push(e[r].concat(t[o]));return n}}class SearchSKU{constructor(e,t){if(!_.isArray(e))throw new Error("Sorry, the receiving parameter should be an Array");if(this._SKU=e,!_.isObject(t))throw new Error("Sorry, the receiving parameter should be an Object");this._sku=t}search(){const e=this._SKU,t=this._sku;let n={};return _.size(e)>0&&_.size(t)>0&&_.isObject(e[0])&&(n=this._Search_Obj(e,t)),n}_Search_Arr(e,t){e||this._SKU,t||this._sku}_Search_Obj(e,t){let n;e||this._SKU,t||this._sku;const r=(e,t,o)=>{try{let i=o||0;const a=_.keys(t),u=[];e.forEach((e=>{e[a[i]]===t[a[i]]&&u.push(e)})),_.size(u)>1?r(u,t,i+1):1===_.size(u)&&(n=u)}catch(i){throw new Error("The data entered is incorrect !!!")}};return r(e,t),1===_.size(n)&&n?n[0]:{}}}const columns=[{title:"",dataIndex:"price",editComponent:"Input",editable:!0,width:160,edit:!0},{title:"",dataIndex:"market_price",editComponent:"Input",editable:!0,width:160,edit:!0},{title:"",dataIndex:"cost_price",editComponent:"Input",editable:!0,width:160,edit:!0},{title:"",dataIndex:"stock",editComponent:"Input",editable:!0,width:160,edit:!0},{title:"",dataIndex:"stock_alarm",editComponent:"Input",editable:!0,width:160,edit:!0}];var _sfc_main$1=defineComponent({name:"BasicSku",components:{SkuForm:_sfc_main$2,BasicTable:_sfc_main$9},props:basicProps,emits:["change","spec","sku"],setup(e,{emit:t}){const n=ref$1([]),r=ref$1([]),o=ref$1([]),i=ref$1([]),a=ref$1([]),u=ref$1(""),s=ref$1("price");watch((()=>e.sku),(e=>{i.value=isArray$1(e)?e:[]}),{immediate:!0,deep:!0}),watch((()=>e.spec),(e=>{r.value=isArray$1(e)?e:[]}),{immediate:!0,deep:!0});const{createMessage:c}=useMessage(),[l,{getDataSource:f,setTableData:d,setProps:p,setColumns:h,updateTableData:m}]=useTable({showIndexColumn:!1,pagination:!1,columns:columns,dataSource:[{price:0,market_price:0,cost_price:0,stock:0,stock_alarm:0}]});function g(){const e=unref(r),t={},n=e.map((e=>e.value));e.map((e=>(t[e.spec_id]=e.value.map((e=>e.spec_value_name)),{[e.spec_id]:e.value.map((e=>e.spec_value_name))})));const i=new Descartes2SKU(n);o.value=i.descartes();const u=new Descartes2SKU(t).descartes();u.map(((e,t)=>Object.assign(e,{price:0,market_price:0,cost_price:0,stock:0,stock_alarm:0,spec_value:o.value[t]})));const s=e.map((e=>({title:e.spec_name,dataIndex:e.spec_id}))),c=[...new Set([...s,...columns])];h(c),a.value=u,v()}function v(){i.value.length>1&&i.value.map((e=>e.spec_value.map((t=>Object.assign(e,{[t.spec_id]:t.spec_value_name}))))),a.value.map((e=>{d(a.value);const t=new SearchSKU(i.value,e).search();return Object.assign(e,t)})),d(a.value),t("change",JSON.parse(JSON.stringify({spec:r.value,sku:i.value})))}function y(){const e=f().map((function(e){return Object.assign(e.editValueRefs,{spec_value:e.spec_value})}));i.value=e,t("change",JSON.parse(JSON.stringify({spec:r.value,sku:e}))),t("sku",JSON.parse(JSON.stringify(e)))}return onMounted((()=>{useTimeoutFn((()=>{g()}),10)})),{updateTableData:m,sourceSpec:r,sourceSku:i,handleSku:g,specSku:a,buildValue:function(e){r.value=e,t("spec",JSON.parse(JSON.stringify(r.value))),g()},mergeSpec:v,specValue:o,tableColumn:n,columns:columns,registerTable:l,getDataSource:f,setTableData:d,setProps:p,setColumns:h,inputRef:u,rowFieldRef:s,handleSetRow:function(){u.value.length<1?c.error(""):(f().map(((e,t)=>{var n;m(t,unref(s),null!=(n=parseFloat(unref(u)))?n:0)})),useTimeoutFn((()=>{y()}),20),useTimeoutFn((()=>{g()}),30))},getSkuData:y}}});const _hoisted_1$1=createTextVNode("");function _sfc_render$1(e,t,n,r,o,i){const a=resolveComponent("SkuForm"),u=resolveComponent("a-select-option"),s=resolveComponent("a-select"),c=resolveComponent("a-button"),l=resolveComponent("a-input-search"),f=resolveComponent("a-col"),d=resolveComponent("a-row"),p=resolveComponent("BasicTable");return openBlock(),createBlock("div",null,[createVNode(a,{spec:e.sourceSpec,"onSpec:update":e.buildValue},null,8,["spec","onSpec:update"]),createVNode(d,{type:"flex",justify:"start"},{default:withCtx((()=>[createVNode(f,{span:12},{default:withCtx((()=>[createVNode(l,{value:e.inputRef,"onUpdate:value":t[2]||(t[2]=t=>e.inputRef=t),size:"large",onSearch:e.handleSetRow},{addonBefore:withCtx((()=>[createVNode(s,{value:e.rowFieldRef,"onUpdate:value":t[1]||(t[1]=t=>e.rowFieldRef=t),style:{width:"90px"}},{default:withCtx((()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.columns,(e=>(openBlock(),createBlock(u,{key:e.dataIndex,value:e.dataIndex},{default:withCtx((()=>[createTextVNode(toDisplayString(e.title),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),enterButton:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[_hoisted_1$1])),_:1})])),_:1},8,["value","onSearch"])])),_:1})])),_:1}),createVNode(p,{onRegister:e.registerTable,onEditChange:e.getSkuData},null,8,["onRegister","onEditChange"])])}_sfc_main$1.render=_sfc_render$1,withInstall(_sfc_main$1);var reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStartChars="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",nonASCIIidentifierChars="----------------------------------------------------------------------------------------------------------------------------------------------------",nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");nonASCIIidentifierStartChars=nonASCIIidentifierChars=null;var astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function isInAstralSet(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function isIdentifierStart(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&nonASCIIidentifierStart.test(String.fromCharCode(e)):!1!==t&&isInAstralSet(e,astralIdentifierStartCodes)))}function isIdentifierChar(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&nonASCIIidentifier.test(String.fromCharCode(e)):!1!==t&&(isInAstralSet(e,astralIdentifierStartCodes)||isInAstralSet(e,astralIdentifierCodes)))))}var TokenType=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function binop(e,t){return new TokenType(e,{beforeExpr:!0,binop:t})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords$1={};function kw(e,t){return void 0===t&&(t={}),t.keyword=e,keywords$1[e]=new TokenType(e,t)}var types={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString;function has$1(e,t){return hasOwnProperty.call(e,t)}var isArray=Array.isArray||function(e){return"[object Array]"===toString.call(e)};function wordsRegexp(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var Position=function(e,t){this.line=e,this.column=t};Position.prototype.offset=function(e){return new Position(this.line,this.column+e)};var SourceLocation=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function getLineInfo(e,t){for(var n=1,r=0;;){lineBreakG.lastIndex=r;var o=lineBreakG.exec(e);if(!(o&&o.index<t))return new Position(n,t-r);++n,r=o.index+o[0].length}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(e){var t={};for(var n in defaultOptions)t[n]=e&&has$1(e,n)?e[n]:defaultOptions[n];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!warnedAboutEcmaVersion&&"object"==typeof console&&console.warn&&(warnedAboutEcmaVersion=!0),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),isArray(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return isArray(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(n,r,o,i,a,u){var s={type:n?"Block":"Line",value:r,start:o,end:i};e.locations&&(s.loc=new SourceLocation(this,a,u)),e.ranges&&(s.range=[o,i]),t.push(s)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128;function functionFlags(e,t){return SCOPE_FUNCTION|(e?SCOPE_ASYNC:0)|(t?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser=function(e,t,n){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=wordsRegexp(keywords[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=reservedWords[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=wordsRegexp(r);var o=(r?r+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(o),this.reservedWordsStrictBind=wordsRegexp(o+" "+reservedWords.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Parser.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit)return!1;if(t.flags&SCOPE_FUNCTION)return(t.flags&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&SCOPE_SUPER)>0||n||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.inNonArrowFunction.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&SCOPE_FUNCTION)>0||n},Parser.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},Parser.parse=function(e,t){return new this(t,e).parse()},Parser.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},Parser.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(Parser.prototype,prototypeAccessors);var pp=Parser.prototype,literal=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function DestructuringErrors(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}pp.strictDirective=function(e){for(;;){skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length;var t=literal.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){skipWhiteSpace.lastIndex=e+t[0].length;var n=skipWhiteSpace.exec(this.input),r=n.index+n[0].length,o=this.input.charAt(r);return";"===o||"}"===o||lineBreak.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(o)||"!"===o&&"="===this.input.charAt(r+1))}e+=t[0].length,skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length,";"===this.input[e]&&e++}},pp.eat=function(e){return this.type===e&&(this.next(),!0)},pp.isContextual=function(e){return this.type===types.name&&this.value===e&&!this.containsEsc},pp.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},pp.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},pp.canInsertSemicolon=function(){return this.type===types.eof||this.type===types.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp.semicolon=function(){this.eat(types.semi)||this.insertSemicolon()||this.unexpected()},pp.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},pp.expect=function(e){this.eat(e)||this.unexpected()},pp.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},pp.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},pp.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},pp.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var pp$1=Parser.prototype;pp$1.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==types.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,o=Object.keys(this.undefinedExports);r<o.length;r+=1){var i=o[r];this.raiseRecoverable(this.undefinedExports[i].start,"Export '"+i+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$1.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var t=skipWhiteSpace.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r||92===r||r>55295&&r<56320)return!0;if(e)return!1;if(123===r)return!0;if(isIdentifierStart(r,!0)){for(var o=n+1;isIdentifierChar(r=this.input.charCodeAt(o),!0);)++o;if(92===r||r>55295&&r<56320)return!0;var i=this.input.slice(n,o);if(!keywordRelationalOperator.test(i))return!0}return!1},pp$1.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var e,t=skipWhiteSpace.exec(this.input),n=this.pos+t[0].length;return!(lineBreak.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(isIdentifierChar(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},pp$1.parseStatement=function(e,t,n){var r,o=this.type,i=this.startNode();switch(this.isLet(e)&&(o=types._var,r="let"),o){case types._break:case types._continue:return this.parseBreakContinueStatement(i,o.keyword);case types._debugger:return this.parseDebuggerStatement(i);case types._do:return this.parseDoStatement(i);case types._for:return this.parseForStatement(i);case types._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case types._class:return e&&this.unexpected(),this.parseClass(i,!0);case types._if:return this.parseIfStatement(i);case types._return:return this.parseReturnStatement(i);case types._switch:return this.parseSwitchStatement(i);case types._throw:return this.parseThrowStatement(i);case types._try:return this.parseTryStatement(i);case types._const:case types._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(i,r);case types._while:return this.parseWhileStatement(i);case types._with:return this.parseWithStatement(i);case types.braceL:return this.parseBlock(!0,i);case types.semi:return this.parseEmptyStatement(i);case types._export:case types._import:if(this.options.ecmaVersion>10&&o===types._import){skipWhiteSpace.lastIndex=this.pos;var a=skipWhiteSpace.exec(this.input),u=this.pos+a[0].length,s=this.input.charCodeAt(u);if(40===s||46===s)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),o===types._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var c=this.value,l=this.parseExpression();return o===types.name&&"Identifier"===l.type&&this.eat(types.colon)?this.parseLabeledStatement(i,c,l,e):this.parseExpressionStatement(i,l)}},pp$1.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(types.semi)||this.insertSemicolon()?e.label=null:this.type!==types.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var o=this.labels[r];if(null==e.label||o.name===e.label.name){if(null!=o.kind&&(n||"loop"===o.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},pp$1.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},pp$1.parseDoStatement=function(e){return this.next(),this.labels.push(loopLabel),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(types._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},pp$1.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types.parenL),this.type===types.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===types._var||this.type===types._const||n){var r=this.startNode(),o=n?"let":this.value;return this.next(),this.parseVar(r,!0,o),this.finishNode(r,"VariableDeclaration"),(this.type===types._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===types._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var i=new DestructuringErrors,a=this.parseExpression(!(t>-1)||"await",i);return this.type===types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===types._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,i),this.checkLValPattern(a),this.parseForIn(e,a)):(this.checkExpressionErrors(i,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},pp$1.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,FUNC_STATEMENT|(n?0:FUNC_HANGING_STATEMENT),!1,t)},pp$1.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(types._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},pp$1.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},pp$1.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(types.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var n=!1;this.type!==types.braceR;)if(this.type===types._case||this.type===types._default){var r=this.type===types._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(types.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},pp$1.parseThrowStatement=function(e){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var empty=[];pp$1.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===types._catch){var t=this.startNode();if(this.next(),this.eat(types.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(t.param,n?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(types._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},pp$1.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},pp$1.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(loopLabel),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},pp$1.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},pp$1.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},pp$1.parseLabeledStatement=function(e,t,n,r){for(var o=0,i=this.labels;o<i.length;o+=1){i[o].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===types._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var s=this.labels[u];if(s.statementStart!==e.start)break;s.statementStart=this.start,s.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},pp$1.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},pp$1.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(types.braceL),e&&this.enterScope(0);this.type!==types.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},pp$1.parseFor=function(e,t){return e.init=t,this.expect(types.semi),e.test=this.type===types.semi?null:this.parseExpression(),this.expect(types.semi),e.update=this.type===types.parenR?null:this.parseExpression(),this.expect(types.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},pp$1.parseForIn=function(e,t){var n=this.type===types._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(types.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},pp$1.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(types.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===types._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(types.comma))break}return e},pp$1.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;function isPrivateNameConflicted(e,t){var n=t.key.name,r=e[n],o="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(o=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===o||"iset"===r&&"iget"===o||"sget"===r&&"sset"===o||"sset"===r&&"sget"===o?(e[n]="true",!1):!!r||(e[n]=o,!1)}function checkKeyName(e,t){var n=e.computed,r=e.key;return!n&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}pp$1.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===types.star&&t&FUNC_HANGING_STATEMENT&&this.unexpected(),e.generator=this.eat(types.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&FUNC_STATEMENT&&(e.id=t&FUNC_NULLABLE_ID&&this.type!==types.name?null:this.parseIdent(),!e.id||t&FUNC_HANGING_STATEMENT||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var o=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e.async,e.generator)),t&FUNC_STATEMENT||(e.id=this.type===types.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=o,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(e,t&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$1.parseFunctionParams=function(e){this.expect(types.parenL),e.params=this.parseBindingList(types.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$1.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),o=this.startNode(),i=!1;for(o.body=[],this.expect(types.braceL);this.type!==types.braceR;){var a=this.parseClassElement(null!==e.superClass);a&&(o.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0):"PrivateIdentifier"===a.key.type&&isPrivateNameConflicted(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(o,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},pp$1.parseClassElement=function(e){if(this.eat(types.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",o=!1,i=!1,a="method";if(n.static=!1,this.eatContextual("static")&&(this.isClassElementNameStart()||this.type===types.star?n.static=!0:r="static"),!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==types.star||this.canInsertSemicolon()?r="async":i=!0),!r&&(t>=9||!i)&&this.eat(types.star)&&(o=!0),!r&&!i&&!o){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===types.parenL||"method"!==a||o||i){var s=!n.static&&checkKeyName(n,"constructor"),c=s&&e;s&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=s?"constructor":a,this.parseClassMethod(n,o,i,c)}else this.parseClassField(n);return n},pp$1.isClassElementNameStart=function(){return this.type===types.name||this.type===types.privateId||this.type===types.num||this.type===types.string||this.type===types.bracketL||this.type.keyword},pp$1.parseClassElementName=function(e){this.type===types.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},pp$1.parseClassMethod=function(e,t,n,r){var o=e.key;"constructor"===e.kind?(t&&this.raise(o.start,"Constructor can't be a generator"),n&&this.raise(o.start,"Constructor can't be an async method")):e.static&&checkKeyName(e,"prototype")&&this.raise(o.start,"Classes may not have a static property named prototype");var i=e.value=this.parseMethod(t,n,r);return"get"===e.kind&&0!==i.params.length&&this.raiseRecoverable(i.start,"getter should have no params"),"set"===e.kind&&1!==i.params.length&&this.raiseRecoverable(i.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===i.params[0].type&&this.raiseRecoverable(i.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},pp$1.parseClassField=function(e){if(checkKeyName(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&checkKeyName(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},pp$1.parseClassId=function(e,t){this.type===types.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,BIND_LEXICAL,!1)):(!0===t&&this.unexpected(),e.id=null)},pp$1.parseClassSuper=function(e){e.superClass=this.eat(types._extends)?this.parseExprSubscripts():null},pp$1.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},pp$1.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,r=this.privateNameStack.length,o=0===r?null:this.privateNameStack[r-1],i=0;i<n.length;++i){var a=n[i];has$1(t,a.name)||(o?o.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},pp$1.parseExport=function(e,t){if(this.next(),this.eat(types.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==types.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(types._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===types._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,n)}else if(this.type===types._class){var o=this.startNode();e.declaration=this.parseClass(o,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==types.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var i=0,a=e.specifiers;i<a.length;i+=1){var u=a[i];this.checkUnreserved(u.local),this.checkLocalExport(u.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},pp$1.checkExport=function(e,t,n){e&&(has$1(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},pp$1.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,o=t.properties;r<o.length;r+=1){var i=o[r];this.checkPatternExport(e,i)}else if("ArrayPattern"===n)for(var a=0,u=t.elements;a<u.length;a+=1){var s=u[a];s&&this.checkPatternExport(e,s)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},pp$1.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var o=r[n];this.checkPatternExport(e,o.id)}},pp$1.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},pp$1.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(types.braceL);!this.eat(types.braceR);){if(n)n=!1;else if(this.expect(types.comma),this.afterTrailingComma(types.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},pp$1.parseImport=function(e){return this.next(),this.type===types.string?(e.specifiers=empty,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},pp$1.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===types.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,BIND_LEXICAL),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(types.comma))return e}if(this.type===types.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLValSimple(r.local,BIND_LEXICAL),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(types.braceL);!this.eat(types.braceR);){if(t)t=!1;else if(this.expect(types.comma),this.afterTrailingComma(types.braceR))break;var o=this.startNode();o.imported=this.parseIdent(!0),this.eatContextual("as")?o.local=this.parseIdent():(this.checkUnreserved(o.imported),o.local=o.imported),this.checkLValSimple(o.local,BIND_LEXICAL),e.push(this.finishNode(o,"ImportSpecifier"))}return e},pp$1.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},pp$1.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var pp$2=Parser.prototype;pp$2.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,o=e.properties;r<o.length;r+=1){var i=o[r];this.toAssignable(i,t),"RestElement"!==i.type||"ArrayPattern"!==i.argument.type&&"ObjectPattern"!==i.argument.type||this.raise(i.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},pp$2.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var o=e[r];o&&this.toAssignable(o,t)}if(n){var i=e[n-1];6===this.options.ecmaVersion&&t&&i&&"RestElement"===i.type&&"Identifier"!==i.argument.type&&this.unexpected(i.argument.start)}return e},pp$2.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},pp$2.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==types.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pp$2.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(types.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case types.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$2.parseBindingList=function(e,t,n){for(var r=[],o=!0;!this.eat(e);)if(o?o=!1:this.expect(types.comma),t&&this.type===types.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===types.ellipsis){var i=this.parseRestBinding();this.parseBindingListItem(i),r.push(i),this.type===types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},pp$2.parseBindingListItem=function(e){return e},pp$2.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},pp$2.checkLValSimple=function(e,t,n){void 0===t&&(t=BIND_NONE);var r=t!==BIND_NONE;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===BIND_LEXICAL&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(has$1(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==BIND_OUTSIDE&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},pp$2.checkLValPattern=function(e,t,n){switch(void 0===t&&(t=BIND_NONE),e.type){case"ObjectPattern":for(var r=0,o=e.properties;r<o.length;r+=1){var i=o[r];this.checkLValInnerPattern(i,t,n)}break;case"ArrayPattern":for(var a=0,u=e.elements;a<u.length;a+=1){var s=u[a];s&&this.checkLValInnerPattern(s,t,n)}break;default:this.checkLValSimple(e,t,n)}},pp$2.checkLValInnerPattern=function(e,t,n){switch(void 0===t&&(t=BIND_NONE),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var pp$3=Parser.prototype;function isPrivateFieldAccess(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&isPrivateFieldAccess(e.expression)}pp$3.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,o=e.key;switch(o.type){case"Identifier":r=o.name;break;case"Literal":r=String(o.value);break;default:return}var i=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===i&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=o.start):this.raiseRecoverable(o.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===i?this.strict&&a.init||a.get||a.set:a.init||a[i])&&this.raiseRecoverable(o.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[i]=!0}}},pp$3.parseExpression=function(e,t){var n=this.start,r=this.startLoc,o=this.parseMaybeAssign(e,t);if(this.type===types.comma){var i=this.startNodeAt(n,r);for(i.expressions=[o];this.eat(types.comma);)i.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(i,"SequenceExpression")}return o},pp$3.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,o=-1,i=-1;t?(o=t.parenthesizedAssign,i=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors,r=!0);var a=this.start,u=this.startLoc;this.type!==types.parenL&&this.type!==types.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var s=this.parseMaybeConditional(e,t);if(n&&(s=n.call(this,s,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===types.eq&&(s=this.toAssignable(s,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=s.start&&(t.shorthandAssign=-1),this.type===types.eq?this.checkLValPattern(s):this.checkLValSimple(s),c.left=s,this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),o>-1&&(t.parenthesizedAssign=o),i>-1&&(t.trailingComma=i),s},pp$3.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,o=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return o;if(this.eat(types.question)){var i=this.startNodeAt(n,r);return i.test=o,i.consequent=this.parseMaybeAssign(),this.expect(types.colon),i.alternate=this.parseMaybeAssign(e),this.finishNode(i,"ConditionalExpression")}return o},pp$3.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,o=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||o.start===n&&"ArrowFunctionExpression"===o.type?o:this.parseExprOp(o,n,r,-1,e)},pp$3.parseExprOp=function(e,t,n,r,o){var i=this.type.binop;if(null!=i&&(!o||this.type!==types._in)&&i>r){var a=this.type===types.logicalOR||this.type===types.logicalAND,u=this.type===types.coalesce;u&&(i=types.logicalAND.binop);var s=this.value;this.next();var c=this.start,l=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),c,l,i,o),d=this.buildBinary(t,n,e,f,s,a||u);return(a&&this.type===types.coalesce||u&&(this.type===types.logicalOR||this.type===types.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,o)}return e},pp$3.buildBinary=function(e,t,n,r,o,i){var a=this.startNodeAt(e,t);return a.left=n,a.operator=o,a.right=r,this.finishNode(a,i?"LogicalExpression":"BinaryExpression")},pp$3.parseMaybeUnary=function(e,t,n){var r,o=this.start,i=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===types.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&isPrivateFieldAccess(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,r=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(o,i);s.operator=this.value,s.prefix=!1,s.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(s,"UpdateExpression")}}return n||!this.eat(types.starstar)?r:t?void this.unexpected(this.lastTokStart):this.buildBinary(o,i,r,this.parseMaybeUnary(null,!1),"**",!1)},pp$3.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1),e.trailingComma>=o.start&&(e.trailingComma=-1)),o},pp$3.parseSubscripts=function(e,t,n,r){for(var o=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,i=!1;;){var a=this.parseSubscript(e,t,n,r,o,i);if(a.optional&&(i=!0),a===e||"ArrowFunctionExpression"===a.type){if(i){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}},pp$3.parseSubscript=function(e,t,n,r,o,i){var a=this.options.ecmaVersion>=11,u=a&&this.eat(types.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var s=this.eat(types.bracketL);if(s||u&&this.type!==types.parenL&&this.type!==types.backQuote||this.eat(types.dot)){var c=this.startNodeAt(t,n);c.object=e,s?(c.property=this.parseExpression(),this.expect(types.bracketR)):this.type===types.privateId&&"Super"!==e.type?c.property=this.parsePrivateIdent():c.property=this.parseIdent("never"!==this.options.allowReserved),c.computed=!!s,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(types.parenL)){var l=new DestructuringErrors,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(types.parenR,this.options.ecmaVersion>=8,!1,l);if(o&&!u&&!this.canInsertSemicolon()&&this.eat(types.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(l,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var m=this.startNodeAt(t,n);m.callee=e,m.arguments=h,a&&(m.optional=u),e=this.finishNode(m,"CallExpression")}else if(this.type===types.backQuote){(u||i)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var g=this.startNodeAt(t,n);g.tag=e,g.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(g,"TaggedTemplateExpression")}return e},pp$3.parseExprAtom=function(e){this.type===types.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case types._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==types.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==types.dot&&this.type!==types.bracketL&&this.type!==types.parenL&&this.unexpected(),this.finishNode(t,"Super");case types._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case types.name:var r=this.start,o=this.startLoc,i=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!i&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(types._function))return this.parseFunction(this.startNodeAt(r,o),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(types.arrow))return this.parseArrowExpression(this.startNodeAt(r,o),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===types.name&&!i&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(types.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,o),[a],!0)}return a;case types.regexp:var u=this.value;return(t=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},t;case types.num:case types.string:return this.parseLiteral(this.value);case types._null:case types._true:case types._false:return(t=this.startNode()).value=this.type===types._null?null:this.type===types._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case types.parenL:var s=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=s),e.parenthesizedBind<0&&(e.parenthesizedBind=s)),c;case types.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(types.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case types.braceL:return this.parseObj(!1,e);case types._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case types._class:return this.parseClass(this.startNode(),!1);case types._new:return this.parseNew();case types.backQuote:return this.parseTemplate();case types._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},pp$3.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case types.parenL:return this.parseDynamicImport(e);case types.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}},pp$3.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(types.parenR)){var t=this.start;this.eat(types.comma)&&this.eat(types.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},pp$3.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},pp$3.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},pp$3.parseParenExpression=function(){this.expect(types.parenL);var e=this.parseExpression();return this.expect(types.parenR),e},pp$3.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,o=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var i,a=this.start,u=this.startLoc,s=[],c=!0,l=!1,f=new DestructuringErrors,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==types.parenR;){if(c?c=!1:this.expect(types.comma),o&&this.afterTrailingComma(types.parenR,!0)){l=!0;break}if(this.type===types.ellipsis){i=this.start,s.push(this.parseParenItem(this.parseRestBinding())),this.type===types.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}s.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var h=this.start,m=this.startLoc;if(this.expect(types.parenR),e&&!this.canInsertSemicolon()&&this.eat(types.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,r,s);s.length&&!l||this.unexpected(this.lastTokStart),i&&this.unexpected(i),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,s.length>1?((t=this.startNodeAt(a,u)).expressions=s,this.finishNodeAt(t,"SequenceExpression",h,m)):t=s[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},pp$3.parseParenItem=function(e){return e},pp$3.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var empty$1=[];pp$3.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(types.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,o=this.startLoc,i=this.type===types._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,o,!0),i&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(types.parenL)?e.arguments=this.parseExprList(types.parenR,this.options.ecmaVersion>=8,!1):e.arguments=empty$1,this.finishNode(e,"NewExpression")},pp$3.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===types.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===types.backQuote,this.finishNode(n,"TemplateElement")},pp$3.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===types.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(types.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},pp$3.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===types.name||this.type===types.num||this.type===types.string||this.type===types.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$3.parseObj=function(e,t){var n=this.startNode(),r=!0,o={};for(n.properties=[],this.next();!this.eat(types.braceR);){if(r)r=!1;else if(this.expect(types.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types.braceR))break;var i=this.parseProperty(e,t);e||this.checkPropClash(i,o,t),n.properties.push(i)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},pp$3.parseProperty=function(e,t){var n,r,o,i,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(types.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===types.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===types.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(o=this.start,i=this.startLoc),e||(n=this.eat(types.star)));var u=this.containsEsc;return this.parsePropertyName(a),!e&&!u&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(types.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,o,i,t,u),this.finishNode(a,"Property")},pp$3.parsePropertyValue=function(e,t,n,r,o,i,a,u){if((n||r)&&this.type===types.colon&&this.unexpected(),this.eat(types.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===types.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||u||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===types.comma||this.type===types.braceR||this.type===types.eq)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=o),e.kind="init",t?e.value=this.parseMaybeDefault(o,i,this.copyNode(e.key)):this.type===types.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(o,i,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var s="get"===e.kind?0:1;if(e.value.params.length!==s){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},pp$3.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(types.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(types.bracketR),e.key;e.computed=!1}return e.key=this.type===types.num||this.type===types.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},pp$3.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},pp$3.parseMethod=function(e,t,n){var r=this.startNode(),o=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(t,r.generator)|SCOPE_SUPER|(n?SCOPE_DIRECT_SUPER:0)),this.expect(types.parenL),r.params=this.parseBindingList(types.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=o,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},pp$3.parseArrowExpression=function(e,t,n){var r=this.yieldPos,o=this.awaitPos,i=this.awaitIdentPos;return this.enterScope(functionFlags(n,!1)|SCOPE_ARROW),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=o,this.awaitIdentPos=i,this.finishNode(e,"ArrowFunctionExpression")},pp$3.parseFunctionBody=function(e,t,n){var r=t&&this.type!==types.braceL,o=this.strict,i=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);o&&!a||(i=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var u=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!o&&!i&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,BIND_OUTSIDE),e.body=this.parseBlock(!1,void 0,i&&!o),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()},pp$3.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},pp$3.checkParams=function(e,t){for(var n=Object.create(null),r=0,o=e.params;r<o.length;r+=1){var i=o[r];this.checkLValInnerPattern(i,BIND_VAR,t?null:n)}},pp$3.parseExprList=function(e,t,n,r){for(var o=[],i=!0;!this.eat(e);){if(i)i=!1;else if(this.expect(types.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===types.comma?a=null:this.type===types.ellipsis?(a=this.parseSpread(r),r&&this.type===types.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),o.push(a)}return o},pp$3.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===r&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},pp$3.parseIdent=function(e,t){var n=this.startNode();return this.type===types.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},pp$3.parsePrivateIdent=function(){var e=this.startNode();return this.type===types.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e},pp$3.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===types.semi||this.canInsertSemicolon()||this.type!==types.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(types.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},pp$3.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var pp$4=Parser.prototype;pp$4.raise=function(e,t){var n=getLineInfo(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$5=Parser.prototype,Scope=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};pp$5.enterScope=function(e){this.scopeStack.push(new Scope(e))},pp$5.exitScope=function(){this.scopeStack.pop()},pp$5.treatFunctionsAsVarInScope=function(e){return e.flags&SCOPE_FUNCTION||!this.inModule&&e.flags&SCOPE_TOP},pp$5.declareName=function(e,t,n){var r=!1;if(t===BIND_LEXICAL){var o=this.currentScope();r=o.lexical.indexOf(e)>-1||o.functions.indexOf(e)>-1||o.var.indexOf(e)>-1,o.lexical.push(e),this.inModule&&o.flags&SCOPE_TOP&&delete this.undefinedExports[e]}else if(t===BIND_SIMPLE_CATCH){this.currentScope().lexical.push(e)}else if(t===BIND_FUNCTION){var i=this.currentScope();r=this.treatFunctionsAsVar?i.lexical.indexOf(e)>-1:i.lexical.indexOf(e)>-1||i.var.indexOf(e)>-1,i.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&SCOPE_SIMPLE_CATCH&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&SCOPE_TOP&&delete this.undefinedExports[e],u.flags&SCOPE_VAR)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},pp$5.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},pp$5.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$5.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&SCOPE_VAR)return t}},pp$5.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&SCOPE_VAR&&!(t.flags&SCOPE_ARROW))return t}};var Node$1=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new SourceLocation(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},pp$6=Parser.prototype;function finishNodeAt(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}pp$6.startNode=function(){return new Node$1(this,this.start,this.startLoc)},pp$6.startNodeAt=function(e,t){return new Node$1(this,e,t)},pp$6.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},pp$6.finishNodeAt=function(e,t,n,r){return finishNodeAt.call(this,e,t,n,r)},pp$6.copyNode=function(e){var t=new Node$1(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var TokContext=function(e,t,n,r,o){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!o},types$1={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$7=Parser.prototype;pp$7.initialContext=function(){return[types$1.b_stat]},pp$7.braceIsBlock=function(e){var t=this.curContext();return t===types$1.f_expr||t===types$1.f_stat||(e!==types.colon||t!==types$1.b_stat&&t!==types$1.b_expr?e===types._return||e===types.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===types._else||e===types.semi||e===types.eof||e===types.parenR||e===types.arrow||(e===types.braceL?t===types$1.b_stat:e!==types._var&&e!==types._const&&e!==types.name&&!this.exprAllowed):!t.isExpr)},pp$7.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},pp$7.updateContext=function(e){var t,n=this.type;n.keyword&&e===types.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},types.parenR.updateContext=types.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===types$1.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},types.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?types$1.b_stat:types$1.b_expr),this.exprAllowed=!0},types.dollarBraceL.updateContext=function(){this.context.push(types$1.b_tmpl),this.exprAllowed=!0},types.parenL.updateContext=function(e){var t=e===types._if||e===types._for||e===types._with||e===types._while;this.context.push(t?types$1.p_stat:types$1.p_expr),this.exprAllowed=!0},types.incDec.updateContext=function(){},types._function.updateContext=types._class.updateContext=function(e){!e.beforeExpr||e===types._else||e===types.semi&&this.curContext()!==types$1.p_stat||e===types._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start))||(e===types.colon||e===types.braceL)&&this.curContext()===types$1.b_stat?this.context.push(types$1.f_stat):this.context.push(types$1.f_expr),this.exprAllowed=!1},types.backQuote.updateContext=function(){this.curContext()===types$1.q_tmpl?this.context.pop():this.context.push(types$1.q_tmpl),this.exprAllowed=!1},types.star.updateContext=function(e){if(e===types._function){var t=this.context.length-1;this.context[t]===types$1.f_expr?this.context[t]=types$1.f_expr_gen:this.context[t]=types$1.f_gen}this.exprAllowed=!0},types.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==types.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues},data={};function buildUnicodeData(e){var t=data[e]={binary:wordsRegexp(unicodeBinaryProperties[e]+" "+unicodeGeneralCategoryValues),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}buildUnicodeData(9),buildUnicodeData(10),buildUnicodeData(11),buildUnicodeData(12);var pp$8=Parser.prototype,RegExpValidationState=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=data[e.options.ecmaVersion>=12?12:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function isSyntaxCharacter(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||36===e||95===e}function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||36===e||95===e||8204===e||8205===e}function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function isValidUnicode(e){return e>=0&&e<=1114111}function isCharacterClassEscape(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||95===e}function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}function isDecimalDigit(e){return e>=48&&e<=57}function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function isOctalDigit(e){return e>=48&&e<=55}RegExpValidationState.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},RegExpValidationState.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},RegExpValidationState.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var o=n.charCodeAt(e);if(!t&&!this.switchU||o<=55295||o>=57344||e+1>=r)return o;var i=n.charCodeAt(e+1);return i>=56320&&i<=57343?(o<<10)+i-56613888:o},RegExpValidationState.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var o,i=n.charCodeAt(e);return!t&&!this.switchU||i<=55295||i>=57344||e+1>=r||(o=n.charCodeAt(e+1))<56320||o>57343?e+1:e+2},RegExpValidationState.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},RegExpValidationState.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},RegExpValidationState.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},RegExpValidationState.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},pp$8.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var o=n.charAt(r);-1===t.indexOf(o)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},pp$8.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},pp$8.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},pp$8.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pp$8.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pp$8.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},pp$8.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},pp$8.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},pp$8.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},pp$8.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,o=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(o=e.lastIntValue),e.eat(125)))return-1!==o&&o<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},pp$8.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pp$8.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},pp$8.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},pp$8.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pp$8.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pp$8.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pp$8.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!isSyntaxCharacter(t)&&(e.lastIntValue=t,e.advance(),!0)},pp$8.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!isSyntaxCharacter(n);)e.advance();return e.pos!==t},pp$8.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},pp$8.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},pp$8.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pp$8.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString(e.lastIntValue);return!0}return!1},pp$8.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),isRegExpIdentifierStart(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},pp$8.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),isRegExpIdentifierPart(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},pp$8.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pp$8.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},pp$8.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pp$8.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pp$8.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},pp$8.regexp_eatZero=function(e){return 48===e.current()&&!isDecimalDigit(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},pp$8.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},pp$8.regexp_eatControlLetter=function(e){var t=e.current();return!!isControlLetter(t)&&(e.lastIntValue=t%32,e.advance(),!0)},pp$8.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(r&&o>=55296&&o<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=1024*(o-55296)+(a-56320)+65536,!0}e.pos=i,e.lastIntValue=o}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1},pp$8.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},pp$8.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},pp$8.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},pp$8.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var o=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,o),!0}return!1},pp$8.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){has$1(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},pp$8.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},pp$8.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return""!==e.lastStringValue},pp$8.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString(t),e.advance();return""!==e.lastStringValue},pp$8.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pp$8.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},pp$8.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},pp$8.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||isOctalDigit(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},pp$8.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pp$8.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!isDecimalDigit(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},pp$8.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},pp$8.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isDecimalDigit(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},pp$8.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isHexDigit(n=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(n),e.advance();return e.pos!==t},pp$8.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},pp$8.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},pp$8.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var o=e.current();if(!isHexDigit(o))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(o),e.advance()}return!0};var Token=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},pp$9=Parser.prototype;function stringToNumber(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function stringToBigInt(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}function codePointToString$1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}pp$9.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp$9.getToken=function(){return this.next(),new Token(this)},"undefined"!=typeof Symbol&&(pp$9[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===types.eof,value:t}}}}),pp$9.curContext=function(){return this.context[this.context.length-1]},pp$9.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(types.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},pp$9.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},pp$9.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},pp$9.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(lineBreakG.lastIndex=n;(e=lineBreakG.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},pp$9.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},pp$9.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&nonASCIIwhitespace.test(String.fromCharCode(e))))break e;++this.pos}}},pp$9.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},pp$9.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(types.ellipsis)):(++this.pos,this.finishToken(types.dot))},pp$9.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(types.assign,2):this.finishOp(types.slash,1)},pp$9.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?types.star:types.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=types.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(types.assign,n+1):this.finishOp(r,n)},pp$9.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(types.assign,3);return this.finishOp(124===e?types.logicalOR:types.logicalAND,2)}return 61===t?this.finishOp(types.assign,2):this.finishOp(124===e?types.bitwiseOR:types.bitwiseAND,1)},pp$9.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(types.assign,2):this.finishOp(types.bitwiseXOR,1)},pp$9.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(types.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(types.assign,2):this.finishOp(types.plusMin,1)},pp$9.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(types.assign,n+1):this.finishOp(types.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(types.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},pp$9.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types.arrow)):this.finishOp(61===e?types.eq:types.prefix,1)},pp$9.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(types.questionDot,2)}if(63===t){if(e>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(types.assign,3);return this.finishOp(types.coalesce,2)}}return this.finishOp(types.question,1)},pp$9.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,isIdentifierStart(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(types.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString$1(e)+"'")},pp$9.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types.parenL);case 41:return++this.pos,this.finishToken(types.parenR);case 59:return++this.pos,this.finishToken(types.semi);case 44:return++this.pos,this.finishToken(types.comma);case 91:return++this.pos,this.finishToken(types.bracketL);case 93:return++this.pos,this.finishToken(types.bracketR);case 123:return++this.pos,this.finishToken(types.braceL);case 125:return++this.pos,this.finishToken(types.braceR);case 58:return++this.pos,this.finishToken(types.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(types.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString$1(e)+"'")},pp$9.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},pp$9.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(lineBreak.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var o=this.input.slice(n,this.pos);++this.pos;var i=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(i);var u=this.regexpState||(this.regexpState=new RegExpValidationState(this));u.reset(n,o,a),this.validateRegExpFlags(u),this.validateRegExpPattern(u);var s=null;try{s=new RegExp(o,a)}catch(c){}return this.finishToken(types.regexp,{pattern:o,flags:a,value:s})},pp$9.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,o=n&&48===this.input.charCodeAt(this.pos),i=this.pos,a=0,u=0,s=0,c=null==t?Infinity:t;s<c;++s,++this.pos){var l=this.input.charCodeAt(this.pos),f=void 0;if(r&&95===l)o&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===u&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),u=l;else{if((f=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:Infinity)>=e)break;u=l,a=a*e+f}}return r&&95===u&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||null!=t&&this.pos-i!==t?null:a},pp$9.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=stringToBigInt(this.input.slice(t,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types.num,n)},pp$9.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var o=stringToBigInt(this.input.slice(t,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types.num,o)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=stringToNumber(this.input.slice(t,this.pos),n);return this.finishToken(types.num,i)},pp$9.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},pp$9.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(isNewLine(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(types.string,t)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp$9.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==INVALID_TEMPLATE_ESCAPE_ERROR)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},pp$9.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(e,t)},pp$9.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==types.template&&this.type!==types.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(types.template,e)):36===n?(this.pos+=2,this.finishToken(types.dollarBraceL)):(++this.pos,this.finishToken(types.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(isNewLine(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},pp$9.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(types.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},pp$9.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString$1(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],o=parseInt(r,8);return o>255&&(r=r.slice(0,-1),o=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(o)}return isNewLine(t)?"":String.fromCharCode(t)}},pp$9.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},pp$9.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var o=this.fullCharCodeAtPos();if(isIdentifierChar(o,r))this.pos+=o<=65535?1:2;else{if(92!==o)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var i=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?isIdentifierStart:isIdentifierChar)(a,r)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=codePointToString$1(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},pp$9.readWord=function(){var e=this.readWord1(),t=types.name;return this.keywords.test(e)&&(t=keywords$1[e]),this.finishToken(t,e)};var version$1="8.4.1";function parse(e,t){return Parser.parse(e,t)}Parser.acorn={Parser:Parser,version:version$1,defaultOptions:defaultOptions,Position:Position,SourceLocation:SourceLocation,getLineInfo:getLineInfo,Node:Node$1,TokenType:TokenType,tokTypes:types,keywordTypes:keywords$1,TokContext:TokContext,tokContexts:types$1,isIdentifierChar:isIdentifierChar,isIdentifierStart:isIdentifierStart,Token:Token,isNewLine:isNewLine,lineBreak:lineBreak,lineBreakG:lineBreakG,nonASCIIwhitespace:nonASCIIwhitespace};var escodegen={},estraverse={};!function e(t){var n,r,o,i,a,u;function s(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?s(n):n);return r}function c(e,t){this.parent=e,this.key=t}function l(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function f(){}function d(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function p(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function h(e,t){for(var n=e.length-1;n>=0;--n)if(e[n].node===t)return!0;return!1}function m(e,t){return(new f).traverse(e,t)}function g(e,t){var n;return n=function(e,t){var n,r,o,i;for(r=e.length,o=0;r;)t(e[i=o+(n=r>>>1)])?r=n:(o=i+1,r-=n+1);return o}(t,(function(t){return t.range[0]>e.range[0]})),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),(n-=1)>=0&&(e.extendedRange[0]=t[n].range[1]),e}return n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},o={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},r={Break:i={},Skip:a={},Remove:u={}},c.prototype.replace=function(e){this.parent[this.key]=e},c.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},f.prototype.path=function(){var e,t,n,r,o;function i(e,t){if(Array.isArray(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(o=[],e=2,t=this.__leavelist.length;e<t;++e)i(o,this.__leavelist[e].path);return i(o,this.__current.path),o},f.prototype.type=function(){return this.current().type||this.__current.wrap},f.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;e<t;++e)n.push(this.__leavelist[e].node);return n},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},f.prototype.notify=function(e){this.__state=e},f.prototype.skip=function(){this.notify(a)},f.prototype.break=function(){this.notify(i)},f.prototype.remove=function(){this.notify(u)},f.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===t.fallback?this.__fallback=Object.keys:"function"==typeof t.fallback&&(this.__fallback=t.fallback),this.__keys=o,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},f.prototype.traverse=function(e,t){var n,r,o,u,s,c,f,m,g,v,y,b;for(this.__initialize(e,t),b={},n=this.__worklist,r=this.__leavelist,n.push(new l(e,null,null,null)),r.push(new l(null,null,null,null));n.length;)if((o=n.pop())!==b){if(o.node){if(c=this.__execute(t.enter,o),this.__state===i||c===i)return;if(n.push(b),r.push(o),this.__state===a||c===a)continue;if(s=(u=o.node).type||o.wrap,!(v=this.__keys[s])){if(!this.__fallback)throw new Error("Unknown node type "+s+".");v=this.__fallback(u)}for(m=v.length;(m-=1)>=0;)if(y=u[f=v[m]])if(Array.isArray(y)){for(g=y.length;(g-=1)>=0;)if(y[g]&&!h(r,y[g])){if(p(s,v[m]))o=new l(y[g],[f,g],"Property",null);else{if(!d(y[g]))continue;o=new l(y[g],[f,g],null,null)}n.push(o)}}else if(d(y)){if(h(r,y))continue;n.push(new l(y,f,null,null))}}}else if(o=r.pop(),c=this.__execute(t.leave,o),this.__state===i||c===i)return},f.prototype.replace=function(e,t){var n,r,o,s,f,h,m,g,v,y,b,C,x;function w(e){var t,r,o,i;if(e.ref.remove())for(r=e.ref.key,i=e.ref.parent,t=n.length;t--;)if((o=n[t]).ref&&o.ref.parent===i){if(o.ref.key<r)break;--o.ref.key}}for(this.__initialize(e,t),b={},n=this.__worklist,r=this.__leavelist,h=new l(e,null,null,new c(C={root:e},"root")),n.push(h),r.push(h);n.length;)if((h=n.pop())!==b){if(void 0!==(f=this.__execute(t.enter,h))&&f!==i&&f!==a&&f!==u&&(h.ref.replace(f),h.node=f),this.__state!==u&&f!==u||(w(h),h.node=null),this.__state===i||f===i)return C.root;if((o=h.node)&&(n.push(b),r.push(h),this.__state!==a&&f!==a)){if(s=o.type||h.wrap,!(v=this.__keys[s])){if(!this.__fallback)throw new Error("Unknown node type "+s+".");v=this.__fallback(o)}for(m=v.length;(m-=1)>=0;)if(y=o[x=v[m]])if(Array.isArray(y)){for(g=y.length;(g-=1)>=0;)if(y[g]){if(p(s,v[m]))h=new l(y[g],[x,g],"Property",new c(y,g));else{if(!d(y[g]))continue;h=new l(y[g],[x,g],null,new c(y,g))}n.push(h)}}else d(y)&&n.push(new l(y,x,null,new c(o,x)))}}else if(h=r.pop(),void 0!==(f=this.__execute(t.leave,h))&&f!==i&&f!==a&&f!==u&&h.ref.replace(f),this.__state!==u&&f!==u||w(h),this.__state===i||f===i)return C.root;return C.root},t.Syntax=n,t.traverse=m,t.replace=function(e,t){return(new f).replace(e,t)},t.attachComments=function(e,t,n){var o,i,a,u,c=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,i=t.length;a<i;a+=1)(o=s(t[a])).extendedRange=[0,e.range[0]],c.push(o);e.leadingComments=c}return e}for(a=0,i=t.length;a<i;a+=1)c.push(g(s(t[a]),n));return u=0,m(e,{enter:function(e){for(var t;u<c.length&&!((t=c[u]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),c.splice(u,1)):u+=1;return u===c.length?r.Break:c[u].extendedRange[0]>e.range[1]?r.Skip:void 0}}),u=0,m(e,{leave:function(e){for(var t;u<c.length&&(t=c[u],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),c.splice(u,1)):u+=1;return u===c.length?r.Break:c[u].extendedRange[0]>e.range[1]?r.Skip:void 0}}),e},t.VisitorKeys=o,t.VisitorOption=r,t.Controller=f,t.cloneEnvironment=function(){return e({})},t}(estraverse);var utils={},ast={exports:{}};!function(){function e(e){if(null==e)return!1;switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function t(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}ast.exports={isExpression:function(e){if(null==e)return!1;switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1},isStatement:e,isIterationStatement:function(e){if(null==e)return!1;switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1},isSourceElement:function(t){return e(t)||null!=t&&"FunctionDeclaration"===t.type},isProblematicIfStatement:function(e){var n;if("IfStatement"!==e.type)return!1;if(null==e.alternate)return!1;n=e.consequent;do{if("IfStatement"===n.type&&null==n.alternate)return!0;n=t(n)}while(n);return!1},trailingStatement:t}}();var code={exports:{}};!function(){var e,t,n,r,o,i;function a(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(Math.floor((e-65536)/1024)+55296)+String.fromCharCode((e-65536)%1024+56320)}for(t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],r=new Array(128),i=0;i<128;++i)r[i]=i>=97&&i<=122||i>=65&&i<=90||36===i||95===i;for(o=new Array(128),i=0;i<128;++i)o[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||36===i||95===i;code.exports={isDecimalDigit:function(e){return 48<=e&&e<=57},isHexDigit:function(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70},isOctalDigit:function(e){return e>=48&&e<=55},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&n.indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function(e){return e<128?r[e]:t.NonAsciiIdentifierStart.test(a(e))},isIdentifierPartES5:function(e){return e<128?o[e]:t.NonAsciiIdentifierPart.test(a(e))},isIdentifierStartES6:function(t){return t<128?r[t]:e.NonAsciiIdentifierStart.test(a(t))},isIdentifierPartES6:function(t){return t<128?o[t]:e.NonAsciiIdentifierPart.test(a(t))}}}();var keyword={exports:{}};!function(){var e=code.exports;function t(e,t){return!(!t&&"yield"===e)&&n(e,t)}function n(e,t){if(t&&function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function r(e,n){return"null"===e||"true"===e||"false"===e||t(e,n)}function o(e,t){return"null"===e||"true"===e||"false"===e||n(e,t)}function i(t){var n,r,o;if(0===t.length)return!1;if(o=t.charCodeAt(0),!e.isIdentifierStartES5(o))return!1;for(n=1,r=t.length;n<r;++n)if(o=t.charCodeAt(n),!e.isIdentifierPartES5(o))return!1;return!0}function a(t){var n,r,o,i,a;if(0===t.length)return!1;for(a=e.isIdentifierStartES6,n=0,r=t.length;n<r;++n){if(55296<=(o=t.charCodeAt(n))&&o<=56319){if(++n>=r)return!1;if(!(56320<=(i=t.charCodeAt(n))&&i<=57343))return!1;o=1024*(o-55296)+(i-56320)+65536}if(!a(o))return!1;a=e.isIdentifierPartES6}return!0}keyword.exports={isKeywordES5:t,isKeywordES6:n,isReservedWordES5:r,isReservedWordES6:o,isRestrictedWord:function(e){return"eval"===e||"arguments"===e},isIdentifierNameES5:i,isIdentifierNameES6:a,isIdentifierES5:function(e,t){return i(e)&&!r(e,t)},isIdentifierES6:function(e,t){return a(e)&&!o(e,t)}}}(),utils.ast=ast.exports,utils.code=code.exports,utils.keyword=keyword.exports;var sourceMap={},sourceMapGenerator={},base64Vlq={},base64$1={},intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");base64$1.encode=function(e){if(0<=e&&e<intToCharMap.length)return intToCharMap[e];throw new TypeError("Must be between 0 and 63: "+e)},base64$1.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1};var base64=base64$1,VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(e){return e<0?1+(-e<<1):0+(e<<1)}function fromVLQSigned(e){var t=e>>1;return 1==(1&e)?-t:t}base64Vlq.encode=function(e){var t,n="",r=toVLQSigned(e);do{t=r&VLQ_BASE_MASK,(r>>>=VLQ_BASE_SHIFT)>0&&(t|=VLQ_CONTINUATION_BIT),n+=base64.encode(t)}while(r>0);return n},base64Vlq.decode=function(e,t,n){var r,o,i=e.length,a=0,u=0;do{if(t>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=base64.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));r=!!(o&VLQ_CONTINUATION_BIT),a+=(o&=VLQ_BASE_MASK)<<u,u+=VLQ_BASE_SHIFT}while(r);n.value=fromVLQSigned(a),n.rest=t};var util$5={};!function(e){e.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function r(e){var n=e.match(t);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function i(t){var n=t,i=r(t);if(i){if(!i.path)return t;n=i.path}for(var a,u=e.isAbsolute(n),s=n.split(/\/+/),c=0,l=s.length-1;l>=0;l--)"."===(a=s[l])?s.splice(l,1):".."===a?c++:c>0&&(""===a?(s.splice(l+1,c),c=0):(s.splice(l,2),c--));return""===(n=s.join("/"))&&(n=u?"/":"."),i?(i.path=n,o(i)):n}function a(e,t){""===e&&(e="."),""===t&&(t=".");var a=r(t),u=r(e);if(u&&(e=u.path||"/"),a&&!a.scheme)return u&&(a.scheme=u.scheme),o(a);if(a||t.match(n))return t;if(u&&!u.host&&!u.path)return u.host=t,o(u);var s="/"===t.charAt(0)?t:i(e.replace(/\/+$/,"")+"/"+t);return u?(u.path=s,o(u)):s}e.urlParse=r,e.urlGenerate=o,e.normalize=i,e.join=a,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var u=!("__proto__"in Object.create(null));function s(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function l(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=u?s:function(e){return c(e)?"$"+e:e},e.fromSetString=u?s:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,n){var r=l(e.source,t.source);return 0!==r||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)||n||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=e.generatedLine-t.generatedLine)?r:l(e.name,t.name)},e.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=l(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:l(e.name,t.name)},e.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=l(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:l(e.name,t.name)},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var u=r(n);if(!u)throw new Error("sourceMapURL could not be parsed");if(u.path){var s=u.path.lastIndexOf("/");s>=0&&(u.path=u.path.substring(0,s+1))}t=a(o(u),t)}return i(t)}}(util$5);var arraySet={},util$4=util$5,has=Object.prototype.hasOwnProperty,hasNativeMap="undefined"!=typeof Map;function ArraySet$2(){this._array=[],this._set=hasNativeMap?new Map:Object.create(null)}ArraySet$2.fromArray=function(e,t){for(var n=new ArraySet$2,r=0,o=e.length;r<o;r++)n.add(e[r],t);return n},ArraySet$2.prototype.size=function(){return hasNativeMap?this._set.size:Object.getOwnPropertyNames(this._set).length},ArraySet$2.prototype.add=function(e,t){var n=hasNativeMap?e:util$4.toSetString(e),r=hasNativeMap?this.has(e):has.call(this._set,n),o=this._array.length;r&&!t||this._array.push(e),r||(hasNativeMap?this._set.set(e,o):this._set[n]=o)},ArraySet$2.prototype.has=function(e){if(hasNativeMap)return this._set.has(e);var t=util$4.toSetString(e);return has.call(this._set,t)},ArraySet$2.prototype.indexOf=function(e){if(hasNativeMap){var t=this._set.get(e);if(t>=0)return t}else{var n=util$4.toSetString(e);if(has.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},ArraySet$2.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},ArraySet$2.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=ArraySet$2;var mappingList={},util$3=util$5;function generatedPositionAfter(e,t){var n=e.generatedLine,r=t.generatedLine,o=e.generatedColumn,i=t.generatedColumn;return r>n||r==n&&i>=o||util$3.compareByGeneratedPositionsInflated(e,t)<=0}function MappingList$1(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList$1.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},MappingList$1.prototype.add=function(e){generatedPositionAfter(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},MappingList$1.prototype.toArray=function(){return this._sorted||(this._array.sort(util$3.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=MappingList$1;var base64VLQ$1=base64Vlq,util$2=util$5,ArraySet$1=arraySet.ArraySet,MappingList=mappingList.MappingList;function SourceMapGenerator$1(e){e||(e={}),this._file=util$2.getArg(e,"file",null),this._sourceRoot=util$2.getArg(e,"sourceRoot",null),this._skipValidation=util$2.getArg(e,"skipValidation",!1),this._sources=new ArraySet$1,this._names=new ArraySet$1,this._mappings=new MappingList,this._sourcesContents=null}SourceMapGenerator$1.prototype._version=3,SourceMapGenerator$1.fromSourceMap=function(e){var t=e.sourceRoot,n=new SourceMapGenerator$1({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=util$2.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)})),e.sources.forEach((function(r){var o=r;null!==t&&(o=util$2.relative(t,r)),n._sources.has(o)||n._sources.add(o);var i=e.sourceContentFor(r);null!=i&&n.setSourceContent(r,i)})),n},SourceMapGenerator$1.prototype.addMapping=function(e){var t=util$2.getArg(e,"generated"),n=util$2.getArg(e,"original",null),r=util$2.getArg(e,"source",null),o=util$2.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},SourceMapGenerator$1.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=util$2.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util$2.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[util$2.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},SourceMapGenerator$1.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var o=this._sourceRoot;null!=o&&(r=util$2.relative(o,r));var i=new ArraySet$1,a=new ArraySet$1;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var u=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=u.source&&(t.source=u.source,null!=n&&(t.source=util$2.join(n,t.source)),null!=o&&(t.source=util$2.relative(o,t.source)),t.originalLine=u.line,t.originalColumn=u.column,null!=u.name&&(t.name=u.name))}var s=t.source;null==s||i.has(s)||i.add(s);var c=t.name;null==c||a.has(c)||a.add(c)}),this),this._sources=i,this._names=a,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=util$2.join(n,t)),null!=o&&(t=util$2.relative(o,t)),this.setSourceContent(t,r))}),this)},SourceMapGenerator$1.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},SourceMapGenerator$1.prototype._serializeMappings=function(){for(var e,t,n,r,o=0,i=1,a=0,u=0,s=0,c=0,l="",f=this._mappings.toArray(),d=0,p=f.length;d<p;d++){if(e="",(t=f[d]).generatedLine!==i)for(o=0;t.generatedLine!==i;)e+=";",i++;else if(d>0){if(!util$2.compareByGeneratedPositionsInflated(t,f[d-1]))continue;e+=","}e+=base64VLQ$1.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(r=this._sources.indexOf(t.source),e+=base64VLQ$1.encode(r-c),c=r,e+=base64VLQ$1.encode(t.originalLine-1-u),u=t.originalLine-1,e+=base64VLQ$1.encode(t.originalColumn-a),a=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=base64VLQ$1.encode(n-s),s=n)),l+=e}return l},SourceMapGenerator$1.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=util$2.relative(t,e));var n=util$2.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},SourceMapGenerator$1.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},SourceMapGenerator$1.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=SourceMapGenerator$1;var sourceMapConsumer={},binarySearch$1={};!function(e){function t(n,r,o,i,a,u){var s=Math.floor((r-n)/2)+n,c=a(o,i[s],!0);return 0===c?s:c>0?r-s>1?t(s,r,o,i,a,u):u==e.LEAST_UPPER_BOUND?r<i.length?r:-1:s:s-n>1?t(n,s,o,i,a,u):u==e.LEAST_UPPER_BOUND?s:n<0?-1:n}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(n,r,o,i){if(0===r.length)return-1;var a=t(-1,r.length,n,r,o,i||e.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===o(r[a],r[a-1],!0);)--a;return a}}(binarySearch$1);var quickSort$1={};function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function randomIntInRange(e,t){return Math.round(e+Math.random()*(t-e))}function doQuickSort(e,t,n,r){if(n<r){var o=n-1;swap(e,randomIntInRange(n,r),r);for(var i=e[r],a=n;a<r;a++)t(e[a],i)<=0&&swap(e,o+=1,a);swap(e,o+1,a);var u=o+1;doQuickSort(e,t,n,u-1),doQuickSort(e,t,u+1,r)}}quickSort$1.quickSort=function(e,t){doQuickSort(e,t,0,e.length-1)};var util$1=util$5,binarySearch=binarySearch$1,ArraySet=arraySet.ArraySet,base64VLQ=base64Vlq,quickSort=quickSort$1.quickSort;function SourceMapConsumer(e,t){var n=e;return"string"==typeof e&&(n=util$1.parseSourceMapInput(e)),null!=n.sections?new IndexedSourceMapConsumer(n,t):new BasicSourceMapConsumer(n,t)}function BasicSourceMapConsumer(e,t){var n=e;"string"==typeof e&&(n=util$1.parseSourceMapInput(e));var r=util$1.getArg(n,"version"),o=util$1.getArg(n,"sources"),i=util$1.getArg(n,"names",[]),a=util$1.getArg(n,"sourceRoot",null),u=util$1.getArg(n,"sourcesContent",null),s=util$1.getArg(n,"mappings"),c=util$1.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=util$1.normalize(a)),o=o.map(String).map(util$1.normalize).map((function(e){return a&&util$1.isAbsolute(a)&&util$1.isAbsolute(e)?util$1.relative(a,e):e})),this._names=ArraySet.fromArray(i.map(String),!0),this._sources=ArraySet.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map((function(e){return util$1.computeSourceURL(a,e,t)})),this.sourceRoot=a,this.sourcesContent=u,this._mappings=s,this._sourceMapURL=t,this.file=c}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(e,t){var n=e;"string"==typeof e&&(n=util$1.parseSourceMapInput(e));var r=util$1.getArg(n,"version"),o=util$1.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new ArraySet,this._names=new ArraySet;var i={line:-1,column:0};this._sections=o.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var n=util$1.getArg(e,"offset"),r=util$1.getArg(n,"line"),o=util$1.getArg(n,"column");if(r<i.line||r===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=n,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new SourceMapConsumer(util$1.getArg(e,"map"),t)}}))}SourceMapConsumer.fromSourceMap=function(e,t){return BasicSourceMapConsumer.fromSourceMap(e,t)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},SourceMapConsumer.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function(e,t,n){var r,o=t||null;switch(n||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:r=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;r.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=util$1.computeSourceURL(i,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function(e){var t=util$1.getArg(e,"line"),n={source:util$1.getArg(e,"source"),originalLine:t,originalColumn:util$1.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var r=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",util$1.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var a=i.originalLine;i&&i.originalLine===a;)r.push({line:util$1.getArg(i,"generatedLine",null),column:util$1.getArg(i,"generatedColumn",null),lastColumn:util$1.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var u=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==u;)r.push({line:util$1.getArg(i,"generatedLine",null),column:util$1.getArg(i,"generatedColumn",null),lastColumn:util$1.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return r},sourceMapConsumer.SourceMapConsumer=SourceMapConsumer,BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype),BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=util$1.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},BasicSourceMapConsumer.fromSourceMap=function(e,t){var n=Object.create(BasicSourceMapConsumer.prototype),r=n._names=ArraySet.fromArray(e._names.toArray(),!0),o=n._sources=ArraySet.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map((function(e){return util$1.computeSourceURL(n.sourceRoot,e,t)}));for(var i=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],s=0,c=i.length;s<c;s++){var l=i[s],f=new Mapping;f.generatedLine=l.generatedLine,f.generatedColumn=l.generatedColumn,l.source&&(f.source=o.indexOf(l.source),f.originalLine=l.originalLine,f.originalColumn=l.originalColumn,l.name&&(f.name=r.indexOf(l.name)),u.push(f)),a.push(f)}return quickSort(n.__originalMappings,util$1.compareByOriginalPositions),n},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),BasicSourceMapConsumer.prototype._parseMappings=function(e,t){for(var n,r,o,i,a,u=1,s=0,c=0,l=0,f=0,d=0,p=e.length,h=0,m={},g={},v=[],y=[];h<p;)if(";"===e.charAt(h))u++,h++,s=0;else if(","===e.charAt(h))h++;else{for((n=new Mapping).generatedLine=u,i=h;i<p&&!this._charIsMappingSeparator(e,i);i++);if(o=m[r=e.slice(h,i)])h+=r.length;else{for(o=[];h<i;)base64VLQ.decode(e,h,g),a=g.value,h=g.rest,o.push(a);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");m[r]=o}n.generatedColumn=s+o[0],s=n.generatedColumn,o.length>1&&(n.source=f+o[1],f+=o[1],n.originalLine=c+o[2],c=n.originalLine,n.originalLine+=1,n.originalColumn=l+o[3],l=n.originalColumn,o.length>4&&(n.name=d+o[4],d+=o[4])),y.push(n),"number"==typeof n.originalLine&&v.push(n)}quickSort(y,util$1.compareByGeneratedPositionsDeflated),this.__generatedMappings=y,quickSort(v,util$1.compareByOriginalPositions),this.__originalMappings=v},BasicSourceMapConsumer.prototype._findMapping=function(e,t,n,r,o,i){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return binarySearch.search(e,t,o,i)},BasicSourceMapConsumer.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}},BasicSourceMapConsumer.prototype.originalPositionFor=function(e){var t={generatedLine:util$1.getArg(e,"line"),generatedColumn:util$1.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",util$1.compareByGeneratedPositionsDeflated,util$1.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===t.generatedLine){var o=util$1.getArg(r,"source",null);null!==o&&(o=this._sources.at(o),o=util$1.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var i=util$1.getArg(r,"name",null);return null!==i&&(i=this._names.at(i)),{source:o,line:util$1.getArg(r,"originalLine",null),column:util$1.getArg(r,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},BasicSourceMapConsumer.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var r,o=e;if(null!=this.sourceRoot&&(o=util$1.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(r=util$1.urlParse(this.sourceRoot))){var i=o.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!r.path||"/"==r.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function(e){var t=util$1.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var n={source:t,originalLine:util$1.getArg(e,"line"),originalColumn:util$1.getArg(e,"column")},r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",util$1.compareByOriginalPositions,util$1.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(r>=0){var o=this._originalMappings[r];if(o.source===n.source)return{line:util$1.getArg(o,"generatedLine",null),column:util$1.getArg(o,"generatedColumn",null),lastColumn:util$1.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=BasicSourceMapConsumer,IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype),IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function(e){var t={generatedLine:util$1.getArg(e,"line"),generatedColumn:util$1.getArg(e,"column")},n=binarySearch.search(t,this._sections,(function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn})),r=this._sections[n];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},IndexedSourceMapConsumer.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(util$1.getArg(e,"source"))){var r=n.consumer.generatedPositionFor(e);if(r)return{line:r.line+(n.generatedOffset.generatedLine-1),column:r.column+(n.generatedOffset.generatedLine===r.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var r=this._sections[n],o=r.consumer._generatedMappings,i=0;i<o.length;i++){var a=o[i],u=r.consumer._sources.at(a.source);u=util$1.computeSourceURL(r.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var s=null;a.name&&(s=r.consumer._names.at(a.name),this._names.add(s),s=this._names.indexOf(s));var c={source:u,generatedLine:a.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(r.generatedOffset.generatedLine===a.generatedLine?r.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:s};this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}quickSort(this.__generatedMappings,util$1.compareByGeneratedPositionsDeflated),quickSort(this.__originalMappings,util$1.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=IndexedSourceMapConsumer;var sourceNode={},SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,util=util$5,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";function SourceNode(e,t,n,r,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==o?null:o,this[isSourceNode]=!0,null!=r&&this.add(r)}SourceNode.fromStringWithSourceMap=function(e,t,n){var r=new SourceNode,o=e.split(REGEX_NEWLINE),i=0,a=function(){return e()+(e()||"");function e(){return i<o.length?o[i++]:void 0}},u=1,s=0,c=null;return t.eachMapping((function(e){if(null!==c){if(!(u<e.generatedLine)){var t=(n=o[i]||"").substr(0,e.generatedColumn-s);return o[i]=n.substr(e.generatedColumn-s),s=e.generatedColumn,l(c,t),void(c=e)}l(c,a()),u++,s=0}for(;u<e.generatedLine;)r.add(a()),u++;if(s<e.generatedColumn){var n=o[i]||"";r.add(n.substr(0,e.generatedColumn)),o[i]=n.substr(e.generatedColumn),s=e.generatedColumn}c=e}),this),i<o.length&&(c&&l(c,a()),r.add(o.splice(i).join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=util.join(n,e)),r.setSourceContent(e,o))})),r;function l(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?util.join(n,e.source):e.source;r.add(new SourceNode(e.originalLine,e.originalColumn,o,t,e.name))}}},SourceNode.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},SourceNode.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},SourceNode.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[isSourceNode]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},SourceNode.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[isSourceNode]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},SourceNode.prototype.setSourceContent=function(e,t){this.sourceContents[util.toSetString(e)]=t},SourceNode.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][isSourceNode]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(util.fromSetString(r[t]),this.sourceContents[r[t]])},SourceNode.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},SourceNode.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new SourceMapGenerator(e),r=!1,o=null,i=null,a=null,u=null;return this.walk((function(e,s){t.code+=e,null!==s.source&&null!==s.line&&null!==s.column?(o===s.source&&i===s.line&&a===s.column&&u===s.name||n.addMapping({source:s.source,original:{line:s.line,column:s.column},generated:{line:t.line,column:t.column},name:s.name}),o=s.source,i=s.line,a=s.column,u=s.name,r=!0):r&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,r=!1);for(var c=0,l=e.length;c<l;c++)e.charCodeAt(c)===NEWLINE_CODE?(t.line++,t.column=0,c+1===l?(o=null,r=!1):r&&n.addMapping({source:s.source,original:{line:s.line,column:s.column},generated:{line:t.line,column:t.column},name:s.name})):t.column++})),this.walkSourceContents((function(e,t){n.setSourceContent(e,t)})),{code:t.code,map:n}},sourceNode.SourceNode=SourceNode,sourceMap.SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,sourceMap.SourceMapConsumer=sourceMapConsumer.SourceMapConsumer,sourceMap.SourceNode=sourceNode.SourceNode;const name="escodegen",description="ECMAScript code generator",homepage="http://github.com/estools/escodegen",main="escodegen.js",bin={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version="2.0.0",engines={node:">=6.0"},maintainers=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository={type:"git",url:"http://github.com/estools/escodegen.git"},dependencies={estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies={"source-map":"~0.6.1"},devDependencies={acorn:"^7.3.1",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license="BSD-2-Clause",scripts={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"};var require$$3={name:name,description:description,homepage:homepage,main:main,bin:bin,files:files,version:version,engines:engines,maintainers:maintainers,repository:repository,dependencies:dependencies,optionalDependencies:optionalDependencies,devDependencies:devDependencies,license:license,scripts:scripts},exports;exports=escodegen,function(){var e,t,n,r,o,i,a,u,s,c,l,f,d,p,h,m,g,v,y,b,C,x,w,_,S,E;function A(e){return G.Statement.hasOwnProperty(e.type)}i=utils,e=(o=estraverse).Syntax,n={"||":(t={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21}).LogicalOR,"&&":t.LogicalAND,"|":t.BitwiseOR,"^":t.BitwiseXOR,"&":t.BitwiseAND,"==":t.Equality,"!=":t.Equality,"===":t.Equality,"!==":t.Equality,is:t.Equality,isnt:t.Equality,"<":t.Relational,">":t.Relational,"<=":t.Relational,">=":t.Relational,in:t.Relational,instanceof:t.Relational,"<<":t.BitwiseSHIFT,">>":t.BitwiseSHIFT,">>>":t.BitwiseSHIFT,"+":t.Additive,"-":t.Additive,"*":t.Multiplicative,"%":t.Multiplicative,"/":t.Multiplicative,"**":t.Exponentiation};var D=32,k=33;function T(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function O(e){var t=e.length;return t&&i.code.isLineTerminator(e.charCodeAt(t-1))}function B(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function N(e,t){var n,r;function o(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(n in t)t.hasOwnProperty(n)&&(o(r=t[n])?o(e[n])?N(e[n],r):e[n]=N({},r):e[n]=r);return e}function F(e,t){return 8232==(-2&e)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function M(e,t){var n;return 8===e?"\\b":12===e?"\\f":9===e?"\\t":(n=e.toString(16).toUpperCase(),s||e>255?"\\u"+"0000".slice(n.length)+n:0!==e||i.code.isDecimalDigit(t)?11===e?"\\x0B":"\\x"+"00".slice(n.length)+n:"\\0")}function P(e){if(92===e)return"\\\\";if(10===e)return"\\n";if(13===e)return"\\r";if(8232===e)return"\\u2028";if(8233===e)return"\\u2029";throw new Error("Incorrectly classified character")}function I(e){var t,n,r,o="";for(t=0,n=e.length;t<n;++t)r=e[t],o+=Array.isArray(r)?I(r):r;return o}function R(e,t){if(!x)return Array.isArray(e)?I(e):e;if(null==t){if(e instanceof r)return e;t={}}return null==t.loc?new r(null,null,x,e,t.name||null):new r(t.loc.start.line,t.loc.start.column,!0===x?t.loc.source||null:x,e,t.name||null)}function L(){return h||" "}function z(e,t){var n,r,o,a;return 0===(n=R(e).toString()).length?[t]:0===(r=R(t).toString()).length?[e]:(o=n.charCodeAt(n.length-1),a=r.charCodeAt(0),(43===o||45===o)&&o===a||i.code.isIdentifierPartES5(o)&&i.code.isIdentifierPartES5(a)||47===o&&105===a?[e,L(),t]:i.code.isWhiteSpace(o)||i.code.isLineTerminator(o)||i.code.isWhiteSpace(a)||i.code.isLineTerminator(a)?[e,t]:[e,h,t])}function V(e){return[a,e]}function H(e){var t;t=a,e(a+=u),a=t}function $(e,t){if("Line"===e.type){if(O(e.value))return"//"+e.value;var n="//"+e.value;return _||(n+="\n"),n}return b.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)?function(e,t){var n,r,o,u,s,c,l,f;for(n=e.split(/\r\n|[\r\n]/),c=Number.MAX_VALUE,r=1,o=n.length;r<o;++r){for(u=n[r],s=0;s<u.length&&i.code.isWhiteSpace(u.charCodeAt(s));)++s;c>s&&(c=s)}for(void 0!==t?(l=a,"*"===n[1][c]&&(t+=" "),a=t):(1&c&&--c,l=a),r=1,o=n.length;r<o;++r)f=R(V(n[r].slice(c))),n[r]=x?f.join(""):f;return a=l,n.join("\n")}("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function j(t,n){var r,o,s,c,l,f,d,p,h,m,g,y;if(t.leadingComments&&t.leadingComments.length>0){if(c=n,_){for(n=[],p=(s=t.leadingComments[0]).extendedRange,h=s.range,(y=((g=w.substring(p[0],h[0])).match(/\n/g)||[]).length)>0?(n.push(T("\n",y)),n.push(V($(s)))):(n.push(g),n.push($(s))),m=h,r=1,o=t.leadingComments.length;r<o;r++)h=(s=t.leadingComments[r]).range,y=(w.substring(m[1],h[0]).match(/\n/g)||[]).length,n.push(T("\n",y)),n.push(V($(s))),m=h;y=(w.substring(h[1],p[1]).match(/\n/g)||[]).length,n.push(T("\n",y))}else for(s=t.leadingComments[0],n=[],v&&t.type===e.Program&&0===t.body.length&&n.push("\n"),n.push($(s)),O(R(n).toString())||n.push("\n"),r=1,o=t.leadingComments.length;r<o;++r)O(R(d=[$(s=t.leadingComments[r])]).toString())||d.push("\n"),n.push(V(d));n.push(V(c))}if(t.trailingComments)if(_)p=(s=t.trailingComments[0]).extendedRange,h=s.range,(y=((g=w.substring(p[0],h[0])).match(/\n/g)||[]).length)>0?(n.push(T("\n",y)),n.push(V($(s)))):(n.push(g),n.push($(s)));else for(l=!O(R(n).toString()),f=T(" ",function(e){var t;for(t=e.length-1;t>=0&&!i.code.isLineTerminator(e.charCodeAt(t));--t);return e.length-1-t}(R([a,n,u]).toString())),r=0,o=t.trailingComments.length;r<o;++r)s=t.trailingComments[r],l?(n=0===r?[n,u]:[n,f]).push($(s,f)):n=[n,V($(s))],r===o-1||O(R(n).toString())||(n=[n,"\n"]);return n}function U(e,t,n){var r,o=0;for(r=e;r<t;r++)"\n"===w[r]&&o++;for(r=1;r<o;r++)n.push(p)}function W(e,t,n){return t<n?["(",e,")"]:e}function q(e){var t,n,r;for(t=1,n=(r=e.split(/\r\n|\n/)).length;t<n;t++)r[t]=p+a+r[t];return r}function G(){}function X(e){return R(e.name,e)}function K(e,t){return e.async?"async"+(t?L():h):""}function Y(e){return e.generator&&!b.moz.starlessGenerator?"*"+h:""}function J(e){var t=e.value,n="";return t.async&&(n+=K(t,!e.computed)),t.generator&&(n+=Y(t)?"*":""),n}function Q(e){var n;if(n=new G,A(e))return n.generateStatement(e,1);if(function(e){return G.Expression.hasOwnProperty(e.type)}(e))return n.generateExpression(e,t.Sequence,7);throw new Error("Unknown node type: "+e.type)}G.prototype.maybeBlock=function(t,n){var r,o,i=this;return o=!b.comment||!t.leadingComments,t.type===e.BlockStatement&&o?[h,this.generateStatement(t,n)]:t.type===e.EmptyStatement&&o?";":(H((function(){r=[p,V(i.generateStatement(t,n))]})),r)},G.prototype.maybeBlockSuffix=function(t,n){var r=O(R(n).toString());return t.type!==e.BlockStatement||b.comment&&t.leadingComments||r?r?[n,a]:[n,p,a]:[n,h]},G.prototype.generatePattern=function(t,n,r){return t.type===e.Identifier?X(t):this.generateExpression(t,n,r)},G.prototype.generateFunctionParams=function(n){var r,o,i,a;if(a=!1,n.type!==e.ArrowFunctionExpression||n.rest||n.defaults&&0!==n.defaults.length||1!==n.params.length||n.params[0].type!==e.Identifier){for((i=n.type===e.ArrowFunctionExpression?[K(n,!1)]:[]).push("("),n.defaults&&(a=!0),r=0,o=n.params.length;r<o;++r)a&&n.defaults[r]?i.push(this.generateAssignment(n.params[r],n.defaults[r],"=",t.Assignment,7)):i.push(this.generatePattern(n.params[r],t.Assignment,7)),r+1<o&&i.push(","+h);n.rest&&(n.params.length&&i.push(","+h),i.push("..."),i.push(X(n.rest))),i.push(")")}else i=[K(n,!0),X(n.params[0])];return i},G.prototype.generateFunctionBody=function(n){var r,o;return r=this.generateFunctionParams(n),n.type===e.ArrowFunctionExpression&&(r.push(h),r.push("=>")),n.expression?(r.push(h),"{"===(o=this.generateExpression(n.body,t.Assignment,7)).toString().charAt(0)&&(o=["(",o,")"]),r.push(o)):r.push(this.maybeBlock(n.body,9)),r},G.prototype.generateIterationForStatement=function(n,r,o){var i=["for"+(r.await?L()+"await":"")+h+"("],a=this;return H((function(){r.left.type===e.VariableDeclaration?H((function(){i.push(r.left.kind+L()),i.push(a.generateStatement(r.left.declarations[0],0))})):i.push(a.generateExpression(r.left,t.Call,7)),i=z(i,n),i=[z(i,a.generateExpression(r.right,t.Assignment,7)),")"]})),i.push(this.maybeBlock(r.body,o)),i},G.prototype.generatePropertyKey=function(e,n){var r=[];return n&&r.push("["),r.push(this.generateExpression(e,t.Assignment,7)),n&&r.push("]"),r},G.prototype.generateAssignment=function(e,n,r,o,i){return t.Assignment<o&&(i|=1),W([this.generateExpression(e,t.Call,i),h+r+h,this.generateExpression(n,t.Assignment,i)],t.Assignment,o)},G.prototype.semicolon=function(e){return!g&&e&D?"":";"},G.Statement={BlockStatement:function(e,t){var n,r,o=["{",p],i=this;return H((function(){var a,u,s,c;for(0===e.body.length&&_&&(n=e.range)[1]-n[0]>2&&("\n"===(r=w.substring(n[0]+1,n[1]-1))[0]&&(o=["{"]),o.push(r)),c=1,8&t&&(c|=16),a=0,u=e.body.length;a<u;++a)_&&(0===a&&(e.body[0].leadingComments&&(n=e.body[0].leadingComments[0].extendedRange,"\n"===(r=w.substring(n[0],n[1]))[0]&&(o=["{"])),e.body[0].leadingComments||U(e.range[0],e.body[0].range[0],o)),a>0&&(e.body[a-1].trailingComments||e.body[a].leadingComments||U(e.body[a-1].range[1],e.body[a].range[0],o))),a===u-1&&(c|=D),s=e.body[a].leadingComments&&_?i.generateStatement(e.body[a],c):V(i.generateStatement(e.body[a],c)),o.push(s),O(R(s).toString())||_&&a<u-1&&e.body[a+1].leadingComments||o.push(p),_&&a===u-1&&(e.body[a].trailingComments||U(e.body[a].range[1],e.range[1],o))})),o.push(V("}")),o},BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(e,n){var r=["{",p],o=this;return H((function(n){var i,a;for(i=0,a=e.body.length;i<a;++i)r.push(n),r.push(o.generateExpression(e.body[i],t.Sequence,7)),i+1<a&&r.push(p)})),O(R(r).toString())||r.push(p),r.push(a),r.push("}"),r},ClassDeclaration:function(e,n){var r,o;return r=["class"],e.id&&(r=z(r,this.generateExpression(e.id,t.Sequence,7))),e.superClass&&(o=z("extends",this.generateExpression(e.superClass,t.Unary,7)),r=z(r,o)),r.push(h),r.push(this.generateStatement(e.body,k)),r},DirectiveStatement:function(e,t){return b.raw&&e.raw?e.raw+this.semicolon(t):function(e){var t,n,r,o;for(o="double"===f?'"':"'",t=0,n=e.length;t<n;++t){if(39===(r=e.charCodeAt(t))){o='"';break}if(34===r){o="'";break}92===r&&++t}return o+e+o}(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,n){var r=z("do",this.maybeBlock(e.body,1));return z(r=this.maybeBlockSuffix(e.body,r),["while"+h+"(",this.generateExpression(e.test,t.Sequence,7),")"+this.semicolon(n)])},CatchClause:function(e,n){var r,o=this;return H((function(){var n;e.param?(r=["catch"+h+"(",o.generateExpression(e.param,t.Sequence,7),")"],e.guard&&(n=o.generateExpression(e.guard,t.Sequence,7),r.splice(2,0," if ",n))):r=["catch"]})),r.push(this.maybeBlock(e.body,1)),r},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDefaultDeclaration:function(e,n){var r,o=["export"];return r=n&D?k:1,o=z(o,"default"),o=A(e.declaration)?z(o,this.generateStatement(e.declaration,r)):z(o,this.generateExpression(e.declaration,t.Assignment,7)+this.semicolon(n))},ExportNamedDeclaration:function(n,r){var o,i=["export"],u=this;return o=r&D?k:1,n.declaration?z(i,this.generateStatement(n.declaration,o)):(n.specifiers&&(0===n.specifiers.length?i=z(i,"{"+h+"}"):n.specifiers[0].type===e.ExportBatchSpecifier?i=z(i,this.generateExpression(n.specifiers[0],t.Sequence,7)):(i=z(i,"{"),H((function(e){var r,o;for(i.push(p),r=0,o=n.specifiers.length;r<o;++r)i.push(e),i.push(u.generateExpression(n.specifiers[r],t.Sequence,7)),r+1<o&&i.push(","+p)})),O(R(i).toString())||i.push(p),i.push(a+"}")),n.source?i=z(i,["from"+h,this.generateExpression(n.source,t.Sequence,7),this.semicolon(r)]):i.push(this.semicolon(r))),i)},ExportAllDeclaration:function(e,n){return["export"+h,"*"+h,"from"+h,this.generateExpression(e.source,t.Sequence,7),this.semicolon(n)]},ExpressionStatement:function(n,r){var o,a,u,s;return 123===(a=R(o=[this.generateExpression(n.expression,t.Sequence,7)]).toString()).charCodeAt(0)||"class"===(u=a).slice(0,5)&&(123===(s=u.charCodeAt(5))||i.code.isWhiteSpace(s)||i.code.isLineTerminator(s))||function(e){var t;return"function"===e.slice(0,8)&&(40===(t=e.charCodeAt(8))||i.code.isWhiteSpace(t)||42===t||i.code.isLineTerminator(t))}(a)||function(e){var t,n,r;if("async"!==e.slice(0,5))return!1;if(!i.code.isWhiteSpace(e.charCodeAt(5)))return!1;for(n=6,r=e.length;n<r&&i.code.isWhiteSpace(e.charCodeAt(n));++n);return n!==r&&"function"===e.slice(n,n+8)&&(40===(t=e.charCodeAt(n+8))||i.code.isWhiteSpace(t)||42===t||i.code.isLineTerminator(t))}(a)||y&&16&r&&n.expression.type===e.Literal&&"string"==typeof n.expression.value?o=["(",o,")"+this.semicolon(r)]:o.push(this.semicolon(r)),o},ImportDeclaration:function(n,r){var o,i,u=this;return 0===n.specifiers.length?["import",h,this.generateExpression(n.source,t.Sequence,7),this.semicolon(r)]:(o=["import"],i=0,n.specifiers[i].type===e.ImportDefaultSpecifier&&(o=z(o,[this.generateExpression(n.specifiers[i],t.Sequence,7)]),++i),n.specifiers[i]&&(0!==i&&o.push(","),n.specifiers[i].type===e.ImportNamespaceSpecifier?o=z(o,[h,this.generateExpression(n.specifiers[i],t.Sequence,7)]):(o.push(h+"{"),n.specifiers.length-i==1?(o.push(h),o.push(this.generateExpression(n.specifiers[i],t.Sequence,7)),o.push(h+"}"+h)):(H((function(e){var r,a;for(o.push(p),r=i,a=n.specifiers.length;r<a;++r)o.push(e),o.push(u.generateExpression(n.specifiers[r],t.Sequence,7)),r+1<a&&o.push(","+p)})),O(R(o).toString())||o.push(p),o.push(a+"}"+h)))),o=z(o,["from"+h,this.generateExpression(n.source,t.Sequence,7),this.semicolon(r)]))},VariableDeclarator:function(e,n){var r=1&n?7:6;return e.init?[this.generateExpression(e.id,t.Assignment,r),h,"=",h,this.generateExpression(e.init,t.Assignment,r)]:this.generatePattern(e.id,t.Assignment,r)},VariableDeclaration:function(e,t){var n,r,o,i,a,u=this;function s(){for(i=e.declarations[0],b.comment&&i.leadingComments?(n.push("\n"),n.push(V(u.generateStatement(i,a)))):(n.push(L()),n.push(u.generateStatement(i,a))),r=1,o=e.declarations.length;r<o;++r)i=e.declarations[r],b.comment&&i.leadingComments?(n.push(","+p),n.push(V(u.generateStatement(i,a)))):(n.push(","+h),n.push(u.generateStatement(i,a)))}return n=[e.kind],a=1&t?1:0,e.declarations.length>1?H(s):s(),n.push(this.semicolon(t)),n},ThrowStatement:function(e,n){return[z("throw",this.generateExpression(e.argument,t.Sequence,7)),this.semicolon(n)]},TryStatement:function(e,t){var n,r,o,i;if(n=["try",this.maybeBlock(e.block,1)],n=this.maybeBlockSuffix(e.block,n),e.handlers)for(r=0,o=e.handlers.length;r<o;++r)n=z(n,this.generateStatement(e.handlers[r],1)),(e.finalizer||r+1!==o)&&(n=this.maybeBlockSuffix(e.handlers[r].body,n));else{for(r=0,o=(i=e.guardedHandlers||[]).length;r<o;++r)n=z(n,this.generateStatement(i[r],1)),(e.finalizer||r+1!==o)&&(n=this.maybeBlockSuffix(i[r].body,n));if(e.handler)if(Array.isArray(e.handler))for(r=0,o=e.handler.length;r<o;++r)n=z(n,this.generateStatement(e.handler[r],1)),(e.finalizer||r+1!==o)&&(n=this.maybeBlockSuffix(e.handler[r].body,n));else n=z(n,this.generateStatement(e.handler,1)),e.finalizer&&(n=this.maybeBlockSuffix(e.handler.body,n))}return e.finalizer&&(n=z(n,["finally",this.maybeBlock(e.finalizer,1)])),n},SwitchStatement:function(e,n){var r,o,i,a,u,s=this;if(H((function(){r=["switch"+h+"(",s.generateExpression(e.discriminant,t.Sequence,7),")"+h+"{"+p]})),e.cases)for(u=1,i=0,a=e.cases.length;i<a;++i)i===a-1&&(u|=D),o=V(this.generateStatement(e.cases[i],u)),r.push(o),O(R(o).toString())||r.push(p);return r.push(V("}")),r},SwitchCase:function(n,r){var o,i,a,u,s,c=this;return H((function(){for(o=n.test?[z("case",c.generateExpression(n.test,t.Sequence,7)),":"]:["default:"],a=0,(u=n.consequent.length)&&n.consequent[0].type===e.BlockStatement&&(i=c.maybeBlock(n.consequent[0],1),o.push(i),a=1),a===u||O(R(o).toString())||o.push(p),s=1;a<u;++a)a===u-1&&r&D&&(s|=D),i=V(c.generateStatement(n.consequent[a],s)),o.push(i),a+1===u||O(R(i).toString())||o.push(p)})),o},IfStatement:function(n,r){var o,i,a=this;return H((function(){o=["if"+h+"(",a.generateExpression(n.test,t.Sequence,7),")"]})),i=1,r&D&&(i|=D),n.alternate?(o.push(this.maybeBlock(n.consequent,1)),o=this.maybeBlockSuffix(n.consequent,o),o=n.alternate.type===e.IfStatement?z(o,["else ",this.generateStatement(n.alternate,i)]):z(o,z("else",this.maybeBlock(n.alternate,i)))):o.push(this.maybeBlock(n.consequent,i)),o},ForStatement:function(n,r){var o,i=this;return H((function(){o=["for"+h+"("],n.init?n.init.type===e.VariableDeclaration?o.push(i.generateStatement(n.init,0)):(o.push(i.generateExpression(n.init,t.Sequence,6)),o.push(";")):o.push(";"),n.test?(o.push(h),o.push(i.generateExpression(n.test,t.Sequence,7)),o.push(";")):o.push(";"),n.update?(o.push(h),o.push(i.generateExpression(n.update,t.Sequence,7)),o.push(")")):o.push(")")})),o.push(this.maybeBlock(n.body,r&D?k:1)),o},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&D?k:1)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&D?k:1)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&D?k:1)]},Program:function(e,t){var n,r,o,i,a;for(i=e.body.length,n=[v&&i>0?"\n":""],a=17,o=0;o<i;++o)v||o!==i-1||(a|=D),_&&(0===o&&(e.body[0].leadingComments||U(e.range[0],e.body[o].range[0],n)),o>0&&(e.body[o-1].trailingComments||e.body[o].leadingComments||U(e.body[o-1].range[1],e.body[o].range[0],n))),r=V(this.generateStatement(e.body[o],a)),n.push(r),o+1<i&&!O(R(r).toString())&&(_&&e.body[o+1].leadingComments||n.push(p)),_&&o===i-1&&(e.body[o].trailingComments||U(e.body[o].range[1],e.range[1],n));return n},FunctionDeclaration:function(e,t){return[K(e,!0),"function",Y(e)||L(),e.id?X(e.id):"",this.generateFunctionBody(e)]},ReturnStatement:function(e,n){return e.argument?[z("return",this.generateExpression(e.argument,t.Sequence,7)),this.semicolon(n)]:["return"+this.semicolon(n)]},WhileStatement:function(e,n){var r,o=this;return H((function(){r=["while"+h+"(",o.generateExpression(e.test,t.Sequence,7),")"]})),r.push(this.maybeBlock(e.body,n&D?k:1)),r},WithStatement:function(e,n){var r,o=this;return H((function(){r=["with"+h+"(",o.generateExpression(e.object,t.Sequence,7),")"]})),r.push(this.maybeBlock(e.body,n&D?k:1)),r}},B(G.prototype,G.Statement),G.Expression={SequenceExpression:function(e,n,r){var o,i,a;for(t.Sequence<n&&(r|=1),o=[],i=0,a=e.expressions.length;i<a;++i)o.push(this.generateExpression(e.expressions[i],t.Assignment,r)),i+1<a&&o.push(","+h);return W(o,t.Sequence,n)},AssignmentExpression:function(e,t,n){return this.generateAssignment(e.left,e.right,e.operator,t,n)},ArrowFunctionExpression:function(e,n,r){return W(this.generateFunctionBody(e),t.ArrowFunction,n)},ConditionalExpression:function(e,n,r){return t.Conditional<n&&(r|=1),W([this.generateExpression(e.test,t.LogicalOR,r),h+"?"+h,this.generateExpression(e.consequent,t.Assignment,r),h+":"+h,this.generateExpression(e.alternate,t.Assignment,r)],t.Conditional,n)},LogicalExpression:function(e,t,n){return this.BinaryExpression(e,t,n)},BinaryExpression:function(e,r,o){var a,u,s,c,l,f;return c=n[e.operator],u="**"===e.operator?t.Postfix:c,s="**"===e.operator?c:c+1,c<r&&(o|=1),a=47===(f=(l=this.generateExpression(e.left,u,o)).toString()).charCodeAt(f.length-1)&&i.code.isIdentifierPartES5(e.operator.charCodeAt(0))?[l,L(),e.operator]:z(l,e.operator),l=this.generateExpression(e.right,s,o),"/"===e.operator&&"/"===l.toString().charAt(0)||"<"===e.operator.slice(-1)&&"!--"===l.toString().slice(0,3)?(a.push(L()),a.push(l)):a=z(a,l),"in"!==e.operator||1&o?W(a,c,r):["(",a,")"]},CallExpression:function(e,n,r){var o,i,a;for(o=[this.generateExpression(e.callee,t.Call,3)],e.optional&&o.push("?."),o.push("("),i=0,a=e.arguments.length;i<a;++i)o.push(this.generateExpression(e.arguments[i],t.Assignment,7)),i+1<a&&o.push(","+h);return o.push(")"),2&r?W(o,t.Call,n):["(",o,")"]},ChainExpression:function(e,n,r){return t.OptionalChaining<n&&(r|=2),W(this.generateExpression(e.expression,t.OptionalChaining,r),t.OptionalChaining,n)},NewExpression:function(e,n,r){var o,i,a,u,s;if(i=e.arguments.length,s=4&r&&!m&&0===i?5:1,o=z("new",this.generateExpression(e.callee,t.New,s)),!(4&r)||m||i>0){for(o.push("("),a=0,u=i;a<u;++a)o.push(this.generateExpression(e.arguments[a],t.Assignment,7)),a+1<u&&o.push(","+h);o.push(")")}return W(o,t.New,n)},MemberExpression:function(n,r,o){var a,u;return a=[this.generateExpression(n.object,t.Call,2&o?3:1)],n.computed?(n.optional&&a.push("?."),a.push("["),a.push(this.generateExpression(n.property,t.Sequence,2&o?7:5)),a.push("]")):(n.optional||n.object.type!==e.Literal||"number"!=typeof n.object.value||(u=R(a).toString()).indexOf(".")<0&&!/[eExX]/.test(u)&&i.code.isDecimalDigit(u.charCodeAt(u.length-1))&&!(u.length>=2&&48===u.charCodeAt(0))&&a.push(" "),a.push(n.optional?"?.":"."),a.push(X(n.property))),W(a,t.Member,r)},MetaProperty:function(e,n,r){var o;return(o=[]).push("string"==typeof e.meta?e.meta:X(e.meta)),o.push("."),o.push("string"==typeof e.property?e.property:X(e.property)),W(o,t.Member,n)},UnaryExpression:function(e,n,r){var o,a,u,s,c;return a=this.generateExpression(e.argument,t.Unary,7),""===h?o=z(e.operator,a):(o=[e.operator],e.operator.length>2?o=z(o,a):(c=(s=R(o).toString()).charCodeAt(s.length-1),u=a.toString().charCodeAt(0),(43===c||45===c)&&c===u||i.code.isIdentifierPartES5(c)&&i.code.isIdentifierPartES5(u)?(o.push(L()),o.push(a)):o.push(a))),W(o,t.Unary,n)},YieldExpression:function(e,n,r){var o;return o=e.delegate?"yield*":"yield",e.argument&&(o=z(o,this.generateExpression(e.argument,t.Yield,7))),W(o,t.Yield,n)},AwaitExpression:function(e,n,r){return W(z(e.all?"await*":"await",this.generateExpression(e.argument,t.Await,7)),t.Await,n)},UpdateExpression:function(e,n,r){return e.prefix?W([e.operator,this.generateExpression(e.argument,t.Unary,7)],t.Unary,n):W([this.generateExpression(e.argument,t.Postfix,7),e.operator],t.Postfix,n)},FunctionExpression:function(e,t,n){var r=[K(e,!0),"function"];return e.id?(r.push(Y(e)||L()),r.push(X(e.id))):r.push(Y(e)||h),r.push(this.generateFunctionBody(e)),r},ArrayPattern:function(e,t,n){return this.ArrayExpression(e,t,n,!0)},ArrayExpression:function(e,n,r,o){var i,u,s=this;return e.elements.length?(u=!o&&e.elements.length>1,i=["[",u?p:""],H((function(n){var r,o;for(r=0,o=e.elements.length;r<o;++r)e.elements[r]?(i.push(u?n:""),i.push(s.generateExpression(e.elements[r],t.Assignment,7))):(u&&i.push(n),r+1===o&&i.push(",")),r+1<o&&i.push(","+(u?p:h))})),u&&!O(R(i).toString())&&i.push(p),i.push(u?a:""),i.push("]"),i):"[]"},RestElement:function(e,t,n){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,n,r){var o,i;return o=["class"],e.id&&(o=z(o,this.generateExpression(e.id,t.Sequence,7))),e.superClass&&(i=z("extends",this.generateExpression(e.superClass,t.Unary,7)),o=z(o,i)),o.push(h),o.push(this.generateStatement(e.body,k)),o},MethodDefinition:function(e,t,n){var r,o;return r=e.static?["static"+h]:[],o="get"===e.kind||"set"===e.kind?[z(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]:[J(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)],z(r,o)},Property:function(e,n,r){return"get"===e.kind||"set"===e.kind?[e.kind,L(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:e.shorthand?"AssignmentPattern"===e.value.type?this.AssignmentPattern(e.value,t.Sequence,7):this.generatePropertyKey(e.key,e.computed):e.method?[J(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:[this.generatePropertyKey(e.key,e.computed),":"+h,this.generateExpression(e.value,t.Assignment,7)]},ObjectExpression:function(e,n,r){var o,i,u,s,c=this;return e.properties.length?(o=e.properties.length>1,H((function(){u=c.generateExpression(e.properties[0],t.Sequence,7)})),o||(s=R(u).toString(),/[\r\n]/g.test(s))?(H((function(n){var r,a;if(i=["{",p,n,u],o)for(i.push(","+p),r=1,a=e.properties.length;r<a;++r)i.push(n),i.push(c.generateExpression(e.properties[r],t.Sequence,7)),r+1<a&&i.push(","+p)})),O(R(i).toString())||i.push(p),i.push(a),i.push("}"),i):["{",h,u,h,"}"]):"{}"},AssignmentPattern:function(e,t,n){return this.generateAssignment(e.left,e.right,"=",t,n)},ObjectPattern:function(n,r,o){var i,u,s,c,l,f=this;if(!n.properties.length)return"{}";if(c=!1,1===n.properties.length)(l=n.properties[0]).type===e.Property&&l.value.type!==e.Identifier&&(c=!0);else for(u=0,s=n.properties.length;u<s;++u)if((l=n.properties[u]).type===e.Property&&!l.shorthand){c=!0;break}return i=["{",c?p:""],H((function(e){var r,o;for(r=0,o=n.properties.length;r<o;++r)i.push(c?e:""),i.push(f.generateExpression(n.properties[r],t.Sequence,7)),r+1<o&&i.push(","+(c?p:h))})),c&&!O(R(i).toString())&&i.push(p),i.push(c?a:""),i.push("}"),i},ThisExpression:function(e,t,n){return"this"},Super:function(e,t,n){return"super"},Identifier:function(e,t,n){return X(e)},ImportDefaultSpecifier:function(e,t,n){return X(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,n){var r=["*"],o=e.id||e.local;return o&&r.push(h+"as"+L()+X(o)),r},ImportSpecifier:function(e,t,n){var r=e.imported,o=[r.name],i=e.local;return i&&i.name!==r.name&&o.push(L()+"as"+L()+X(i)),o},ExportSpecifier:function(e,t,n){var r=e.local,o=[r.name],i=e.exported;return i&&i.name!==r.name&&o.push(L()+"as"+L()+X(i)),o},Literal:function(t,n,r){var o;if(t.hasOwnProperty("raw")&&C&&b.raw)try{if((o=C(t.raw).body[0].expression).type===e.Literal&&o.value===t.value)return t.raw}catch(a){}return t.regex?"/"+t.regex.pattern+"/"+t.regex.flags:null===t.value?"null":"string"==typeof t.value?function(e){var t,n,r,o,a,u="",c=0,l=0;for(t=0,n=e.length;t<n;++t){if(39===(r=e.charCodeAt(t)))++c;else if(34===r)++l;else if(47===r&&s)u+="\\";else{if(i.code.isLineTerminator(r)||92===r){u+=P(r);continue}if(!i.code.isIdentifierPartES5(r)&&(s&&r<32||!s&&!d&&(r<32||r>126))){u+=M(r,e.charCodeAt(t+1));continue}}u+=String.fromCharCode(r)}if(a=(o=!("double"===f||"auto"===f&&l<c))?"'":'"',!(o?c:l))return a+u+a;for(e=u,u=a,t=0,n=e.length;t<n;++t)(39===(r=e.charCodeAt(t))&&o||34===r&&!o)&&(u+="\\"),u+=String.fromCharCode(r);return u+a}(t.value):"number"==typeof t.value?function(e){var t,n,r,o,i;if(e!=e)throw new Error("Numeric literal whose value is NaN");if(e<0||0===e&&1/e<0)throw new Error("Numeric literal whose value is negative");if(e===1/0)return s?"null":c?"1e400":"1e+400";if(t=""+e,!c||t.length<3)return t;for(n=t.indexOf("."),s||48!==t.charCodeAt(0)||1!==n||(n=0,t=t.slice(1)),r=t,t=t.replace("e+","e"),o=0,(i=r.indexOf("e"))>0&&(o=+r.slice(i+1),r=r.slice(0,i)),n>=0&&(o-=r.length-n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),i=0;48===r.charCodeAt(r.length+i-1);)--i;return 0!==i&&(o-=i,r=r.slice(0,i)),0!==o&&(r+="e"+o),(r.length<t.length||l&&e>1e12&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=r),t}(t.value):"boolean"==typeof t.value?t.value?"true":"false":function(e){var t,n,r,o,i,a,u,s;if(n=e.toString(),e.source){if(!(t=n.match(/\/([^/]*)$/)))return n;for(r=t[1],n="",u=!1,s=!1,o=0,i=e.source.length;o<i;++o)a=e.source.charCodeAt(o),s?(n+=F(a,s),s=!1):(u?93===a&&(u=!1):47===a?n+="\\":91===a&&(u=!0),n+=F(a,s),s=92===a);return"/"+n+"/"+r}return n}(t.value)},GeneratorExpression:function(e,t,n){return this.ComprehensionExpression(e,t,n)},ComprehensionExpression:function(n,r,o){var i,a,u,s,c=this;return i=n.type===e.GeneratorExpression?["("]:["["],b.moz.comprehensionExpressionStartsWithAssignment&&(s=this.generateExpression(n.body,t.Assignment,7),i.push(s)),n.blocks&&H((function(){for(a=0,u=n.blocks.length;a<u;++a)s=c.generateExpression(n.blocks[a],t.Sequence,7),a>0||b.moz.comprehensionExpressionStartsWithAssignment?i=z(i,s):i.push(s)})),n.filter&&(i=z(i,"if"+h),s=this.generateExpression(n.filter,t.Sequence,7),i=z(i,["(",s,")"])),b.moz.comprehensionExpressionStartsWithAssignment||(s=this.generateExpression(n.body,t.Assignment,7),i=z(i,s)),i.push(n.type===e.GeneratorExpression?")":"]"),i},ComprehensionBlock:function(n,r,o){var i;return i=z(i=n.left.type===e.VariableDeclaration?[n.left.kind,L(),this.generateStatement(n.left.declarations[0],0)]:this.generateExpression(n.left,t.Call,7),n.of?"of":"in"),i=z(i,this.generateExpression(n.right,t.Sequence,7)),["for"+h+"(",i,")"]},SpreadElement:function(e,n,r){return["...",this.generateExpression(e.argument,t.Assignment,7)]},TaggedTemplateExpression:function(e,n,r){var o=3;return 2&r||(o=1),W([this.generateExpression(e.tag,t.Call,o),this.generateExpression(e.quasi,t.Primary,4)],t.TaggedTemplate,n)},TemplateElement:function(e,t,n){return e.value.raw},TemplateLiteral:function(e,n,r){var o,i,a;for(o=["`"],i=0,a=e.quasis.length;i<a;++i)o.push(this.generateExpression(e.quasis[i],t.Primary,7)),i+1<a&&(o.push("${"+h),o.push(this.generateExpression(e.expressions[i],t.Sequence,7)),o.push(h+"}"));return o.push("`"),o},ModuleSpecifier:function(e,t,n){return this.Literal(e,t,n)},ImportExpression:function(e,n,r){return W(["import(",this.generateExpression(e.source,t.Assignment,7),")"],t.Call,n)}},B(G.prototype,G.Expression),G.prototype.generateExpression=function(n,r,o){var i,a;return a=n.type||e.Property,b.verbatim&&n.hasOwnProperty(b.verbatim)?function(e,n){var r;return R("string"==typeof(r=e[b.verbatim])?W(q(r),t.Sequence,n):W(q(r.content),null!=r.precedence?r.precedence:t.Sequence,n),e)}(n,r):(i=this[a](n,r,o),b.comment&&(i=j(n,i)),R(i,n))},G.prototype.generateStatement=function(t,n){var r,o;return r=this[t.type](t,n),b.comment&&(r=j(t,r)),o=R(r).toString(),t.type!==e.Program||v||""!==p||"\n"!==o.charAt(o.length-1)||(r=x?R(r).replaceRight(/\s+$/,""):o.replace(/\s+$/,"")),R(r,t)},S={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},E={indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},exports.version=require$$3.version,exports.generate=function(e,t){var n,o,i={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null};return null!=t?("string"==typeof t.indent&&(i.format.indent.style=t.indent),"number"==typeof t.base&&(i.format.indent.base=t.base),t=N(i,t),u=t.format.indent.style,a="string"==typeof t.base?t.base:T(u,t.format.indent.base)):(u=(t=i).format.indent.style,a=T(u,t.format.indent.base)),s=t.format.json,c=t.format.renumber,l=!s&&t.format.hexadecimal,f=s?"double":t.format.quotes,d=t.format.escapeless,p=t.format.newline,h=t.format.space,t.format.compact&&(p=h=u=a=""),m=t.format.parentheses,g=t.format.semicolons,v=t.format.safeConcatenation,y=t.directive,C=s?null:t.parse,x=t.sourceMap,w=t.sourceCode,_=t.format.preserveBlankLines&&null!==w,b=t,x&&(r=exports.browser?commonjsGlobal.sourceMap.SourceNode:sourceMap.SourceNode),n=Q(e),x?(o=n.toStringWithSourceMap({file:t.file,sourceRoot:t.sourceMapRoot}),t.sourceContent&&o.map.setSourceContent(t.sourceMap,t.sourceContent),t.sourceMapWithCode?o:o.map.toString()):(o={code:n.toString(),map:null},t.sourceMapWithCode?o:o.code)},exports.attachComments=o.attachComments,exports.Precedence=N({},t),exports.browser=!1,exports.FORMAT_MINIFY=S,exports.FORMAT_DEFAULTS=E}();const userStore=useUserStore();function asyncArrayTransform(e){e&&e.forEach(((t,n)=>{isObject$1(t)?e[n]&&asyncObjectTransform(e[n]):isArray$1(t)?e[n]&&asyncArrayTransform(e[n]):isString(t)?e[n]&&(e[n]=asyncFunctionTransform(e[n])):e[n]}))}function asyncObjectTransform(e){e&&Object.keys(e).forEach((function(t){isObject$1(e[t])?e[t]&&asyncObjectTransform(e[t]):isArray$1(e[t])?e[t]&&asyncArrayTransform(e[t]):isString(e[t])?e[t]&&(e[t]=asyncFunctionTransform(e[t])):e[t]}))}function asyncFunctionTransform(string){if(string)try{const ast=parse(string,{ecmaVersion:13}),code=escodegen.generate(ast),fn=eval(code);return isFunction$1(fn)?fn:code}catch(error){return string}}function objectToFunction(e){return Object.keys(e).forEach((function(t){isObject$1(e[t])?e[t]&&asyncObjectTransform(e[t]):isArray$1(e[t])?e[t]&&asyncArrayTransform(e[t]):isString(e[t])?e[t]&&(e[t]=asyncFunctionTransform(e[t])):e[t]})),e}userStore.getUserInfo;const debug=e=>e;var _sfc_main=defineComponent({name:"FormModal",components:{BasicModal:BasicModal,BasicForm:_sfc_main$a},emits:["success","register"],setup(e,{emit:t}){const n=ref$1(!0),r=ref$1(!0),o=ref$1(0),{currentRoute:i}=useRouter(),a=ref$1(null),u=ref$1([]),s=ref$1([]),c=ref$1(),l=ref$1(),f=computed((()=>unref(i))).value.meta,[d,{resetFields:p,setProps:h,setFieldsValue:m,validate:g}]=useForm({labelWidth:100,baseColProps:{xxl:6,xl:8,lg:12,md:24},showActionButtonGroup:!1}),[v,{setModalProps:y,closeModal:b}]=useModalInner((e=>__async(this,null,(function*(){var t,i,a,d,g,v;p(),y({defaultFullscreen:!0,loading:!0,confirmLoading:!0}),n.value=!!(null==e?void 0:e.isUpdate),o.value=null==(i=null==e?void 0:e.record)?void 0:i[null!=(t=null==e?void 0:e.pk)?t:"id"];const b=yield api(f.method,f.api+"/layout",{type:"form"});r.value=!1,yield objectToFunction(b),yield h(b);const C=null==b?void 0:b.tableProps;u.value=null!=(a=null==C?void 0:C.columns)?a:[],s.value=null!=(d=null==C?void 0:C.dataSource)?d:[],c.value=null!=(g=null==C?void 0:C.api)?g:null,l.value=null!=(v=null==C?void 0:C.apiColumns)?v:null,y({loading:!1,confirmLoading:!1}),unref(n)&&m(__spreadValues({},e.record))})))),C=computed((()=>unref(n)?"":""));return{loading:r,tableRef:a,columnsRef:u,dataSourceRef:s,registerModal:v,registerForm:d,getTitle:C,dataApi:c,colApi:l,handleSubmit:function(){return __async(this,null,(function*(){try{const e=yield g();y({confirmLoading:!0}),unref(n)?api("put",f.api+"/"+o.value,e).then((()=>{t("success")})):api("post",f.api,e).then((()=>{b(),t("success")}))}finally{y({confirmLoading:!1})}}))}}}});const _hoisted_1={key:0,class:"empty-tips"};function _sfc_render(e,t,n,r,o,i){const a=resolveComponent("BasicForm"),u=resolveComponent("BasicModal");return openBlock(),createBlock(u,mergeProps(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:withCtx((()=>[e.loading?(openBlock(),createBlock("div",_hoisted_1,"  ")):createCommentVNode("",!0),createVNode(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])}_sfc_main.render=_sfc_render;var FormModal=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_sfc_main});export{FormModal as F,_sfc_main as _,objectToFunction as o};
