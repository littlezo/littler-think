import{D as e,aW as a,aX as s,aY as t,aZ as o,a_ as n,am as l,r,Q as i,j as u,t as m,u as d,a0 as c,H as g,J as f,K as p,L as h,z as y,a4 as x,ab as v,N as w,a$ as L,a9 as _}from"./vendor.2a694682.js";/* empty css              *//* empty css              *//* empty css              */import{_ as S,u as F,a as b,L as k,b as D}from"./LoginFormTitle.a48df849.js";import{c as C,f as I,e as R,h as j}from"./index.886fff71.js";var P=e({name:"LoginForm",components:{[a.name]:a,[s.name]:s,Checkbox:t,Button:o,Form:n,FormItem:n.Item,Input:l,LoginFormTitle:S,InputPassword:l.Password},setup(){const{t:e}=R(),{notification:a}=j(),{prefixCls:s}=C("login"),t=I(),{setLoginState:o,getLoginState:n}=F(),{getFormRules:l}=b(),c=r(),g=r(!1),f=r(!1),p=i({account:"little",password:"123456"}),{validForm:h}=D(c),y=u((()=>d(n)===k.LOGIN));return{t:e,prefixCls:s,formRef:c,formData:p,getFormRules:l,rememberMe:f,handleLogin:function(){return s=this,o=null,n=function*(){const s=yield h();if(s)try{g.value=!0;const o=yield t.login(m({password:s.password,username:s.account,mode:"none"}));o&&a.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${o.real_name}`,duration:3})}catch(o){}finally{g.value=!1}},new Promise(((e,a)=>{var t=e=>{try{r(n.next(e))}catch(s){a(s)}},l=e=>{try{r(n.throw(e))}catch(s){a(s)}},r=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,l);r((n=n.apply(s,o)).next())}));var s,o,n},loading:g,setLoginState:o,LoginStateEnum:k,getShow:y}}});P.render=function(e,a,s,t,o,n){const l=c("LoginFormTitle"),r=c("Input"),i=c("FormItem"),u=c("InputPassword"),m=c("Checkbox"),d=c("ACol"),S=c("Button"),F=c("ARow"),b=c("Form");return g(),f(_,null,[p(y(l,{class:"enter-x"},null,512),[[h,e.getShow]]),p(y(b,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef",onKeypress:L(e.handleLogin,["enter"])},{default:x((()=>[y(i,{name:"account",class:"enter-x"},{default:x((()=>[y(r,{size:"large",value:e.formData.account,"onUpdate:value":a[1]||(a[1]=a=>e.formData.account=a),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),y(i,{name:"password",class:"enter-x"},{default:x((()=>[y(u,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":a[2]||(a[2]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),y(F,{class:"enter-x"},{default:x((()=>[y(d,{span:12},{default:x((()=>[y(i,null,{default:x((()=>[y(m,{checked:e.rememberMe,"onUpdate:checked":a[3]||(a[3]=a=>e.rememberMe=a),size:"small"},{default:x((()=>[v(w(e.t("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),y(d,{span:12},{default:x((()=>[y(i,{style:{"text-align":"right"}},{default:x((()=>[y(S,{type:"link",size:"small",onClick:a[4]||(a[4]=a=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:x((()=>[v(w(e.t("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),y(i,{class:"enter-x"},{default:x((()=>[y(S,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:x((()=>[v(w(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"])])),_:1}),y(F,{class:"enter-x"})])),_:1},8,["model","rules","onKeypress"]),[[h,e.getShow]])],64)};export{P as default};
