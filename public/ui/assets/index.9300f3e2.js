import r from"./DetailModal.09d3ec71.js";import{_ as e}from"./TableImg.e17cc06a.js";import{_ as o}from"./useForm.9f758c80.js";import{u as t}from"./useTable.a77db7eb.js";import{u as i}from"./index.6f230b74.js";import{e as a,aE as s}from"./index.886fff71.js";import{getColumns as n}from"./data.8318ea20.js";import{D as l,r as d,T as c,$ as m,w as u,a0 as f,H as p,J as j,a9 as b,aq as x,K as g,L as y,z as E,a4 as v,ab as h,N as w}from"./vendor.2a694682.js";import"./index.34d90663.js";import"./useAttrs.c83a264c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./useWindowSizeFn.ba9c561c.js";import"./onMountedOrActivated.1cc20755.js";/* empty css              */import"./useSortable.a0d70131.js";/* empty css              *//* empty css              *//* empty css              */import"./index.159369ef.js";import"./index.08924b52.js";import"./download.24e74597.js";import"./index.52577703.js";var L=l({name:"ErrorHandler",components:{DetailModal:r,BasicTable:e,TableAction:o},setup(){const r=d(),e=d([]),{t:o}=a(),l=s(),[f,{setTableData:p}]=t({title:o("sys.errorLog.tableTitle"),columns:n(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[j,{openModal:b}]=i();return c((()=>l.getErrorLogInfoList),(r=>{m((()=>{p(u(r))}))}),{immediate:!0}),{register:f,registerModal:j,handleDetail:function(e){r.value=e,b(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){e.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return r=this,e=null,o=function*(){},new Promise(((t,i)=>{var a=r=>{try{n(o.next(r))}catch(e){i(e)}},s=r=>{try{n(o.throw(r))}catch(e){i(e)}},n=r=>r.done?t(r.value):Promise.resolve(r.value).then(a,s);n((o=o.apply(r,e)).next())}));var r,e,o},imgList:e,rowInfo:r,t:o}}});const T={class:"p-4"};L.render=function(r,e,o,t,i,a){const s=f("DetailModal"),n=f("a-button"),l=f("TableAction"),d=f("BasicTable");return p(),j("div",T,[(p(!0),j(b,null,x(r.imgList,(r=>g((p(),j("img",{key:r,src:r},null,8,["src"])),[[y,!1]]))),128)),E(s,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),E(d,{onRegister:r.register,class:"error-handle-table"},{toolbar:v((()=>[E(n,{onClick:r.fireVueError,type:"primary"},{default:v((()=>[h(w(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),E(n,{onClick:r.fireResourceError,type:"primary"},{default:v((()=>[h(w(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),E(n,{onClick:r.fireAjaxError,type:"primary"},{default:v((()=>[h(w(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:v((({record:e})=>[E(l,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{L as default};
