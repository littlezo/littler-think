import{Col as e,Row as a,Checkbox as s,Button as t,Form as o,Input as n}from"ant-design-vue";import{_ as l,u as r,a as i,L as u,b as c}from"./LoginFormTitle.0a17200a.js";import{c as m,f as d,e as g,h as f}from"./index.85303d5a.js";import{A as p,r as h,N as y,j as v,t as w,u as x,Z as L,F as _,G as S,H as F,J as k,x as b,a1 as C,a7 as D,K as I,aE as R,a5 as P}from"./vendor.ecc5e6ce.js";var T=p({name:"LoginForm",components:{[e.name]:e,[a.name]:a,Checkbox:s,Button:t,Form:o,FormItem:o.Item,Input:n,LoginFormTitle:l,InputPassword:n.Password},setup(){const{t:e}=g(),{notification:a}=f(),{prefixCls:s}=m("login"),t=d(),{setLoginState:o,getLoginState:n}=r(),{getFormRules:l}=i(),p=h(),L=h(!1),_=h(!1),S=y({account:"little",password:"123456"}),{validForm:F}=c(p),k=v((()=>x(n)===u.LOGIN));return{t:e,prefixCls:s,formRef:p,formData:S,getFormRules:l,rememberMe:_,handleLogin:function(){return s=this,o=null,n=function*(){const s=yield F();if(s)try{L.value=!0;const o=yield t.login(w({password:s.password,username:s.account,mode:"none"}));o&&a.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${o.real_name}`,duration:3})}catch(o){}finally{L.value=!1}},new Promise(((e,a)=>{var t=e=>{try{r(n.next(e))}catch(s){a(s)}},l=e=>{try{r(n.throw(e))}catch(s){a(s)}},r=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,l);r((n=n.apply(s,o)).next())}));var s,o,n},loading:L,setLoginState:o,LoginStateEnum:u,getShow:k}}});T.render=function(e,a,s,t,o,n){const l=L("LoginFormTitle"),r=L("Input"),i=L("FormItem"),u=L("InputPassword"),c=L("Checkbox"),m=L("ACol"),d=L("Button"),g=L("ARow"),f=L("Form");return _(),S(P,null,[F(b(l,{class:"enter-x"},null,512),[[k,e.getShow]]),F(b(f,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef",onKeypress:R(e.handleLogin,["enter"])},{default:C((()=>[b(i,{name:"account",class:"enter-x"},{default:C((()=>[b(r,{size:"large",value:e.formData.account,"onUpdate:value":a[1]||(a[1]=a=>e.formData.account=a),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),b(i,{name:"password",class:"enter-x"},{default:C((()=>[b(u,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":a[2]||(a[2]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),b(g,{class:"enter-x"},{default:C((()=>[b(m,{span:12},{default:C((()=>[b(i,null,{default:C((()=>[b(c,{checked:e.rememberMe,"onUpdate:checked":a[3]||(a[3]=a=>e.rememberMe=a),size:"small"},{default:C((()=>[D(I(e.t("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),b(m,{span:12},{default:C((()=>[b(i,{style:{"text-align":"right"}},{default:C((()=>[b(d,{type:"link",size:"small",onClick:a[4]||(a[4]=a=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:C((()=>[D(I(e.t("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),b(i,{class:"enter-x"},{default:C((()=>[b(d,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:C((()=>[D(I(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"])])),_:1}),b(g,{class:"enter-x"})])),_:1},8,["model","rules","onKeypress"]),[[k,e.getShow]])],64)};export{T as default};
