import r from"./DetailModal.66016fe7.js";import{_ as e}from"./TableImg.dcd306f8.js";import{_ as o}from"./useForm.137eb3b0.js";import{u as t}from"./useTable.a2da2945.js";import{u as a}from"./index.0f139360.js";import{e as i,aE as s}from"./index.85303d5a.js";import{getColumns as n}from"./data.b4d97a16.js";import{A as l,r as c,Q as d,Y as u,w as m,Z as f,F as p,G as b,a5 as g,ah as j,H as y,J as x,x as v,a1 as E,a7 as h,K as w}from"./vendor.ecc5e6ce.js";import"./index.a0037c0b.js";import"ant-design-vue";import"./useAttrs.b84cef3f.js";import"./useWindowSizeFn.1b287cdc.js";import"./onMountedOrActivated.6e7c6753.js";import"./useSortable.6200a744.js";import"./index.c389a080.js";import"./index.5c4cad53.js";import"./download.8120b7a2.js";import"./index.241dae1f.js";var A=l({name:"ErrorHandler",components:{DetailModal:r,BasicTable:e,TableAction:o},setup(){const r=c(),e=c([]),{t:o}=i(),l=s(),[f,{setTableData:p}]=t({title:o("sys.errorLog.tableTitle"),columns:n(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[b,{openModal:g}]=a();return d((()=>l.getErrorLogInfoList),(r=>{u((()=>{p(m(r))}))}),{immediate:!0}),{register:f,registerModal:b,handleDetail:function(e){r.value=e,g(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){e.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return r=this,e=null,o=function*(){},new Promise(((t,a)=>{var i=r=>{try{n(o.next(r))}catch(e){a(e)}},s=r=>{try{n(o.throw(r))}catch(e){a(e)}},n=r=>r.done?t(r.value):Promise.resolve(r.value).then(i,s);n((o=o.apply(r,e)).next())}));var r,e,o},imgList:e,rowInfo:r,t:o}}});const L={class:"p-4"};A.render=function(r,e,o,t,a,i){const s=f("DetailModal"),n=f("a-button"),l=f("TableAction"),c=f("BasicTable");return p(),b("div",L,[(p(!0),b(g,null,j(r.imgList,(r=>y((p(),b("img",{key:r,src:r},null,8,["src"])),[[x,!1]]))),128)),v(s,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),v(c,{onRegister:r.register,class:"error-handle-table"},{toolbar:E((()=>[v(n,{onClick:r.fireVueError,type:"primary"},{default:E((()=>[h(w(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),v(n,{onClick:r.fireResourceError,type:"primary"},{default:E((()=>[h(w(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),v(n,{onClick:r.fireAjaxError,type:"primary"},{default:E((()=>[h(w(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:E((({record:e})=>[v(l,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{A as default};
