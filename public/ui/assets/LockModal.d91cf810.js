import{c as e,f as s,e as a,aa as r}from"./index.85303d5a.js";import{B as o,b as t}from"./index.0f139360.js";import{g as i,h as l}from"./useForm.137eb3b0.js";import{u as n}from"./lock.5b15327c.js";import{h as c}from"./header.d801b988.js";import{A as d,j as m,Z as p,F as u,G as f,a1 as h,x as v,K as x,a7 as g,a0 as j}from"./vendor.ecc5e6ce.js";import"ant-design-vue";import"./useAttrs.b84cef3f.js";import"./useWindowSizeFn.1b287cdc.js";import"./index.c389a080.js";import"./index.5c4cad53.js";import"./download.8120b7a2.js";import"./index.241dae1f.js";var k=d({name:"LockModal",components:{BasicModal:o,BasicForm:i},setup(){const{t:o}=a(),{prefixCls:i}=e("header-lock-modal"),d=s(),p=n(),u=m((()=>{var e;return null==(e=d.getUserInfo)?void 0:e.real_name})),[f,{closeModal:h}]=t(),[v,{validateFields:x,resetFields:g}]=l({showActionButtonGroup:!1,schemas:[{field:"password",label:o("layout.header.lockScreenPassword"),component:"InputPassword",required:!0}]});return{t:o,prefixCls:i,getRealName:u,register:f,registerForm:v,handleLock:function(){return e=this,s=null,a=function*(){const e=(yield x()).password;h(),p.setLockInfo({isLock:!0,passwd:r(r(e))}),yield g()},new Promise(((r,o)=>{var t=e=>{try{l(a.next(e))}catch(s){o(s)}},i=e=>{try{l(a.throw(e))}catch(s){o(s)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,i);l((a=a.apply(e,s)).next())}));var e,s,a},avatar:m((()=>{const{avatar:e}=d.getUserInfo;return e||c}))}}});k.render=function(e,s,a,r,o,t){const i=p("BasicForm"),l=p("a-button"),n=p("BasicModal");return u(),f(n,j({footer:null,title:e.t("layout.header.lockScreen")},e.$attrs,{class:e.prefixCls,onRegister:e.register}),{default:h((()=>[v("div",{class:`${e.prefixCls}__entry`},[v("div",{class:`${e.prefixCls}__header`},[v("img",{src:e.avatar,class:`${e.prefixCls}__header-img`},null,10,["src"]),v("p",{class:`${e.prefixCls}__header-name`},x(e.getRealName),3)],2),v(i,{onRegister:e.registerForm},null,8,["onRegister"]),v("div",{class:`${e.prefixCls}__footer`},[v(l,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:h((()=>[g(x(e.t("layout.header.lockScreenBtn")),1)])),_:1},8,["onClick"])],2)],2)])),_:1},16,["title","class","onRegister"])};export{k as default};
