var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,c=(t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,r=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(l)for(var n of l(t))a.call(t,n)&&c(e,n,t[n]);return e},o=(e,l)=>t(e,n(l)),i=(e,t,n)=>new Promise(((l,s)=>{var a=e=>{try{r(n.next(e))}catch(t){s(t)}},c=e=>{try{r(n.throw(e))}catch(t){s(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,c);r((n=n.apply(e,t)).next())}));import{ac as d,A as u,j as y,R as h,B as p,D as f,Z as v,F as k,G as b,a3 as m,a6 as K,a7 as g,K as x,x as A,an as L,a5 as S,ah as C,L as E,u as _,w as N,r as w,X as I,Y as T,ab as j,b4 as B,aA as M,aa as D,N as O,t as P,be as $,o as R,af as U,Q as H,H as F,J as X,a0 as Y,aZ as G}from"./vendor.ecc5e6ce.js";import{Dropdown as Q,Menu as Z,Input as z,Divider as J,Tree as W,Empty as q}from"ant-design-vue";import{i as V,_ as ee,am as te,p as ne,e as le,aP as se,aQ as ae,c as ce,ah as re,j as oe,aA as ie,S as de,aR as ue,ad as ye,C as he}from"./index.85303d5a.js";const pe=({icon:e})=>e?V(e)?d(ee,{icon:e,class:"mr-1"}):ee:null;var fe,ve;(ve=fe||(fe={}))[ve.SELECT_ALL=0]="SELECT_ALL",ve[ve.UN_SELECT_ALL=1]="UN_SELECT_ALL",ve[ve.EXPAND_ALL=2]="EXPAND_ALL",ve[ve.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",ve[ve.CHECK_STRICTLY=4]="CHECK_STRICTLY",ve[ve.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY";var ke=u({name:"BasicTreeHeader",components:{BasicTitle:te,Icon:ee,Dropdown:Q,Menu:Z,MenuItem:Z.Item,MenuDivider:Z.Divider,InputSearch:z.Search},props:{helpMessage:{type:[String,Array],default:""},title:ne.string,toolbar:ne.bool,checkable:ne.bool,search:ne.bool,checkAll:ne.func,expandAll:ne.func},emits:["strictly-change","search"],setup(e,{emit:t}){const{t:n}=le(),l=y((()=>{const{checkable:t}=e,l=[{label:n("component.tree.expandAll"),value:2},{label:n("component.tree.unExpandAll"),value:3,divider:t}];return t?[{label:n("component.tree.selectAll"),value:0},{label:n("component.tree.unSelectAll"),value:1,divider:t},...l,{label:n("component.tree.checkStrictly"),value:4},{label:n("component.tree.checkUnStrictly"),value:5}]:l}));const s=h((function(e){t("search",e)}),200);return{t:n,toolbarList:l,handleMenuClick:function(n){var l,s,a,c;const{key:r}=n;switch(r){case 0:null==(l=e.checkAll)||l.call(e,!0);break;case 1:null==(s=e.checkAll)||s.call(e,!1);break;case 2:null==(a=e.expandAll)||a.call(e,!0);break;case 3:null==(c=e.expandAll)||c.call(e,!1);break;case 4:t("strictly-change",!1);break;case 5:t("strictly-change",!0)}},handleSearch:function(e){s(e.target.value)}}}});const be=E();p("data-v-55630130");const me={class:"flex px-2 py-1.5 items-center basic-tree-header"},Ke={key:2,class:"flex flex-1 justify-end items-center cursor-pointer"},ge={key:0,class:"mr-1 w-2/3"};f();const xe=be(((e,t,n,l,s,a)=>{const c=v("BasicTitle"),r=v("InputSearch"),o=v("Icon"),i=v("MenuItem"),d=v("MenuDivider"),u=v("Menu"),y=v("Dropdown");return k(),b("div",me,[e.$slots.headerTitle?m(e.$slots,"headerTitle",{key:0},void 0,!0):K("",!0),!e.$slots.headerTitle&&e.title?(k(),b(c,{key:1,helpMessage:e.helpMessage},{default:be((()=>[g(x(e.title),1)])),_:1},8,["helpMessage"])):K("",!0),e.search||e.toolbar?(k(),b("div",Ke,[e.search?(k(),b("div",ge,[A(r,{placeholder:e.t("common.searchText"),size:"small",allowClear:"",onChange:e.handleSearch},null,8,["placeholder","onChange"])])):K("",!0),e.toolbar?(k(),b(y,{key:1,onClick:t[1]||(t[1]=L((()=>{}),["prevent"]))},{overlay:be((()=>[A(u,{onClick:e.handleMenuClick},{default:be((()=>[(k(!0),b(S,null,C(e.toolbarList,(e=>(k(),b(S,{key:e.value},[A(i,{key:e.value},{default:be((()=>[g(x(e.label),1)])),_:2},1040),e.divider?(k(),b(d,{key:0})):K("",!0)],64)))),128))])),_:1},8,["onClick"])])),default:be((()=>[A(o,{icon:"ion:ellipsis-vertical"})])),_:1})):K("",!0)])):K("",!0)])}));ke.render=xe,ke.__scopeId="data-v-55630130";const Ae={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default:()=>({x:0,y:0})},items:{type:Array,default:()=>[]}},Le=e=>{const{item:t}=e;return A("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&A(ee,{class:"mr-2",icon:t.icon},null),A("span",null,[t.label])])};var Se=u({name:"ContextMenu",props:Ae,setup(e){const t=w(null),n=w(!1),l=y((()=>{const{axis:t,items:n,styles:l,width:s}=e,{x:a,y:c}=t||{x:0,y:0},i=40*(n||[]).length,d=s,u=document.body,y=u.clientWidth<a+d?a-d:a,h=u.clientHeight<c+i?c-i:c;return o(r({},l),{width:`${s}px`,left:`${y+1}px`,top:`${h+1}px`})}));function s(e,t){const{handler:l,disabled:s}=e;s||(n.value=!1,null==t||t.stopPropagation(),null==t||t.preventDefault(),null==l||l())}function a(t){return t.map((t=>{const{disabled:l,label:c,children:r,divider:o=!1}=t,i={item:t,handler:s,showIcon:e.showIcon};return r&&0!==r.length?_(n)?A(Z.SubMenu,{key:c,disabled:l,popupClassName:"context-menu__popup"},{title:()=>A(Le,i,null),default:()=>a(r)}):null:A(S,null,[A(Z.Item,{disabled:l,class:"context-menu__item",key:c},{default:()=>[A(Le,i,null)]}),o?A(J,{key:`d-${c}`},null):null])}))}return I((()=>{T((()=>n.value=!0))})),j((()=>{const e=_(t);e&&document.body.removeChild(e)})),()=>{let s;if(!_(n))return null;const{items:c}=e;return A(Z,{inlineIndent:12,mode:"vertical",class:"context-menu",ref:t,style:_(l)},"function"==typeof(r=s=a(c))||"[object Object]"===Object.prototype.toString.call(r)&&!B(r)?s:{default:()=>[s]});var r}}});const Ce={domList:[],resolve:()=>{}},Ee=function(e){const{event:t}=e||{};if(t&&(null==t||t.preventDefault()),ae)return new Promise((n=>{const l=document.body,s=document.createElement("div"),a={};e.styles&&(a.styles=e.styles),e.items&&(a.items=e.items),e.event&&(a.customEvent=t,a.axis={x:t.clientX,y:t.clientY});const c=A(Se,a);M(c,s);const r=function(){Ce.resolve("")};Ce.domList.push(s);const o=function(){Ce.domList.forEach((e=>{try{e&&l.removeChild(e)}catch(t){}})),l.removeEventListener("click",r),l.removeEventListener("scroll",r)};Ce.resolve=function(e){o(),n(e)},o(),l.appendChild(s),l.addEventListener("click",r),l.addEventListener("scroll",r)}))},_e=function(){Ce&&(Ce.resolve(""),Ce.domList=[])};var Ne=u({name:"BasicTree",inheritAttrs:!1,props:{value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:ne.string,toolbar:ne.bool,search:ne.bool,checkStrictly:ne.bool,clickRowToExpand:ne.bool.def(!0),checkable:ne.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:ne.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value","change","check"],setup(e,{attrs:t,slots:n,emit:l,expose:s}){const a=O({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),c=O({startSearch:!1,searchData:[]}),d=w([]),[u]=function(e=!0){return D()&&e&&j((()=>{_e()})),[Ee,_e]}(),{prefixCls:h}=ce("basic-tree"),p=y((()=>{const{replaceFields:t}=e;return r({children:"children",title:"title",key:"key"},t)})),f=y((()=>{let n=o(r(r({blockNode:!0},t),e),{expandedKeys:a.expandedKeys,selectedKeys:a.selectedKeys,checkedKeys:a.checkedKeys,checkStrictly:a.checkStrictly,replaceFields:_(p),"onUpdate:expandedKeys":e=>{a.expandedKeys=e,l("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{a.selectedKeys=e,l("update:selectedKeys",e)},onCheck:(e,t)=>{let n=P(a.checkedKeys);if(re(n)&&c.startSearch){const{key:e}=_(p);n=$(n,C(t.node.$attrs.node[e])),t.checked&&n.push(t.node.$attrs.node[e]),a.checkedKeys=n}else a.checkedKeys=e;const s=P(a.checkedKeys);l("update:value",s),l("check",s,t)},onRightClick:E});return R(n,"treeData","class")})),v=y((()=>c.startSearch?c.searchData:_(d))),k=y((()=>!v.value||0===v.value.length)),{deleteNodeByKey:b,insertNodeByKey:m,insertNodesByKey:K,filterByLevel:g,updateNodeByKey:x,getAllKeys:L,getChildrenKeys:C}=function(e,t){function n(l){const s=[],a=l||_(e),{key:c,children:r}=_(t);if(!r||!c)return s;for(let e=0;e<a.length;e++){const t=a[e];s.push(t[c]);const l=t[r];l&&l.length&&s.push(...n(l))}return s}return{deleteNodeByKey:function n(l,s){if(!l)return;const a=s||_(e),{key:c,children:r}=_(t);if(r&&c)for(let e=0;e<a.length;e++){const t=a[e],s=t[r];if(t[c]===l){a.splice(e,1);break}s&&s.length&&n(l,t[r])}},insertNodeByKey:function({parentKey:n=null,node:l,push:s="push"}){const a=N(_(e));if(!n)return a[s](l),void(e.value=a);const{key:c,children:r}=_(t);r&&c&&(se(a,(e=>{if(e[c]===n)return e[r]=e[r]||[],e[r][s](l),!0})),e.value=a)},insertNodesByKey:function({parentKey:n=null,list:l,push:s="push"}){const a=N(_(e));if(l&&!(l.length<1))if(n){const{key:c,children:r}=_(t);if(!r||!c)return;se(a,(t=>{if(t[c]===n){t[r]=t[r]||[];for(let e=0;e<l.length;e++)t[r][s](l[e]);return e.value=a,!0}}))}else for(let e=0;e<l.length;e++)a[s](l[e])},filterByLevel:function n(l=1,s,a=1){if(!l)return[];const c=[],r=s||_(e)||[];for(let e=0;e<r.length;e++){const s=r[e],{key:o,children:i}=_(t),d=o?s[o]:"",u=i?s[i]:[];c.push(d),u&&u.length&&a<l&&(a+=1,c.push(...n(l,u,a)))}return c},updateNodeByKey:function n(l,s,a){if(!l)return;const c=a||_(e),{key:o,children:i}=_(t);if(i&&o)for(let e=0;e<c.length;e++){const t=c[e],a=t[i];if(t[o]===l){c[e]=r(r({},c[e]),s);break}a&&a.length&&n(l,s,t[i])}},getAllKeys:n,getChildrenKeys:function l(s,a){const c=[],r=a||_(e),{key:o,children:i}=_(t);if(!i||!o)return c;for(let e=0;e<r.length;e++){const t=r[e],a=t[i];s===t[o]?(c.push(t[o]),a&&a.length&&c.push(...n(a))):a&&a.length&&c.push(...l(s,a))}return c}}}(d,p);function E(t){return i(this,arguments,(function*({event:t,node:n}){var l;const{rightMenuList:s=[],beforeRightClick:a}=e;let c={event:t,items:[]};if(a&&oe(a)){let e=yield a(n,t);Array.isArray(e)?c.items=e:Object.assign(c,e)}else c.items=s;(null==(l=c.items)?void 0:l.length)&&u(c)}))}function T(e){a.expandedKeys=e}function M(e){a.checkedKeys=e?L():[]}function Q(e){a.expandedKeys=e?L():[]}function Z(e){a.checkStrictly=e}function z(e){if(!e)return void(c.startSearch=!1);c.startSearch=!0;const{title:t}=_(p);c.searchData=ue(_(d),(n=>{var l,s;return null!=(s=null==(l=n[t])?void 0:l.includes(e))&&s}),_(p))}function J(t,n){if(e.clickRowToExpand&&n&&0!==n.length)if(a.expandedKeys.includes(t)){const e=[...a.expandedKeys],n=e.findIndex((e=>e===t));-1!==n&&e.splice(n,1),T(e)}else T([...a.expandedKeys,t])}U((()=>{d.value=e.treeData})),I((()=>{const t=parseInt(e.defaultExpandLevel);t>0?a.expandedKeys=g(t):e.defaultExpandAll&&Q(!0)})),U((()=>{a.expandedKeys=e.expandedKeys})),U((()=>{a.selectedKeys=e.selectedKeys})),U((()=>{a.checkedKeys=e.checkedKeys})),H((()=>e.value),(()=>{a.checkedKeys=P(e.value||[])})),H((()=>a.checkedKeys),(()=>{const e=P(a.checkedKeys);l("update:value",e),l("change",e)})),U((()=>{a.checkStrictly=e.checkStrictly}));function V(t){const{actionList:n}=e;if(n&&0!==n.length)return n.map(((e,n)=>{var l;let s=!0;return oe(e.show)?s=null==(l=e.show)?void 0:l.call(e,t):he(e.show)&&(s=e.show),s?A("span",{key:n,class:`${h}__action`},[e.render(t)]):null}))}function ee({data:t,level:l}){return t?t.map((t=>{const{title:s,key:a,children:c}=_(p),i=R(t,"title"),d=function(t,n){return!n&&e.renderIcon&&oe(e.renderIcon)?e.renderIcon(t):n}(o(r({},t),{level:l}),t.icon),u=G(t,c)||[];return A(W.TreeNode,Y(i,{node:P(t),key:G(t,a)}),{title:()=>{var e;return A("span",{class:`${h}-title pl-2`,onClick:J.bind(null,t[a],t[c])},[(null==n?void 0:n.title)?ye(n,"title",t):A(S,null,[d&&A(pe,{icon:d},null),A("span",{class:(null==(e=_(f))?void 0:e.blockNode)?`${h}__content`:""},[G(t,s)]),A("span",{class:`${h}__actions`},[V(o(r({},t),{level:l}))])])])},default:()=>ee({data:u,level:l+1})})})):null}return s({setExpandedKeys:T,getExpandedKeys:function(){return a.expandedKeys},setSelectedKeys:function(e){a.selectedKeys=e},getSelectedKeys:function(){return a.selectedKeys},setCheckedKeys:function(e){a.checkedKeys=e},getCheckedKeys:function(){return a.checkedKeys},insertNodeByKey:m,insertNodesByKey:K,deleteNodeByKey:b,updateNodeByKey:x,checkAll:M,expandAll:Q,filterByLevel:e=>{a.expandedKeys=g(e)}}),()=>{let l;const{title:s,helpMessage:a,toolbar:c,search:o,checkable:i}=e,d=s||c||o||n.headerTitle;return A("div",{class:[h,"h-full",t.class]},[d&&A(ke,{checkable:i,checkAll:M,expandAll:Q,title:s,search:o,toolbar:c,helpMessage:a,onStrictlyChange:Z,onSearch:z},(u=l=ie(n),"function"==typeof u||"[object Object]"===Object.prototype.toString.call(u)&&!B(u)?l:{default:()=>[l]})),F(A(de,{style:{height:"calc(100% - 38px)"}},{default:()=>[A(W,Y(_(f),{showIcon:!1}),r({default:()=>ee({data:_(v),level:1})},ie(n)))]}),[[X,!_(k)]]),F(A(q,{image:q.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[X,_(k)]])]);var u}}});export{Ne as _};
